
                <html lang="en" class="simpread-font simpread-theme-root" style=''>
                    <head>
                        <meta charset="utf-8">
                        <meta http-equiv="content-type" content="text/html; charset=UTF-8;charset=utf-8">
                        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
                        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=1">
                        <meta name="author" content="Kenshin"/>
                        <meta name="description" content="简悦 SimpRead - 如杂志般沉浸式阅读体验的扩展" />
                        <meta name="keywords" content="Chrome extension, Chrome 扩展, 阅读模式, 沉浸式阅读, 简悦, 简阅, read mode, reading mode, reader view, firefox, firefox addon, userscript, safari, opera, tampermonkey"/>
                        <meta name="thumbnail" content="https://simpread-1254315611.cos.ap-shanghai.myqcloud.com/static/introduce-2.png"/>
                        <meta property="og:title" content="简悦 SimpRead - 如杂志般沉浸式阅读体验的扩展"/>
                        <meta property="og:type" content="website">
                        <meta property="og:local" content="zh_CN"/>
                        <meta property="og:url" content="http://ksria.com/simpread"/>
                        <meta property="og:image" content="https://simpread-1254315611.cos.ap-shanghai.myqcloud.com/static/introduce-2.png"/>
                        <meta property="og:image:type" content="image/png"/>
                        <meta property="og:image:width" content="960"/>
                        <meta property="og:image:height" content="355"/>
                        <meta property="og:site_name" content="http://ksria.com/simpread"/>
                        <meta property="og:description" content="简悦 SimpRead - 如杂志般沉浸式阅读体验的扩展"/>
                        <style type="text/css">.simpread-font{font:300 16px/1.8 -apple-system,PingFang SC,Microsoft Yahei,Lantinghei SC,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;color:#333;text-rendering:optimizelegibility;-webkit-text-size-adjust:100%;-webkit-font-smoothing:antialiased}.simpread-hidden{display:none}.simpread-read-root{display:-webkit-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;margin:0;top:-1000px;left:0;width:100%;z-index:2147483646;overflow-x:hidden;opacity:0;-webkit-transition:all 1s cubic-bezier(.23,1,.32,1) .1s;transition:all 1s cubic-bezier(.23,1,.32,1) .1s}.simpread-read-root-show{top:0}.simpread-read-root-hide{top:1000px}sr-read{display:-webkit-flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-flow:column nowrap;flex-flow:column;margin:20px 20%;min-width:400px;min-height:400px;text-align:center}read-process{position:fixed;top:0;left:0;height:3px;width:100%;background-color:#64b5f6;-webkit-transition:width 2s;transition:width 2s;z-index:20000}sr-rd-content-error{display:block;position:relative;margin:0;margin-bottom:30px;padding:25px;background-color:rgba(0,0,0,.05)}sr-rd-footer{-webkit-box-orient:vertical;-ms-flex-direction:column;flex-direction:column;font-size:14px}sr-rd-footer,sr-rd-footer-group{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-direction:normal}sr-rd-footer-group{-webkit-box-orient:horizontal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}sr-rd-footer-line{width:100%;border-top:1px solid #e0e0e0}sr-rd-footer-text{min-width:150px}sr-rd-footer-copywrite{margin:10px 0 0;color:inherit}sr-rd-footer-copywrite abbr{-webkit-font-feature-settings:normal;font-feature-settings:normal;font-variant:normal;text-decoration:none}sr-rd-footer-copywrite .second{margin:10px 0}sr-rd-footer-copywrite .third a:hover{border:none!important}sr-rd-footer-copywrite .third a:first-child{margin-right:50px}sr-rd-footer-copywrite .sr-icon{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:33px;height:33px;opacity:.8;-webkit-transition:opacity .5s ease;transition:opacity .5s ease;cursor:pointer}sr-rd-footer-copywrite .sr-icon:hover{opacity:1}sr-rd-footer-copywrite a,sr-rd-footer-copywrite a:link,sr-rd-footer-copywrite a:visited{margin:0;padding:0;color:inherit;background-color:transparent;font-size:inherit!important;line-height:normal;text-decoration:none;vertical-align:baseline;vertical-align:initial;border:none!important;box-sizing:border-box}sr-rd-footer-copywrite a:focus,sr-rd-footer-copywrite a:hover,sr-rd-footer a:active{color:inherit;text-decoration:none;border-bottom:1px dotted!important}.simpread-blocks{text-decoration:none!important}.simpread-blocks *{margin:0}.simpread-blocks a{padding:0;text-decoration:none!important}.simpread-blocks img{margin:0;padding:0;border:0;background:transparent;box-shadow:none}.simpread-focus-root{display:block;position:fixed;top:0;left:0;right:0;bottom:0;background-color:hsla(0,0%,92%,.9);z-index:2147483645;opacity:0;-webkit-transition:opacity 1s cubic-bezier(.23,1,.32,1) 0ms;transition:opacity 1s cubic-bezier(.23,1,.32,1) 0ms}.simpread-focus-highlight{position:relative;box-shadow:0 0 0 20px #fff;background-color:#fff;overflow:visible;z-index:2147483646}.sr-controlbar-bg sr-rd-crlbar,.sr-controlbar-bg sr-rd-crlbar fab{z-index:2147483647}sr-rd-crlbar.controlbar{position:fixed;right:0;bottom:0;width:100px;height:100%;opacity:0;-webkit-transition:opacity .5s ease;transition:opacity .5s ease}sr-rd-crlbar.controlbar:hover{opacity:1}sr-rd-crlbar fap *{box-sizing:border-box}@media (max-height:620px){fab{zoom:.8}}@media (max-height:783px){dialog-gp dialog-content{max-height:580px}dialog-gp dialog-footer{border-top:1px solid #e0e0e0}}.simpread-highlight-selector{outline:3px dashed #1976d2!important;cursor:pointer!important}.simpread-highlight-controlbar,.simpread-highlight-selector{background-color:#fafafa!important;opacity:.8!important;-webkit-transition:opacity .5s ease!important;transition:opacity .5s ease!important}.simpread-highlight-controlbar{position:relative!important;border:3px dashed #1976d2!important}simpread-highlight,sr-snapshot-ctlbar{position:fixed;top:0;left:0;right:0;padding:15px;height:50px;background-color:rgba(50,50,50,.9);box-shadow:0 2px 5px rgba(0,0,0,.26);box-sizing:border-box;z-index:2147483640}simpread-highlight,sr-highlight-ctl,sr-snapshot-ctlbar{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}sr-highlight-ctl{margin:0 5px;width:50px;height:20px;color:#fff;background-color:#1976d2;border-radius:4px;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);cursor:pointer}toc-bg{position:fixed;left:0;top:0;width:50px;height:200px;font-size:medium}toc-bg:hover{z-index:3}.toc-bg-hidden{opacity:0;-webkit-transition:opacity .5s ease;transition:opacity .5s ease}.toc-bg-hidden:hover{opacity:1;z-index:3}.toc-bg-hidden:hover toc{width:180px}toc *{all:unset}toc{position:fixed;left:0;top:100px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;padding:10px;width:0;max-width:200px;max-height:500px;overflow-x:hidden;overflow-y:hidden;cursor:pointer;border:1px solid hsla(0,0%,62%,.22);-webkit-transition:width .5s;transition:width .5s}toc:hover{overflow-y:auto}toc.mini:hover{width:200px!important}toc::-webkit-scrollbar{width:3px}toc::-webkit-scrollbar-thumb{border-radius:10px;background-color:hsla(36,2%,54%,.5)}toc outline{position:relative;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;padding:2px 0;min-height:21px;line-height:21px;text-align:left}toc outline a,toc outline a:active,toc outline a:focus,toc outline a:visited{display:block;width:100%;color:inherit;font-size:11px;text-decoration:none!important;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}toc outline a:hover{font-weight:700!important}toc outline a.toc-outline-theme-dark,toc outline a.toc-outline-theme-night{color:#fff!important}.toc-level-h1{padding-left:5px}.toc-level-h2{padding-left:15px}.toc-level-h3{padding-left:25px}.toc-level-h4{padding-left:35px}.toc-outline-active{border-left:2px solid #f44336}toc outline active{position:absolute;left:0;top:0;bottom:0;padding:0 0 0 3px;border-left:2px solid #e8e8e8}sr-kbd{background:-webkit-gradient(linear,0 0,0 100%,from(#fff785),to(#ffc542));border:1px solid #e3be23;-o-border-image:none;border-image:none;-o-border-image:initial;border-image:initial;position:absolute;left:0;padding:1px 3px 0;font-size:11px!important;font-weight:700;box-shadow:0 3px 7px 0 rgba(0,0,0,.3);overflow:hidden;border-radius:3px}.sr-kbd-a{position:relative}kbd-mapping{position:fixed;left:5px;bottom:5px;-ms-flex-flow:row;flex-flow:row;width:250px;height:500px;background-color:#fff;border:1px solid hsla(0,0%,62%,.22);box-shadow:0 2px 5px rgba(0,0,0,.26);border-radius:3px}kbd-mapping,kbd-maps{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}kbd-maps{margin:40px 0 20px;width:100%;overflow-x:auto}kbd-maps::-webkit-scrollbar-thumb{background-clip:padding-box;border-radius:10px;border:2px solid transparent;background-color:rgba(85,85,85,.55)}kbd-maps::-webkit-scrollbar{width:10px;-webkit-transition:width .7s cubic-bezier(.4,0,.2,1);transition:width .7s cubic-bezier(.4,0,.2,1)}kbd-mapping kbd-map-title{position:absolute;margin:5px 0;width:100%;font-size:14px;font-weight:700}kbd-maps-group{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}kbd-maps-title{margin:5px 0;padding-left:53px;font-size:12px;font-weight:700}kbd-map kbd{display:inline-block;padding:3px 5px;font-size:11px;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #c6cbd1;border-bottom-color:#959da5;border-radius:3px;box-shadow:inset 0 -1px 0 #959da5}kbd-map kbd-name{display:inline-block;text-align:right;width:50px}kbd-map kbd-desc{padding-left:3px}sharecard-bg{position:fixed;top:0;left:0;width:100%;height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:rgba(0,0,0,.4);z-index:2147483647}sharecard{max-width:450px;background-color:#64b5f6}sharecard,sharecard-head{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}sharecard-head{margin:25px;color:#fff;border-radius:10px;box-shadow:0 2px 6px 0 rgba(0,0,0,.2),0 25px 50px 0 rgba(0,0,0,.15)}sharecard-card{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}sharecard-card,sharecard-top{display:-webkit-box;display:-ms-flexbox;display:flex}sharecard-top{-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding-right:5px;height:65px;background-color:#fff;color:#878787;font-size:25px;font-weight:500;border-top-left-radius:10px;border-top-right-radius:10px}sharecard-top span.logos{display:block;width:48px;height:48px;margin:5px;background-repeat:no-repeat;background-position:50%;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAABU1BMVEUAAAAnNJMnNZI3Q5onNJInNJMnNJInNJMnNJI8SJ0tOZY/S55EUKAoNJI6RpwoNJNIU6InNJInNJImNJI7SJwmNJJ2fLUiMJFKVaNCTJ9faK1HUaJOWKVSXaUnNJNYY6pye7cmM5JXYKhwebMjMI8mL4719fW9vb0oNZP/UlLz8/QqN5TAwMAnNJPv7+/Pz8/q6+/p6enNzc3Kysry8vMsOJXc3env7/LU1uXo29vR0dHOzs7ExMTwjo73bW37XV3Aj1TCYELl5u3n5+fW2Obn6O7f4OrZ2+g0QJkxPpgvO5bh4uvS1OTP0ePCwsJQW6ZLVqTs7fHd3d3V1dXqv79VX6lET6A1TIxXUIBSgHxWQnpelHf+WVnopkXqbC7j5Ozi4uLDw8NGUaFATJ9SgH3r6+vGyd7BxNva2trX19ejqM2gpczHx8dze7Zha67Z2dlTgH1aXQeSAAAAJnRSTlMA6ff+497Y8NL+/fv49P379sqab/BeOiX06tzVy8m/tKqpalA7G6oKj0EAAAJlSURBVEjHndNXWxpBFIDhcS2ICRLAkt4Dx4WhLk0E6R0MYoIISrWX5P9f5cwSIRC2+T1czMV5n2FnZwn2eWONUqCAv3H2Uf5Ra1hx4+0WEXtDQW0fCPYJ1EffEfIV4CSROAE4jsePoTFsNmTJF/IeIHF2lgCIn57GodlqDWXBK7IwBYatVlMWFAildPKX7I3m74Z9fsCiQChoimoFQAz04Ad2gH1n9fv9n9hgMNDr9euLWD6fLxQKxaLfb7dTSlahbFVdEPwIQtrAihZQgyKCtCagbQe3xh0QFMgy5MR11+ewYY5/qlZ7vT2xu93ULKjbFLpiUxnIIwjgKmVTLDUFXMrAi2NJWCRLIthTBo4xyOLKpwyqU6CuDCI41hFBCVdOhyLw4FgJ1skCAiyl9BSHbCorgo6VJXTru5hrVCQS8Yr5xLzX59YJSFpVFwD9U0BGC3hGdFpATgRupTGe9R9I1b1ePBvXKDyvq/O/44LT4/E4BUbSCAwj8Evq6HlnOBprx6JhJz8Gktc7xeaP9ndY+0coQvCccFBD4JW60UIY50ciLOAODAQRVOeCHm4Q3Xks6uRDY+CQ+AR4T2wMYh6+jMCIQOp78CFoj0H7EQgIuhI3dGaHCrwgADwCPjJvA372GRigCJg49FUdk3D87pq3zp4SA5zc1Zh9DxfwkpjgUg5Mv+lbeE3McC8Lpu7SA3wk2xzcqL2tN5DfIsQC8HB7UamUy6FQOpTO5QKBQDZbKnWSyUzGjdWCwaDA8+7Le4BNgm3qQGWchYh9s5hNq6wVbBlbwhZYOp3OYOA4zmgEypnM2zj8ByIdedKrH8vDAAAAAElFTkSuQmCC");zoom:.8}sharecard-content{padding:15px;max-height:500px;font-size:20px;text-align:justify;background-color:#2196f3;overflow-x:hidden;overflow-y:auto}sharecard-via{padding:10px;font-size:10px;background-color:#2196f3}sharecard-footer{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding-right:5px;height:100px;background-color:#fff;color:#878787;font-size:15px;font-weight:500;border-bottom-left-radius:10px;border-bottom-right-radius:10px}sharecard-footer,sharecard-footer div{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}sharecard-footer span.qrcode{display:block;width:100px;height:100px;margin:5px;background-repeat:no-repeat;background-position:50%;background-image:url("data:image/png;base64,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")}sharecard-control{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 19px;height:80px;background-color:#fff}simpread-snapshot{width:100%;height:100%;cursor:move;z-index:2147483645}simpread-snapshot,sr-mask{position:fixed;left:0;top:0}sr-mask{background-color:rgba(0,0,0,.1)}.simpread-feedback,.simpread-urlscheme{position:fixed;right:20px;bottom:20px;z-index:2147483646}simpread-feedback,simpread-urlscheme{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:20px 20px 0;width:500px;color:rgba(51,51,51,.87);background-color:#fff;border-radius:3px;box-shadow:0 0 2px rgba(0,0,0,.12),0 2px 2px rgba(0,0,0,.26);overflow:hidden;-webkit-transform-origin:bottom;transform-origin:bottom;-webkit-transition:all .6s ease;transition:all .6s ease}simpread-feedback *,simpread-urlscheme *{font-size:12px!important;box-sizing:border-box}simpread-feedback.active,simpread-urlscheme.active{-webkit-animation-name:srFadeInUp;animation-name:srFadeInUp;-webkit-animation-duration:.45s;animation-duration:.45s;-webkit-animation-fill-mode:both;animation-fill-mode:both}simpread-feedback.hide,simpread-urlscheme.hide{-webkit-animation-name:srFadeInDown;animation-name:srFadeInDown;-webkit-animation-duration:.45s;animation-duration:.45s;-webkit-animation-fill-mode:both;animation-fill-mode:both}simpread-feedback sr-fb-label,simpread-urlscheme sr-urls-label{width:100%}simpread-feedback sr-fb-head,simpread-urlscheme sr-urls-head{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;margin-bottom:5px;width:100%}simpread-feedback sr-fb-content,simpread-urlscheme sr-urls-content{margin-bottom:5px;width:100%}simpread-feedback sr-urls-footer,simpread-urlscheme sr-urls-footer{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;width:100%}simpread-feedback sr-fb-a,simpread-urlscheme sr-urls-a{color:#2163f7;cursor:pointer}simpread-feedback text-field-state,simpread-urlscheme text-field-state{border-top:none rgba(34,101,247,.8)!important;border-left:none rgba(34,101,247,.8)!important;border-right:none rgba(34,101,247,.8)!important;border-bottom:2px solid rgba(34,101,247,.8)!important}simpread-feedback switch,simpread-urlscheme switch{margin-top:0!important}@-webkit-keyframes srFadeInUp{0%{opacity:0;-webkit-transform:translateY(100px);transform:translateY(100px)}to{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes srFadeInUp{0%{opacity:0;-webkit-transform:translateY(100px);transform:translateY(100px)}to{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes srFadeInDown{0%{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}to{opacity:0;-webkit-transform:translateY(100px);transform:translateY(100px)}}@keyframes srFadeInDown{0%{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}to{opacity:0;-webkit-transform:translateY(100px);transform:translateY(100px)}}simpread-feedback sr-fb-head{font-weight:700}simpread-feedback sr-fb-content{-webkit-box-orient:vertical;-ms-flex-direction:column;flex-direction:column}simpread-feedback sr-fb-content,simpread-feedback sr-fb-footer{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-direction:normal}simpread-feedback sr-fb-footer{-webkit-box-orient:horizontal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;width:100%}simpread-feedback sr-close{position:absolute;right:20px;cursor:pointer;-webkit-transition:all 1s cubic-bezier(.23,1,.32,1) .1s;transition:all 1s cubic-bezier(.23,1,.32,1) .1s;z-index:200}simpread-feedback sr-close:hover{-webkit-transform:rotate(-15deg) scale(1.3);transform:rotate(-15deg) scale(1.3)}simpread-feedback sr-stars{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-top:10px}simpread-feedback sr-stars i{margin-right:10px;cursor:pointer}simpread-feedback sr-stars i svg{-webkit-transition:all 1s cubic-bezier(.23,1,.32,1) .1s;transition:all 1s cubic-bezier(.23,1,.32,1) .1s}simpread-feedback sr-stars i svg:hover{-webkit-transform:rotate(-15deg) scale(1.3);transform:rotate(-15deg) scale(1.3)}simpread-feedback sr-stars i.active svg{-webkit-transform:rotate(0) scale(1);transform:rotate(0) scale(1)}simpread-feedback sr-emojis{display:block;height:100px;overflow:hidden}simpread-feedback sr-emoji{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-transition:.3s;transition:.3s}simpread-feedback sr-emoji>svg{margin:15px 0;width:70px;height:70px;-ms-flex-negative:0;flex-shrink:0}simpread-feedback sr-stars-footer{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin:10px 0 20px}</style>
                        <style type="text/css">.simpread-theme-root{font-size:62.5%!important}sr-rd-content,sr-rd-desc,sr-rd-title{width:100%}sr-rd-title{display:-webkit-box;margin:1em 0 .5em;overflow:hidden;text-overflow:ellipsis;text-rendering:optimizelegibility;-webkit-line-clamp:3;-webkit-box-orient:vertical}sr-rd-content{text-align:left;word-break:break-word}sr-rd-desc{text-align:justify;line-height:2.4;margin:0 0 1.2em;box-sizing:border-box}sr-rd-content{font-size:25.6px;font-size:1.6rem;line-height:1.6}sr-rd-content h1,sr-rd-content h1 *,sr-rd-content h2,sr-rd-content h2 *,sr-rd-content h3,sr-rd-content h3 *,sr-rd-content h4,sr-rd-content h4 *,sr-rd-content h5,sr-rd-content h5 *,sr-rd-content h6,sr-rd-content h6 *{word-break:break-all}sr-rd-content div,sr-rd-content p{display:block;float:inherit;line-height:1.6;font-size:25.6px;font-size:1.6rem}sr-rd-content div,sr-rd-content p,sr-rd-content pre,sr-rd-content sr-blockquote{margin:0 0 1.2em;word-break:break-word}sr-rd-content a{padding:0 5px;vertical-align:baseline;vertical-align:initial}sr-rd-content a,sr-rd-content a:link{color:inherit;font-size:inherit;font-weight:inherit;border:none}sr-rd-content a:hover{background:transparent}sr-rd-content img{margin:10px;padding:5px;max-width:100%;background:#fff;border:1px solid #bbb;box-shadow:1px 1px 3px #d4d4d4}sr-rd-content figcaption{text-align:center;font-size:14px}sr-rd-content sr-blockquote{display:block;position:relative;padding:15px 25px;text-align:left;line-height:inherit}sr-rd-content sr-blockquote:before{position:absolute}sr-rd-content sr-blockquote *{margin:0;font-size:inherit}sr-rd-content table{width:100%;margin:0 0 1.2em;word-break:keep-all;word-break:normal;overflow:auto;border:none}sr-rd-content table td,sr-rd-content table th{border:none}sr-rd-content ul{margin:0 0 1.2em;margin-left:1.3em;padding:0;list-style:disc}sr-rd-content ol{list-style:decimal;margin:0;padding:0}sr-rd-content ol li,sr-rd-content ul li{font-size:inherit;list-style:disc;margin:0 0 1.2em}sr-rd-content ol li{list-style:decimal;margin-left:1.3em}sr-rd-content ol li *,sr-rd-content ul li *{margin:0;text-align:left;text-align:initial}sr-rd-content li ol,sr-rd-content li ul{margin-bottom:.8em;margin-left:2em}sr-rd-content li ul{list-style:circle}sr-rd-content pre{font-family:Consolas,Monaco,Andale Mono,Source Code Pro,Liberation Mono,Courier,monospace;display:block;padding:15px;line-height:1.5;word-break:break-all;word-wrap:break-word;white-space:pre;overflow:auto}sr-rd-content pre,sr-rd-content pre *,sr-rd-content pre div{font-size:17.6px;font-size:1.1rem}sr-rd-content li pre code,sr-rd-content p pre code,sr-rd-content pre{background-color:transparent;border:none}sr-rd-content pre code{margin:0;padding:0}sr-rd-content pre code,sr-rd-content pre code *{font-size:17.6px;font-size:1.1rem}sr-rd-content pre p{margin:0;padding:0;color:inherit;font-size:inherit;line-height:inherit}sr-rd-content li code,sr-rd-content p code{margin:0 4px;padding:2px 4px;font-size:17.6px;font-size:1.1rem}sr-rd-content mark{margin:0 5px;padding:2px;background:#fffdd1;border-bottom:1px solid #ffedce}.sr-rd-content-img{width:90%;height:auto}.sr-rd-content-img-load{width:48px;height:48px;margin:0;padding:0;border-style:none;border-width:0;background-repeat:no-repeat;background-image:url(data:image/gif;base64,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)}.sr-rd-content-center{text-align:center;display:-webkit-box;-webkit-box-align:center;-webkit-box-pack:center;-webkit-box-orient:vertical}.sr-rd-content-center-small{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex}.sr-rd-content-center-small img{margin:0;padding:0;border:0;box-shadow:none}img.simpread-img-broken{cursor:pointer}.sr-rd-content-nobeautify{margin:0;padding:0;border:0;box-shadow:0 0 0}sr-rd-mult{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;margin:0 0 16px;padding:16px 0 24px;width:100%;background-color:#fff;border-radius:4px;box-shadow:0 1px 2px 0 rgba(60,64,67,.3),0 2px 6px 2px rgba(60,64,67,.15)}sr-rd-mult:hover{-webkit-transition:all .45s 0ms;transition:all .45s 0ms;box-shadow:1px 1px 8px rgba(0,0,0,.16)}sr-rd-mult sr-rd-mult-content{padding:0 16px;overflow:auto}sr-rd-mult sr-rd-mult-avatar,sr-rd-mult sr-rd-mult-content{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}sr-rd-mult sr-rd-mult-avatar{-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0 15px}sr-rd-mult sr-rd-mult-avatar span{display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;max-width:75px;overflow:hidden;text-overflow:ellipsis;text-align:left;font-size:16px;font-size:1rem}sr-rd-mult sr-rd-mult-avatar img{margin-bottom:0;max-width:50px;max-height:50px;width:50px;height:50px;border-radius:50%}sr-rd-mult sr-rd-mult-content img{max-width:80%}sr-rd-mult sr-rd-mult-avatar .sr-rd-content-center{margin:0}sr-page{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;width:100%}</style>
                        <style type="text/css">sr-rd-theme-github{display:none}sr-rd-content h1,sr-rd-content h2,sr-rd-content h3,sr-rd-content h4,sr-rd-content h5,sr-rd-content h6{position:relative;margin-top:1em;margin-bottom:1pc;font-weight:700;line-height:1.4;text-align:left;color:#363636}sr-rd-content h1{padding-bottom:.3em;font-size:57.6px;font-size:3.6rem;line-height:1.2}sr-rd-content h2{padding-bottom:.3em;font-size:44.8px;font-size:2.8rem;line-height:1.225}sr-rd-content h3{font-size:38.4px;font-size:2.4rem;line-height:1.43}sr-rd-content h4{font-size:32px;font-size:2rem}sr-rd-content h5,sr-rd-content h6{font-size:25.6px;font-size:1.6rem}sr-rd-content h6{color:#777}sr-rd-content ol,sr-rd-content ul{list-style-type:disc;padding:0;padding-left:2em}sr-rd-content ol ol,sr-rd-content ul ol{list-style-type:lower-roman}sr-rd-content ol ol ol,sr-rd-content ol ul ol,sr-rd-content ul ol ol,sr-rd-content ul ul ol{list-style-type:lower-alpha}sr-rd-content table{width:100%;overflow:auto;word-break:normal;word-break:keep-all}sr-rd-content table th{font-weight:700}sr-rd-content table td,sr-rd-content table th{padding:6px 13px;border:1px solid #ddd}sr-rd-content table tr{background-color:#fff;border-top:1px solid #ccc}sr-rd-content table tr:nth-child(2n){background-color:#f8f8f8}sr-rd-content sr-blockquote{border-left:4px solid #ddd}.simpread-theme-root{background-color:#fff;color:#333}sr-rd-title{font-family:PT Sans,SF UI Display,\.PingFang SC,PingFang SC,Neue Haas Grotesk Text Pro,Arial Nova,Segoe UI,Microsoft YaHei,Microsoft JhengHei,Helvetica Neue,Source Han Sans SC,Noto Sans CJK SC,Source Han Sans CN,Noto Sans SC,Source Han Sans TC,Noto Sans CJK TC,Hiragino Sans GB,sans-serif;font-size:54.4px;font-size:3.4rem;font-weight:700;line-height:1.3}sr-rd-desc{position:relative;margin:0;margin-bottom:30px;padding:25px;padding-left:56px;font-size:28.8px;font-size:1.8rem;color:#777;background-color:rgba(0,0,0,.05);box-sizing:border-box}sr-rd-desc:before{content:"\201C";position:absolute;top:-28px;left:16px;font-size:80px;font-family:Arial;color:rgba(0,0,0,.15)}sr-rd-content,sr-rd-content *,sr-rd-content div,sr-rd-content p{color:#363636;font-weight:400;line-height:1.8}sr-rd-content b *,sr-rd-content strong,sr-rd-content strong * sr-rd-content b{-webkit-animation:none 0s ease 0s 1 normal none running;animation:none 0s ease 0s 1 normal none running;-webkit-backface-visibility:visible;backface-visibility:visible;background:transparent none repeat 0 0/auto auto padding-box border-box scroll;border:medium none currentColor;border-collapse:separate;-o-border-image:none;border-image:none;border-radius:0;border-spacing:0;bottom:auto;box-shadow:none;box-sizing:content-box;caption-side:top;clear:none;clip:auto;color:#000;-webkit-columns:auto;-moz-columns:auto;columns:auto;-webkit-column-count:auto;-moz-column-count:auto;column-count:auto;-webkit-column-fill:balance;-moz-column-fill:balance;column-fill:balance;-webkit-column-gap:normal;-moz-column-gap:normal;column-gap:normal;-webkit-column-rule:medium none currentColor;-moz-column-rule:medium none currentColor;column-rule:medium none currentColor;-webkit-column-span:1;-moz-column-span:1;column-span:1;-webkit-column-width:auto;-moz-column-width:auto;column-width:auto;content:normal;counter-increment:none;counter-reset:none;cursor:auto;direction:ltr;display:inline;empty-cells:show;float:none;font-family:serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;line-height:normal;height:auto;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;left:auto;letter-spacing:normal;list-style:disc outside none;margin:0;max-height:none;max-width:none;min-height:0;min-width:0;opacity:1;orphans:2;outline:medium none invert;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;-webkit-perspective:none;perspective:none;-webkit-perspective-origin:50% 50%;perspective-origin:50% 50%;position:static;right:auto;-moz-tab-size:8;-o-tab-size:8;tab-size:8;table-layout:auto;text-align:left;text-align-last:auto;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;top:auto;-webkit-transform:none;transform:none;-webkit-transform-origin:50% 50% 0;transform-origin:50% 50% 0;-webkit-transform-style:flat;transform-style:flat;-webkit-transition:none 0s ease 0s;transition:none 0s ease 0s;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:2;width:auto;word-spacing:normal;z-index:auto;all:initial}sr-rd-content a,sr-rd-content a:link{color:#4183c4;text-decoration:none}sr-rd-content a:active,sr-rd-content a:focus,sr-rd-content a:hover{color:#4183c4;text-decoration:underline}sr-rd-content pre{background-color:#f7f7f7;border-radius:3px}sr-rd-content li code,sr-rd-content p code{background-color:rgba(0,0,0,.04);border-radius:3px}.simpread-multi-root{background:#f8f9fa}</style>
                        <style type="text/css"></style>
                        <style type="text/css">@media (pointer:coarse){sr-read{margin:20px 5%!important;min-width:0!important;max-width:90%!important}sr-rd-title{margin-top:0;font-size:2.7rem}sr-rd-content sr-blockquote,sr-rd-desc{margin:10 0!important;padding:0 0 0 10px!important;width:90%;font-size:1.8rem;font-style:normal;line-height:1.7;text-align:justify}sr-rd-content{font-size:1.75rem;font-weight:300}sr-rd-content figure{margin:0;padding:0;text-align:center}sr-rd-content a,sr-rd-content a:link,sr-rd-content li code,sr-rd-content p code{font-size:inherit}sr-rd-footer{margin-top:20px}sr-blockquote,sr-blockquote *{margin:5px!important;padding:5px!important}sr-rd-content h1,sr-rd-content h2,sr-rd-content h3,sr-rd-content h4,sr-rd-content h5,sr-rd-content h6,sr-rd-title{font-family:PingFang SC,Verdana,Helvetica Neue,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;color:#000;font-weight:100;line-height:1.35}sr-rd-content-h1,sr-rd-content-h2,sr-rd-content-h3,sr-rd-content-h4,sr-rd-content-h5,sr-rd-content-h6,sr-rd-content h1,sr-rd-content h2,sr-rd-content h3,sr-rd-content h4,sr-rd-content h5,sr-rd-content h6{margin-top:1.2em;margin-bottom:.6em;line-height:1.35}sr-rd-content-h1,sr-rd-content h1{font-size:1.8em}sr-rd-content-h2,sr-rd-content h2{font-size:1.6em}sr-rd-content-h3,sr-rd-content h3{font-size:1.4em}sr-rd-content-h4,sr-rd-content-h5,sr-rd-content-h6,sr-rd-content h4,sr-rd-content h5,sr-rd-content h6{font-size:1.2em}sr-rd-content-ul,sr-rd-content ul{margin-left:1.3em!important;list-style:disc}sr-rd-content-ol,sr-rd-content ol{list-style:decimal;margin-left:1.9em!important}sr-rd-content-ol ol,sr-rd-content-ol ul,sr-rd-content-ul ol,sr-rd-content-ul ul,sr-rd-content li ol,sr-rd-content li ul{margin-bottom:.8em;margin-left:2em!important}sr-rd-content img{margin:0;padding:0;border:0;max-width:100%!important;height:auto;box-shadow:0 20px 20px -10px rgba(0,0,0,.1)}sr-rd-mult{min-width:0;background-color:#fff;box-shadow:0 1px 6px rgba(32,33,36,.28);border-radius:8px}sr-rd-mult sr-rd-mult-avatar div{margin:0}sr-rd-mult sr-rd-mult-avatar .sr-rd-content-center-small{margin:7px 0!important}sr-rd-mult sr-rd-mult-avatar span{display:block}sr-rd-mult sr-rd-mult-content{padding-left:0}@media only screen and (max-device-width:1024px){.simpread-theme-root,html.simpread-theme-root{font-size:80%!important}sr-rd-mult sr-rd-mult-avatar img{width:50px;height:50px;min-width:50px;min-height:50px}toc-bg toc{width:10px!important}toc-bg:hover toc{width:auto!important}}@media only screen and (max-device-width:414px){.simpread-theme-root,html.simpread-theme-root{font-size:70%!important}sr-rd-mult sr-rd-mult-avatar img{width:30px;height:30px;min-width:30px;min-height:30px}}@media only screen and (max-device-width:320px){.simpread-theme-root,html.simpread-theme-root{font-size:90%!important}sr-rd-content p{margin-bottom:.5em}}}</style>
                        <style type="text/css">undefinedsr-rd-content *, sr-rd-content p, sr-rd-content div {}sr-rd-content pre code, sr-rd-content pre code * {}sr-rd-desc {}sr-rd-content pre {}sr-rd-title {}</style>
                        <style type="text/css"></style>
                        <style type="text/css"></style>
                        <style type="text/css"></style>
                        <style type="text/css"></style>
                        <style type="text/css">sr-rd-content *, sr-rd-content p, sr-rd-content div {
        font-size: 15px;
    }

    .annote-perview, .annote-perview * {
        color: rgb(85, 85, 85);
        font-weight: 400;
        line-height: 1.8;
    }</style>
                        
                        
                        <script>setTimeout(()=>{const e=location.hash.replace("#id=","");let t,a=!1;const n=t=>{for(let n of t){let t;if((t=e.length>6?n.getAttribute("data-id"):n.getAttribute("data-idx"))==e){n.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}),a=!0;break}}};e&&(0==(t=document.getElementsByClassName("sr-unread-card")).length&&(t=document.getElementsByTagName("sr-annote")),n(t),a||n(t=document.getElementsByClassName("sr-annote")))},500);</script>
                        <script>document.addEventListener("DOMContentLoaded",function(){if("localhost"==location.hostname){const t=document.getElementsByTagName("img");for(let o of t){const t=o.src;t.startsWith("http")&&(o.src=location.origin+"/proxy?url="+t)}}},!1);</script>
                        <style>toc a {font-size: inherit!important;font-weight: 300!important;}</style><script>setTimeout(()=>{const max=document.getElementsByTagName('sr-annote-note-tip').length;for(let i=0;i<max;i++){const target=document.getElementsByTagName('sr-annote-note-tip')[i],value=target.dataset.value;value&&(target.innerText=value)}},1000);</script><title>简悦 | 特别放送 | Go Modules 依赖包管理全讲</title>
                    </head>
                    <body>
                        <sr-read style='font-family: "LXGW WenKai Screen";'>
                            <sr-rd-title>特别放送 | Go Modules 依赖包管理全讲</sr-rd-title>
                    <sr-rd-desc style="margin: 0;padding-top: 0;padding-bottom: 0;font-style: normal;font-size: 18px;">每种语言通常都有自己的测试包 / 模块，Go 语言也不例外。在 Go 中，我们可以通过 testing 包对代码进行单元测试和性能测试。今天，我会用一些示</sr-rd-desc>
                    <sr-rd-content><h1 id="sr-toc-0">特别放送 | Go Modules 依赖包管理全讲</h1><div><span>孔令飞</span> <span> 2021-09-09</span></div><div><div><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://static001.geekbang.org/resource/image/b5/64/b52e2373a0507f26862ae316ccf16864.jpg"></div><div><div class="sr-rd-content-center-small"><img class="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADEAAAABCAYAAAB35kaxAAAAAXNSR0IArs4c6QAAAChJREFUGFdjfPfu3X8GKBAUFASz3r9/DxNiQBbDxcamn1yzSLEDZi8A2agny86FR+IAAAAASUVORK5CYII="></div><div class="sr-rd-content-center-small"><img class="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAABCAYAAAA8TpVcAAAAAXNSR0IArs4c6QAAAB1JREFUGFdjfPfu3X9BQUEGEHj//j2YBgFCYtjkAcT9D8ti7hUOAAAAAElFTkSuQmCC"></div><div class="sr-rd-content-center-small"><img class="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD0AAAABCAYAAABt2qY/AAAAAXNSR0IArs4c6QAAACdJREFUGFdjfPfu3X9BQUEGEHj//j2YBgFkMULy2PQQK0YLewiZCQDhUS3LBhDf1QAAAABJRU5ErkJggg=="></div><div class="sr-rd-content-center-small"><img class="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAABCAYAAAA4u0VhAAAAAXNSR0IArs4c6QAAAB1JREFUGFdjfPfu3X9BQUEGEHj//j2YBgFkMULyAF6lD8tbqYWOAAAAAElFTkSuQmCC"></div></div></div><div><div><div></div></div><div><div><div><div><div><div>00:00</div></div><div></div></div></div><a href="javascript:;"> 1.0x <i><span></span></i></a></div><div><span>讲述：孔令飞</span><span>大小：25.82M</span><span> 时长：28:16</span></div></div><audio title="特别放送 | Go Modules依赖包管理全讲" src="https://res001.geekbang.org/media/audio/2e/c1/2eb38d6f8bdf1173391c92ee83dab7c1/ld/ld.m3u8" __idm_id__="327699"></audio></div><div><div><div><div data-slate-editor="true" data-key="18818" autocorrect="off" spellcheck="false" data-gramm="false"><div data-slate-type="paragraph" data-slate-object="block" data-key="18819"><span data-slate-object="text" data-key="18820"><span data-slate-leaf="true" data-offset-key="18820:0" data-first-offset="true"><span data-slate-string="true">你好，我是孔令飞。今天我们更新一期特别放送作为加餐。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18821"><span data-slate-object="text" data-key="18822"><span data-slate-leaf="true" data-offset-key="18822:0" data-first-offset="true"><span data-slate-string="true">在 Go 项目开发中，依赖包管理是一个非常重要的内容，依赖包处理不好，就会导致编译失败。而且 Go 的依赖包管理有一定的复杂度，所以，我们有必要系统学习下 Go 的依赖包管理工具。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18823"><span data-slate-object="text" data-key="18824"><span data-slate-leaf="true" data-offset-key="18824:0" data-first-offset="true"><span data-slate-string="true">这一讲，我会首先介绍下 Go 依赖包管理工具的历史，并详细介绍下目前官方推荐的依赖包管理方案 Go Modules。Go Modules 主要包括了 </span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18825"><span data-slate-object="text" data-key="18826"><span data-slate-leaf="true" data-offset-key="18826:0" data-first-offset="true"><span data-slate-string="true">go mod</span></span></span></span><span data-slate-object="text" data-key="18827"><span data-slate-leaf="true" data-offset-key="18827:0" data-first-offset="true"><span data-slate-string="true"> 命令行工具、模块下载机制，以及两个核心文件 go.mod 和 go.sum。另外，Go Modules 也提供了一些环境变量，用来控制 Go Modules 的行为。这一讲，我会分别介绍下这些内容。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18828"><span data-slate-object="text" data-key="18829"><span data-slate-leaf="true" data-offset-key="18829:0" data-first-offset="true"><span data-slate-string="true">在正式开始讲解这些内容之前，我们先来对 Go Modules 有个基本的了解。</span></span></span></div><h2 data-slate-type="heading" data-slate-object="block" data-key="18830" id="sr-toc-1"><span data-slate-object="text" data-key="18831"><span data-slate-leaf="true" data-offset-key="18831:0" data-first-offset="true"><span data-slate-string="true">Go Modules 简介</span></span></span></h2><div data-slate-type="paragraph" data-slate-object="block" data-key="18832"><span data-slate-object="text" data-key="18833"><span data-slate-leaf="true" data-offset-key="18833:0" data-first-offset="true"><span data-slate-string="true">Go Modules 是 Go 官方推出的一个 Go 包管理方案，基于 vgo 演进而来，具有下面这几个特性：</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="18834"><div data-slate-type="list-line" data-slate-object="block" data-key="18835"><span data-slate-object="text" data-key="18836"><span data-slate-leaf="true" data-offset-key="18836:0" data-first-offset="true"><span data-slate-string="true">可以使包的管理更加简单。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="18837"><span data-slate-object="text" data-key="18838"><span data-slate-leaf="true" data-offset-key="18838:0" data-first-offset="true"><span data-slate-string="true">支持版本管理。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="18839"><span data-slate-object="text" data-key="18840"><span data-slate-leaf="true" data-offset-key="18840:0" data-first-offset="true"><span data-slate-string="true">允许同一个模块多个版本共存。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="18841"><span data-slate-object="text" data-key="18842"><span data-slate-leaf="true" data-offset-key="18842:0" data-first-offset="true"><span data-slate-string="true">可以校验依赖包的哈希值，确保包的一致性，增加安全性。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="18843"><span data-slate-object="text" data-key="18844"><span data-slate-leaf="true" data-offset-key="18844:0" data-first-offset="true"><span data-slate-string="true">内置在几乎所有的 go 命令中，包括</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18845"><span data-slate-object="text" data-key="18846"><span data-slate-leaf="true" data-offset-key="18846:0" data-first-offset="true"><span data-slate-string="true"> go get</span></span></span></span><span data-slate-object="text" data-key="18847"><span data-slate-leaf="true" data-offset-key="18847:0" data-first-offset="true"><span data-slate-string="true">、</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18848"><span data-slate-object="text" data-key="18849"><span data-slate-leaf="true" data-offset-key="18849:0" data-first-offset="true"><span data-slate-string="true">go build</span></span></span></span><span data-slate-object="text" data-key="18850"><span data-slate-leaf="true" data-offset-key="18850:0" data-first-offset="true"><span data-slate-string="true">、</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18851"><span data-slate-object="text" data-key="18852"><span data-slate-leaf="true" data-offset-key="18852:0" data-first-offset="true"><span data-slate-string="true">go install</span></span></span></span><span data-slate-object="text" data-key="18853"><span data-slate-leaf="true" data-offset-key="18853:0" data-first-offset="true"><span data-slate-string="true">、</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18854"><span data-slate-object="text" data-key="18855"><span data-slate-leaf="true" data-offset-key="18855:0" data-first-offset="true"><span data-slate-string="true">go run</span></span></span></span><span data-slate-object="text" data-key="18856"><span data-slate-leaf="true" data-offset-key="18856:0" data-first-offset="true"><span data-slate-string="true">、</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18857"><span data-slate-object="text" data-key="18858"><span data-slate-leaf="true" data-offset-key="18858:0" data-first-offset="true"><span data-slate-string="true">go test</span></span></span></span><span data-slate-object="text" data-key="18859"><span data-slate-leaf="true" data-offset-key="18859:0" data-first-offset="true"><span data-slate-string="true">、</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18860"><span data-slate-object="text" data-key="18861"><span data-slate-leaf="true" data-offset-key="18861:0" data-first-offset="true"><span data-slate-string="true">go list</span></span></span></span><span data-slate-object="text" data-key="18862"><span data-slate-leaf="true" data-offset-key="18862:0" data-first-offset="true"><span data-slate-string="true"> 等命令。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="18863"><span data-slate-object="text" data-key="18864"><span data-slate-leaf="true" data-offset-key="18864:0" data-first-offset="true"><span data-slate-string="true">具有 Global Caching 特性，不同项目的相同模块版本，只会在服务器上缓存一份。</span></span></span></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18865"><span data-slate-object="text" data-key="18866"><span data-slate-leaf="true" data-offset-key="18866:0" data-first-offset="true"><span data-slate-string="true">在 Go1.14 版本以及之后的版本，Go 官方建议在生产环境中使用 Go Modules。因此，以后的 Go 包管理方案会逐渐统一到 Go Modules。与 Go Modules 相关的概念很多，我在这里把它们总结为 “6-2-2-1-1”，这一讲后面还会详细介绍每个概念。</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="18867"><div data-slate-type="list-line" data-slate-object="block" data-key="18868"><span data-slate-object="text" data-key="18869"><span data-slate-leaf="true" data-offset-key="18869:0" data-first-offset="true"><span data-slate-string="true">六个环境变量：</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18870"><span data-slate-object="text" data-key="18871"><span data-slate-leaf="true" data-offset-key="18871:0" data-first-offset="true"><span data-slate-string="true">GO111MODULE</span></span></span></span><span data-slate-object="text" data-key="18872"><span data-slate-leaf="true" data-offset-key="18872:0" data-first-offset="true"><span data-slate-string="true">、</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18873"><span data-slate-object="text" data-key="18874"><span data-slate-leaf="true" data-offset-key="18874:0" data-first-offset="true"><span data-slate-string="true">GOPROXY</span></span></span></span><span data-slate-object="text" data-key="18875"><span data-slate-leaf="true" data-offset-key="18875:0" data-first-offset="true"><span data-slate-string="true">、</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18876"><span data-slate-object="text" data-key="18877"><span data-slate-leaf="true" data-offset-key="18877:0" data-first-offset="true"><span data-slate-string="true">GONOPROXY</span></span></span></span><span data-slate-object="text" data-key="18878"><span data-slate-leaf="true" data-offset-key="18878:0" data-first-offset="true"><span data-slate-string="true">、</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18879"><span data-slate-object="text" data-key="18880"><span data-slate-leaf="true" data-offset-key="18880:0" data-first-offset="true"><span data-slate-string="true">GOSUMDB</span></span></span></span><span data-slate-object="text" data-key="18881"><span data-slate-leaf="true" data-offset-key="18881:0" data-first-offset="true"><span data-slate-string="true">、</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18882"><span data-slate-object="text" data-key="18883"><span data-slate-leaf="true" data-offset-key="18883:0" data-first-offset="true"><span data-slate-string="true">GONOSUMDB</span></span></span></span><span data-slate-object="text" data-key="18884"><span data-slate-leaf="true" data-offset-key="18884:0" data-first-offset="true"><span data-slate-string="true">、</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18885"><span data-slate-object="text" data-key="18886"><span data-slate-leaf="true" data-offset-key="18886:0" data-first-offset="true"><span data-slate-string="true">GOPRIVATE</span></span></span></span><span data-slate-object="text" data-key="18887"><span data-slate-leaf="true" data-offset-key="18887:0" data-first-offset="true"><span data-slate-string="true">。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="18888"><span data-slate-object="text" data-key="18889"><span data-slate-leaf="true" data-offset-key="18889:0" data-first-offset="true"><span data-slate-string="true">两个概念：Go module proxy 和 Go checksum database。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="18890"><span data-slate-object="text" data-key="18891"><span data-slate-leaf="true" data-offset-key="18891:0" data-first-offset="true"><span data-slate-string="true">两个主要文件：go.mod 和 go.sum。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="18892"><span data-slate-object="text" data-key="18893"><span data-slate-leaf="true" data-offset-key="18893:0" data-first-offset="true"><span data-slate-string="true">一个主要管理命令：go mod。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="18894"><span data-slate-object="text" data-key="18895"><span data-slate-leaf="true" data-offset-key="18895:0" data-first-offset="true"><span data-slate-string="true">一个 build flag。</span></span></span></div></div><h2 data-slate-type="heading" data-slate-object="block" data-key="18896" id="sr-toc-2"><span data-slate-object="text" data-key="18897"><span data-slate-leaf="true" data-offset-key="18897:0" data-first-offset="true"><span data-slate-string="true">Go 包管理的历史</span></span></span></h2><div data-slate-type="paragraph" data-slate-object="block" data-key="18898"><span data-slate-object="text" data-key="18899"><span data-slate-leaf="true" data-offset-key="18899:0" data-first-offset="true"><span data-slate-string="true">在具体讲解 Go Modules 之前，我们先看一下 Go 包管理的历史。从 Go 推出之后，因为没有一个统一的官方方案，所以出现了很多种 Go 包管理方案，比较混乱，也没有彻底解决 Go 包管理的一些问题。Go 包管理的历史如下图所示：</span></span></span></div><div data-slate-type="image" data-slate-object="block" data-key="18900"><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://static001.geekbang.org/resource/image/34/e5/348d772b26940f721c6fb907f6833be5.jpg?wh=2248x739"></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18901"><span data-slate-object="text" data-key="18902"><span data-slate-leaf="true" data-offset-key="18902:0" data-first-offset="true"><span data-slate-string="true">这张图展示了 Go 依赖包管理工具经历的几个发展阶段，接下来我会按时间顺序重点介绍下其中的五个阶段。</span></span></span></div><h3 data-slate-type="heading" data-slate-object="block" data-key="18903" id="sr-toc-3"><span data-slate-object="text" data-key="18904"><span data-slate-leaf="true" data-offset-key="18904:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">Go1.5 版本前：GOPATH</span></span></span></span></h3><div data-slate-type="paragraph" data-slate-object="block" data-key="18905"><span data-slate-object="text" data-key="18906"><span data-slate-leaf="true" data-offset-key="18906:0" data-first-offset="true"><span data-slate-string="true">在 Go1.5 版本之前，没有版本控制，所有的依赖包都放在 GOPATH 下。采用这种方式，无法实现包的多版本管理，并且包的位置只能局限在 GOPATH 目录下。如果 A 项目和 B 项目用到了同一个 Go 包的不同版本，这时候只能给每个项目设置一个 GOPATH，将对应版本的包放在各自的 GOPATH 目录下，切换项目目录时也需要切换 GOPATH。这些都增加了开发和实现的复杂度。</span></span></span></div><h3 data-slate-type="heading" data-slate-object="block" data-key="18907" id="sr-toc-4"><span data-slate-object="text" data-key="18908"><span data-slate-leaf="true" data-offset-key="18908:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">Go1.5 版本：Vendoring</span></span></span></span></h3><div data-slate-type="paragraph" data-slate-object="block" data-key="18909"><span data-slate-object="text" data-key="18910"><span data-slate-leaf="true" data-offset-key="18910:0" data-first-offset="true"><span data-slate-string="true">Go1.5 推出了 vendor 机制，并在 Go1.6 中默认启用。在这个机制中，每个项目的根目录都可以有一个 vendor 目录，里面存放了该项目的 Go 依赖包。在编译 Go 源码时，Go 优先从项目根目录的 vendor 目录查找依赖；如果没有找到，再去 GOPATH 下的 vendor 目录下找；如果还没有找到，就去 GOPATH 下找。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18911"><span data-slate-object="text" data-key="18912"><span data-slate-leaf="true" data-offset-key="18912:0" data-first-offset="true"><span data-slate-string="true">这种方式解决了多 GOPATH 的问题，但是随着项目依赖的增多，vendor 目录会越来越大，造成整个项目仓库越来越大。在 vendor 机制下，一个中型项目的 vendor 目录有几百 M 的大小一点也不奇怪。</span></span></span></div><h3 data-slate-type="heading" data-slate-object="block" data-key="18913" id="sr-toc-5"><span data-slate-object="text" data-key="18914"><span data-slate-leaf="true" data-offset-key="18914:0" data-first-offset="true"><span data-slate-string="true">“百花齐放”：多种 Go 依赖包管理工具出现</span></span></span></h3><div data-slate-type="paragraph" data-slate-object="block" data-key="18915"><span data-slate-object="text" data-key="18916"><span data-slate-leaf="true" data-offset-key="18916:0" data-first-offset="true"><span data-slate-string="true">这个阶段，社区也出现了很多 Go 依赖包管理的工具，这里我介绍三个比较有名的。</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="18917"><div data-slate-type="list-line" data-slate-object="block" data-key="18918"><span data-slate-object="text" data-key="18919"><span data-slate-leaf="true" data-offset-key="18919:0" data-first-offset="true"><span data-slate-string="true">Godep：解决包依赖的管理工具，Docker、Kubernetes、CoreOS 等 Go 项目都曾用过 godep 来管理其依赖。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="18920"><span data-slate-object="text" data-key="18921"><span data-slate-leaf="true" data-offset-key="18921:0" data-first-offset="true"><span data-slate-string="true">Govendor：它的功能比 Godep 多一些，通过 vendor 目录下的</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18922"><span data-slate-object="text" data-key="18923"><span data-slate-leaf="true" data-offset-key="18923:0" data-first-offset="true"><span data-slate-string="true"> vendor.json</span></span></span></span><span data-slate-object="text" data-key="18924"><span data-slate-leaf="true" data-offset-key="18924:0" data-first-offset="true"><span data-slate-string="true"> 文件来记录依赖包的版本。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="18925"><span data-slate-object="text" data-key="18926"><span data-slate-leaf="true" data-offset-key="18926:0" data-first-offset="true"><span data-slate-string="true">Glide：相对完善的包管理工具，通过</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18927"><span data-slate-object="text" data-key="18928"><span data-slate-leaf="true" data-offset-key="18928:0" data-first-offset="true"><span data-slate-string="true"> glide.yaml</span></span></span></span><span data-slate-object="text" data-key="18929"><span data-slate-leaf="true" data-offset-key="18929:0" data-first-offset="true"><span data-slate-string="true"> 记录依赖信息，通过</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18930"><span data-slate-object="text" data-key="18931"><span data-slate-leaf="true" data-offset-key="18931:0" data-first-offset="true"><span data-slate-string="true"> glide.lock</span></span></span></span><span data-slate-object="text" data-key="18932"><span data-slate-leaf="true" data-offset-key="18932:0" data-first-offset="true"><span data-slate-string="true"> 追踪每个包的具体修改。</span></span></span></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18933"><span data-slate-object="text" data-key="18934"><span data-slate-leaf="true" data-offset-key="18934:0" data-first-offset="true"><span data-slate-string="true">Govendor、Glide 都是在 Go 支持 vendor 之后推出的工具，Godep 在 Go 支持 vendor 之前也可以使用。Go 支持 vendor 之后，Godep 也改用了 vendor 模式。</span></span></span></div><h3 data-slate-type="heading" data-slate-object="block" data-key="18935" id="sr-toc-6"><span data-slate-object="text" data-key="18936"><span data-slate-leaf="true" data-offset-key="18936:0" data-first-offset="true"><span data-slate-string="true">Go1.9 版本：Dep</span></span></span></h3><div data-slate-type="paragraph" data-slate-object="block" data-key="18937"><span data-slate-object="text" data-key="18938"><span data-slate-leaf="true" data-offset-key="18938:0" data-first-offset="true"><span data-slate-string="true">对于从 0 构建项目的新用户来说，Glide 功能足够，是个不错的选择。不过，Golang 依赖管理工具混乱的局面最终由官方来终结了：Golang 官方接纳了由社区组织合作开发的 Dep，作为 official experiment。在相当长的一段时间里，Dep 作为标准，成为了事实上的官方包管理工具。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18939"><span data-slate-object="text" data-key="18940"><span data-slate-leaf="true" data-offset-key="18940:0" data-first-offset="true"><span data-slate-string="true">因为 Dep 已经成为了 official experiment 的过去时，现在我们就不必再去深究了，让我们直接去了解谁才是未来的 official experiment 吧。</span></span></span></div><h3 data-slate-type="heading" data-slate-object="block" data-key="18941" id="sr-toc-7"><span data-slate-object="text" data-key="18942"><span data-slate-leaf="true" data-offset-key="18942:0" data-first-offset="true"><span data-slate-string="true">Go1.11 版本之后：Go Modules</span></span></span></h3><div data-slate-type="paragraph" data-slate-object="block" data-key="18943"><span data-slate-object="text" data-key="18944"><span data-slate-leaf="true" data-offset-key="18944:0" data-first-offset="true"><span data-slate-string="true">Go1.11 版本推出了 Go Modules 机制，Go Modules 基于 vgo 演变而来，是 Golang 官方的包管理工具。在 Go1.13 版本，Go 语言将 Go Modules 设置为默认的 Go 管理工具；在 Go1.14 版本，Go 语言官方正式推荐在生产环境使用 Go Modules，并且鼓励所有用户从其他的依赖管理工具迁移过来。至此，Go 终于有了一个稳定的、官方的 Go 包管理工具。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18945"><span data-slate-object="text" data-key="18946"><span data-slate-leaf="true" data-offset-key="18946:0" data-first-offset="true"><span data-slate-string="true">到这里，我介绍了 Go 依赖包管理工具的历史，下面再来介绍下 Go Modules 的使用方法。</span></span></span></div><h2 data-slate-type="heading" data-slate-object="block" data-key="18947" id="sr-toc-8"><span data-slate-object="text" data-key="18948"><span data-slate-leaf="true" data-offset-key="18948:0" data-first-offset="true"><span data-slate-string="true">包（package）和模块（module）</span></span></span></h2><div data-slate-type="paragraph" data-slate-object="block" data-key="18949"><span data-slate-object="text" data-key="18950"><span data-slate-leaf="true" data-offset-key="18950:0" data-first-offset="true"><span data-slate-string="true">Go 程序被组织到 Go 包中，Go 包是同一目录中一起编译的 Go 源文件的集合。在一个源文件中定义的函数、类型、变量和常量，对于同一包中的所有其他源文件可见。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18951"><span data-slate-object="text" data-key="18952"><span data-slate-leaf="true" data-offset-key="18952:0" data-first-offset="true"><span data-slate-string="true">模块是存储在文件树中的 Go 包的集合，并且文件树根目录有 go.mod 文件。go.mod 文件定义了模块的名称及其依赖包，每个依赖包都需要指定导入路径和语义化版本（Semantic Versioning），通过导入路径和语义化版本准确地描述一个依赖。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18953"><span data-slate-object="text" data-key="18954"><span data-slate-leaf="true" data-offset-key="18954:0" data-first-offset="true"><span data-slate-string="true">这里要注意，</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18955"><span data-slate-object="text" data-key="18956"><span data-slate-leaf="true" data-offset-key="18956:0" data-first-offset="true"><span data-slate-string="true">"module" != "package"</span></span></span></span><span data-slate-object="text" data-key="18957"><span data-slate-leaf="true" data-offset-key="18957:0" data-first-offset="true"><span data-slate-string="true">，模块和包的关系更像是集合和元素的关系，包属于模块，一个模块是零个或者多个包的集合。下面的代码段，引用了一些包：</span></span></span></div><div data-code-language="go" data-slate-type="pre" data-slate-object="block" data-key="18958"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div><div data-code-line-number="4"></div><div data-code-line-number="5"></div><div data-code-line-number="6"></div><div data-code-line-number="7"></div><div data-code-line-number="8"></div><div data-code-line-number="9"></div><div data-code-line-number="10"></div><div data-code-line-number="11"></div><div data-code-line-number="12"></div><div data-code-line-number="13"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18959"><span data-slate-object="text" data-key="18960"><span data-slate-leaf="true" data-offset-key="18960:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">import</span></span></span></span><span data-slate-object="text" data-key="18961"><span data-slate-leaf="true" data-offset-key="18961:0" data-first-offset="true"><span data-slate-string="true"> (</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18962"><span data-slate-object="text" data-key="18963"><span data-slate-leaf="true" data-offset-key="18963:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="18964"><span data-slate-leaf="true" data-offset-key="18964:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">// Go 标准包</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18965"><span data-slate-object="text" data-key="18966"><span data-slate-leaf="true" data-offset-key="18966:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="18967"><span data-slate-leaf="true" data-offset-key="18967:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">"fmt"</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18968"></div><div data-slate-type="code-line" data-slate-object="block" data-key="18969"><span data-slate-object="text" data-key="18970"><span data-slate-leaf="true" data-offset-key="18970:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="18971"><span data-slate-leaf="true" data-offset-key="18971:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">// 第三方包</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18972"><span data-slate-object="text" data-key="18973"><span data-slate-leaf="true" data-offset-key="18973:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="18974"><span data-slate-leaf="true" data-offset-key="18974:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">"github.com/spf13/pflag"</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18975"></div><div data-slate-type="code-line" data-slate-object="block" data-key="18976"><span data-slate-object="text" data-key="18977"><span data-slate-leaf="true" data-offset-key="18977:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="18978"><span data-slate-leaf="true" data-offset-key="18978:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">// 匿名包</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18979"><span data-slate-object="text" data-key="18980"><span data-slate-leaf="true" data-offset-key="18980:0" data-first-offset="true"><span data-slate-string="true">     _ </span></span></span><span data-slate-object="text" data-key="18981"><span data-slate-leaf="true" data-offset-key="18981:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">"github.com/jinzhu/gorm/dialects/mysql"</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18982"></div><div data-slate-type="code-line" data-slate-object="block" data-key="18983"><span data-slate-object="text" data-key="18984"><span data-slate-leaf="true" data-offset-key="18984:0" data-first-offset="true"><span data-slate-string="true">     </span></span></span><span data-slate-object="text" data-key="18985"><span data-slate-leaf="true" data-offset-key="18985:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">// 内部包</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18986"><span data-slate-object="text" data-key="18987"><span data-slate-leaf="true" data-offset-key="18987:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="18988"><span data-slate-leaf="true" data-offset-key="18988:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">"github.com/marmotedu/iam/internal/apiserver"</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18989"><span data-slate-object="text" data-key="18990"><span data-slate-leaf="true" data-offset-key="18990:0" data-first-offset="true"><span data-slate-string="true">)</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18991"><span data-slate-object="text" data-key="18992"><span data-slate-leaf="true" data-offset-key="18992:0" data-first-offset="true"><span data-slate-string="true">这里的</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18993"><span data-slate-object="text" data-key="18994"><span data-slate-leaf="true" data-offset-key="18994:0" data-first-offset="true"><span data-slate-string="true"> fmt</span></span></span></span><span data-slate-object="text" data-key="18995"><span data-slate-leaf="true" data-offset-key="18995:0" data-first-offset="true"><span data-slate-string="true">、</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18996"><span data-slate-object="text" data-key="18997"><span data-slate-leaf="true" data-offset-key="18997:0" data-first-offset="true"><span data-slate-string="true">github.com/spf13/pflag</span></span></span></span><span data-slate-object="text" data-key="18998"><span data-slate-leaf="true" data-offset-key="18998:0" data-first-offset="true"><span data-slate-string="true"> 和</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18999"><span data-slate-object="text" data-key="19000"><span data-slate-leaf="true" data-offset-key="19000:0" data-first-offset="true"><span data-slate-string="true"> github.com/marmotedu/iam/internal/apiserver</span></span></span></span><span data-slate-object="text" data-key="19001"><span data-slate-leaf="true" data-offset-key="19001:0" data-first-offset="true"><span data-slate-string="true"> 都是 Go 包。Go 中有 4 种类型的包，下面我来分别介绍下。</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="19002"><div data-slate-type="list-line" data-slate-object="block" data-key="19003"><span data-slate-object="text" data-key="19004"><span data-slate-leaf="true" data-offset-key="19004:0" data-first-offset="true"><span data-slate-string="true">Go 标准包：在 Go 源码目录下，随 Go 一起发布的包。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19005"><span data-slate-object="text" data-key="19006"><span data-slate-leaf="true" data-offset-key="19006:0" data-first-offset="true"><span data-slate-string="true">第三方包：第三方提供的包，比如来自于 github.com 的包。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19007"><span data-slate-object="text" data-key="19008"><span data-slate-leaf="true" data-offset-key="19008:0" data-first-offset="true"><span data-slate-string="true">匿名包：只导入而不使用的包。通常情况下，我们只是想使用导入包产生的副作用，即引用包级别的变量、常量、结构体、接口等，以及执行导入包的</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19009"><span data-slate-object="text" data-key="19010"><span data-slate-leaf="true" data-offset-key="19010:0" data-first-offset="true"><span data-slate-string="true"> init()</span></span></span></span><span data-slate-object="text" data-key="19011"><span data-slate-leaf="true" data-offset-key="19011:0" data-first-offset="true"><span data-slate-string="true"> 函数。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19012"><span data-slate-object="text" data-key="19013"><span data-slate-leaf="true" data-offset-key="19013:0" data-first-offset="true"><span data-slate-string="true">内部包：项目内部的包，位于项目目录下。</span></span></span></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19014"><span data-slate-object="text" data-key="19015"><span data-slate-leaf="true" data-offset-key="19015:0" data-first-offset="true"><span data-slate-string="true">下面的目录定义了一个模块：</span></span></span></div><div data-code-language="bash" data-slate-type="pre" data-slate-object="block" data-key="19016"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="19017"><span data-slate-object="text" data-key="19018"><span data-slate-leaf="true" data-offset-key="19018:0" data-first-offset="true"><span data-slate-string="true">$ </span></span></span><span data-slate-object="text" data-key="19019"><span data-slate-leaf="true" data-offset-key="19019:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">ls</span></span></span></span><span data-slate-object="text" data-key="19020"><span data-slate-leaf="true" data-offset-key="19020:0" data-first-offset="true"><span data-slate-string="true"> hello/</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="19021"><span data-slate-object="text" data-key="19022"><span data-slate-leaf="true" data-offset-key="19022:0" data-first-offset="true"><span data-slate-string="true">go.mod  go.sum  hello.go  hello_test.go  world</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19023"><span data-slate-object="text" data-key="19024"><span data-slate-leaf="true" data-offset-key="19024:0" data-first-offset="true"><span data-slate-string="true">hello 目录下有一个 go.mod 文件，说明了这是一个模块，该模块包含了 hello 包和一个子包 world。该目录中也包含了一个 go.sum 文件，该文件供 Go 命令在构建时判断依赖包是否合法。这里你先简单了解下，我会在下面讲 go.sum 文件的时候详细介绍。</span></span></span></div><h2 data-slate-type="heading" data-slate-object="block" data-key="19025" id="sr-toc-9"><span data-slate-object="text" data-key="19026"><span data-slate-leaf="true" data-offset-key="19026:0" data-first-offset="true"><span data-slate-string="true">Go Modules 命令</span></span></span></h2><div data-slate-type="paragraph" data-slate-object="block" data-key="19027"><span data-slate-object="text" data-key="19028"><span data-slate-leaf="true" data-offset-key="19028:0" data-first-offset="true"><span data-slate-string="true">Go Modules 的管理命令为</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19029"><span data-slate-object="text" data-key="19030"><span data-slate-leaf="true" data-offset-key="19030:0" data-first-offset="true"><span data-slate-string="true"> go mod</span></span></span></span><span data-slate-object="text" data-key="19031"><span data-slate-leaf="true" data-offset-key="19031:0" data-first-offset="true"><span data-slate-string="true">，</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19032"><span data-slate-object="text" data-key="19033"><span data-slate-leaf="true" data-offset-key="19033:0" data-first-offset="true"><span data-slate-string="true">go mod</span></span></span></span><span data-slate-object="text" data-key="19034"><span data-slate-leaf="true" data-offset-key="19034:0" data-first-offset="true"><span data-slate-string="true"> 有很多子命令，你可以通过</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19035"><span data-slate-object="text" data-key="19036"><span data-slate-leaf="true" data-offset-key="19036:0" data-first-offset="true"><span data-slate-string="true"> go help mod</span></span></span></span><span data-slate-object="text" data-key="19037"><span data-slate-leaf="true" data-offset-key="19037:0" data-first-offset="true"><span data-slate-string="true"> 来获取所有的命令。下面我来具体介绍下这些命令。</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="19038"><div data-slate-type="list-line" data-slate-object="block" data-key="19039"><span data-slate-object="text" data-key="19040"><span data-slate-leaf="true" data-offset-key="19040:0" data-first-offset="true"><span data-slate-string="true">download：下载 go.mod 文件中记录的所有依赖包。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19041"><span data-slate-object="text" data-key="19042"><span data-slate-leaf="true" data-offset-key="19042:0" data-first-offset="true"><span data-slate-string="true">edit：编辑 go.mod 文件。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19043"><span data-slate-object="text" data-key="19044"><span data-slate-leaf="true" data-offset-key="19044:0" data-first-offset="true"><span data-slate-string="true">graph：查看现有的依赖结构。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19045"><span data-slate-object="text" data-key="19046"><span data-slate-leaf="true" data-offset-key="19046:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_5976723e" data-attr-id="35375" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">init：把当前目录初始化为一个新模块。</span></span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19047"><span data-slate-object="text" data-key="19048"><span data-slate-leaf="true" data-offset-key="19048:0" data-first-offset="true"><span data-slate-string="true">tidy：添加丢失的模块，并移除无用的模块。默认情况下，Go 不会移除 go.mod 文件中的无用依赖。当依赖包不再使用了，可以使用</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19049"><span data-slate-object="text" data-key="19050"><span data-slate-leaf="true" data-offset-key="19050:0" data-first-offset="true"><span data-slate-string="true"> go mod tidy</span></span></span></span><span data-slate-object="text" data-key="19051"><span data-slate-leaf="true" data-offset-key="19051:0" data-first-offset="true"><span data-slate-string="true"> 命令来清除它。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19052"><span data-slate-object="text" data-key="19053"><span data-slate-leaf="true" data-offset-key="19053:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_3147538f" data-attr-id="41505" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">vendor：将所有依赖包存到当前目录下的 vendor 目录下。</span></span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19054"><span data-slate-object="text" data-key="19055"><span data-slate-leaf="true" data-offset-key="19055:0" data-first-offset="true"><span data-slate-string="true">verify：检查当前模块的依赖是否已经存储在本地下载的源代码缓存中，以及检查下载后是否有修改。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19056"><span data-slate-object="text" data-key="19057"><span data-slate-leaf="true" data-offset-key="19057:0" data-first-offset="true"><span data-slate-string="true">why：查看为什么需要依赖某模块。</span></span></span></div></div><h2 data-slate-type="heading" data-slate-object="block" data-key="19058" id="sr-toc-10"><span data-slate-object="text" data-key="19059"><span data-slate-leaf="true" data-offset-key="19059:0" data-first-offset="true"><span data-slate-string="true">Go Modules 开关</span></span></span></h2><div data-slate-type="paragraph" data-slate-object="block" data-key="19060"><span data-slate-object="text" data-key="19061"><span data-slate-leaf="true" data-offset-key="19061:0" data-first-offset="true"><span data-slate-string="true">如果要使用 Go Modules，在 Go1.14 中仍然需要确保 Go Modules 特性处在打开状态。你可以通过环境变量 GO111MODULE 来打开或者关闭。GO111MODULE 有 3 个值，我来分别介绍下。</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="19062"><div data-slate-type="list-line" data-slate-object="block" data-key="19063"><span data-slate-object="text" data-key="19064"><span data-slate-leaf="true" data-offset-key="19064:0" data-first-offset="true"><span data-slate-string="true">auto：在 Go1.14 版本中是默认值，在</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19065"><span data-slate-object="text" data-key="19066"><span data-slate-leaf="true" data-offset-key="19066:0" data-first-offset="true"><span data-slate-string="true"> $GOPATH/src</span></span></span></span><span data-slate-object="text" data-key="19067"><span data-slate-leaf="true" data-offset-key="19067:0" data-first-offset="true"><span data-slate-string="true"> 下，且没有包含 go.mod 时则关闭 Go Modules，其他情况下都开启 Go Modules。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19068"><span data-slate-object="text" data-key="19069"><span data-slate-leaf="true" data-offset-key="19069:0" data-first-offset="true"><span data-slate-string="true">on：启用 Go Modules，Go1.14 版本推荐打开，未来版本会设为默认值。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19070"><span data-slate-object="text" data-key="19071"><span data-slate-leaf="true" data-offset-key="19071:0" data-first-offset="true"><span data-slate-string="true">off：关闭 Go Modules，不推荐。</span></span></span></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19072"><span data-slate-object="text" data-key="19073"><span data-slate-leaf="true" data-offset-key="19073:0" data-first-offset="true"><span data-slate-string="true">所以，如果要打开 Go Modules，可以设置环境变量</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19074"><span data-slate-object="text" data-key="19075"><span data-slate-leaf="true" data-offset-key="19075:0" data-first-offset="true"><span data-slate-string="true"> export GO111MODULE=on</span></span></span></span><span data-slate-object="text" data-key="19076"><span data-slate-leaf="true" data-offset-key="19076:0" data-first-offset="true"><span data-slate-string="true"> 或者</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19077"><span data-slate-object="text" data-key="19078"><span data-slate-leaf="true" data-offset-key="19078:0" data-first-offset="true"><span data-slate-string="true"> export GO111MODULE=auto</span></span></span></span><span data-slate-object="text" data-key="19079"><span data-slate-leaf="true" data-offset-key="19079:0" data-first-offset="true"><span data-slate-string="true">，建议直接设置</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19080"><span data-slate-object="text" data-key="19081"><span data-slate-leaf="true" data-offset-key="19081:0" data-first-offset="true"><span data-slate-string="true"> export GO111MODULE=on</span></span></span></span><span data-slate-object="text" data-key="19082"><span data-slate-leaf="true" data-offset-key="19082:0" data-first-offset="true"><span data-slate-string="true">。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19083"><span data-slate-object="text" data-key="19084"><span data-slate-leaf="true" data-offset-key="19084:0" data-first-offset="true"><span data-slate-string="true">Go Modules 使用语义化的版本号，我们开发的模块在发布版本打 tag 的时候，要注意遵循语义化的版本要求，不遵循语义化版本规范的版本号都是无法拉取的。</span></span></span></div><h2 data-slate-type="heading" data-slate-object="block" data-key="19085" id="sr-toc-11"><span data-slate-object="text" data-key="19086"><span data-slate-leaf="true" data-offset-key="19086:0" data-first-offset="true"><span data-slate-string="true">模块下载</span></span></span></h2><div data-slate-type="paragraph" data-slate-object="block" data-key="19087"><span data-slate-object="text" data-key="19088"><span data-slate-leaf="true" data-offset-key="19088:0" data-first-offset="true"><span data-slate-string="true">在执行 </span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19089"><span data-slate-object="text" data-key="19090"><span data-slate-leaf="true" data-offset-key="19090:0" data-first-offset="true"><span data-slate-string="true">go get</span></span></span></span><span data-slate-object="text" data-key="19091"><span data-slate-leaf="true" data-offset-key="19091:0" data-first-offset="true"><span data-slate-string="true"> 等命令时，会自动下载模块。接下来，我会介绍下 go 命令是如何下载模块的。主要有三种下载方式：</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="19092"><div data-slate-type="list-line" data-slate-object="block" data-key="19093"><span data-slate-object="text" data-key="19094"><span data-slate-leaf="true" data-offset-key="19094:0" data-first-offset="true"><span data-slate-string="true">通过代理下载；</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19095"><span data-slate-object="text" data-key="19096"><span data-slate-leaf="true" data-offset-key="19096:0" data-first-offset="true"><span data-slate-string="true">指定版本号下载；</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19097"><span data-slate-object="text" data-key="19098"><span data-slate-leaf="true" data-offset-key="19098:0" data-first-offset="true"><span data-slate-string="true">按最小版本下载。</span></span></span></div></div><h3 data-slate-type="heading" data-slate-object="block" data-key="19099" id="sr-toc-12"><span data-slate-object="text" data-key="19100"><span data-slate-leaf="true" data-offset-key="19100:0" data-first-offset="true"><span data-slate-string="true">通过代理来下载模块</span></span></span></h3><div data-slate-type="paragraph" data-slate-object="block" data-key="19101"><span data-slate-object="text" data-key="19102"><span data-slate-leaf="true" data-offset-key="19102:0" data-first-offset="true"><span data-slate-string="true">默认情况下，Go 命令从 VCS（Version Control System，版本控制系统）直接下载模块，例如 GitHub、Bitbucket、Bazaar、Mercurial 或者 SVN。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19103"><span data-slate-object="text" data-key="19104"><span data-slate-leaf="true" data-offset-key="19104:0" data-first-offset="true"><span data-slate-string="true">在 Go 1.13 版本，引入了一个新的环境变量 GOPROXY，用于设置 Go 模块代理（Go module proxy）。模块代理可以使 Go 命令直接从代理服务器下载模块。GOPROXY 默认值为</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19105"><span data-slate-object="text" data-key="19106"><span data-slate-leaf="true" data-offset-key="19106:0" data-first-offset="true"><span data-slate-string="true"> https://proxy.golang.org,direct</span></span></span></span><span data-slate-object="text" data-key="19107"><span data-slate-leaf="true" data-offset-key="19107:0" data-first-offset="true"><span data-slate-string="true">，代理服务器可以指定多个，中间用逗号隔开，例如</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19108"><span data-slate-object="text" data-key="19109"><span data-slate-leaf="true" data-offset-key="19109:0" data-first-offset="true"><span data-slate-string="true"> GOPROXY=https://proxy.golang.org,https://goproxy.cn,direct</span></span></span></span><span data-slate-object="text" data-key="19110"><span data-slate-leaf="true" data-offset-key="19110:0" data-first-offset="true"><span data-slate-string="true">。当下载模块时，会优先从指定的代理服务器上下载。如果下载失败，比如代理服务器不可访问，或者 HTTP 返回码为</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19111"><span data-slate-object="text" data-key="19112"><span data-slate-leaf="true" data-offset-key="19112:0" data-first-offset="true"><span data-slate-string="true"> 404</span></span></span></span><span data-slate-object="text" data-key="19113"><span data-slate-leaf="true" data-offset-key="19113:0" data-first-offset="true"><span data-slate-string="true"> 或</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19114"><span data-slate-object="text" data-key="19115"><span data-slate-leaf="true" data-offset-key="19115:0" data-first-offset="true"><span data-slate-string="true"> 410</span></span></span></span><span data-slate-object="text" data-key="19116"><span data-slate-leaf="true" data-offset-key="19116:0" data-first-offset="true"><span data-slate-string="true">，Go 命令会尝试从下一个代理服务器下载。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19117"><span data-slate-object="text" data-key="19118"><span data-slate-leaf="true" data-offset-key="19118:0" data-first-offset="true"><span data-slate-string="true">direct 是一个特殊指示符，用来指示 Go 回源到模块的源地址 (比如 GitHub 等) 去抓取 ，当值列表中上一个 Go module proxy 返回 404 或 410，Go 会自动尝试列表中的下一个，遇见 direct 时回源，遇见 EOF 时终止，并抛出类似</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19119"><span data-slate-object="text" data-key="19120"><span data-slate-leaf="true" data-offset-key="19120:0" data-first-offset="true"><span data-slate-string="true"> invalid version: unknown revision...</span></span></span></span><span data-slate-object="text" data-key="19121"><span data-slate-leaf="true" data-offset-key="19121:0" data-first-offset="true"><span data-slate-string="true"> 的错误。 如果</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19122"><span data-slate-object="text" data-key="19123"><span data-slate-leaf="true" data-offset-key="19123:0" data-first-offset="true"><span data-slate-string="true"> GOPROXY=off</span></span></span></span><span data-slate-object="text" data-key="19124"><span data-slate-leaf="true" data-offset-key="19124:0" data-first-offset="true"><span data-slate-string="true">，则 Go 命令不会尝试从代理服务器下载模块。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19125"><span data-slate-object="text" data-key="19126"><span data-slate-leaf="true" data-offset-key="19126:0" data-first-offset="true"><span data-slate-string="true">引入 Go module proxy 会带来很多好处，比如：</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="19127"><div data-slate-type="list-line" data-slate-object="block" data-key="19128"><span data-slate-object="text" data-key="19129"><span data-slate-leaf="true" data-offset-key="19129:0" data-first-offset="true"><span data-slate-string="true">国内开发者无法访问像 golang.org、gopkg.in、go.uber.org 这类域名，可以设置 GOPROXY 为国内可以访问的代理服务器，解决依赖包下载失败的问题。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19130"><span data-slate-object="text" data-key="19131"><span data-slate-leaf="true" data-offset-key="19131:0" data-first-offset="true"><span data-slate-string="true">Go 模块代理会永久缓存和存储所有的依赖，并且这些依赖一经缓存，不可更改，这也意味着我们不需要再维护一个 vendor 目录，也可以避免因为维护 vendor 目录所带来的存储空间占用。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19132"><span data-slate-object="text" data-key="19133"><span data-slate-leaf="true" data-offset-key="19133:0" data-first-offset="true"><span data-slate-string="true">因为依赖永久存在于代理服务器，这样即使模块从互联网上被删除，也仍然可以通过代理服务器获取到。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19134"><span data-slate-object="text" data-key="19135"><span data-slate-leaf="true" data-offset-key="19135:0" data-first-offset="true"><span data-slate-string="true">一旦将 Go 模块存储在 Go 代理服务器中，就无法覆盖或删除它，这可以保护开发者免受可能注入相同版本恶意代码所带来的攻击。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19136"><span data-slate-object="text" data-key="19137"><span data-slate-leaf="true" data-offset-key="19137:0" data-first-offset="true"><span data-slate-string="true">我们不再需要 VCS 工具来下载依赖，因为所有的依赖都是通过 HTTP 的方式从代理服务器下载。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19138"><span data-slate-object="text" data-key="19139"><span data-slate-leaf="true" data-offset-key="19139:0" data-first-offset="true"><span data-slate-string="true">因为 Go 代理通过 HTTP 独立提供了源代码（.zip 存档）和 go.mod，所以下载和构建 Go 模块的速度更快。因为可以独立获取 go.mod（而之前必须获取整个仓库），所以解决依赖也更快。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19140"><span data-slate-object="text" data-key="19141"><span data-slate-leaf="true" data-offset-key="19141:0" data-first-offset="true"><span data-slate-string="true">当然，开发者也可以设置自己的 Go 模块代理，这样开发者可以对依赖包有更多的控制，并可以预防 VCS 停机所带来的下载失败。</span></span></span></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19142"><span data-slate-object="text" data-key="19143"><span data-slate-leaf="true" data-offset-key="19143:0" data-first-offset="true"><span data-slate-string="true">在实际开发中，我们的很多模块可能需要从私有仓库拉取，通过代理服务器访问会报错，这时候我们需要将这些模块添加到环境变量 GONOPROXY 中，这些私有模块的哈希值也不会在 checksum database 中存在，需要将这些模块添加到 GONOSUMDB 中。一般来说，我建议直接设置 GOPRIVATE 环境变量，它的值将作为 GONOPROXY 和 GONOSUMDB 的默认值。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19144"><span data-slate-object="text" data-key="19145"><span data-slate-leaf="true" data-offset-key="19145:0" data-first-offset="true"><span data-slate-string="true">GONOPROXY、GONOSUMDB 和 GOPRIVATE 都支持通配符，多个域名用逗号隔开，例如</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19146"><span data-slate-object="text" data-key="19147"><span data-slate-leaf="true" data-offset-key="19147:0" data-first-offset="true"><span data-slate-string="true"> *.example.com,github.com</span></span></span></span><span data-slate-object="text" data-key="19148"><span data-slate-leaf="true" data-offset-key="19148:0" data-first-offset="true"><span data-slate-string="true">。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19149"><span data-slate-object="text" data-key="19150"><span data-slate-leaf="true" data-offset-key="19150:0" data-first-offset="true"><span data-slate-string="true">对于国内的 Go 开发者来说，目前有 3 个常用的 GOPROXY 可供选择，分别是官方、七牛和阿里云。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19151"><span data-slate-object="text" data-key="19152"><span data-slate-leaf="true" data-offset-key="19152:0" data-first-offset="true"><span data-slate-string="true">官方的 GOPROXY，国内用户可能访问不到，所以我更推荐使用七牛的</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19153"><span data-slate-object="text" data-key="19154"><span data-slate-leaf="true" data-offset-key="19154:0" data-first-offset="true"><span data-slate-string="true"> goproxy.cn</span></span></span></span><span data-slate-object="text" data-key="19155"><span data-slate-leaf="true" data-offset-key="19155:0" data-first-offset="true"><span data-slate-string="true">，</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19156"><span data-slate-object="text" data-key="19157"><span data-slate-leaf="true" data-offset-key="19157:0" data-first-offset="true"><span data-slate-string="true">goproxy.cn</span></span></span></span><span data-slate-object="text" data-key="19158"><span data-slate-leaf="true" data-offset-key="19158:0" data-first-offset="true"><span data-slate-string="true"> 是七牛云推出的非营利性项目，它的目标是为中国和世界上其他地方的 Go 开发者提供一个免费、可靠、持续在线，且经过 CDN 加速的模块代理。</span></span></span></div><h3 data-slate-type="heading" data-slate-object="block" data-key="19159" id="sr-toc-13"><span data-slate-object="text" data-key="19160"><span data-slate-leaf="true" data-offset-key="19160:0" data-first-offset="true"><span data-slate-string="true">指定版本号下载</span></span></span></h3><div data-slate-type="paragraph" data-slate-object="block" data-key="19161"><span data-slate-object="text" data-key="19162"><span data-slate-leaf="true" data-offset-key="19162:0" data-first-offset="true"><span data-slate-string="true">通常，我们通过</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19163"><span data-slate-object="text" data-key="19164"><span data-slate-leaf="true" data-offset-key="19164:0" data-first-offset="true"><span data-slate-string="true"> go get</span></span></span></span><span data-slate-object="text" data-key="19165"><span data-slate-leaf="true" data-offset-key="19165:0" data-first-offset="true"><span data-slate-string="true"> 来下载模块，下载命令格式为</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19166"><span data-slate-object="text" data-key="19167"><span data-slate-leaf="true" data-offset-key="19167:0" data-first-offset="true"><span data-slate-string="true"> go get &lt;package[@version]&gt;</span></span></span></span><span data-slate-object="text" data-key="19168"><span data-slate-leaf="true" data-offset-key="19168:0" data-first-offset="true"><span data-slate-string="true">，如下表所示：</span></span></span></div><div data-slate-type="image" data-slate-object="block" data-key="19169"><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://static001.geekbang.org/resource/image/63/92/63fbbf7cf8b67af85aa4e7ce76a99392.jpg?wh=2248x2048"></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19170"><span data-slate-object="text" data-key="19171"><span data-slate-leaf="true" data-offset-key="19171:0" data-first-offset="true"><span data-slate-string="true">你可以使用</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19172"><span data-slate-object="text" data-key="19173"><span data-slate-leaf="true" data-offset-key="19173:0" data-first-offset="true"><span data-slate-string="true"> go get -u</span></span></span></span><span data-slate-object="text" data-key="19174"><span data-slate-leaf="true" data-offset-key="19174:0" data-first-offset="true"><span data-slate-string="true"> 更新 package 到 latest 版本，也可以使用</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19175"><span data-slate-object="text" data-key="19176"><span data-slate-leaf="true" data-offset-key="19176:0" data-first-offset="true"><span data-slate-string="true"> go get -u=patch</span></span></span></span><span data-slate-object="text" data-key="19177"><span data-slate-leaf="true" data-offset-key="19177:0" data-first-offset="true"><span data-slate-string="true"> 只更新小版本，例如从</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19178"><span data-slate-object="text" data-key="19179"><span data-slate-leaf="true" data-offset-key="19179:0" data-first-offset="true"><span data-slate-string="true"> v1.2.4</span></span></span></span><span data-slate-object="text" data-key="19180"><span data-slate-leaf="true" data-offset-key="19180:0" data-first-offset="true"><span data-slate-string="true"> 到</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19181"><span data-slate-object="text" data-key="19182"><span data-slate-leaf="true" data-offset-key="19182:0" data-first-offset="true"><span data-slate-string="true"> v1.2.5</span></span></span></span><span data-slate-object="text" data-key="19183"><span data-slate-leaf="true" data-offset-key="19183:0" data-first-offset="true"><span data-slate-string="true">。</span></span></span></div><h3 data-slate-type="heading" data-slate-object="block" data-key="19184" id="sr-toc-14"><span data-slate-object="text" data-key="19185"><span data-slate-leaf="true" data-offset-key="19185:0" data-first-offset="true"><span data-slate-string="true">按最小版本下载</span></span></span></h3><div data-slate-type="paragraph" data-slate-object="block" data-key="19186"><span data-slate-object="text" data-key="19187"><span data-slate-leaf="true" data-offset-key="19187:0" data-first-offset="true"><span data-slate-string="true">一个模块往往会依赖许多其他模块，并且不同的模块也可能会依赖同一个模块的不同版本，如下图所示：</span></span></span></div><div data-slate-type="image" data-slate-object="block" data-key="19188"><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://static001.geekbang.org/resource/image/00/46/00794e3487e63d9d3302bfe977af6d46.jpg?wh=2248x1212"></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19189"><span data-slate-object="text" data-key="19190"><span data-slate-leaf="true" data-offset-key="19190:0" data-first-offset="true"><span data-slate-string="true">在上述依赖中，模块 A 依赖了模块 B 和模块 C，模块 B 依赖了模块 D，模块 C 依赖了模块 D 和模块 F，模块 D 又依赖了模块 E。并且，同模块的不同版本还依赖了对应模块的不同版本。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19191"><span data-slate-object="text" data-key="19192"><span data-slate-leaf="true" data-offset-key="19192:0" data-first-offset="true"><span data-slate-string="true">那么 Go Modules 是如何选择版本的呢？Go Modules 会把每个模块的依赖版本清单都整理出来，最终得到一个构建清单，如下图所示：</span></span></span></div><div data-slate-type="image" data-slate-object="block" data-key="19193"><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://static001.geekbang.org/resource/image/4f/f2/4f83ffe8125d75764c5f8069a73966f2.jpg?wh=2248x1148"></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19194"><span data-slate-object="text" data-key="19195"><span data-slate-leaf="true" data-offset-key="19195:0" data-first-offset="true"><span data-slate-string="true">上图中，rough list 和 final list 的区别在于重复引用的模块 D（</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19196"><span data-slate-object="text" data-key="19197"><span data-slate-leaf="true" data-offset-key="19197:0" data-first-offset="true"><span data-slate-string="true">v1.3</span></span></span></span><span data-slate-object="text" data-key="19198"><span data-slate-leaf="true" data-offset-key="19198:0" data-first-offset="true"><span data-slate-string="true">、</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19199"><span data-slate-object="text" data-key="19200"><span data-slate-leaf="true" data-offset-key="19200:0" data-first-offset="true"><span data-slate-string="true">v1.4</span></span></span></span><span data-slate-object="text" data-key="19201"><span data-slate-leaf="true" data-offset-key="19201:0" data-first-offset="true"><span data-slate-string="true">），最终清单选用了 D 的</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19202"><span data-slate-object="text" data-key="19203"><span data-slate-leaf="true" data-offset-key="19203:0" data-first-offset="true"><span data-slate-string="true"> v1.4</span></span></span></span><span data-slate-object="text" data-key="19204"><span data-slate-leaf="true" data-offset-key="19204:0" data-first-offset="true"><span data-slate-string="true"> 版本。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19205"><span data-slate-object="text" data-key="19206"><span data-slate-leaf="true" data-offset-key="19206:0" data-first-offset="true"><span data-slate-string="true">这样做的主要原因有两个。第一个是语义化版本的控制。因为模块 D 的</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19207"><span data-slate-object="text" data-key="19208"><span data-slate-leaf="true" data-offset-key="19208:0" data-first-offset="true"><span data-slate-string="true"> v1.3</span></span></span></span><span data-slate-object="text" data-key="19209"><span data-slate-leaf="true" data-offset-key="19209:0" data-first-offset="true"><span data-slate-string="true"> 和</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19210"><span data-slate-object="text" data-key="19211"><span data-slate-leaf="true" data-offset-key="19211:0" data-first-offset="true"><span data-slate-string="true"> v1.4</span></span></span></span><span data-slate-object="text" data-key="19212"><span data-slate-leaf="true" data-offset-key="19212:0" data-first-offset="true"><span data-slate-string="true"> 版本变更都属于次版本号的变更，而在语义化版本的约束下，</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19213"><span data-slate-object="text" data-key="19214"><span data-slate-leaf="true" data-offset-key="19214:0" data-first-offset="true"><span data-slate-string="true">v1.4</span></span></span></span><span data-slate-object="text" data-key="19215"><span data-slate-leaf="true" data-offset-key="19215:0" data-first-offset="true"><span data-slate-string="true"> 必须要向下兼容</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19216"><span data-slate-object="text" data-key="19217"><span data-slate-leaf="true" data-offset-key="19217:0" data-first-offset="true"><span data-slate-string="true"> v1.3</span></span></span></span><span data-slate-object="text" data-key="19218"><span data-slate-leaf="true" data-offset-key="19218:0" data-first-offset="true"><span data-slate-string="true">，因此我们要选择高版本的</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19219"><span data-slate-object="text" data-key="19220"><span data-slate-leaf="true" data-offset-key="19220:0" data-first-offset="true"><span data-slate-string="true"> v1.4</span></span></span></span><span data-slate-object="text" data-key="19221"><span data-slate-leaf="true" data-offset-key="19221:0" data-first-offset="true"><span data-slate-string="true">。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19222"><span data-slate-object="text" data-key="19223"><span data-slate-leaf="true" data-offset-key="19223:0" data-first-offset="true"><span data-slate-string="true">第二个是模块导入路径的规范。主版本号不同，模块的导入路径就不一样。所以，如果出现不兼容的情况，主版本号会改变，例如从 v1 变为 v2，模块的导入路径也就改变了，因此不会影响 v1 版本。</span></span></span></div><h2 data-slate-type="heading" data-slate-object="block" data-key="19224" id="sr-toc-15"><span data-slate-object="text" data-key="19225"><span data-slate-leaf="true" data-offset-key="19225:0" data-first-offset="true"><span data-slate-string="true">go.mod 和 go.sum 介绍</span></span></span></h2><div data-slate-type="paragraph" data-slate-object="block" data-key="19226"><span data-slate-object="text" data-key="19227"><span data-slate-leaf="true" data-offset-key="19227:0" data-first-offset="true"><span data-slate-string="true">在 Go Modules 中，go.mod 和 go.sum 是两个非常重要的文件，下面我就来详细介绍这两个文件。</span></span></span></div><h3 data-slate-type="heading" data-slate-object="block" data-key="19228" id="sr-toc-16"><span data-slate-object="text" data-key="19229"><span data-slate-leaf="true" data-offset-key="19229:0" data-first-offset="true"><span data-slate-string="true">go.mod 文件介绍</span></span></span></h3><div data-slate-type="paragraph" data-slate-object="block" data-key="19230"><span data-slate-object="text" data-key="19231"><span data-slate-leaf="true" data-offset-key="19231:0" data-first-offset="true"><span data-slate-string="true">go.mod 文件是 Go Modules 的核心文件。下面是一个 go.mod 文件示例：</span></span></span></div><div data-code-language="bash" data-slate-type="pre" data-slate-object="block" data-key="19232"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div><div data-code-line-number="4"></div><div data-code-line-number="5"></div><div data-code-line-number="6"></div><div data-code-line-number="7"></div><div data-code-line-number="8"></div><div data-code-line-number="9"></div><div data-code-line-number="10"></div><div data-code-line-number="11"></div><div data-code-line-number="12"></div><div data-code-line-number="13"></div><div data-code-line-number="14"></div><div data-code-line-number="15"></div><div data-code-line-number="16"></div><div data-code-line-number="17"></div><div data-code-line-number="18"></div><div data-code-line-number="19"></div><div data-code-line-number="20"></div><div data-code-line-number="21"></div><div data-code-line-number="22"></div><div data-code-line-number="23"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="19233"><span data-slate-object="text" data-key="19234"><span data-slate-leaf="true" data-offset-key="19234:0" data-first-offset="true"><span data-slate-string="true">module github.com/marmotedu/iam</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="19235"></div><div data-slate-type="code-line" data-slate-object="block" data-key="19236"><span data-slate-object="text" data-key="19237"><span data-slate-leaf="true" data-offset-key="19237:0" data-first-offset="true"><span data-slate-string="true">go 1.14</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="19238"></div><div data-slate-type="code-line" data-slate-object="block" data-key="19239"><span data-slate-object="text" data-key="19240"><span data-slate-leaf="true" data-offset-key="19240:0" data-first-offset="true"><span data-slate-string="true">require (</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="19241"><span data-slate-object="text" data-key="19242"><span data-slate-leaf="true" data-offset-key="19242:0" data-first-offset="true"><span data-slate-string="true">  github.com/AlekSi/pointer v1.1.0</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="19243"><span data-slate-object="text" data-key="19244"><span data-slate-leaf="true" data-offset-key="19244:0" data-first-offset="true"><span data-slate-string="true">  github.com/appleboy/gin-jwt/v2 v2.6.3</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="19245"><span data-slate-object="text" data-key="19246"><span data-slate-leaf="true" data-offset-key="19246:0" data-first-offset="true"><span data-slate-string="true">  github.com/asaskevich/govalidator v0.0.0-20200428143746-21a406dcc535</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="19247"><span data-slate-object="text" data-key="19248"><span data-slate-leaf="true" data-offset-key="19248:0" data-first-offset="true"><span data-slate-string="true">  github.com/gin-gonic/gin v1.6.3</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="19249"><span data-slate-object="text" data-key="19250"><span data-slate-leaf="true" data-offset-key="19250:0" data-first-offset="true"><span data-slate-string="true">  github.com/golangci/golangci-lint v1.30.0 // indirect</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="19251"><span data-slate-object="text" data-key="19252"><span data-slate-leaf="true" data-offset-key="19252:0" data-first-offset="true"><span data-slate-string="true">  github.com/google/uuid v1.0.0</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="19253"><span data-slate-object="text" data-key="19254"><span data-slate-leaf="true" data-offset-key="19254:0" data-first-offset="true"><span data-slate-string="true">    github.com/blang/semver v3.5.0+incompatible</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="19255"><span data-slate-object="text" data-key="19256"><span data-slate-leaf="true" data-offset-key="19256:0" data-first-offset="true"><span data-slate-string="true">    golang.org/x/text v0.3.2</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="19257"><span data-slate-object="text" data-key="19258"><span data-slate-leaf="true" data-offset-key="19258:0" data-first-offset="true"><span data-slate-string="true">)</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="19259"></div><div data-slate-type="code-line" data-slate-object="block" data-key="19260"><span data-slate-object="text" data-key="19261"><span data-slate-leaf="true" data-offset-key="19261:0" data-first-offset="true"><span data-slate-string="true">replace (</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="19262"><span data-slate-object="text" data-key="19263"><span data-slate-leaf="true" data-offset-key="19263:0" data-first-offset="true"><span data-slate-string="true">    github.com/gin-gonic/gin =&gt; /home/colin/gin</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="19264"><span data-slate-object="text" data-key="19265"><span data-slate-leaf="true" data-offset-key="19265:0" data-first-offset="true"><span data-slate-string="true">    golang.org/x/text v0.3.2 =&gt; github.com/golang/text v0.3.2</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="19266"><span data-slate-object="text" data-key="19267"><span data-slate-leaf="true" data-offset-key="19267:0" data-first-offset="true"><span data-slate-string="true">)</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="19268"></div><div data-slate-type="code-line" data-slate-object="block" data-key="19269"><span data-slate-object="text" data-key="19270"><span data-slate-leaf="true" data-offset-key="19270:0" data-first-offset="true"><span data-slate-string="true">exclude (</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="19271"><span data-slate-object="text" data-key="19272"><span data-slate-leaf="true" data-offset-key="19272:0" data-first-offset="true"><span data-slate-string="true">    github.com/google/uuid v1.1.0</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="19273"><span data-slate-object="text" data-key="19274"><span data-slate-leaf="true" data-offset-key="19274:0" data-first-offset="true"><span data-slate-string="true">)</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19275"><span data-slate-object="text" data-key="19276"><span data-slate-leaf="true" data-offset-key="19276:0" data-first-offset="true"><span data-slate-string="true">接下来，我会从 go.mod 语句、go.mod 版本号、go.mod 文件修改方法三个方面来介绍 go.mod。</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="19277"><div data-slate-type="list-line" data-slate-object="block" data-key="19278"><div data-code-line-number="1"></div><div><span data-slate-object="text" data-key="19279"><span data-slate-leaf="true" data-offset-key="19279:0" data-first-offset="true"><span data-slate-string="true">go.mod 语句</span></span></span></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19280"><span data-slate-object="text" data-key="19281"><span data-slate-leaf="true" data-offset-key="19281:0" data-first-offset="true"><span data-slate-string="true">go.mod 文件中包含了 4 个语句，分别是 module、require、replace 和 exclude。下面我来介绍下它们的功能。</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="19282"><div data-slate-type="list-line" data-slate-object="block" data-key="19283"><span data-slate-object="text" data-key="19284"><span data-slate-leaf="true" data-offset-key="19284:0" data-first-offset="true"><span data-slate-string="true">module：用来定义当前项目的模块路径。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19285"><span data-slate-object="text" data-key="19286"><span data-slate-leaf="true" data-offset-key="19286:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_960f9de8" data-attr-id="35725" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">go：用来设置预期的 Go 版本，目前只是起标识作用。</span></span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19287"><span data-slate-object="text" data-key="19288"><span data-slate-leaf="true" data-offset-key="19288:0" data-first-offset="true"><span data-slate-string="true">require：用来设置一个特定的模块版本，格式为</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19289"><span data-slate-object="text" data-key="19290"><span data-slate-leaf="true" data-offset-key="19290:0" data-first-offset="true"><span data-slate-string="true"> &lt;导入包路径&gt; &lt; 版本 &gt; [//indirect]</span></span></span></span><span data-slate-object="text" data-key="19291"><span data-slate-leaf="true" data-offset-key="19291:0" data-first-offset="true"><span data-slate-string="true">。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19292"><span data-slate-object="text" data-key="19293"><span data-slate-leaf="true" data-offset-key="19293:0" data-first-offset="true"><span data-slate-string="true">exclude：用来从使用中排除一个特定的模块版本，如果我们知道模块的某个版本有严重的问题，就可以使用 exclude 将该版本排除掉。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19294"><span data-slate-object="text" data-key="19295"><span data-slate-leaf="true" data-offset-key="19295:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_69d565fa" data-attr-id="33524" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">replace：用来将一个模块版本替换为另外一个模块版本。</span></span></span><span data-slate-leaf="true" data-offset-key="19295:1"><span data-slate-string="true">格式为 </span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19296"><span data-slate-object="text" data-key="19297"><span data-slate-leaf="true" data-offset-key="19297:0" data-first-offset="true"><span data-slate-string="true">$module =&gt; $newmodule</span></span></span></span><span data-slate-object="text" data-key="19298"><span data-slate-leaf="true" data-offset-key="19298:0" data-first-offset="true"><span data-slate-string="true"> ，</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19299"><span data-slate-object="text" data-key="19300"><span data-slate-leaf="true" data-offset-key="19300:0" data-first-offset="true"><span data-slate-string="true">$newmodule</span></span></span></span><span data-slate-object="text" data-key="19301"><span data-slate-leaf="true" data-offset-key="19301:0" data-first-offset="true"><span data-slate-string="true"> 可以是本地磁盘的相对路径，例如</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19302"><span data-slate-object="text" data-key="19303"><span data-slate-leaf="true" data-offset-key="19303:0" data-first-offset="true"><span data-slate-string="true"> github.com/gin-gonic/gin =&gt; ./gin</span></span></span></span><span data-slate-object="text" data-key="19304"><span data-slate-leaf="true" data-offset-key="19304:0" data-first-offset="true"><span data-slate-string="true">。也可以是本地磁盘的绝对路径，例如</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19305"><span data-slate-object="text" data-key="19306"><span data-slate-leaf="true" data-offset-key="19306:0" data-first-offset="true"><span data-slate-string="true"> github.com/gin-gonic/gin =&gt; /home/lk/gin</span></span></span></span><span data-slate-object="text" data-key="19307"><span data-slate-leaf="true" data-offset-key="19307:0" data-first-offset="true"><span data-slate-string="true">。还可以是网络路径，例如</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19308"><span data-slate-object="text" data-key="19309"><span data-slate-leaf="true" data-offset-key="19309:0" data-first-offset="true"><span data-slate-string="true"> golang.org/x/text v0.3.2 =&gt; github.com/golang/text v0.3.2</span></span></span></span><span data-slate-object="text" data-key="19310"><span data-slate-leaf="true" data-offset-key="19310:0" data-first-offset="true"><span data-slate-string="true">。</span></span></span></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19311"><span data-slate-object="text" data-key="19312"><span data-slate-leaf="true" data-offset-key="19312:0" data-first-offset="true"><span data-slate-string="true">这里需要注意，虽然我们用</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19313"><span data-slate-object="text" data-key="19314"><span data-slate-leaf="true" data-offset-key="19314:0" data-first-offset="true"><span data-slate-string="true"> $newmodule</span></span></span></span><span data-slate-object="text" data-key="19315"><span data-slate-leaf="true" data-offset-key="19315:0" data-first-offset="true"><span data-slate-string="true"> 替换了</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19316"><span data-slate-object="text" data-key="19317"><span data-slate-leaf="true" data-offset-key="19317:0" data-first-offset="true"><span data-slate-string="true"> $module</span></span></span></span><span data-slate-object="text" data-key="19318"><span data-slate-leaf="true" data-offset-key="19318:0" data-first-offset="true"><span data-slate-string="true">，但是在代码中的导入路径仍然为</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19319"><span data-slate-object="text" data-key="19320"><span data-slate-leaf="true" data-offset-key="19320:0" data-first-offset="true"><span data-slate-string="true"> $module</span></span></span></span><span data-slate-object="text" data-key="19321"><span data-slate-leaf="true" data-offset-key="19321:0" data-first-offset="true"><span data-slate-string="true">。replace 在实际开发中经常用到，下面的场景可能需要用到 replace：</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="19322"><div data-slate-type="list-line" data-slate-object="block" data-key="19323"><span data-slate-object="text" data-key="19324"><span data-slate-leaf="true" data-offset-key="19324:0" data-first-offset="true"><span data-slate-string="true">在开启 Go Modules 后，缓存的依赖包是只读的，但在日常开发调试中，我们可能需要修改依赖包的代码来进行调试，这时可以将依赖包另存到一个新的位置，并在 go.mod 中替换这个包。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19325"><span data-slate-object="text" data-key="19326"><span data-slate-leaf="true" data-offset-key="19326:0" data-first-offset="true"><span data-slate-string="true">如果一些依赖包在 Go 命令运行时无法下载，就可以通过其他途径下载该依赖包，上传到开发构建机，并在 go.mod 中替换为这个包。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19327"><span data-slate-object="text" data-key="19328"><span data-slate-leaf="true" data-offset-key="19328:0" data-first-offset="true"><span data-slate-string="true">在项目开发初期，A 项目依赖 B 项目的包，但 B 项目因为种种原因没有 push 到仓库，这时也可以在 go.mod 中把依赖包替换为 B 项目的本地磁盘路径。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19329"><span data-slate-object="text" data-key="19330"><span data-slate-leaf="true" data-offset-key="19330:0" data-first-offset="true"><span data-slate-string="true">在国内访问 golang.org/x 的各个包都需要翻墙，可以在 go.mod 中使用 replace，替换成 GitHub 上对应的库，例如</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19331"><span data-slate-object="text" data-key="19332"><span data-slate-leaf="true" data-offset-key="19332:0" data-first-offset="true"><span data-slate-string="true"> golang.org/x/text v0.3.0 =&gt; github.com/golang/text v0.3.0</span></span></span></span><span data-slate-object="text" data-key="19333"><span data-slate-leaf="true" data-offset-key="19333:0" data-first-offset="true"><span data-slate-string="true">。</span></span></span></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19334"><span data-slate-object="text" data-key="19335"><span data-slate-leaf="true" data-offset-key="19335:0" data-first-offset="true"><span data-slate-string="true">有一点要注意，exclude 和 replace 只作用于当前主模块，不影响主模块所依赖的其他模块。</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="19336"><div data-slate-type="list-line" data-slate-object="block" data-key="19337"><div data-code-line-number="2"></div><div><span data-slate-object="text" data-key="19338"><span data-slate-leaf="true" data-offset-key="19338:0" data-first-offset="true"><span data-slate-string="true">go.mod 版本号</span></span></span></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19339"><span data-slate-object="text" data-key="19340"><span data-slate-leaf="true" data-offset-key="19340:0" data-first-offset="true"><span data-slate-string="true">go.mod 文件中有很多版本号格式，我知道在平时使用中，有很多开发者对此感到困惑。这里，我来详细说明一下。</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="19341"><div data-slate-type="list-line" data-slate-object="block" data-key="19342"><span data-slate-object="text" data-key="19343"><span data-slate-leaf="true" data-offset-key="19343:0" data-first-offset="true"><span data-slate-string="true">如果模块具有符合语义化版本格式的 tag，会直接展示 tag 的值，例如 </span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19344"><span data-slate-object="text" data-key="19345"><span data-slate-leaf="true" data-offset-key="19345:0" data-first-offset="true"><span data-slate-string="true">github.com/AlekSi/pointer v1.1.0</span></span></span></span><span data-slate-object="text" data-key="19346"><span data-slate-leaf="true" data-offset-key="19346:0" data-first-offset="true"><span data-slate-string="true"> 。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19347"><span data-slate-object="text" data-key="19348"><span data-slate-leaf="true" data-offset-key="19348:0" data-first-offset="true"><span data-slate-string="true">除了 v0 和 v1 外，主版本号必须显试地出现在模块路径的尾部，例如</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19349"><span data-slate-object="text" data-key="19350"><span data-slate-leaf="true" data-offset-key="19350:0" data-first-offset="true"><span data-slate-string="true"> github.com/appleboy/gin-jwt/v2 v2.6.3</span></span></span></span><span data-slate-object="text" data-key="19351"><span data-slate-leaf="true" data-offset-key="19351:0" data-first-offset="true"><span data-slate-string="true">。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19352"><span data-slate-object="text" data-key="19353"><span data-slate-leaf="true" data-offset-key="19353:0" data-first-offset="true"><span data-slate-string="true">对于没有 tag 的模块，Go 命令会选择 master 分支上最新的 commit，并根据 commit 时间和哈希值生成一个符合语义化版本的版本号，例如</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19354"><span data-slate-object="text" data-key="19355"><span data-slate-leaf="true" data-offset-key="19355:0" data-first-offset="true"><span data-slate-string="true"> github.com/asaskevich/govalidator v0.0.0-20200428143746-21a406dcc535</span></span></span></span><span data-slate-object="text" data-key="19356"><span data-slate-leaf="true" data-offset-key="19356:0" data-first-offset="true"><span data-slate-string="true">。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19357"><span data-slate-object="text" data-key="19358"><span data-slate-leaf="true" data-offset-key="19358:0" data-first-offset="true"><span data-slate-string="true">如果模块名字跟版本不符合规范，例如模块的名字为</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19359"><span data-slate-object="text" data-key="19360"><span data-slate-leaf="true" data-offset-key="19360:0" data-first-offset="true"><span data-slate-string="true"> github.com/blang/semver</span></span></span></span><span data-slate-object="text" data-key="19361"><span data-slate-leaf="true" data-offset-key="19361:0" data-first-offset="true"><span data-slate-string="true">，但是版本为 </span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19362"><span data-slate-object="text" data-key="19363"><span data-slate-leaf="true" data-offset-key="19363:0" data-first-offset="true"><span data-slate-string="true">v3.5.0</span></span></span></span><span data-slate-object="text" data-key="19364"><span data-slate-leaf="true" data-offset-key="19364:0" data-first-offset="true"><span data-slate-string="true">（正常应该是</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19365"><span data-slate-object="text" data-key="19366"><span data-slate-leaf="true" data-offset-key="19366:0" data-first-offset="true"><span data-slate-string="true"> github.com/blang/semver/v3</span></span></span></span><span data-slate-object="text" data-key="19367"><span data-slate-leaf="true" data-offset-key="19367:0" data-first-offset="true"><span data-slate-string="true">），go 会在 go.mod 的版本号后加</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19368"><span data-slate-object="text" data-key="19369"><span data-slate-leaf="true" data-offset-key="19369:0" data-first-offset="true"><span data-slate-string="true"> +incompatible</span></span></span></span><span data-slate-object="text" data-key="19370"><span data-slate-leaf="true" data-offset-key="19370:0" data-first-offset="true"><span data-slate-string="true"> 表示。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19371"><span data-slate-object="text" data-key="19372"><span data-slate-leaf="true" data-offset-key="19372:0" data-first-offset="true"><span data-slate-string="true">如果 go.mod 中的包是间接依赖，则会添加</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19373"><span data-slate-object="text" data-key="19374"><span data-slate-leaf="true" data-offset-key="19374:0" data-first-offset="true"><span data-slate-string="true"> // indirect</span></span></span></span><span data-slate-object="text" data-key="19375"><span data-slate-leaf="true" data-offset-key="19375:0" data-first-offset="true"><span data-slate-string="true"> 注释，例如</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19376"><span data-slate-object="text" data-key="19377"><span data-slate-leaf="true" data-offset-key="19377:0" data-first-offset="true"><span data-slate-string="true"> github.com/golangci/golangci-lint v1.30.0 // indirect</span></span></span></span><span data-slate-object="text" data-key="19378"><span data-slate-leaf="true" data-offset-key="19378:0" data-first-offset="true"><span data-slate-string="true">。</span></span></span></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19379"><span data-slate-object="text" data-key="19380"><span data-slate-leaf="true" data-offset-key="19380:0" data-first-offset="true"><span data-slate-string="true">这里要注意，Go Modules 要求模块的版本号格式为</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19381"><span data-slate-object="text" data-key="19382"><span data-slate-leaf="true" data-offset-key="19382:0" data-first-offset="true"><span data-slate-string="true"> v&lt;major&gt;.&lt;minor&gt;.&lt;patch&gt;</span></span></span></span><span data-slate-object="text" data-key="19383"><span data-slate-leaf="true" data-offset-key="19383:0" data-first-offset="true"><span data-slate-string="true">，如果</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19384"><span data-slate-object="text" data-key="19385"><span data-slate-leaf="true" data-offset-key="19385:0" data-first-offset="true"><span data-slate-string="true"> &lt;major&gt;</span></span></span></span><span data-slate-object="text" data-key="19386"><span data-slate-leaf="true" data-offset-key="19386:0" data-first-offset="true"><span data-slate-string="true"> 版本号大于 1，它的版本号还要体现在模块名字中，例如模块</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19387"><span data-slate-object="text" data-key="19388"><span data-slate-leaf="true" data-offset-key="19388:0" data-first-offset="true"><span data-slate-string="true"> github.com/blang/semver</span></span></span></span><span data-slate-object="text" data-key="19389"><span data-slate-leaf="true" data-offset-key="19389:0" data-first-offset="true"><span data-slate-string="true"> 版本号增长到</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19390"><span data-slate-object="text" data-key="19391"><span data-slate-leaf="true" data-offset-key="19391:0" data-first-offset="true"><span data-slate-string="true"> v3.x.x</span></span></span></span><span data-slate-object="text" data-key="19392"><span data-slate-leaf="true" data-offset-key="19392:0" data-first-offset="true"><span data-slate-string="true">，则模块名应为</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19393"><span data-slate-object="text" data-key="19394"><span data-slate-leaf="true" data-offset-key="19394:0" data-first-offset="true"><span data-slate-string="true"> github.com/blang/semver/v3</span></span></span></span><span data-slate-object="text" data-key="19395"><span data-slate-leaf="true" data-offset-key="19395:0" data-first-offset="true"><span data-slate-string="true">。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19396"><span data-slate-object="text" data-key="19397"><span data-slate-leaf="true" data-offset-key="19397:0" data-first-offset="true"><span data-slate-string="true">这里再详细介绍下出现</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19398"><span data-slate-object="text" data-key="19399"><span data-slate-leaf="true" data-offset-key="19399:0" data-first-offset="true"><span data-slate-string="true"> // indirect</span></span></span></span><span data-slate-object="text" data-key="19400"><span data-slate-leaf="true" data-offset-key="19400:0" data-first-offset="true"><span data-slate-string="true"> 的情况。原则上 go.mod 中出现的都是直接依赖，但是下面的两种情况只要出现一种，就会在 go.mod 中添加间接依赖。</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="19401"><div data-slate-type="list-line" data-slate-object="block" data-key="19402"><span data-slate-object="text" data-key="19403"><span data-slate-leaf="true" data-offset-key="19403:0" data-first-offset="true"><span data-slate-string="true">直接依赖未启用 Go Modules：如果模块 A 依赖模块 B，模块 B 依赖 B1 和 B2，但是 B 没有 go.mod 文件，则 B1 和 B2 会记录到 A 的 go.mod 文件中，并在最后加上</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19404"><span data-slate-object="text" data-key="19405"><span data-slate-leaf="true" data-offset-key="19405:0" data-first-offset="true"><span data-slate-string="true"> // indirect</span></span></span></span><span data-slate-object="text" data-key="19406"><span data-slate-leaf="true" data-offset-key="19406:0" data-first-offset="true"><span data-slate-string="true">。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19407"><span data-slate-object="text" data-key="19408"><span data-slate-leaf="true" data-offset-key="19408:0" data-first-offset="true"><span data-slate-string="true">直接依赖 go.mod 文件中缺失部分依赖：如果模块 A 依赖模块 B，模块 B 依赖 B1 和 B2，B 有 go.mod 文件，但是只有 B1 被记录在 B 的 go.mod 文件中，这时候 B2 会被记录到 A 的 go.mod 文件中，并在最后加上</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19409"><span data-slate-object="text" data-key="19410"><span data-slate-leaf="true" data-offset-key="19410:0" data-first-offset="true"><span data-slate-string="true"> // indirect</span></span></span></span><span data-slate-object="text" data-key="19411"><span data-slate-leaf="true" data-offset-key="19411:0" data-first-offset="true"><span data-slate-string="true">。</span></span></span></div></div><div data-slate-type="list" data-slate-object="block" data-key="19412"><div data-slate-type="list-line" data-slate-object="block" data-key="19413"><div data-code-line-number="3"></div><div><span data-slate-object="text" data-key="19414"><span data-slate-leaf="true" data-offset-key="19414:0" data-first-offset="true"><span data-slate-string="true">go.mod 文件修改方法</span></span></span></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19415"><span data-slate-object="text" data-key="19416"><span data-slate-leaf="true" data-offset-key="19416:0" data-first-offset="true"><span data-slate-string="true">要修改 go.mod 文件，我们可以采用下面这三种方法：</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="19417"><div data-slate-type="list-line" data-slate-object="block" data-key="19418"><span data-slate-object="text" data-key="19419"><span data-slate-leaf="true" data-offset-key="19419:0" data-first-offset="true"><span data-slate-string="true">Go 命令在运行时自动修改。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19420"><span data-slate-object="text" data-key="19421"><span data-slate-leaf="true" data-offset-key="19421:0" data-first-offset="true"><span data-slate-string="true">手动编辑 go.mod 文件，编辑之后可以执行</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19422"><span data-slate-object="text" data-key="19423"><span data-slate-leaf="true" data-offset-key="19423:0" data-first-offset="true"><span data-slate-string="true"> go mod edit -fmt</span></span></span></span><span data-slate-object="text" data-key="19424"><span data-slate-leaf="true" data-offset-key="19424:0" data-first-offset="true"><span data-slate-string="true"> 格式化 go.mod 文件。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="19425"><span data-slate-object="text" data-key="19426"><span data-slate-leaf="true" data-offset-key="19426:0" data-first-offset="true"><span data-slate-string="true">执行 go mod 子命令修改。</span></span></span></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19427"><span data-slate-object="text" data-key="19428"><span data-slate-leaf="true" data-offset-key="19428:0" data-first-offset="true"><span data-slate-string="true">在实际使用中，我建议你采用第三种修改方法，和其他两种相比不太容易出错。使用方式如下：</span></span></span></div><div data-code-language="bash" data-slate-type="pre" data-slate-object="block" data-key="19429"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div><div data-code-line-number="4"></div><div data-code-line-number="5"></div><div data-code-line-number="6"></div><div data-code-line-number="7"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="19430"><span data-slate-object="text" data-key="19431"><span data-slate-leaf="true" data-offset-key="19431:0" data-first-offset="true"><span data-slate-string="true">go mod edit -</span></span></span><span data-slate-object="text" data-key="19432"><span data-slate-leaf="true" data-offset-key="19432:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">fmt</span></span></span></span><span data-slate-object="text" data-key="19433"><span data-slate-leaf="true" data-offset-key="19433:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="19434"><span data-slate-leaf="true" data-offset-key="19434:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"># go.mod 格式化</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="19435"><span data-slate-object="text" data-key="19436"><span data-slate-leaf="true" data-offset-key="19436:0" data-first-offset="true"><span data-slate-string="true">go mod edit -require=golang.org/x/text@v0.3.3  </span></span></span><span data-slate-object="text" data-key="19437"><span data-slate-leaf="true" data-offset-key="19437:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"># 添加一个依赖</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="19438"><span data-slate-object="text" data-key="19439"><span data-slate-leaf="true" data-offset-key="19439:0" data-first-offset="true"><span data-slate-string="true">go mod edit -droprequire=golang.org/x/text </span></span></span><span data-slate-object="text" data-key="19440"><span data-slate-leaf="true" data-offset-key="19440:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"># require 的反向操作，移除一个依赖</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="19441"><span data-slate-object="text" data-key="19442"><span data-slate-leaf="true" data-offset-key="19442:0" data-first-offset="true"><span data-slate-string="true">go mod edit -replace=github.com/gin-gonic/gin=/home/colin/gin </span></span></span><span data-slate-object="text" data-key="19443"><span data-slate-leaf="true" data-offset-key="19443:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"># 替换模块版本</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="19444"><span data-slate-object="text" data-key="19445"><span data-slate-leaf="true" data-offset-key="19445:0" data-first-offset="true"><span data-slate-string="true">go mod edit -dropreplace=github.com/gin-gonic/gin </span></span></span><span data-slate-object="text" data-key="19446"><span data-slate-leaf="true" data-offset-key="19446:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"># replace 的反向操作</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="19447"><span data-slate-object="text" data-key="19448"><span data-slate-leaf="true" data-offset-key="19448:0" data-first-offset="true"><span data-slate-string="true">go mod edit -exclude=golang.org/x/text@v0.3.1 </span></span></span><span data-slate-object="text" data-key="19449"><span data-slate-leaf="true" data-offset-key="19449:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"># 排除一个特定的模块版本</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="19450"><span data-slate-object="text" data-key="19451"><span data-slate-leaf="true" data-offset-key="19451:0" data-first-offset="true"><span data-slate-string="true">go mod edit -dropexclude=golang.org/x/text@v0.3.1 </span></span></span><span data-slate-object="text" data-key="19452"><span data-slate-leaf="true" data-offset-key="19452:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"># exclude 的反向操作</span></span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><h3 data-slate-type="heading" data-slate-object="block" data-key="19453" id="sr-toc-17"><span data-slate-object="text" data-key="19454"><span data-slate-leaf="true" data-offset-key="19454:0" data-first-offset="true"><span data-slate-string="true">go.sum 文件介绍</span></span></span></h3><div data-slate-type="paragraph" data-slate-object="block" data-key="19455"><span data-slate-object="text" data-key="19456"><span data-slate-leaf="true" data-offset-key="19456:0" data-first-offset="true"><span data-slate-string="true">Go 会根据 go.mod 文件中记载的依赖包及其版本下载包源码，但是下载的包可能被篡改，缓存在本地的包也可能被篡改。单单一个 go.mod 文件，不能保证包的一致性。为了解决这个潜在的安全问题，Go Modules 引入了 go.sum 文件。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19457"><span data-slate-object="text" data-key="19458"><span data-slate-leaf="true" data-offset-key="19458:0" data-first-offset="true"><span data-slate-string="true">go.sum 文件用来记录每个依赖包的 hash 值，在构建时，如果本地的依赖包 hash 值与</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19459"><span data-slate-object="text" data-key="19460"><span data-slate-leaf="true" data-offset-key="19460:0" data-first-offset="true"><span data-slate-string="true"> go.sum</span></span></span></span><span data-slate-object="text" data-key="19461"><span data-slate-leaf="true" data-offset-key="19461:0" data-first-offset="true"><span data-slate-string="true"> 文件中记录的不一致，则会拒绝构建。go.sum 中记录的依赖包是所有的依赖包，包括间接和直接的依赖包。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19462"><span data-slate-object="text" data-key="19463"><span data-slate-leaf="true" data-offset-key="19463:0" data-first-offset="true"><span data-slate-string="true">这里提示下，为了避免已缓存的模块被更改，</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19464"><span data-slate-object="text" data-key="19465"><span data-slate-leaf="true" data-offset-key="19465:0" data-first-offset="true"><span data-slate-string="true">$GOPATH/pkg/mod</span></span></span></span><span data-slate-object="text" data-key="19466"><span data-slate-leaf="true" data-offset-key="19466:0" data-first-offset="true"><span data-slate-string="true"> 下缓存的包是只读的，不允许修改。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19467"><span data-slate-object="text" data-key="19468"><span data-slate-leaf="true" data-offset-key="19468:0" data-first-offset="true"><span data-slate-string="true">接下来我从 go.sum 文件内容、go.sum 文件生成、校验三个方面来介绍 go.sum。</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="19469"><div data-slate-type="list-line" data-slate-object="block" data-key="19470"><div data-code-line-number="1"></div><div><span data-slate-object="text" data-key="19471"><span data-slate-leaf="true" data-offset-key="19471:0" data-first-offset="true"><span data-slate-string="true">go.sum 文件内容</span></span></span></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19472"><span data-slate-object="text" data-key="19473"><span data-slate-leaf="true" data-offset-key="19473:0" data-first-offset="true"><span data-slate-string="true">下面是一个 go.sum 文件的内容：</span></span></span></div><div data-code-language="bash" data-slate-type="pre" data-slate-object="block" data-key="19474"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div><div data-code-line-number="4"></div><div data-code-line-number="5"></div><div data-code-line-number="6"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="19475"><span data-slate-object="text" data-key="19476"><span data-slate-leaf="true" data-offset-key="19476:0" data-first-offset="true"><span data-slate-string="true">golang.org/x/text v0.0.0-20170915032832-14c0d48ead0c h1:qgOY6WgZOaTkIIMiVjBQcw93ERBE4m30iBm00nkL0i8=</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="19477"><span data-slate-object="text" data-key="19478"><span data-slate-leaf="true" data-offset-key="19478:0" data-first-offset="true"><span data-slate-string="true">golang.org/x/text v0.0.0-20170915032832-14c0d48ead0c/go.mod h1:NqM8EUOU14njkJ3fqMW+pc6Ldnwhi/IjpwHt7yyuwOQ=</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="19479"><span data-slate-object="text" data-key="19480"><span data-slate-leaf="true" data-offset-key="19480:0" data-first-offset="true"><span data-slate-string="true">rsc.io/quote v1.5.2 h1:w5fcysjrx7yqtD/aO+QwRjYZOKnaM9Uh2b40tElTs3Y=</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="19481"><span data-slate-object="text" data-key="19482"><span data-slate-leaf="true" data-offset-key="19482:0" data-first-offset="true"><span data-slate-string="true">rsc.io/quote v1.5.2/go.mod h1:LzX7hefJvL54yjefDEDHNONDjII0t9xZLPXsUe+TKr0=</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="19483"><span data-slate-object="text" data-key="19484"><span data-slate-leaf="true" data-offset-key="19484:0" data-first-offset="true"><span data-slate-string="true">rsc.io/sampler v1.3.0 h1:7uVkIFmeBqHfdjD+gZwtXXI+RODJ2Wc4O7MPEh/QiW4=</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="19485"><span data-slate-object="text" data-key="19486"><span data-slate-leaf="true" data-offset-key="19486:0" data-first-offset="true"><span data-slate-string="true">rsc.io/sampler v1.3.0/go.mod h1:T1hPZKmBbMNahiBKFy5HrXp6adAjACjK9JXDnKaTXpA=</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19487"><span data-slate-object="text" data-key="19488"><span data-slate-leaf="true" data-offset-key="19488:0" data-first-offset="true"><span data-slate-string="true">go.sum 文件中，每行记录由模块名、版本、哈希算法和哈希值组成，如</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19489"><span data-slate-object="text" data-key="19490"><span data-slate-leaf="true" data-offset-key="19490:0" data-first-offset="true"><span data-slate-string="true"> &lt;module&gt; &lt;version&gt;[/go.mod] &lt;algorithm&gt;:&lt;hash&gt;</span></span></span></span><span data-slate-object="text" data-key="19491"><span data-slate-leaf="true" data-offset-key="19491:0" data-first-offset="true"><span data-slate-string="true">。目前，从 Go1.11 到 Go1.14 版本，只有一个算法 SHA-256，用 h1 表示。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19492"><span data-slate-object="text" data-key="19493"><span data-slate-leaf="true" data-offset-key="19493:0" data-first-offset="true"><span data-slate-string="true">正常情况下，每个依赖包会包含两条记录，分别是依赖包所有文件的哈希值和该依赖包 go.mod 的哈希值，例如：</span></span></span></div><div data-code-language="bash" data-slate-type="pre" data-slate-object="block" data-key="19494"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="19495"><span data-slate-object="text" data-key="19496"><span data-slate-leaf="true" data-offset-key="19496:0" data-first-offset="true"><span data-slate-string="true">rsc.io/quote v1.5.2 h1:w5fcysjrx7yqtD/aO+QwRjYZOKnaM9Uh2b40tElTs3Y=</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="19497"><span data-slate-object="text" data-key="19498"><span data-slate-leaf="true" data-offset-key="19498:0" data-first-offset="true"><span data-slate-string="true">rsc.io/quote v1.5.2/go.mod h1:LzX7hefJvL54yjefDEDHNONDjII0t9xZLPXsUe+TKr0=</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19499"><span data-slate-object="text" data-key="19500"><span data-slate-leaf="true" data-offset-key="19500:0" data-first-offset="true"><span data-slate-string="true">但是，如果一个依赖包没有 go.mod 文件，就只记录依赖包所有文件的哈希值，也就是只有第一条记录。额外记录 go.mod 的哈希值，主要是为了在计算依赖树时不必下载完整的依赖包版本，只根据 go.mod 即可计算依赖树。</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="19501"><div data-slate-type="list-line" data-slate-object="block" data-key="19502"><div data-code-line-number="2"></div><div><span data-slate-object="text" data-key="19503"><span data-slate-leaf="true" data-offset-key="19503:0" data-first-offset="true"><span data-slate-string="true">go.sum 文件生成</span></span></span></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19504"><span data-slate-object="text" data-key="19505"><span data-slate-leaf="true" data-offset-key="19505:0" data-first-offset="true"><span data-slate-string="true">在 Go Modules 开启时，如果我们的项目需要引入一个新的包，通常会执行</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19506"><span data-slate-object="text" data-key="19507"><span data-slate-leaf="true" data-offset-key="19507:0" data-first-offset="true"><span data-slate-string="true"> go get</span></span></span></span><span data-slate-object="text" data-key="19508"><span data-slate-leaf="true" data-offset-key="19508:0" data-first-offset="true"><span data-slate-string="true"> 命令，例如：</span></span></span></div><div data-code-language="bash" data-slate-type="pre" data-slate-object="block" data-key="19509"><div><span></span></div><div><div data-code-line-number="1"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="19510"><span data-slate-object="text" data-key="19511"><span data-slate-leaf="true" data-offset-key="19511:0" data-first-offset="true"><span data-slate-string="true">$ go get rsc.io/quote</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19512"><span data-slate-object="text" data-key="19513"><span data-slate-leaf="true" data-offset-key="19513:0" data-first-offset="true"><span data-slate-string="true">当执行</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19514"><span data-slate-object="text" data-key="19515"><span data-slate-leaf="true" data-offset-key="19515:0" data-first-offset="true"><span data-slate-string="true"> go get rsc.io/quote</span></span></span></span><span data-slate-object="text" data-key="19516"><span data-slate-leaf="true" data-offset-key="19516:0" data-first-offset="true"><span data-slate-string="true"> 命令后，</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19517"><span data-slate-object="text" data-key="19518"><span data-slate-leaf="true" data-offset-key="19518:0" data-first-offset="true"><span data-slate-string="true">go get</span></span></span></span><span data-slate-object="text" data-key="19519"><span data-slate-leaf="true" data-offset-key="19519:0" data-first-offset="true"><span data-slate-string="true"> 命令会先将依赖包下载到</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19520"><span data-slate-object="text" data-key="19521"><span data-slate-leaf="true" data-offset-key="19521:0" data-first-offset="true"><span data-slate-string="true"> $GOPATH/pkg/mod/cache/download</span></span></span></span><span data-slate-object="text" data-key="19522"><span data-slate-leaf="true" data-offset-key="19522:0" data-first-offset="true"><span data-slate-string="true">，下载的依赖包文件名格式为</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19523"><span data-slate-object="text" data-key="19524"><span data-slate-leaf="true" data-offset-key="19524:0" data-first-offset="true"><span data-slate-string="true"> $version.zip</span></span></span></span><span data-slate-object="text" data-key="19525"><span data-slate-leaf="true" data-offset-key="19525:0" data-first-offset="true"><span data-slate-string="true">，例如</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19526"><span data-slate-object="text" data-key="19527"><span data-slate-leaf="true" data-offset-key="19527:0" data-first-offset="true"><span data-slate-string="true"> v1.5.2.zip</span></span></span></span><span data-slate-object="text" data-key="19528"><span data-slate-leaf="true" data-offset-key="19528:0" data-first-offset="true"><span data-slate-string="true">。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19529"><span data-slate-object="text" data-key="19530"><span data-slate-leaf="true" data-offset-key="19530:0" data-first-offset="true"><span data-slate-string="true">下载完成之后，</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19531"><span data-slate-object="text" data-key="19532"><span data-slate-leaf="true" data-offset-key="19532:0" data-first-offset="true"><span data-slate-string="true">go get</span></span></span></span><span data-slate-object="text" data-key="19533"><span data-slate-leaf="true" data-offset-key="19533:0" data-first-offset="true"><span data-slate-string="true"> 会对该 zip 包做哈希运算，并将结果存在</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19534"><span data-slate-object="text" data-key="19535"><span data-slate-leaf="true" data-offset-key="19535:0" data-first-offset="true"><span data-slate-string="true"> $version.ziphash</span></span></span></span><span data-slate-object="text" data-key="19536"><span data-slate-leaf="true" data-offset-key="19536:0" data-first-offset="true"><span data-slate-string="true"> 文件中，例如</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19537"><span data-slate-object="text" data-key="19538"><span data-slate-leaf="true" data-offset-key="19538:0" data-first-offset="true"><span data-slate-string="true"> v1.5.2.ziphash</span></span></span></span><span data-slate-object="text" data-key="19539"><span data-slate-leaf="true" data-offset-key="19539:0" data-first-offset="true"><span data-slate-string="true">。如果在项目根目录下执行</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19540"><span data-slate-object="text" data-key="19541"><span data-slate-leaf="true" data-offset-key="19541:0" data-first-offset="true"><span data-slate-string="true"> go get</span></span></span></span><span data-slate-object="text" data-key="19542"><span data-slate-leaf="true" data-offset-key="19542:0" data-first-offset="true"><span data-slate-string="true"> 命令，</span></span><span data-slate-leaf="true" data-offset-key="19542:1"><span data-slate-object="annotation" data-annotation-key="gkann_969389fc" data-attr-id="35727" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">则</span></span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19543"><span data-slate-object="text" data-key="19544"><span data-slate-leaf="true" data-offset-key="19544:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_969389fc" data-attr-id="35727" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true"> go get</span></span></span></span></span><span data-slate-object="text" data-key="19545"><span data-slate-leaf="true" data-offset-key="19545:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_969389fc" data-attr-id="35727" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true"> 会同时更新 go.mod 和 go.sum 文件。</span></span></span><span data-slate-leaf="true" data-offset-key="19545:1"><span data-slate-string="true">例如，go.mod 新增一行</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19546"><span data-slate-object="text" data-key="19547"><span data-slate-leaf="true" data-offset-key="19547:0" data-first-offset="true"><span data-slate-string="true"> require rsc.io/quote v1.5.2</span></span></span></span><span data-slate-object="text" data-key="19548"><span data-slate-leaf="true" data-offset-key="19548:0" data-first-offset="true"><span data-slate-string="true">，go.sum 新增两行：</span></span></span></div><div data-code-language="bash" data-slate-type="pre" data-slate-object="block" data-key="19549"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="19550"><span data-slate-object="text" data-key="19551"><span data-slate-leaf="true" data-offset-key="19551:0" data-first-offset="true"><span data-slate-string="true">rsc.io/quote v1.5.2 h1:w5fcysjrx7yqtD/aO+QwRjYZOKnaM9Uh2b40tElTs3Y=</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="19552"><span data-slate-object="text" data-key="19553"><span data-slate-leaf="true" data-offset-key="19553:0" data-first-offset="true"><span data-slate-string="true">rsc.io/quote v1.5.2/go.mod h1:LzX7hefJvL54yjefDEDHNONDjII0t9xZLPXsUe+TKr0=</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="list" data-slate-object="block" data-key="19554"><div data-slate-type="list-line" data-slate-object="block" data-key="19555"><div data-code-line-number="3"></div><div><span data-slate-object="text" data-key="19556"><span data-slate-leaf="true" data-offset-key="19556:0" data-first-offset="true"><span data-slate-string="true">校验</span></span></span></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19557"><span data-slate-object="text" data-key="19558"><span data-slate-leaf="true" data-offset-key="19558:0" data-first-offset="true"><span data-slate-string="true">在我们执行构建时，go 命令会从本地缓存中查找所有的依赖包，并计算这些依赖包的哈希值，然后与 go.sum 中记录的哈希值进行对比。如果哈希值不一致，则校验失败，停止构建。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19559"><span data-slate-object="text" data-key="19560"><span data-slate-leaf="true" data-offset-key="19560:0" data-first-offset="true"><span data-slate-string="true">校验失败可能是因为本地指定版本的依赖包被修改过，也可能是 go.sum 中记录的哈希值是错误的。但是 Go 命令倾向于相信依赖包被修改过，因为当我们在 go get 依赖包时，包的哈希值会经过校验和数据库（checksum database）进行校验，校验通过才会被加入到 go.sum 文件中。也就是说，go.sum 文件中记录的哈希值是可信的。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19561"><span data-slate-object="text" data-key="19562"><span data-slate-leaf="true" data-offset-key="19562:0" data-first-offset="true"><span data-slate-string="true">校验和数据库可以通过环境变量</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19563"><span data-slate-object="text" data-key="19564"><span data-slate-leaf="true" data-offset-key="19564:0" data-first-offset="true"><span data-slate-string="true"> GOSUMDB</span></span></span></span><span data-slate-object="text" data-key="19565"><span data-slate-leaf="true" data-offset-key="19565:0" data-first-offset="true"><span data-slate-string="true"> 指定，</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19566"><span data-slate-object="text" data-key="19567"><span data-slate-leaf="true" data-offset-key="19567:0" data-first-offset="true"><span data-slate-string="true">GOSUMDB</span></span></span></span><span data-slate-object="text" data-key="19568"><span data-slate-leaf="true" data-offset-key="19568:0" data-first-offset="true"><span data-slate-string="true"> 的值是一个 web 服务器，默认值是</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19569"><span data-slate-object="text" data-key="19570"><span data-slate-leaf="true" data-offset-key="19570:0" data-first-offset="true"><span data-slate-string="true"> sum.golang.org</span></span></span></span><span data-slate-object="text" data-key="19571"><span data-slate-leaf="true" data-offset-key="19571:0" data-first-offset="true"><span data-slate-string="true">。该服务可以用来查询依赖包指定版本的哈希值，保证拉取到的模块版本数据没有经过篡改。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19572"><span data-slate-object="text" data-key="19573"><span data-slate-leaf="true" data-offset-key="19573:0" data-first-offset="true"><span data-slate-string="true">如果设置</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19574"><span data-slate-object="text" data-key="19575"><span data-slate-leaf="true" data-offset-key="19575:0" data-first-offset="true"><span data-slate-string="true"> GOSUMDB</span></span></span></span><span data-slate-object="text" data-key="19576"><span data-slate-leaf="true" data-offset-key="19576:0" data-first-offset="true"><span data-slate-string="true"> 为</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19577"><span data-slate-object="text" data-key="19578"><span data-slate-leaf="true" data-offset-key="19578:0" data-first-offset="true"><span data-slate-string="true"> off</span></span></span></span><span data-slate-object="text" data-key="19579"><span data-slate-leaf="true" data-offset-key="19579:0" data-first-offset="true"><span data-slate-string="true">，或者使用</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19580"><span data-slate-object="text" data-key="19581"><span data-slate-leaf="true" data-offset-key="19581:0" data-first-offset="true"><span data-slate-string="true"> go get</span></span></span></span><span data-slate-object="text" data-key="19582"><span data-slate-leaf="true" data-offset-key="19582:0" data-first-offset="true"><span data-slate-string="true"> 的时候启用了</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19583"><span data-slate-object="text" data-key="19584"><span data-slate-leaf="true" data-offset-key="19584:0" data-first-offset="true"><span data-slate-string="true"> -insecure</span></span></span></span><span data-slate-object="text" data-key="19585"><span data-slate-leaf="true" data-offset-key="19585:0" data-first-offset="true"><span data-slate-string="true"> 参数，Go 就不会去对下载的依赖包做安全校验，这存在一定的安全隐患，所以我建议你开启校验和数据库。如果对安全性要求很高，同时又访问不了</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19586"><span data-slate-object="text" data-key="19587"><span data-slate-leaf="true" data-offset-key="19587:0" data-first-offset="true"><span data-slate-string="true"> sum.golang.org</span></span></span></span><span data-slate-object="text" data-key="19588"><span data-slate-leaf="true" data-offset-key="19588:0" data-first-offset="true"><span data-slate-string="true">，你也可以搭建自己的校验和数据库。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19589"><span data-slate-object="text" data-key="19590"><span data-slate-leaf="true" data-offset-key="19590:0" data-first-offset="true"><span data-slate-string="true">值得注意的是，Go checksum database 可以被 Go module proxy 代理，所以当我们设置了</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19591"><span data-slate-object="text" data-key="19592"><span data-slate-leaf="true" data-offset-key="19592:0" data-first-offset="true"><span data-slate-string="true"> GOPROXY</span></span></span></span><span data-slate-object="text" data-key="19593"><span data-slate-leaf="true" data-offset-key="19593:0" data-first-offset="true"><span data-slate-string="true"> 后，通常情况下不用再设置</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19594"><span data-slate-object="text" data-key="19595"><span data-slate-leaf="true" data-offset-key="19595:0" data-first-offset="true"><span data-slate-string="true"> GOSUMDB</span></span></span></span><span data-slate-object="text" data-key="19596"><span data-slate-leaf="true" data-offset-key="19596:0" data-first-offset="true"><span data-slate-string="true">。还要注意的是，go.sum 文件也应该提交到你的 Git 仓库中去。</span></span></span></div><h2 data-slate-type="heading" data-slate-object="block" data-key="19597" id="sr-toc-18"><span data-slate-object="text" data-key="19598"><span data-slate-leaf="true" data-offset-key="19598:0" data-first-offset="true"><span data-slate-string="true">模块下载流程</span></span></span></h2><div data-slate-type="paragraph" data-slate-object="block" data-key="19599"><span data-slate-object="text" data-key="19600"><span data-slate-leaf="true" data-offset-key="19600:0" data-first-offset="true"><span data-slate-string="true">上面，我介绍了模块下载的整体流程，还介绍了 go.mod 和 go.sum 这两个文件。因为内容比较多，这里用一张图片来做个总结：</span></span></span></div><div data-slate-type="image" data-slate-object="block" data-key="19601"><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://static001.geekbang.org/resource/image/8b/8d/8b92e53cebd4373f8c41fdbe9328ba8d.jpg?wh=2248x1077"></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19602"><span data-slate-object="text" data-key="19603"><span data-slate-leaf="true" data-offset-key="19603:0" data-first-offset="true"><span data-slate-string="true">最后还想介绍下 Go&nbsp;modules 的全局缓存。Go&nbsp;modules 中，相同版本的模块只会缓存一份，其他所有模块公用。目前，所有模块版本数据都缓存在 </span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19604"><span data-slate-object="text" data-key="19605"><span data-slate-leaf="true" data-offset-key="19605:0" data-first-offset="true"><span data-slate-string="true">$GOPATH/pkg/mod</span></span></span></span><span data-slate-object="text" data-key="19606"><span data-slate-leaf="true" data-offset-key="19606:0" data-first-offset="true"><span data-slate-string="true"> 和 </span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19607"><span data-slate-object="text" data-key="19608"><span data-slate-leaf="true" data-offset-key="19608:0" data-first-offset="true"><span data-slate-string="true">$GOPATH/pkg/sum</span></span></span></span><span data-slate-object="text" data-key="19609"><span data-slate-leaf="true" data-offset-key="19609:0" data-first-offset="true"><span data-slate-string="true"> 下，未来有可能移到 </span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19610"><span data-slate-object="text" data-key="19611"><span data-slate-leaf="true" data-offset-key="19611:0" data-first-offset="true"><span data-slate-string="true">$GOCACHE/mod</span></span></span></span><span data-slate-object="text" data-key="19612"><span data-slate-leaf="true" data-offset-key="19612:0" data-first-offset="true"><span data-slate-string="true"> 和 </span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19613"><span data-slate-object="text" data-key="19614"><span data-slate-leaf="true" data-offset-key="19614:0" data-first-offset="true"><span data-slate-string="true">$GOCACHE/sum</span></span></span></span><span data-slate-object="text" data-key="19615"><span data-slate-leaf="true" data-offset-key="19615:0" data-first-offset="true"><span data-slate-string="true"> 下，我认为这可能发生在 </span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19616"><span data-slate-object="text" data-key="19617"><span data-slate-leaf="true" data-offset-key="19617:0" data-first-offset="true"><span data-slate-string="true">GOPATH</span></span></span></span><span data-slate-object="text" data-key="19618"><span data-slate-leaf="true" data-offset-key="19618:0" data-first-offset="true"><span data-slate-string="true"> 被淘汰后。你可以使用 </span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19619"><span data-slate-object="text" data-key="19620"><span data-slate-leaf="true" data-offset-key="19620:0" data-first-offset="true"><span data-slate-string="true">go clean -modcache</span></span></span></span><span data-slate-object="text" data-key="19621"><span data-slate-leaf="true" data-offset-key="19621:0" data-first-offset="true"><span data-slate-string="true"> 清除所有的缓存。</span></span></span></div><h2 data-slate-type="heading" data-slate-object="block" data-key="19622" id="sr-toc-19"><span data-slate-object="text" data-key="19623"><span data-slate-leaf="true" data-offset-key="19623:0" data-first-offset="true"><span data-slate-string="true">总结</span></span></span></h2><div data-slate-type="paragraph" data-slate-object="block" data-key="19624"><span data-slate-object="text" data-key="19625"><span data-slate-leaf="true" data-offset-key="19625:0" data-first-offset="true"><span data-slate-string="true">Go 依赖包管理是 Go 语言中一个重点的功能。在 Go1.11 版本之前，并没有官方的依赖包管理工具，业界虽然存在多个 Go 依赖包管理方案，但效果都不理想。直到 Go1.11 版本，Go 才推出了官方的依赖包管理工具，Go Modules。这也是我建议你在进行 Go 项目开发时选择的依赖包管理工具。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19626"><span data-slate-object="text" data-key="19627"><span data-slate-leaf="true" data-offset-key="19627:0" data-first-offset="true"><span data-slate-string="true">Go Modules 提供了 </span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19628"><span data-slate-object="text" data-key="19629"><span data-slate-leaf="true" data-offset-key="19629:0" data-first-offset="true"><span data-slate-string="true">go mod</span></span></span></span><span data-slate-object="text" data-key="19630"><span data-slate-leaf="true" data-offset-key="19630:0" data-first-offset="true"><span data-slate-string="true"> 命令，来管理 Go 的依赖包。 </span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="19631"><span data-slate-object="text" data-key="19632"><span data-slate-leaf="true" data-offset-key="19632:0" data-first-offset="true"><span data-slate-string="true">go mod</span></span></span></span><span data-slate-object="text" data-key="19633"><span data-slate-leaf="true" data-offset-key="19633:0" data-first-offset="true"><span data-slate-string="true"> 有很多子命令，这些子命令可以完成不同的功能。例如，初始化当前目录为一个新模块，添加丢失的模块，移除无用的模块，等等。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19634"><span data-slate-object="text" data-key="19635"><span data-slate-leaf="true" data-offset-key="19635:0" data-first-offset="true"><span data-slate-string="true">在 Go Modules 中，有两个非常重要的文件：go.mod 和 go.sum。go.mod 文件是 Go Modules 的核心文件，Go 会根据 go.mod 文件中记载的依赖包及其版本下载包源码。go.sum 文件用来记录每个依赖包的 hash 值，在构建时，如果本地的依赖包 hash 值与 go.sum 文件中记录的不一致，就会拒绝构建。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19636"><span data-slate-object="text" data-key="19637"><span data-slate-leaf="true" data-offset-key="19637:0" data-first-offset="true"><span data-slate-string="true">Go 在下载依赖包时，可以通过代理来下载，也可以指定版本号下载。如果不指定版本号，Go Modules 会根据自定义的规则，选择最小版本来下载。</span></span></span></div><h2 data-slate-type="heading" data-slate-object="block" data-key="19638" id="sr-toc-20"><span data-slate-object="text" data-key="19639"><span data-slate-leaf="true" data-offset-key="19639:0" data-first-offset="true"><span data-slate-string="true">课后练习</span></span></span></h2><div data-slate-type="list" data-slate-object="block" data-key="19640"><div data-slate-type="list-line" data-slate-object="block" data-key="19641"><div data-code-line-number="1"></div><div><span data-slate-object="text" data-key="19642"><span data-slate-leaf="true" data-offset-key="19642:0" data-first-offset="true"><span data-slate-string="true">思考下，如果不提交 go.sum，会有什么风险？</span></span></span></div></div><div data-slate-type="list-line" data-slate-object="block" data-key="19643"><div data-code-line-number="2"></div><div><span data-slate-object="text" data-key="19644"><span data-slate-leaf="true" data-offset-key="19644:0" data-first-offset="true"><span data-slate-string="true">找一个没有使用 Go Modules 管理依赖包的 Go 项目，把它的依赖包管理方式切换为 Go Modules。</span></span></span></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="19645"><span data-slate-object="text" data-key="19646"><span data-slate-leaf="true" data-offset-key="19646:0" data-first-offset="true"><span data-slate-string="true">欢迎你在留言区与我交流讨论，我们下一讲见。</span></span></span></div></div></div></div><div><div></div><div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><textarea placeholder="将学到的知识总结成笔记，方便日后快速查找及复习"></textarea></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div><div><div>确认放弃笔记？</div><div>放弃后所记笔记将不保留。</div></div><div><div>新功能上线，你的历史笔记已初始化为私密笔记，是否一键批量公开？</div><div>批量公开的笔记不会为你同步至部落</div></div><div></div></div><div><div><div>公开</div><div>同步至部落</div></div><div>取消</div><div>完成</div></div><div><span>0/2000</span></div></div><div><div><span>划线</span></div><div></div><div></div><div></div><div><span>笔记</span></div><div></div><div><span>复制</span></div></div></div><div><div><div><span></span></div><p><span>12</span> 人觉得很赞<a href="javascript:void(0);">给文章提建议</a></p></div></div><div><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://static001.geekbang.org/resource/image/1f/81/1f6c18433af717a740f1e49389f2f981.png"></div></div><div><span>©</span> 版权归极客邦科技所有，未经许可不得传播售卖。 页面已增加防盗追踪，如有侵权极客邦将依法追究其法律责任。 </div></div><div><div><div class="sr-rd-content-center-small"><img class="" src="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABkAAD/4QN5aHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0MCA3OS4xNjA0NTEsIDIwMTcvMDUvMDYtMDE6MDg6MjEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YWE3YmZhMDItMzBhMC00MDg3LTg3MmYtOGMwMjMxNjNhZWRjIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjI2MTlEODM3NTgzMTExRTk5NDY4Qjk3QUFCNDFBN0QzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI2MTlEODM2NTgzMTExRTk5NDY4Qjk3QUFCNDFBN0QzIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTYyRTNCMDNBREI4MTFFOEFFNTJDODlGREQ1OTUzMDMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OTYyRTNCMDRBREI4MTFFOEFFNTJDODlGREQ1OTUzMDMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRm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"></div><div>Geek__653581f21177</div></div><div><textarea placeholder="由作者筛选后的优质留言将会公开显示，欢迎踊跃留言。" rows="16"></textarea></div><div><div>Ctrl + Enter 发表</div><div>0/2000 字符</div><div>提交留言</div></div></div><div><h2 id="sr-toc-21">精选留言 (11)</h2><ul><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/28/1d/69/c21d2644.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div></div><div><div><div><span>josephzxy</span></div><span>置顶</span></div><div>“思考下，如果不提交 go.sum，会有什么风险？”
如果 go get 时，GOSUMDB=off，就没有办法校验下载的包是否被篡改。

推荐两篇博文可做辅助阅读
https://zaracooper.github.io/blog/posts/go-module-tidbits/
https://insujang.github.io/2020-04-04/go-modules/</div><div><p>作者回复：老哥，回答给满分～</p></div><div><div>2021-09-09</div><div><div><i></i><span>3</span></div><div><i></i><span>8</span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/10/dd/09/feca820a.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div></div><div><div><div><span>helloworld</span></div></div><div>分析的真细致，厉害👍</div><div><div>2021-09-10</div><div><div><i></i><span></span></div><div><i></i><span>2</span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/1e/f5/0b/73628618.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div></div><div><div><div><span> 兔嘟嘟</span></div></div><div>解惑了，整个中文互联网上都没这样好好讲 go module 的，至少我没找到。导致我一开始搞项目的时候，在某个地方纠结了好久</div><div><div>2021-12-19</div><div><div><i></i><span></span></div><div><i></i><span>1</span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/11/ed/0a/18201290.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div></div><div><div><div><span>Juniper</span></div></div><div>问下老师，go get 和 go mod download 的场景有什么不一样吗，不太明天 go mod download 这个命令的场景
</div><div><p>作者回复: go get 是下载单个包。


go mod download 是下载 go.mod 中记录的包（1 个 / 多个）</p></div><div><div>2021-09-30</div><div><div><i></i></div><div><i></i><span>2</span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLDUJyeq54fiaXAgF62tNeocO3lHsKT4mygEcNoZLnibg6ONKicMgCgUHSfgW8hrMUXlwpNSzR8MHZwg/132"></div><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_28"></div></div><div><div><div><span>types</span></div></div><div>go get 如何拉取指定分支的指定 commit id</div><div><p>作者回复：还不支持指定 commit id get</p></div><div><div>2021-09-24</div><div><div><i></i></div><div><i></i><span>2</span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_28"></div></div><div><div><div><span> 一步</span><span><div class="sr-rd-content-center"><img class="" src="https://static001.geekbang.org/resource/image/89/43/89yyff4c4c2e2b73ce4931bb01a6a943.png"></div></span></div></div><div>最后一个流程图中， GOSUMDB=off 的时候，还会和 go.sum 文件中的 hash 做对比吗？</div><div><p>作者回复：不会的</p></div><div><div>2022-04-01</div><div><div><i></i></div><div><i></i><span></span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_28"></div></div><div><div><div><span>一步</span><span><div class="sr-rd-content-center"><img class="" src="https://static001.geekbang.org/resource/image/89/43/89yyff4c4c2e2b73ce4931bb01a6a943.png"></div></span></div></div><div>开启 go module 的环境变量 GO1111MODULE 为什么中间有 3 个 1？</div><div><p>作者回复：应该是 GO1.11 的意思</p></div><div><div>2022-04-01</div><div><div><i></i></div><div><i></i><span></span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://thirdwx.qlogo.cn/mmopen/vi_32/Ge7uhlEVxicQT73YuomDPrVKI8UmhqxKWrhtO5GMNlFjrHWfd3HAjgaSribR4Pzorw8yalYGYqJI4VPvUyPzicSKg/132"></div><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_28"></div></div><div><div><div><span>陈东</span></div></div><div>goland 构建 module 并引用方包 logrus，能 go run 代码，但是 logrus.Println 中的（Println ）一直显示红色报错，尝试很多办法，解决
go 构建约束问题，错误提示是 Build constraints exclude all Go files in c：代码目录文件夹？
尝试以下办法解决不了
1、searcheverything 搜索后删除所有包，
$GOPATH 目录下，把对应的包删除，重新 go get, 还是不行.
2、go get -u -v github.com/karalabe/xgo
3、Right click -&gt; Mark folder as not excluded.
4、引用包报错，重启电脑，查看 goproxy 配置，重装 goland 等等都解决不了。
怎么解决，希望得到老师帮助，谢谢。</div><div><p>作者回复：试试执行以下命令重新再构建下：
export CGO_ENABLED=1 
export GOOS=linux</p></div><div><div>2021-12-18</div><div><div><i></i></div><div><i></i><span></span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJkOj8VUxLjDKp6jRWJrABnnsg7U1sMSkM8FO6ULPwrqNpicZvTQ7kwctmu38iaJYHybXrmbusd8trg/132"></div></div><div><div><div><span>yss</span></div></div><div>如果不提交 go.sum，会有什么风险？

当别人使用项目并下载依赖时，无法验证他们使用的依赖和你开发时的依赖是否一致，存在下载到被篡改代码的风险</div><div><p>作者回复：对的，是这个风险。</p></div><div><div>2021-10-28</div><div><div><i></i></div><div><i></i><span></span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLDUJyeq54fiaXAgF62tNeocO3lHsKT4mygEcNoZLnibg6ONKicMgCgUHSfgW8hrMUXlwpNSzR8MHZwg/132"></div><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_28"></div></div><div><div><div><span>types</span></div></div><div>go build 或者 go run 的时候，如果依赖包都已经下载到 pkg/mod 下了，还会进行校验吗？？
自己测试了下已经是不会校验的</div><div><p>作者回复：不会校验的，缓存中的文件时只读的，所以只需要校验一次</p></div><div><div>2021-09-24</div><div><div><i></i></div><div><i></i><span></span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/10/dd/09/feca820a.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div></div><div><div><div><span>helloworld</span></div></div><div>“如果不指定版本号，Go Modules 会根据自定义的规则，选择最小版本来下载。”，这里说的最小版本指的是 latest 版本吗</div><div><p>作者回复：不是。

语义化版本号之间是可以对比的，比如：v1.1.1 &lt; v1.1.2。

按语义化版本号对比规则对比后的最小值。</p></div><div><div>2021-09-10</div><div><div><i></i><span>4</span></div><div><i></i><span></span></div></div></div></div></div></li></ul><div> 收起评论<span></span></div></div></sr-rd-content>
                            <toc-bg><toc style="width: initial;overflow: auto!important;"class="simpread-font simpread-theme-root" data-reactid=".1j"><outline class="toc-level-h1" data-reactid=".1j.0" style="width: 175px;"><active data-reactid=".1j.0.0" ></active><a class="toc-outline-theme-github" href="#sr-toc-0" data-reactid=".1j.0.1"><span data-reactid=".1j.0.1.0">特别放送 | Go Modules 依赖包管理全讲</span></a></outline><outline class="toc-level-h2" data-reactid=".1j.1" style="width: 165px;"><active data-reactid=".1j.1.0"></active><pangu> </pangu><a class="toc-outline-theme-github" href="#sr-toc-1" data-reactid=".1j.1.1"><span data-reactid=".1j.1.1.0">Go Modules 简介</span></a></outline><outline class="toc-level-h2" data-reactid=".1j.2" style="width: 165px;"><active data-reactid=".1j.2.0"></active><pangu> </pangu><a class="toc-outline-theme-github" href="#sr-toc-2" data-reactid=".1j.2.1"><span data-reactid=".1j.2.1.0">Go 包管理的历史</span></a></outline><outline class="toc-level-h3" data-reactid=".1j.3" style="width: 155px;"><active data-reactid=".1j.3.0"></active><pangu> </pangu><a class="toc-outline-theme-github" href="#sr-toc-3" data-reactid=".1j.3.1"><span data-reactid=".1j.3.1.0">Go1.5 版本前：GOPATH</span></a></outline><outline class="toc-level-h3" data-reactid=".1j.4" style="width: 155px;"><active data-reactid=".1j.4.0"></active><a class="toc-outline-theme-github" href="#sr-toc-4" data-reactid=".1j.4.1"><span data-reactid=".1j.4.1.0">Go1.5 版本：Vendoring</span></a></outline><outline class="toc-level-h3" data-reactid=".1j.5" style="width: 155px;"><active data-reactid=".1j.5.0"></active><a class="toc-outline-theme-github" href="#sr-toc-5" data-reactid=".1j.5.1"><span data-reactid=".1j.5.1.0">“百花齐放”：多种 Go 依赖包管理工具出现</span></a></outline><outline class="toc-level-h3" data-reactid=".1j.6" style="width: 155px;"><active data-reactid=".1j.6.0"></active><pangu> </pangu><a class="toc-outline-theme-github" href="#sr-toc-6" data-reactid=".1j.6.1"><span data-reactid=".1j.6.1.0">Go1.9 版本：Dep</span></a></outline><outline class="toc-level-h3" data-reactid=".1j.7" style="width: 155px;"><active data-reactid=".1j.7.0"></active><a class="toc-outline-theme-github" href="#sr-toc-7" data-reactid=".1j.7.1"><span data-reactid=".1j.7.1.0">Go1.11 版本之后：Go Modules</span></a></outline><outline class="toc-level-h2" data-reactid=".1j.8" style="width: 165px;"><active data-reactid=".1j.8.0"></active><pangu> </pangu><a class="toc-outline-theme-github" href="#sr-toc-8" data-reactid=".1j.8.1"><span data-reactid=".1j.8.1.0">包（package）和模块（module）</span></a></outline><outline class="toc-level-h2" data-reactid=".1j.9" style="width: 165px;"><active data-reactid=".1j.9.0"></active><a class="toc-outline-theme-github" href="#sr-toc-9" data-reactid=".1j.9.1"><span data-reactid=".1j.9.1.0">Go Modules 命令</span></a></outline><outline class="toc-level-h2" data-reactid=".1j.a" style="width: 165px;"><active data-reactid=".1j.a.0"></active><pangu> </pangu><a class="toc-outline-theme-github" href="#sr-toc-10" data-reactid=".1j.a.1"><span data-reactid=".1j.a.1.0">Go Modules 开关</span></a></outline><outline class="toc-level-h2" data-reactid=".1j.b" style="width: 165px;"><active data-reactid=".1j.b.0"></active><a class="toc-outline-theme-github" href="#sr-toc-11" data-reactid=".1j.b.1"><span data-reactid=".1j.b.1.0">模块下载</span></a></outline><outline class="toc-level-h3" data-reactid=".1j.c" style="width: 155px;"><active data-reactid=".1j.c.0"></active><a class="toc-outline-theme-github" href="#sr-toc-12" data-reactid=".1j.c.1"><span data-reactid=".1j.c.1.0">通过代理来下载模块</span></a></outline><outline class="toc-level-h3" data-reactid=".1j.d" style="width: 155px;"><active data-reactid=".1j.d.0"></active><a class="toc-outline-theme-github" href="#sr-toc-13" data-reactid=".1j.d.1"><span data-reactid=".1j.d.1.0">指定版本号下载</span></a></outline><outline class="toc-level-h3" data-reactid=".1j.e" style="width: 155px;"><active data-reactid=".1j.e.0"></active><a class="toc-outline-theme-github" href="#sr-toc-14" data-reactid=".1j.e.1"><span data-reactid=".1j.e.1.0">按最小版本下载</span></a></outline><outline class="toc-level-h2" data-reactid=".1j.f" style="width: 165px;"><active data-reactid=".1j.f.0"></active><pangu> </pangu><a class="toc-outline-theme-github" href="#sr-toc-15" data-reactid=".1j.f.1"><span data-reactid=".1j.f.1.0">go.mod 和 go.sum 介绍</span></a></outline><outline class="toc-level-h3" data-reactid=".1j.g" style="width: 155px;"><active data-reactid=".1j.g.0"></active><pangu> </pangu><a class="toc-outline-theme-github" href="#sr-toc-16" data-reactid=".1j.g.1"><span data-reactid=".1j.g.1.0">go.mod 文件介绍</span></a></outline><outline class="toc-level-h3" data-reactid=".1j.h" style="width: 155px;"><active data-reactid=".1j.h.0"></active><pangu> </pangu><a class="toc-outline-theme-github" href="#sr-toc-17" data-reactid=".1j.h.1"><span data-reactid=".1j.h.1.0">go.sum 文件介绍</span></a></outline><outline class="toc-level-h2" data-reactid=".1j.i" style="width: 165px;"><active data-reactid=".1j.i.0"></active><a class="toc-outline-theme-github" href="#sr-toc-18" data-reactid=".1j.i.1"><span data-reactid=".1j.i.1.0">模块下载流程</span></a></outline><outline class="toc-level-h2" data-reactid=".1j.j" style="width: 165px;"><active data-reactid=".1j.j.0"></active><a class="toc-outline-theme-github" href="#sr-toc-19" data-reactid=".1j.j.1"><span data-reactid=".1j.j.1.0">总结</span></a></outline><outline class="toc-level-h2" data-reactid=".1j.k" style="width: 165px;"><active data-reactid=".1j.k.0"></active><a class="toc-outline-theme-github" href="#sr-toc-20" data-reactid=".1j.k.1"><span data-reactid=".1j.k.1.0">课后练习</span></a></outline><outline class="toc-level-h2" data-reactid=".1j.l" style="width: 165px;"><active data-reactid=".1j.l.0"></active><a class="toc-outline-theme-github" href="#sr-toc-21" data-reactid=".1j.l.1"><span data-reactid=".1j.l.1.0">精选留言 (11)</span></a></outline></toc></toc-bg>
                            <sr-rd-footer>
                                <sr-rd-footer-group>
                                    <sr-rd-footer-line></sr-rd-footer-line>
                                    <sr-rd-footer-text>全文完</sr-rd-footer-text>
                                    <sr-rd-footer-line></sr-rd-footer-line>
                                </sr-rd-footer-group>
                                <sr-rd-footer-copywrite>
                                    <div>本文由 <a href="http://ksria.com/simpread" target="_blank">简悦 SimpRead</a> 转码，用以提升阅读体验，<a href="https://time.geekbang.org/column/article/416397" target="_blank">原文地址 </a></div>
                                </sr-rd-footer-copywrite>
                            </sr-rd-footer>
                        </sr-read>
                    </body>
                </html>