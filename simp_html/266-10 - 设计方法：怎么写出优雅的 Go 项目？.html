
                <html lang="en" class="simpread-font simpread-theme-root" style=''>
                    <head>
                        <meta charset="utf-8">
                        <meta http-equiv="content-type" content="text/html; charset=UTF-8;charset=utf-8">
                        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
                        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=1">
                        <meta name="author" content="Kenshin"/>
                        <meta name="description" content="简悦 SimpRead - 如杂志般沉浸式阅读体验的扩展" />
                        <meta name="keywords" content="Chrome extension, Chrome 扩展, 阅读模式, 沉浸式阅读, 简悦, 简阅, read mode, reading mode, reader view, firefox, firefox addon, userscript, safari, opera, tampermonkey"/>
                        <meta name="thumbnail" content="https://simpread-1254315611.cos.ap-shanghai.myqcloud.com/static/introduce-2.png"/>
                        <meta property="og:title" content="简悦 SimpRead - 如杂志般沉浸式阅读体验的扩展"/>
                        <meta property="og:type" content="website">
                        <meta property="og:local" content="zh_CN"/>
                        <meta property="og:url" content="http://ksria.com/simpread"/>
                        <meta property="og:image" content="https://simpread-1254315611.cos.ap-shanghai.myqcloud.com/static/introduce-2.png"/>
                        <meta property="og:image:type" content="image/png"/>
                        <meta property="og:image:width" content="960"/>
                        <meta property="og:image:height" content="355"/>
                        <meta property="og:site_name" content="http://ksria.com/simpread"/>
                        <meta property="og:description" content="简悦 SimpRead - 如杂志般沉浸式阅读体验的扩展"/>
                        <style type="text/css">.simpread-font{font:300 16px/1.8 -apple-system,PingFang SC,Microsoft Yahei,Lantinghei SC,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;color:#333;text-rendering:optimizelegibility;-webkit-text-size-adjust:100%;-webkit-font-smoothing:antialiased}.simpread-hidden{display:none}.simpread-read-root{display:-webkit-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;margin:0;top:-1000px;left:0;width:100%;z-index:2147483646;overflow-x:hidden;opacity:0;-webkit-transition:all 1s cubic-bezier(.23,1,.32,1) .1s;transition:all 1s cubic-bezier(.23,1,.32,1) .1s}.simpread-read-root-show{top:0}.simpread-read-root-hide{top:1000px}sr-read{display:-webkit-flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-flow:column nowrap;flex-flow:column;margin:20px 20%;min-width:400px;min-height:400px;text-align:center}read-process{position:fixed;top:0;left:0;height:3px;width:100%;background-color:#64b5f6;-webkit-transition:width 2s;transition:width 2s;z-index:20000}sr-rd-content-error{display:block;position:relative;margin:0;margin-bottom:30px;padding:25px;background-color:rgba(0,0,0,.05)}sr-rd-footer{-webkit-box-orient:vertical;-ms-flex-direction:column;flex-direction:column;font-size:14px}sr-rd-footer,sr-rd-footer-group{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-direction:normal}sr-rd-footer-group{-webkit-box-orient:horizontal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}sr-rd-footer-line{width:100%;border-top:1px solid #e0e0e0}sr-rd-footer-text{min-width:150px}sr-rd-footer-copywrite{margin:10px 0 0;color:inherit}sr-rd-footer-copywrite abbr{-webkit-font-feature-settings:normal;font-feature-settings:normal;font-variant:normal;text-decoration:none}sr-rd-footer-copywrite .second{margin:10px 0}sr-rd-footer-copywrite .third a:hover{border:none!important}sr-rd-footer-copywrite .third a:first-child{margin-right:50px}sr-rd-footer-copywrite .sr-icon{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:33px;height:33px;opacity:.8;-webkit-transition:opacity .5s ease;transition:opacity .5s ease;cursor:pointer}sr-rd-footer-copywrite .sr-icon:hover{opacity:1}sr-rd-footer-copywrite a,sr-rd-footer-copywrite a:link,sr-rd-footer-copywrite a:visited{margin:0;padding:0;color:inherit;background-color:transparent;font-size:inherit!important;line-height:normal;text-decoration:none;vertical-align:baseline;vertical-align:initial;border:none!important;box-sizing:border-box}sr-rd-footer-copywrite a:focus,sr-rd-footer-copywrite a:hover,sr-rd-footer a:active{color:inherit;text-decoration:none;border-bottom:1px dotted!important}.simpread-blocks{text-decoration:none!important}.simpread-blocks *{margin:0}.simpread-blocks a{padding:0;text-decoration:none!important}.simpread-blocks img{margin:0;padding:0;border:0;background:transparent;box-shadow:none}.simpread-focus-root{display:block;position:fixed;top:0;left:0;right:0;bottom:0;background-color:hsla(0,0%,92%,.9);z-index:2147483645;opacity:0;-webkit-transition:opacity 1s cubic-bezier(.23,1,.32,1) 0ms;transition:opacity 1s cubic-bezier(.23,1,.32,1) 0ms}.simpread-focus-highlight{position:relative;box-shadow:0 0 0 20px #fff;background-color:#fff;overflow:visible;z-index:2147483646}.sr-controlbar-bg sr-rd-crlbar,.sr-controlbar-bg sr-rd-crlbar fab{z-index:2147483647}sr-rd-crlbar.controlbar{position:fixed;right:0;bottom:0;width:100px;height:100%;opacity:0;-webkit-transition:opacity .5s ease;transition:opacity .5s ease}sr-rd-crlbar.controlbar:hover{opacity:1}sr-rd-crlbar fap *{box-sizing:border-box}@media (max-height:620px){fab{zoom:.8}}@media (max-height:783px){dialog-gp dialog-content{max-height:580px}dialog-gp dialog-footer{border-top:1px solid #e0e0e0}}.simpread-highlight-selector{outline:3px dashed #1976d2!important;cursor:pointer!important}.simpread-highlight-controlbar,.simpread-highlight-selector{background-color:#fafafa!important;opacity:.8!important;-webkit-transition:opacity .5s ease!important;transition:opacity .5s ease!important}.simpread-highlight-controlbar{position:relative!important;border:3px dashed #1976d2!important}simpread-highlight,sr-snapshot-ctlbar{position:fixed;top:0;left:0;right:0;padding:15px;height:50px;background-color:rgba(50,50,50,.9);box-shadow:0 2px 5px rgba(0,0,0,.26);box-sizing:border-box;z-index:2147483640}simpread-highlight,sr-highlight-ctl,sr-snapshot-ctlbar{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}sr-highlight-ctl{margin:0 5px;width:50px;height:20px;color:#fff;background-color:#1976d2;border-radius:4px;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);cursor:pointer}toc-bg{position:fixed;left:0;top:0;width:50px;height:200px;font-size:medium}toc-bg:hover{z-index:3}.toc-bg-hidden{opacity:0;-webkit-transition:opacity .5s ease;transition:opacity .5s ease}.toc-bg-hidden:hover{opacity:1;z-index:3}.toc-bg-hidden:hover toc{width:180px}toc *{all:unset}toc{position:fixed;left:0;top:100px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;padding:10px;width:0;max-width:200px;max-height:500px;overflow-x:hidden;overflow-y:hidden;cursor:pointer;border:1px solid hsla(0,0%,62%,.22);-webkit-transition:width .5s;transition:width .5s}toc:hover{overflow-y:auto}toc.mini:hover{width:200px!important}toc::-webkit-scrollbar{width:3px}toc::-webkit-scrollbar-thumb{border-radius:10px;background-color:hsla(36,2%,54%,.5)}toc outline{position:relative;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;padding:2px 0;min-height:21px;line-height:21px;text-align:left}toc outline a,toc outline a:active,toc outline a:focus,toc outline a:visited{display:block;width:100%;color:inherit;font-size:11px;text-decoration:none!important;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}toc outline a:hover{font-weight:700!important}toc outline a.toc-outline-theme-dark,toc outline a.toc-outline-theme-night{color:#fff!important}.toc-level-h1{padding-left:5px}.toc-level-h2{padding-left:15px}.toc-level-h3{padding-left:25px}.toc-level-h4{padding-left:35px}.toc-outline-active{border-left:2px solid #f44336}toc outline active{position:absolute;left:0;top:0;bottom:0;padding:0 0 0 3px;border-left:2px solid #e8e8e8}sr-kbd{background:-webkit-gradient(linear,0 0,0 100%,from(#fff785),to(#ffc542));border:1px solid #e3be23;-o-border-image:none;border-image:none;-o-border-image:initial;border-image:initial;position:absolute;left:0;padding:1px 3px 0;font-size:11px!important;font-weight:700;box-shadow:0 3px 7px 0 rgba(0,0,0,.3);overflow:hidden;border-radius:3px}.sr-kbd-a{position:relative}kbd-mapping{position:fixed;left:5px;bottom:5px;-ms-flex-flow:row;flex-flow:row;width:250px;height:500px;background-color:#fff;border:1px solid hsla(0,0%,62%,.22);box-shadow:0 2px 5px rgba(0,0,0,.26);border-radius:3px}kbd-mapping,kbd-maps{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}kbd-maps{margin:40px 0 20px;width:100%;overflow-x:auto}kbd-maps::-webkit-scrollbar-thumb{background-clip:padding-box;border-radius:10px;border:2px solid transparent;background-color:rgba(85,85,85,.55)}kbd-maps::-webkit-scrollbar{width:10px;-webkit-transition:width .7s cubic-bezier(.4,0,.2,1);transition:width .7s cubic-bezier(.4,0,.2,1)}kbd-mapping kbd-map-title{position:absolute;margin:5px 0;width:100%;font-size:14px;font-weight:700}kbd-maps-group{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}kbd-maps-title{margin:5px 0;padding-left:53px;font-size:12px;font-weight:700}kbd-map kbd{display:inline-block;padding:3px 5px;font-size:11px;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #c6cbd1;border-bottom-color:#959da5;border-radius:3px;box-shadow:inset 0 -1px 0 #959da5}kbd-map kbd-name{display:inline-block;text-align:right;width:50px}kbd-map kbd-desc{padding-left:3px}sharecard-bg{position:fixed;top:0;left:0;width:100%;height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:rgba(0,0,0,.4);z-index:2147483647}sharecard{max-width:450px;background-color:#64b5f6}sharecard,sharecard-head{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}sharecard-head{margin:25px;color:#fff;border-radius:10px;box-shadow:0 2px 6px 0 rgba(0,0,0,.2),0 25px 50px 0 rgba(0,0,0,.15)}sharecard-card{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}sharecard-card,sharecard-top{display:-webkit-box;display:-ms-flexbox;display:flex}sharecard-top{-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding-right:5px;height:65px;background-color:#fff;color:#878787;font-size:25px;font-weight:500;border-top-left-radius:10px;border-top-right-radius:10px}sharecard-top span.logos{display:block;width:48px;height:48px;margin:5px;background-repeat:no-repeat;background-position:50%;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAABU1BMVEUAAAAnNJMnNZI3Q5onNJInNJMnNJInNJMnNJI8SJ0tOZY/S55EUKAoNJI6RpwoNJNIU6InNJInNJImNJI7SJwmNJJ2fLUiMJFKVaNCTJ9faK1HUaJOWKVSXaUnNJNYY6pye7cmM5JXYKhwebMjMI8mL4719fW9vb0oNZP/UlLz8/QqN5TAwMAnNJPv7+/Pz8/q6+/p6enNzc3Kysry8vMsOJXc3env7/LU1uXo29vR0dHOzs7ExMTwjo73bW37XV3Aj1TCYELl5u3n5+fW2Obn6O7f4OrZ2+g0QJkxPpgvO5bh4uvS1OTP0ePCwsJQW6ZLVqTs7fHd3d3V1dXqv79VX6lET6A1TIxXUIBSgHxWQnpelHf+WVnopkXqbC7j5Ozi4uLDw8NGUaFATJ9SgH3r6+vGyd7BxNva2trX19ejqM2gpczHx8dze7Zha67Z2dlTgH1aXQeSAAAAJnRSTlMA6ff+497Y8NL+/fv49P379sqab/BeOiX06tzVy8m/tKqpalA7G6oKj0EAAAJlSURBVEjHndNXWxpBFIDhcS2ICRLAkt4Dx4WhLk0E6R0MYoIISrWX5P9f5cwSIRC2+T1czMV5n2FnZwn2eWONUqCAv3H2Uf5Ra1hx4+0WEXtDQW0fCPYJ1EffEfIV4CSROAE4jsePoTFsNmTJF/IeIHF2lgCIn57GodlqDWXBK7IwBYatVlMWFAildPKX7I3m74Z9fsCiQChoimoFQAz04Ad2gH1n9fv9n9hgMNDr9euLWD6fLxQKxaLfb7dTSlahbFVdEPwIQtrAihZQgyKCtCagbQe3xh0QFMgy5MR11+ewYY5/qlZ7vT2xu93ULKjbFLpiUxnIIwjgKmVTLDUFXMrAi2NJWCRLIthTBo4xyOLKpwyqU6CuDCI41hFBCVdOhyLw4FgJ1skCAiyl9BSHbCorgo6VJXTru5hrVCQS8Yr5xLzX59YJSFpVFwD9U0BGC3hGdFpATgRupTGe9R9I1b1ePBvXKDyvq/O/44LT4/E4BUbSCAwj8Evq6HlnOBprx6JhJz8Gktc7xeaP9ndY+0coQvCccFBD4JW60UIY50ciLOAODAQRVOeCHm4Q3Xks6uRDY+CQ+AR4T2wMYh6+jMCIQOp78CFoj0H7EQgIuhI3dGaHCrwgADwCPjJvA372GRigCJg49FUdk3D87pq3zp4SA5zc1Zh9DxfwkpjgUg5Mv+lbeE3McC8Lpu7SA3wk2xzcqL2tN5DfIsQC8HB7UamUy6FQOpTO5QKBQDZbKnWSyUzGjdWCwaDA8+7Le4BNgm3qQGWchYh9s5hNq6wVbBlbwhZYOp3OYOA4zmgEypnM2zj8ByIdedKrH8vDAAAAAElFTkSuQmCC");zoom:.8}sharecard-content{padding:15px;max-height:500px;font-size:20px;text-align:justify;background-color:#2196f3;overflow-x:hidden;overflow-y:auto}sharecard-via{padding:10px;font-size:10px;background-color:#2196f3}sharecard-footer{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding-right:5px;height:100px;background-color:#fff;color:#878787;font-size:15px;font-weight:500;border-bottom-left-radius:10px;border-bottom-right-radius:10px}sharecard-footer,sharecard-footer div{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}sharecard-footer span.qrcode{display:block;width:100px;height:100px;margin:5px;background-repeat:no-repeat;background-position:50%;background-image:url("data:image/png;base64,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")}sharecard-control{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 19px;height:80px;background-color:#fff}simpread-snapshot{width:100%;height:100%;cursor:move;z-index:2147483645}simpread-snapshot,sr-mask{position:fixed;left:0;top:0}sr-mask{background-color:rgba(0,0,0,.1)}.simpread-feedback,.simpread-urlscheme{position:fixed;right:20px;bottom:20px;z-index:2147483646}simpread-feedback,simpread-urlscheme{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:20px 20px 0;width:500px;color:rgba(51,51,51,.87);background-color:#fff;border-radius:3px;box-shadow:0 0 2px rgba(0,0,0,.12),0 2px 2px rgba(0,0,0,.26);overflow:hidden;-webkit-transform-origin:bottom;transform-origin:bottom;-webkit-transition:all .6s ease;transition:all .6s ease}simpread-feedback *,simpread-urlscheme *{font-size:12px!important;box-sizing:border-box}simpread-feedback.active,simpread-urlscheme.active{-webkit-animation-name:srFadeInUp;animation-name:srFadeInUp;-webkit-animation-duration:.45s;animation-duration:.45s;-webkit-animation-fill-mode:both;animation-fill-mode:both}simpread-feedback.hide,simpread-urlscheme.hide{-webkit-animation-name:srFadeInDown;animation-name:srFadeInDown;-webkit-animation-duration:.45s;animation-duration:.45s;-webkit-animation-fill-mode:both;animation-fill-mode:both}simpread-feedback sr-fb-label,simpread-urlscheme sr-urls-label{width:100%}simpread-feedback sr-fb-head,simpread-urlscheme sr-urls-head{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;margin-bottom:5px;width:100%}simpread-feedback sr-fb-content,simpread-urlscheme sr-urls-content{margin-bottom:5px;width:100%}simpread-feedback sr-urls-footer,simpread-urlscheme sr-urls-footer{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;width:100%}simpread-feedback sr-fb-a,simpread-urlscheme sr-urls-a{color:#2163f7;cursor:pointer}simpread-feedback text-field-state,simpread-urlscheme text-field-state{border-top:none rgba(34,101,247,.8)!important;border-left:none rgba(34,101,247,.8)!important;border-right:none rgba(34,101,247,.8)!important;border-bottom:2px solid rgba(34,101,247,.8)!important}simpread-feedback switch,simpread-urlscheme switch{margin-top:0!important}@-webkit-keyframes srFadeInUp{0%{opacity:0;-webkit-transform:translateY(100px);transform:translateY(100px)}to{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes srFadeInUp{0%{opacity:0;-webkit-transform:translateY(100px);transform:translateY(100px)}to{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes srFadeInDown{0%{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}to{opacity:0;-webkit-transform:translateY(100px);transform:translateY(100px)}}@keyframes srFadeInDown{0%{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}to{opacity:0;-webkit-transform:translateY(100px);transform:translateY(100px)}}simpread-feedback sr-fb-head{font-weight:700}simpread-feedback sr-fb-content{-webkit-box-orient:vertical;-ms-flex-direction:column;flex-direction:column}simpread-feedback sr-fb-content,simpread-feedback sr-fb-footer{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-direction:normal}simpread-feedback sr-fb-footer{-webkit-box-orient:horizontal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;width:100%}simpread-feedback sr-close{position:absolute;right:20px;cursor:pointer;-webkit-transition:all 1s cubic-bezier(.23,1,.32,1) .1s;transition:all 1s cubic-bezier(.23,1,.32,1) .1s;z-index:200}simpread-feedback sr-close:hover{-webkit-transform:rotate(-15deg) scale(1.3);transform:rotate(-15deg) scale(1.3)}simpread-feedback sr-stars{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-top:10px}simpread-feedback sr-stars i{margin-right:10px;cursor:pointer}simpread-feedback sr-stars i svg{-webkit-transition:all 1s cubic-bezier(.23,1,.32,1) .1s;transition:all 1s cubic-bezier(.23,1,.32,1) .1s}simpread-feedback sr-stars i svg:hover{-webkit-transform:rotate(-15deg) scale(1.3);transform:rotate(-15deg) scale(1.3)}simpread-feedback sr-stars i.active svg{-webkit-transform:rotate(0) scale(1);transform:rotate(0) scale(1)}simpread-feedback sr-emojis{display:block;height:100px;overflow:hidden}simpread-feedback sr-emoji{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-transition:.3s;transition:.3s}simpread-feedback sr-emoji>svg{margin:15px 0;width:70px;height:70px;-ms-flex-negative:0;flex-shrink:0}simpread-feedback sr-stars-footer{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin:10px 0 20px}</style>
                        <style type="text/css">.simpread-theme-root{font-size:62.5%!important}sr-rd-content,sr-rd-desc,sr-rd-title{width:100%}sr-rd-title{display:-webkit-box;margin:1em 0 .5em;overflow:hidden;text-overflow:ellipsis;text-rendering:optimizelegibility;-webkit-line-clamp:3;-webkit-box-orient:vertical}sr-rd-content{text-align:left;word-break:break-word}sr-rd-desc{text-align:justify;line-height:2.4;margin:0 0 1.2em;box-sizing:border-box}sr-rd-content{font-size:25.6px;font-size:1.6rem;line-height:1.6}sr-rd-content h1,sr-rd-content h1 *,sr-rd-content h2,sr-rd-content h2 *,sr-rd-content h3,sr-rd-content h3 *,sr-rd-content h4,sr-rd-content h4 *,sr-rd-content h5,sr-rd-content h5 *,sr-rd-content h6,sr-rd-content h6 *{word-break:break-all}sr-rd-content div,sr-rd-content p{display:block;float:inherit;line-height:1.6;font-size:25.6px;font-size:1.6rem}sr-rd-content div,sr-rd-content p,sr-rd-content pre,sr-rd-content sr-blockquote{margin:0 0 1.2em;word-break:break-word}sr-rd-content a{padding:0 5px;vertical-align:baseline;vertical-align:initial}sr-rd-content a,sr-rd-content a:link{color:inherit;font-size:inherit;font-weight:inherit;border:none}sr-rd-content a:hover{background:transparent}sr-rd-content img{margin:10px;padding:5px;max-width:100%;background:#fff;border:1px solid #bbb;box-shadow:1px 1px 3px #d4d4d4}sr-rd-content figcaption{text-align:center;font-size:14px}sr-rd-content sr-blockquote{display:block;position:relative;padding:15px 25px;text-align:left;line-height:inherit}sr-rd-content sr-blockquote:before{position:absolute}sr-rd-content sr-blockquote *{margin:0;font-size:inherit}sr-rd-content table{width:100%;margin:0 0 1.2em;word-break:keep-all;word-break:normal;overflow:auto;border:none}sr-rd-content table td,sr-rd-content table th{border:none}sr-rd-content ul{margin:0 0 1.2em;margin-left:1.3em;padding:0;list-style:disc}sr-rd-content ol{list-style:decimal;margin:0;padding:0}sr-rd-content ol li,sr-rd-content ul li{font-size:inherit;list-style:disc;margin:0 0 1.2em}sr-rd-content ol li{list-style:decimal;margin-left:1.3em}sr-rd-content ol li *,sr-rd-content ul li *{margin:0;text-align:left;text-align:initial}sr-rd-content li ol,sr-rd-content li ul{margin-bottom:.8em;margin-left:2em}sr-rd-content li ul{list-style:circle}sr-rd-content pre{font-family:Consolas,Monaco,Andale Mono,Source Code Pro,Liberation Mono,Courier,monospace;display:block;padding:15px;line-height:1.5;word-break:break-all;word-wrap:break-word;white-space:pre;overflow:auto}sr-rd-content pre,sr-rd-content pre *,sr-rd-content pre div{font-size:17.6px;font-size:1.1rem}sr-rd-content li pre code,sr-rd-content p pre code,sr-rd-content pre{background-color:transparent;border:none}sr-rd-content pre code{margin:0;padding:0}sr-rd-content pre code,sr-rd-content pre code *{font-size:17.6px;font-size:1.1rem}sr-rd-content pre p{margin:0;padding:0;color:inherit;font-size:inherit;line-height:inherit}sr-rd-content li code,sr-rd-content p code{margin:0 4px;padding:2px 4px;font-size:17.6px;font-size:1.1rem}sr-rd-content mark{margin:0 5px;padding:2px;background:#fffdd1;border-bottom:1px solid #ffedce}.sr-rd-content-img{width:90%;height:auto}.sr-rd-content-img-load{width:48px;height:48px;margin:0;padding:0;border-style:none;border-width:0;background-repeat:no-repeat;background-image:url(data:image/gif;base64,R0lGODlhMAAwAPcAAAAAABMTExUVFRsbGx0dHSYmJikpKS8vLzAwMDc3Nz4+PkJCQkRERElJSVBQUFdXV1hYWFxcXGNjY2RkZGhoaGxsbHFxcXZ2dnl5eX9/f4GBgYaGhoiIiI6OjpKSkpaWlpubm56enqKioqWlpampqa6urrCwsLe3t7q6ur6+vsHBwcfHx8vLy8zMzNLS0tXV1dnZ2dzc3OHh4eXl5erq6u7u7vLy8vf39/n5+f///wEBAQQEBA4ODhkZGSEhIS0tLTk5OUNDQ0pKSk1NTV9fX2lpaXBwcHd3d35+foKCgoSEhIuLi4yMjJGRkZWVlZ2dnaSkpKysrLOzs7u7u7y8vMPDw8bGxsnJydvb293d3eLi4ubm5uvr6+zs7Pb29gYGBg8PDyAgICcnJzU1NTs7O0ZGRkxMTFRUVFpaWmFhYWVlZWtra21tbXNzc3V1dXh4eIeHh4qKipCQkJSUlJiYmJycnKampqqqqrW1tcTExMrKys7OztPT09fX19jY2Ojo6PPz8/r6+hwcHCUlJTQ0NDg4OEFBQU9PT11dXWBgYGZmZm9vb3Jycnp6en19fYCAgIWFhaurq8DAwMjIyM3NzdHR0dTU1ODg4OTk5Onp6fDw8PX19fv7+xgYGB8fHz8/P0VFRVZWVl5eXmpqanR0dImJiaCgoKenp6+vr9/f3+fn5+3t7fHx8QUFBQgICBYWFioqKlVVVWJiYo+Pj5eXl6ioqLa2trm5udbW1vT09C4uLkdHR1FRUVtbW3x8fJmZmcXFxc/Pz42Njb+/v+/v7/j4+EtLS5qamri4uL29vdDQ0N7e3jIyMpOTk6Ojo7GxscLCwisrK1NTU1lZWW5ubkhISAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/i1NYWRlIGJ5IEtyYXNpbWlyYSBOZWpjaGV2YSAod3d3LmxvYWRpbmZvLm5ldCkAIfkEAAoA/wAsAAAAADAAMAAABv/AnHBILBqPyKRySXyNSC+mdFqEAAARqpaIux0dVwduq2VJLN7iI3ys0cZkosogIJSKODBAXLzJYjJpcTkuCAIBDTRceg5GNDGAcIM5GwKWHkWMkjk2kDI1k0MzCwEBCTBEeg9cM5AzoUQjAwECF5KaQzWQMYKwNhClBStDjEM4fzGKZCxRRioFpRA2OXlsQrqAvUM300gsCgofr0UWhwMjQhgHBxhjfpCgeDMtLtpCOBYG+g4lvS8JAQZoEHKjRg042GZsylHjBYuHMY7gyHBAn4EDE1ZI8tCAhL1tNLoJsQGDxYoVEJHcOPHAooEEGSLmKKjlWIuHKF/ES0IjxAL/lwxCfFRCwwVKlC4UTomxIYFFaVtKomzBi8yKCetMkKnxEIZIMjdKdBi6ZIYyWAthSZGUVu0RGRsyyJ07V0SoGC3yutCrN40KcIADK6hAlgmLE4hNIF58QlmKBYIDV2g75bBixouVydCAAUOGzp87h6AsBQa9vfTy0uuFA86Y1m5jyyaDQwUJ0kpexMC95AWHBw9YkJlBYoSKs1RmhJDgoIGDDIWN1BZBvUSLr0psmKDgoLuDCSZ4G4FhgrqIESZeFMbBAsOD7g0ifJBxT7wkGyxImB+Bgr7EEA8418ADGrhARAodtKCEDNYRQYNt+wl3RAfNOWBBCr3MkMEEFZxg3YwkLXjQQQg7URPDCSNQN8wRMEggwQjICUECBRNQoIIQKYAAQgpCvOABBx2ksNANLpRQQolFuCBTETBYQOMHaYxwwQV2UVMCkPO1MY4WN3wwwQQWNJPDCJ2hI4QMH3TQQXixsVDBlyNIIiUGZuKopgdihmLDBjVisOWYGFxQJ0MhADkCdnGcQCMFHsZyAQZVDhEikCtOIsMFNXKAHZmQ9kFCBxyAEGNUmFYgIREiTDmoEDCICMKfccQAgghpiRDoqtSkcAKsk7RlK51IiAcLCZ2RMJsWRbkw6rHMFhEEACH5BAAKAP8ALAAAAAAwADAAAAf/gDmCg4SFhoeIiYqLhFhRUViMkpOFEwICE5SahDg4hjgSAQJEh16em4ctRklehkQBAaSFXhMPVaiFVwoGPyeFOK+xp4MkOzoCVLiDL7sGEF2cwbKDW0A6Oj0tyoNOBt5PhUQCwoRL1zpI29QO3gxZhNLDLz7XP1rqg1E/3kmDwLDTcBS5tgMcPkG0vCW4MkjaICoBrgmxgcrFO0NWEnib0OofORtDrvGYcqhTIhcOHIjgYgiJtx9RcuBQEiSIEkFPjOnIZMiGFi3DCiVRQFTClFaDsDDg1UQQDhs2kB4x1uPFrC1ZsrL8tCQIUQVBMLgY9uSBFKSGvEABwoSQFy5Z/7NqgVZqygSvRIU0uSeTrqIuSHF00RI3yxa0iLqIePBVwYMoQSX5LKyF4qQsTIR8NYJYEla5XSIzwnHFSBAGtzZ5IcylsyYvJ564lmz5oO3buAttabKEie/fS5bE3LYFi/Hjx7MgtZKyefMhQzCIpvTiipUr2LNjp8vcuXck0ydVt649O90tTIIrUbKEfXsS4T0jn6+ck0x/8XPr34/Dyon8iRimDhZOFFGBC6hwMcUULfhFCRckGFHEBEUwAeAvLUhxwglUYDFbXRgUMeEEGExxYSFaULHhhlUApQgOLSwh4gQTGCECXyYtMowNL6i44hVcTIcDCRXQOEEFTVg1SPAVT0SSyBZVKClIFy1MIYWGUzhpyBM0FpGEFYhxscQRSKTmiTwkiCBFbTJt4d+GCB6CxRFHROGgTFLQiYQ2OVxBAgkM5ZAFFCKIECgnWVBBBZuFvMBXIVkkcQQGIpwiRXBSOFVFoSRsVYgNd0qCwxMYHJHERTlcykSmgkBYaBUnStICEhhgIMUwly7BqiBXFAoFqurY0ASdS3iaam+75mCDFIWe8KEmVJSKQWqD5JpsDi8QCoWUymwxJgZOMGrtL1QUaqc6WShBJreCjItimlEYi4sWUNxqiLu5WCHvNtPhu98iJ/hG0r+MdGFcqAQTHAgAIfkEAAoA/wAsAAAAADAAMAAACP8AcwgcSLCgwYMIEypcSDALHjxZGEqcWNCNAQNvKGokGCjQQTYX2Ry84XHjQT4a5JQk2CakwRtu1OQxWXCPAwVlqhQMBNJAm5UCoxAIcEAnTYF+bipYU4NjSwNsgP5pEIAon6MD6yjYeqdgzzYF5QgIIAAO1oF/0mxFI4NgT5ED/YypuqDtWYFSFmyVMzDQ06gCA7kZO8DO3YGA2mw1c1Xg24FVxIxFA8hkH7sF9TTY+uZGDr8XweYAhKaqGCoH96BG2CeNmihNOTLZugCFQCYOHDARaGcAWdEEZ2QYIMCoQTlmcrep4nlgljM4RQQGBKi5Bt9j+hAEVAcBgO9ngAb/pnMmt4MzcLQPtMOmiviBN6KU4RuYSoMv3wF8UdN8ZxU35jkQAR0zCHRDZQvVUFIfaoCRHwBk3PEeQTVEoUaAa+AxYUI3xEHAg2HE8cdEM8yBRm5mZNCfRDWQkR8Ya6inEUoOoKGHSXZ88UUDVGzI0A0oSGgSIG/UseJhG/k4kZJIolUHHXQ8CeWUGmIFyB9YZvlHDVuWpMcaa6ihRphgihkHkwr9kcWabLbZ3B5hihnnmGowgWZCM7SpZxYIzkDHHHP8CeigUpzFpZaIirfSnU026ihHexi30QyxHZVFHW9k4IdJNeyhhx8IalSDFHC8YWodjA7Uhx6s7iEDozdU/8HEG26YGoekE/3hKat68FGgQoHwMYeptGogxYiBaXRDFp7mwSqoCAUiRQbEZiBCRAPtIQW2CP2hB2aj+cErq+ASZAexcuwBVA11MJFuXytlgQIezBX0x6qscltQFnDEQUWoA1HBhLvq8YECCurNMC8Km+40wx57HNnQrwXJMMfAUngUSBUiiGBUIHs8REWl2wG8pBRMxDEHZhx7XFINVOCBgrpN9iHHwJK2LGkfD6FA8Vk32DFwHSTrTNANMeOhR6oJ6THwuwQZ3VDP+tL0Bx0D33Gk1H3p8VAVJm8kA9ZyVJ0DFR3jmoPCUox81x94rFYQx3WonYMffIR91IRcPxHKUB522DGT3xIBsqbehCceEAAh+QQACgD/ACwAAAAAMAAwAAAI/wBzCBxIsKDBgwgTKlxI8BIVSZcYSpxIkNMjBQo4UNxYkNNBRxgfHdzkkeNBLB3qlBzIqRFGRwY5OVpEyWRBS4kcPJjU0aUCmAXxIDCggKdNgVkQOXDgSFNFn0AHdkFjgKilowOhLHUgpaBPkQTrVDUwB+vATIuWrsHE8itBLAyqOmBrViCVpYfqEITK8lHVH13rCtz0aCmiqzlahhy4olBVRU45YqFbsBKapZA8KlYAdtOaqoRWHKwkaWVBLG7c4IlMcI6DQw8kCQSxaI0IgSV+VI06EBOHHz9EHwShqDikSaYvKYIdSSAnkiU76GaAheAmKIYECAigyLRzKGuKK/9aMwfLyhKOkCPcJOWBXueS0AgKEECAIEbenU+CFL44IyiZOLcJQ5oMmAMWjAxCn3YMSGEgQprg0Yh4azQyRX4KceIBIdvVR4gHAUqECRSMiNcBhgl1IUSHgzBSHUeWeLAGTSZFIoggaKyAIkObSCLFjgkRJgJrghVpJEeaJaakaV1EIgIUUD4JhQgiUIFVS4dspaUDaCBWSSNugNnImGG6AQKQCnWBgA5stulmczl8KWaYYjZy5lFquqmnDnA2KSWUU05p5VFY4rVllxkeyUlJSaJ5ZF2cWEKJowcVaBYmUngwRxYmbXLJJZk8SJEmVMzBQQcclEApQZlk4eolXVD/tMkkdXRgqwd11MSRJp++egmRCGURiQeocjCHJLEmtqpzXVziahagiloQFR5wcKoHUkQ0EBZUUFbpZBVh8iy0yRqEx6kdQIHYQJpIIUIk6yopECaUTFKJtJuI62q5BWECAgiTAJsDJYBymkMWK6xgcBf1UqJtRbxesiOoB2XipAilCUQJHnjoeuAk9krr3LIsSUJlJCHGybHHmtQ7yYtFXjKlCB6r3HFDIFPCL1ab4EGlFERujEcl1lUCcrxYWRIo0pWs3C/Ik3hrUxclUHlhZU5XhEW995qVSdWRPDyQ0EQX1AXIlQjMUSYrGFUQ2Qc5KzKho3Fc9qMTNY0H0ngrCrRJJqH2LXhCAQEAIfkEAAoA/wAsAAAAADAAMAAACP8AcwgcSLCgwYMIEypcSFBVlTyqGEqcSJBTBwdmPFDcWJDTwVIOHHQ4yMkjx4Op6pwySXBDyFIGvZTS8OJkQRikFFXY0xGkA5gFpxj6ZIaPzYGXcioqxaqiS5EFVyn6ZCgUjKMDTShSNGpKQZ9AB5r6RLYO1oGrNGx1FFEgJ58jB6ZyQFYRjbMDq4zaGokgSDMdTFokC8orXoFePGy1cDUHp6dxc7BoQPZNU46p2hZ8YWHrBy8C4SK2QLYBT4MvWLAsmGpDqRSXB3IytXcUC4GR3rzpm8OEoaEaC9L4QPb2wVO633jYs1rVG50m3HopKbAOqE+hUhFkhcqBge8VVrv/NeEouSNTqVie6MBHvOwqFXg7zqPowHcDCRy5d8znQ/I3GqByl2OgLTSdQKloUMh9BoRyQoEIsVJFB/+Vksd+CXFShyEMGlLHKhPRYIIGydWBIUKriHJfAhpoh5kpjtB0EioHHKCIakd5sceFJ7HSASoQHibkkBx5ZKRjSKJ1gglLMumkCcbZ5MUGolRppZWKNAZDBx2UUkqXXX4ZyYkLsQJKAGimKQCaAqAi0JZfesllmPKdtIoha66ZJptu5rDKFCYw2WSgJ+SB1WNXJpqlQmRuZOSjbhEpqUGcpFJTj2/UEdtJNFRxyimaUWTKF1+YkUKjBrGyRySmtJoCR6t8/wLArAGMcilDXrxgwimtnmLCrRPJ5Mmss3pSyoAIcXLJFLzyGgkLsaFK0AuK8EAsAIVEEiRBe/DaaxXI5pAKC+HGpEq0KTTwBbFfKLKtQFX0ekJ626VwwhQupnpJKpesxkodBxAbyn40oIIKH+++cMK9bV3ywgttsZLKxCAWdIkGnXRSRUI0VCycvSeclgMMeeSRryoTX/JuDnucehILC6fg8bgsNJaDF/umUu5ZqgB6gs0js1AzQaukvPJJXuSxcBWbwsCCyRXtC4Mq0i6UysInXHKT0PkKVPTEm9rEir1Qiud0HkALhDK/VaNYhQlT7Oz00AVJzO/RFK3CR9pvPhndNVo0tG0TyXRPKhHNfxue4Sqr4K244QEBACH5BAAKAP8ALAAAAAAwADAAAAj/AHMIHEiwoMGDCBMqXEhwBgsWNBhKnFjwiRo1pihqLMjpIK2LdA7m6rjxoJYRJkgS/KgmZMFctGZhKVkwy4Y3jnBxZOmS4IpYh2TppClwxs03dDQV/Eihp8BVRxw4UKOF6MAUb7KuIMiJliw1TwqikuqgltWBmjxknRVRYFeQBLXIknpk1dmBlBxlNbHyYtiBtKTGUnF3ICdTR45oyAL4a08XaKRuyFVyRtuaGrI+6fgWrMBcGqRGGFoQF6WEM2jRWUFZbFZHp3OYWLKEb44UQB04FUiDjlQXCG3RnjUCl8ocNJbgJJyDk/OBtWI5oFB1YC4TsgwpULABYQoPS2aF/0dVXaCKJzMRcmLhyJZhFm20bzfk4bhhLLXEi6eVwm5z+yKRlMUSQmyngCEUqAAgQblQ8oR44dFByYIJcTKCAwYqgEYtSkm0Sgq0hDcLKhQilMsi8h3iQXkUzWDCLB4wtpEKZRjyBnBEcWJaiRWacktrhQUpZEmcNefWcwJpsoIKS6rApJMqkEbkLItUaWUbbSxyhIwnmWLKCF6G6aNVmjgAy5kFoHkmLO7l0KWXYIp5C5lmrmnnmW0qCeWTT+JIEydUWiloG1sOuRCSziFp6KKGzSDjRppoMAKQJa1CyS23XEYRKoIIgoaCkGKRgi2ksgCpEAGkWsARUirESRYqkP9KqgosSgQTAq+kGkACHmhqECcOyXpLClgAyeNTrWHRRgG6viKECZQShMUtwlLiH2+4XGtQLiMksIRhKqAhiK6CtLGgC6TessIMxzXIAiUzIPRGKwD44GcOmoxgSK4ByLLgKk5mAaAWD7Hg3yozzODfE/QCoIZ9Rh1wwFYIrdJhQZaysEJ6yGWRRVuaHAIAAGCkcJALzG2ExUOUXEyDx5elAMbIQlx81yoas8Diyx8bpsbIrfx1FycurMCCC5TyrCkuPoyMQK00zWA0RAU52jNBS4wMgCN35eKCxsYVpHTVQIzcQ2xEaULJQ9ryBrNBtbgCwCsmn5VLFlB3fDWDFAwUxihBY297bGGB/31oLiMZrnhBAQEAIfkEAAoA/wAsAAAAADAAMAAACP8AcwgcSLCgwYMIEypcSDCTCxeZGEqcWPDOmzd3KGosyOmgnQtv7Bzk1HHjQVW2qJQk+PGCyII3RPxKZbKgql9MmtAsaOeiCIMs2Ci64KfmwEw4mdy5UVDExZcDWUFSNFSV0YEsmGhlQZDTxzc/CdqiusbW1ah2tIqowfIpQVVvqEJidXbgiyZaqbAEKaIkJxFU2QCrO5CTCa1OLg38CvWFBapOVlLMxNbgJSdaTXT06jYHpyZULbw4mMpFwkwlSrhgWpCK1iajc1D59UtvDhVrqEIdWEOEBAlFDwITIcKOrVSSe+cMVnilCaG+rA68QYUNrwa8miBkYYd4cRURBwb/K7FzZDAmtgW60PCA1/UHvyQTvISiO/E7LOh6ln+QdY7LETSA3QNvsMBfVy+Y4J0dJvhxYEKclCCBe+4pYoJ+DLESzB3epTfRDb5gx0sEv0inUSYq2HGHYhux0B4TsdXESSoxahShCv4RpuOOJpHk2Y+S3eBCMEMGY2SR5dUUAkhv+HKRk29owGImKJhggi1YYnklMA8ydAMbCoQp5gJhLmAbSlnacqWatgxm1JdixlmmbUIaeeSdSW70ly++aNCnn3wywSKPhBZaVyYmanQDEyVgaBIrfgTDQmUamaCLLooYuNENqUjKAjDBUVRDLwaUmoAGeUKoigufAsMCRJuG/7BLqaXuEkJ4CdXwAgutBnNJlwfVwJofGiRAqwEPoJAjQanw6ioLqTjKiirLEnTDHbtoJxAnwCiiC60I+HJgs66+UINknFySSrQC3cDKuQJpMEAACdR4gwkN0GrBgaw8pAp/mazLLidvXHqBQHbMK4AFBqniRJhcIcRKtTncoG4q4XHCCwAA8CIQK70EEIAYKhy0K7AIBZzKrwNt3HFJKoghci+OnsXKupdQqjHHHg9kgQABDLDbWar4sfJKO3dMkB8JiLxAokbVILCjSfc8UBNAB8BEXemm4gfUVUuWSQMi68LcVRavvGzYBZVAgAC6lHwWJ5Qd5LLV01kggZuGehZ2d38oE9YLxxH0LdELdthRo+GM5xAQACH5BAAKAP8ALAAAAAAwADAAAAj/AHMIHEiwoMGDCBMqXEiQGAwYxBhKnFgQhTBhKChqLFjsoIklwkwc7LgRYSZgVw7iuSiSowk7l0oWzFRCBEyDJlga5JMBg5IsMgcSMyFCBAqSA3OGLGjjiRufM4IO5GPHJq6CSvEUlISh6zCpA3OhKGrCBsGcS1oKzLSkqxyzYAVeqiqCEkE8ILUmdeMmg924AotJKloi08CVS/TmyKKk6xOkFInBnRmpqCSSaFsWE9E1CVCDl2AkJCZpWBbIAq8UtfP5SqRIKXNQyvBUrVATfD/vxMMb2AzINohGuhoYqaSeSwwPFJxEkfPHB2Gg4I0HBaWIA2FIioqwGIwnkgji/5JTxLmiIpESZroynfcwXLmWM0Q6t4L5IksooeZ4SRJ1FJLEtBEKbtyHwTCTLZQLDMO0d8V+ChUjjHmM2KGcRsRQggIKF1JESQUVOKGbTJmMSFExeAADIWAstjgRSTBCVkwWD2VBIww3cidTMZEoscQSPgL5oxzcEXPFkUgmSdyOGTgwhANQRvkkMAIZmeSVS5ZUDAZRSjnEEKFQmcOMONqIY406yhQJSBe1CRKRLkq0Ypx0DmRDgic+YUJ8QeWSySWX8KmRJAww4IZ+GxVDzCU2ZpGmRLm4ocCkQixhYkLF2DBDo47iOV8koUw6aSgiYJdQLps2egkxJOXiqUE28P95iRxDiBqEIigIWtCiqmYCmTCFiKArQcWYEMoTBFGCQRC2LgFhiTbOMCwuPejQihsCuWoDScL8YAADI4olgahJdDfDJZ4Wo4gO1iKbgxJBBKGEQCV4a0ASqBEjApRZcgQhCjywOwRcRAQQABHZKmKAAQmIWVAWf2lkgxDsBvBVDrkUfDBJVySwsCLDSvVEK+wWAaPGRCCVxMI/lMDiJT+w60OWKBOUBQMLO/CoTBmwq8MSxBb8CsIEPbGwAU7ERckr7BbSYQ4oQ0YMEQsr0O9GwzDdSnpBG0z0WQgYoEBsUkkSiiKeRl1QLhkwQjZYxYRcDBGvHDzSnC0qUrcieNcLmV0JJYjm9+AGBQQAIfkEAAoA/wAsAAAAADAAMAAACP8AcwgcSLCgwYMIEypcSBCQlmWAGEqcWHAFFBErKGqUKEmECEkHA21MCEhZn4OSLoI0mOzElpEFa7RE9rJgx48Gl8lZcqwmzByAJJ04sUIkwZsrB3qpxYTnn58Dlw09scymx4wEW8hhwuQK1IGBVpyQIsnLUY9Jc9R4whWK2a8C/yAbenIgUoLJuMqpCzdHoBZDkdUYuALtQC20mpYwqhHQ24KAWp5oYfQm1kBSuNLScnBLVYQllW1hPLDP1JrKkCFTJrDPTibJDEbesIHzwWVXcisbTNCLUGSfDV5J/IS3wL9yMCiHglBL7ucQCTp/mlBLiRYEl4lAohwDEimkCdb/gPH8SotljyUy/iMliRs3ymkpC2/wj7Lyyv7QXyhpSXcMS5Q1USBatLBCbjBsFMgTGMCXhBTUNYZbC8ZR1AcSSIgQHEw1RLiRJFfs19eIJKoH1nGkBfLHiiy2WOFIJdAioxwy1vhETV4so+OOPPo0UiBLKCLkkERil4MXD/HYI1RAEulkEUaq2OKUL2oUyAm0HHNMllweI4KHJYYp5k+AMBiRgrUkk56VyRjzxRcijHTFA7wkwdpGfRQBBgB8klGlQl4kwcugEBxjG0N/LOEDn3x6ssSaC12pCC9mUCpBCX8qVQsZjAIAhiJ1eZFpb0ZtcQwElFbqhiT7eaHIF4x+/2EMMozJYUwJkB4nCRvMlbYEnYM+cAx9gTzAKAJPnNnaGAF0ksRxgABilAigKPDAhr4ZQSkvTOwnSSedIOGjX0YIEIAnzAXCxKBMCITMAgoosER4NZQggQQJIpSMkTYVEEAAEJxphAEGsCGQFxjEawxWBS3DF0WAQPBvAQwPbIARRiljRrxG5AoTFJ0IIIAbRgVisREEyRHvAieMuMUCIo+Rr0AnSwdBvBGACdMS/wogR0E1E1RLvAo8AZcyB/xrjIcmE4yxeGzEy8vMMElygACelFBQ0xeHJ0m1vPD70woSdGxQ0AQFIoedIwaSKxsEG2xQICKWiEEBBmAw5kRSSQex4d6ADxQQACH5BAAKAP8ALAAAAAAwADAAAAj/AHMIHEiwoMGDCBMqXEhwE5ctmxhKnFgQFx48lShqlEjpYkaDxTYm3JQly8FKFymBpGSFi8iCmihdoVTDYEc8KgtqseMMlcuXAjdVunIFV0iCNz8OLIbCWc+aQAVyIXrl58CkBf04taM0ajFcRCtFHIgSJ8Eaz5ziGRtVYA2ZV7Qg9Yh0q8m2BLMQpaSJLF2pkZwOO6qxGGGCMYn6ufq32DCnkawS5CIXYTEtWvoa1LL3p94ri3Nk4eksZ0MrIEBsQcilZJYtmpcOpbRa4GFcgZ/FzvHVTocOHPAgrKHFdRYubHNwwQUV4ZZhuAhuQdWMA/Bmw0ZuMa6lxmGGhGtA/5vDwXqHSFm+G9S03XV3kZSe/Lb+hFJyhcWIu65NsRgq83MM0xxFDmF2n0RZNNPMM/y9tMluGhWlHl4UWmYbb7xN+NKEhOGCBi8ghhhiIwdS9BhPKDpjhx2RCRSJDjDGKCMzAxYGQiMX4Ihjjjl+ZIeMQOpAI1DFgMCjjhfk2MhHHooo4iGNaCgRNE5tpSJkkhmGYYYVdumlSJrYkUSJCxWDBzRkTomGIIJEAt8iozQT3UZ+XDBIAHgKUWOZzUzgZxt2NKgQF80QIgCeAhAyR5oHOdbIKH5O0AgeezaECigCHCrAIG2E9iBDmxzFhR1tRDqKEldweIEgmQYgyAPQEP/2xAPPkFnMFY6gQpAfcywyAaSjONPoBIgaYsdufoACywEd2BbqUZE8wMsEldl2hRKQTgDChFYccAAHguaQBCyDHKBrDs4sssgTAkHzwCGHzPFdDXjkeNdB0HQ1kBWEwALLBGM5ooACUfLGAS+HoKGvQFuEppEmE/hbyBUDCUzwQLhEAOKYXaLCjL9JEJbEwI0Q9ESI2VG4BS/+gnJvDhYXzPAEh/CyiGRAzeEvLOwSNPLFBOGBMC924IWLAv4+gLPFjhymSSMgRvCySFYgfYBwBcX83RXSprHwRlcswnHWJIMEQgcOt6WlQTE3+iVCHAwc8tsTaTHMMNXSrbdBAQEAIfkEAAoA/wAsAAAAADAAMAAACP8AcwgcSLCgwYMIEypcSPDGqlWcGEqcWDDLlStZKGqUaPEKlo0bOWXKdBDLFSsfDWJRZgNkwRtasmi5ofJkSoKZUOBRscrlQE4xs5AsaNJjQU5X8OBJ0dKnQBtZovYkWPSmQC1KUWR0KpDTlqhaIg6s2lCFUis0uT6NmmWqQLJjleLZohYn2LQ54OawkUIKnmBiNaYIdhBoVLpvL95UpjSFW4Krhh5U0amTBi0GV7FNu8WSJcRbdOKxZPCGshIlHv8MBaC1rhBNu37VonpgFp0q8ObglAUPFCjOrBy8oehLawBfGqQIbGOLboOZrmAemEkFcGfOoBAeXqvQcQA8FJH/psj8Si3s2FGEVZiplI/vPko9Z2hJCvYQUKRYCrzQkqIAxyVQm0KcqIBeLVfERlEKDXzxhTMgbVELFCpIBpINIbyhIEWWbKUWf3UlxMmIu0VEYogLYaGIKKKsyOKLkICo0RVS1FgjHjbiMZUUAfTo44+gDDhRLaUU2UGRpRzZQUol/OhkAKBsSF4tRxqJZAdLvuUiixO8KAok802ElI1k3uiWiSWSKCOKbLaJ0A0ldBDmQgUC5pQViugSjRQgWaJBBiF4SBEWGiRgQDTRTCMlgRm+8YYGUljIXghBGHBoNEGEMGdCVpTiqKMdqLDoQDfgMQ2iiCaQwU2bkipWJlJo//DpG07YaRAnGegZjQG6KGJFYLVQo8KauwXTAR4EZRFCBqQ4moEUMnLCCKoNlKAbFtOAkmlXuw2EBzWKvDFdV8E0IesbUCCkDBmFOCFpDk2wGwSfOUDxBinp5mAFuIo4AyJfkEAyrkFWKHNQMA2QAQopaXUgjTQx5nCDE4oowojBBn0F0g1vFFJIA1cMVIoZ0pQyFiMVN9GqRiiA4nETgZUijRkmDwRFxWsIV1cmiigciqAdkByxQJlkULEGQmrkjMug5Cvyw0MLlMIaFdPrVBbSeKyIpA6bAUlBNpRSMSmCgqRMKIWAgoJBI5dsUDBrUMOIVS4po0EpMsoMMYicQB7hRNk+nVhQ11/f6uZBTZDcweETbWGFFQMzLvlAAQEAIfkEAAoA/wAsAAAAADAAMAAACP8AcwgcSLCgwYMIEypcSLDYjRvFGEqcWPBPqlR/KGpseOOgRYwbN6oINaFjxYsZDWpJZTLkwGQEALiqZfBjSoJd9kyqBMjlwD2CAAAAclPgR0wGYUyatKelTyRCAXA4CZIgJp2TkPocqAWBUB8wCNpsWGmppYhbBz5pJZQC2hxjuS7d0yUtQUDVhAZINjBujhtYw4bMU+lgMh5Ch/SEi3JgqqWTFhe8URfhpB8/OGgdWIyC0FZPBHbBhKnyH8ipDBZLlUyF5IYTAgR4tcDO60oxWzVCiKlsJadw89gaXlh1GwKyAxCAoOItByC2EwKCUbRLpVvDbd2yhPCGiWqvkg//ciOYssYbMJJlv5V1IaZmhMLPJvTh7UQtKtarSGVfIQw3g4T3SjWVTVTMHtklYwlwDBWjAgQECELTRn/ccgtdWwFihwYMSpQKJv25FKJdCkX01ogkGpSKG9RQ04aLL7Y4S4cTWaLCjTjimMdithjg44+D/CjNaxvdIsKRSCJphxYC9fjjkz6GQiRFxSST5JVLCpRKIy3G2KKMNEpkY4457thQDvahmOKabCp0g5FhJnTgWVtV0sgCDKgQkhbNNGPCZhTxWc0nhLYRp2qozMLBLB8kU+BCgNQCAaGESmOHmgjtccwsis7yRFMlqkDBApRWw0FqaGIq0FtdJPNBp7PU/8LfQcU0wwClC7QxCUEmILFrQjA8oedAmJjQzKIcNMOXahpQGoEtr2lBgTShTGjiQCog0QgHRRVjiQiccnALQpVIM8QTRQl0zBDSSDNuDrZwwIEJAu2hbSP0TpbHMccAWtAe3BlkSQTscqguBRN8sKoIjbihAaoVMbnRDRu0C0FxORwzQcJopaKBG26IcChFI7GrsFoTUHCyQCY00ggSe6TYhRvsyiKxuhsfI9YsbjTSzJQh1WKuNKgUdAzCKwukgsuNLLuVFhOY68ajGW+c9F8f9KxZWpbIMkQowxKkMccFWYKEGxvc7BMMsxwT4thXo2lCliQWM6LGKtPaJkIipA8c2t4T/bHHHv4CbjhBAQEAOw==)}.sr-rd-content-center{text-align:center;display:-webkit-box;-webkit-box-align:center;-webkit-box-pack:center;-webkit-box-orient:vertical}.sr-rd-content-center-small{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex}.sr-rd-content-center-small img{margin:0;padding:0;border:0;box-shadow:none}img.simpread-img-broken{cursor:pointer}.sr-rd-content-nobeautify{margin:0;padding:0;border:0;box-shadow:0 0 0}sr-rd-mult{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;margin:0 0 16px;padding:16px 0 24px;width:100%;background-color:#fff;border-radius:4px;box-shadow:0 1px 2px 0 rgba(60,64,67,.3),0 2px 6px 2px rgba(60,64,67,.15)}sr-rd-mult:hover{-webkit-transition:all .45s 0ms;transition:all .45s 0ms;box-shadow:1px 1px 8px rgba(0,0,0,.16)}sr-rd-mult sr-rd-mult-content{padding:0 16px;overflow:auto}sr-rd-mult sr-rd-mult-avatar,sr-rd-mult sr-rd-mult-content{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}sr-rd-mult sr-rd-mult-avatar{-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0 15px}sr-rd-mult sr-rd-mult-avatar span{display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;max-width:75px;overflow:hidden;text-overflow:ellipsis;text-align:left;font-size:16px;font-size:1rem}sr-rd-mult sr-rd-mult-avatar img{margin-bottom:0;max-width:50px;max-height:50px;width:50px;height:50px;border-radius:50%}sr-rd-mult sr-rd-mult-content img{max-width:80%}sr-rd-mult sr-rd-mult-avatar .sr-rd-content-center{margin:0}sr-page{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;width:100%}</style>
                        <style type="text/css">sr-rd-theme-github{display:none}sr-rd-content h1,sr-rd-content h2,sr-rd-content h3,sr-rd-content h4,sr-rd-content h5,sr-rd-content h6{position:relative;margin-top:1em;margin-bottom:1pc;font-weight:700;line-height:1.4;text-align:left;color:#363636}sr-rd-content h1{padding-bottom:.3em;font-size:57.6px;font-size:3.6rem;line-height:1.2}sr-rd-content h2{padding-bottom:.3em;font-size:44.8px;font-size:2.8rem;line-height:1.225}sr-rd-content h3{font-size:38.4px;font-size:2.4rem;line-height:1.43}sr-rd-content h4{font-size:32px;font-size:2rem}sr-rd-content h5,sr-rd-content h6{font-size:25.6px;font-size:1.6rem}sr-rd-content h6{color:#777}sr-rd-content ol,sr-rd-content ul{list-style-type:disc;padding:0;padding-left:2em}sr-rd-content ol ol,sr-rd-content ul ol{list-style-type:lower-roman}sr-rd-content ol ol ol,sr-rd-content ol ul ol,sr-rd-content ul ol ol,sr-rd-content ul ul ol{list-style-type:lower-alpha}sr-rd-content table{width:100%;overflow:auto;word-break:normal;word-break:keep-all}sr-rd-content table th{font-weight:700}sr-rd-content table td,sr-rd-content table th{padding:6px 13px;border:1px solid #ddd}sr-rd-content table tr{background-color:#fff;border-top:1px solid #ccc}sr-rd-content table tr:nth-child(2n){background-color:#f8f8f8}sr-rd-content sr-blockquote{border-left:4px solid #ddd}.simpread-theme-root{background-color:#fff;color:#333}sr-rd-title{font-family:PT Sans,SF UI Display,\.PingFang SC,PingFang SC,Neue Haas Grotesk Text Pro,Arial Nova,Segoe UI,Microsoft YaHei,Microsoft JhengHei,Helvetica Neue,Source Han Sans SC,Noto Sans CJK SC,Source Han Sans CN,Noto Sans SC,Source Han Sans TC,Noto Sans CJK TC,Hiragino Sans GB,sans-serif;font-size:54.4px;font-size:3.4rem;font-weight:700;line-height:1.3}sr-rd-desc{position:relative;margin:0;margin-bottom:30px;padding:25px;padding-left:56px;font-size:28.8px;font-size:1.8rem;color:#777;background-color:rgba(0,0,0,.05);box-sizing:border-box}sr-rd-desc:before{content:"\201C";position:absolute;top:-28px;left:16px;font-size:80px;font-family:Arial;color:rgba(0,0,0,.15)}sr-rd-content,sr-rd-content *,sr-rd-content div,sr-rd-content p{color:#363636;font-weight:400;line-height:1.8}sr-rd-content b *,sr-rd-content strong,sr-rd-content strong * sr-rd-content b{-webkit-animation:none 0s ease 0s 1 normal none running;animation:none 0s ease 0s 1 normal none running;-webkit-backface-visibility:visible;backface-visibility:visible;background:transparent none repeat 0 0/auto auto padding-box border-box scroll;border:medium none currentColor;border-collapse:separate;-o-border-image:none;border-image:none;border-radius:0;border-spacing:0;bottom:auto;box-shadow:none;box-sizing:content-box;caption-side:top;clear:none;clip:auto;color:#000;-webkit-columns:auto;-moz-columns:auto;columns:auto;-webkit-column-count:auto;-moz-column-count:auto;column-count:auto;-webkit-column-fill:balance;-moz-column-fill:balance;column-fill:balance;-webkit-column-gap:normal;-moz-column-gap:normal;column-gap:normal;-webkit-column-rule:medium none currentColor;-moz-column-rule:medium none currentColor;column-rule:medium none currentColor;-webkit-column-span:1;-moz-column-span:1;column-span:1;-webkit-column-width:auto;-moz-column-width:auto;column-width:auto;content:normal;counter-increment:none;counter-reset:none;cursor:auto;direction:ltr;display:inline;empty-cells:show;float:none;font-family:serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;line-height:normal;height:auto;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;left:auto;letter-spacing:normal;list-style:disc outside none;margin:0;max-height:none;max-width:none;min-height:0;min-width:0;opacity:1;orphans:2;outline:medium none invert;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;-webkit-perspective:none;perspective:none;-webkit-perspective-origin:50% 50%;perspective-origin:50% 50%;position:static;right:auto;-moz-tab-size:8;-o-tab-size:8;tab-size:8;table-layout:auto;text-align:left;text-align-last:auto;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;top:auto;-webkit-transform:none;transform:none;-webkit-transform-origin:50% 50% 0;transform-origin:50% 50% 0;-webkit-transform-style:flat;transform-style:flat;-webkit-transition:none 0s ease 0s;transition:none 0s ease 0s;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:2;width:auto;word-spacing:normal;z-index:auto;all:initial}sr-rd-content a,sr-rd-content a:link{color:#4183c4;text-decoration:none}sr-rd-content a:active,sr-rd-content a:focus,sr-rd-content a:hover{color:#4183c4;text-decoration:underline}sr-rd-content pre{background-color:#f7f7f7;border-radius:3px}sr-rd-content li code,sr-rd-content p code{background-color:rgba(0,0,0,.04);border-radius:3px}.simpread-multi-root{background:#f8f9fa}</style>
                        <style type="text/css"></style>
                        <style type="text/css">@media (pointer:coarse){sr-read{margin:20px 5%!important;min-width:0!important;max-width:90%!important}sr-rd-title{margin-top:0;font-size:2.7rem}sr-rd-content sr-blockquote,sr-rd-desc{margin:10 0!important;padding:0 0 0 10px!important;width:90%;font-size:1.8rem;font-style:normal;line-height:1.7;text-align:justify}sr-rd-content{font-size:1.75rem;font-weight:300}sr-rd-content figure{margin:0;padding:0;text-align:center}sr-rd-content a,sr-rd-content a:link,sr-rd-content li code,sr-rd-content p code{font-size:inherit}sr-rd-footer{margin-top:20px}sr-blockquote,sr-blockquote *{margin:5px!important;padding:5px!important}sr-rd-content h1,sr-rd-content h2,sr-rd-content h3,sr-rd-content h4,sr-rd-content h5,sr-rd-content h6,sr-rd-title{font-family:PingFang SC,Verdana,Helvetica Neue,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;color:#000;font-weight:100;line-height:1.35}sr-rd-content-h1,sr-rd-content-h2,sr-rd-content-h3,sr-rd-content-h4,sr-rd-content-h5,sr-rd-content-h6,sr-rd-content h1,sr-rd-content h2,sr-rd-content h3,sr-rd-content h4,sr-rd-content h5,sr-rd-content h6{margin-top:1.2em;margin-bottom:.6em;line-height:1.35}sr-rd-content-h1,sr-rd-content h1{font-size:1.8em}sr-rd-content-h2,sr-rd-content h2{font-size:1.6em}sr-rd-content-h3,sr-rd-content h3{font-size:1.4em}sr-rd-content-h4,sr-rd-content-h5,sr-rd-content-h6,sr-rd-content h4,sr-rd-content h5,sr-rd-content h6{font-size:1.2em}sr-rd-content-ul,sr-rd-content ul{margin-left:1.3em!important;list-style:disc}sr-rd-content-ol,sr-rd-content ol{list-style:decimal;margin-left:1.9em!important}sr-rd-content-ol ol,sr-rd-content-ol ul,sr-rd-content-ul ol,sr-rd-content-ul ul,sr-rd-content li ol,sr-rd-content li ul{margin-bottom:.8em;margin-left:2em!important}sr-rd-content img{margin:0;padding:0;border:0;max-width:100%!important;height:auto;box-shadow:0 20px 20px -10px rgba(0,0,0,.1)}sr-rd-mult{min-width:0;background-color:#fff;box-shadow:0 1px 6px rgba(32,33,36,.28);border-radius:8px}sr-rd-mult sr-rd-mult-avatar div{margin:0}sr-rd-mult sr-rd-mult-avatar .sr-rd-content-center-small{margin:7px 0!important}sr-rd-mult sr-rd-mult-avatar span{display:block}sr-rd-mult sr-rd-mult-content{padding-left:0}@media only screen and (max-device-width:1024px){.simpread-theme-root,html.simpread-theme-root{font-size:80%!important}sr-rd-mult sr-rd-mult-avatar img{width:50px;height:50px;min-width:50px;min-height:50px}toc-bg toc{width:10px!important}toc-bg:hover toc{width:auto!important}}@media only screen and (max-device-width:414px){.simpread-theme-root,html.simpread-theme-root{font-size:70%!important}sr-rd-mult sr-rd-mult-avatar img{width:30px;height:30px;min-width:30px;min-height:30px}}@media only screen and (max-device-width:320px){.simpread-theme-root,html.simpread-theme-root{font-size:90%!important}sr-rd-content p{margin-bottom:.5em}}}</style>
                        <style type="text/css">undefinedsr-rd-content *, sr-rd-content p, sr-rd-content div {}sr-rd-content pre code, sr-rd-content pre code * {}sr-rd-desc {}sr-rd-content pre {}sr-rd-title {}</style>
                        <style type="text/css"></style>
                        <style type="text/css"></style>
                        <style type="text/css"></style>
                        <style type="text/css"></style>
                        <style type="text/css">sr-rd-content *, sr-rd-content p, sr-rd-content div {
        font-size: 15px;
    }

    .annote-perview, .annote-perview * {
        color: rgb(85, 85, 85);
        font-weight: 400;
        line-height: 1.8;
    }</style>
                        
                        
                        <script>setTimeout(()=>{const e=location.hash.replace("#id=","");let t,a=!1;const n=t=>{for(let n of t){let t;if((t=e.length>6?n.getAttribute("data-id"):n.getAttribute("data-idx"))==e){n.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}),a=!0;break}}};e&&(0==(t=document.getElementsByClassName("sr-unread-card")).length&&(t=document.getElementsByTagName("sr-annote")),n(t),a||n(t=document.getElementsByClassName("sr-annote")))},500);</script>
                        <script>document.addEventListener("DOMContentLoaded",function(){if("localhost"==location.hostname){const t=document.getElementsByTagName("img");for(let o of t){const t=o.src;t.startsWith("http")&&(o.src=location.origin+"/proxy?url="+t)}}},!1);</script>
                        <style>toc a {font-size: inherit!important;font-weight: 300!important;}</style><script>setTimeout(()=>{const max=document.getElementsByTagName('sr-annote-note-tip').length;for(let i=0;i<max;i++){const target=document.getElementsByTagName('sr-annote-note-tip')[i],value=target.dataset.value;value&&(target.innerText=value)}},1000);</script><title>简悦 | 10 | 设计方法：怎么写出优雅的 Go 项目？</title>
                    </head>
                    <body>
                        <sr-read style='font-family: "LXGW WenKai Screen";'>
                            <sr-rd-title>10 | 设计方法：怎么写出优雅的 Go 项目？</sr-rd-title>
                    
                    <sr-rd-content><h1 id="sr-toc-0">10 | 设计方法：怎么写出优雅的 Go 项目？</h1><div><span>孔令飞</span> <span> 2021-06-15</span></div><div><div><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://static001.geekbang.org/resource/image/7b/53/7ba48cc5e9884d4289c5be795e7a2c53.jpg"></div><div><div class="sr-rd-content-center-small"><img class="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADEAAAABCAYAAAB35kaxAAAAAXNSR0IArs4c6QAAAChJREFUGFdjfPfu3X8GKBAUFASz3r9/DxNiQBbDxcamn1yzSLEDZi8A2agny86FR+IAAAAASUVORK5CYII="></div><div class="sr-rd-content-center-small"><img class="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAABCAYAAAA8TpVcAAAAAXNSR0IArs4c6QAAAB1JREFUGFdjfPfu3X9BQUEGEHj//j2YBgFCYtjkAcT9D8ti7hUOAAAAAElFTkSuQmCC"></div><div class="sr-rd-content-center-small"><img class="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD0AAAABCAYAAABt2qY/AAAAAXNSR0IArs4c6QAAACdJREFUGFdjfPfu3X9BQUEGEHj//j2YBgFkMULy2PQQK0YLewiZCQDhUS3LBhDf1QAAAABJRU5ErkJggg=="></div><div class="sr-rd-content-center-small"><img class="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAABCAYAAAA4u0VhAAAAAXNSR0IArs4c6QAAAB1JREFUGFdjfPfu3X9BQUEGEHj//j2YBgFkMULyAF6lD8tbqYWOAAAAAElFTkSuQmCC"></div></div></div><div><div><div></div></div><div><div><div><div><div><div>00:00</div></div><div></div></div></div><a href="javascript:;"> 1.0x <i><span></span></i></a></div><div><span>讲述：孔令飞</span><span>大小：28.04M</span><span> 时长：30:42</span></div></div><audio title="10 | 设计方法：怎么写出优雅的 Go 项目？" src="https://res001.geekbang.org/media/audio/c0/yy/c041d27d437810505cb6ab05613333yy/ld/ld.m3u8" __idm_id__="311307"></audio></div><div><div><div><div data-slate-editor="true" data-key="6941" autocorrect="off" spellcheck="false" data-gramm="false"><div data-slate-type="paragraph" data-slate-object="block" data-key="6942"><span data-slate-object="text" data-key="6943"><span data-slate-leaf="true" data-offset-key="6943:0" data-first-offset="true"><span data-slate-string="true">你好，我是孔令飞，今天我们来聊聊如何写出优雅的 Go 项目。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="6944"><span data-slate-object="text" data-key="6945"><span data-slate-leaf="true" data-offset-key="6945:0" data-first-offset="true"><span data-slate-string="true">Go 语言简单易学，对于大部分开发者来说，编写可运行的代码并不是一件难事，但如果想真正成为 Go 编程高手，你需要花很多精力去研究 Go 的编程哲学。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="6946"><span data-slate-object="text" data-key="6947"><span data-slate-leaf="true" data-offset-key="6947:0" data-first-offset="true"><span data-slate-string="true">在我的 Go 开发生涯中，我见过各种各样的代码问题，例如：代码不规范，难以阅读；函数共享性差，代码重复率高；不是面向接口编程，代码扩展性差，代码不可测；代码质量低下。究其原因，</span></span><span data-slate-leaf="true" data-offset-key="6947:1"><span data-slate-object="annotation" data-annotation-key="gkann_3d6d9d37" data-attr-id="29454" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">是因为这些代码的开发者</span></span></span></span><span data-slate-object="text" data-key="6948"><span data-slate-leaf="true" data-offset-key="6948:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_3d6d9d37" data-attr-id="29454" data-attr-name="public" data-annotation-type="public"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">很少花时间去认真研究如何开发一个优雅的 Go 项目，更多时间是埋头在需求开发中</span></span></span></span></span><span data-slate-object="text" data-key="6949"><span data-slate-leaf="true" data-offset-key="6949:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_3d6d9d37" data-attr-id="29454" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">。</span></span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="6950"><span data-slate-object="text" data-key="6951"><span data-slate-leaf="true" data-offset-key="6951:0" data-first-offset="true"><span data-slate-string="true">如果你也遇到过以上问题，那么是时候花点时间来研究下如何开发一个优雅的 Go 项目了。只有这样，你才能区别于绝大部分的 Go 开发者，从而在职场上建立自己的核心竞争力，并最终脱颖而出。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="6952"><span data-slate-object="text" data-key="6953"><span data-slate-leaf="true" data-offset-key="6953:0" data-first-offset="true"><span data-slate-string="true">其实，我们之前所学的各种规范设计，也都是为了写出一个优雅的 Go 项目。在这一讲，我又补充了一些内容，从而形成了一套 “写出优雅 Go 项目” 的方法论。这一讲内容比较多，但很重要，希望你能花点精力认真掌握，掌握之后，能够确保你开发出一个优秀的 Go 项目。</span></span></span></div><h2 data-slate-type="heading" data-slate-object="block" data-key="6954" id="sr-toc-1"><span data-slate-object="text" data-key="6955"><span data-slate-leaf="true" data-offset-key="6955:0" data-first-offset="true"><span data-slate-string="true">如何写出优雅的 Go 项目？</span></span></span></h2><div data-slate-type="paragraph" data-slate-object="block" data-key="6956"><span data-slate-object="text" data-key="6957"><span data-slate-leaf="true" data-offset-key="6957:0" data-first-offset="true"><span data-slate-string="true">那么，如何写出一个</span></span></span><span data-slate-object="text" data-key="6958"><span data-slate-leaf="true" data-offset-key="6958:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">优雅</span></span></span></span><span data-slate-object="text" data-key="6959"><span data-slate-leaf="true" data-offset-key="6959:0" data-first-offset="true"><span data-slate-string="true">的 </span></span></span><span data-slate-object="text" data-key="6960"><span data-slate-leaf="true" data-offset-key="6960:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">Go 项目</span></span></span></span><span data-slate-object="text" data-key="6961"><span data-slate-leaf="true" data-offset-key="6961:0" data-first-offset="true"><span data-slate-string="true">呢？在回答这个问题之前，我们先来看另外两个问题：</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="6962"><div data-slate-type="list-line" data-slate-object="block" data-key="6963"><div data-code-line-number="1"></div><div><span data-slate-object="text" data-key="6964"><span data-slate-leaf="true" data-offset-key="6964:0" data-first-offset="true"><span data-slate-string="true">为什么是 Go 项目，而不是 Go 应用？</span></span></span></div></div><div data-slate-type="list-line" data-slate-object="block" data-key="6965"><div data-code-line-number="2"></div><div><span data-slate-object="text" data-key="6966"><span data-slate-leaf="true" data-offset-key="6966:0" data-first-offset="true"><span data-slate-string="true">一个优雅的 Go 项目具有哪些特点？</span></span></span></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="6967"><span data-slate-object="text" data-key="6968"><span data-slate-leaf="true" data-offset-key="6968:0" data-first-offset="true"><span data-slate-string="true">先来看第一个问题。Go 项目是一个偏工程化的概念，不仅包含了 Go 应用，还包含了项目管理和项目文档：</span></span></span></div><div data-slate-type="image" data-slate-object="block" data-key="6969"><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://static001.geekbang.org/resource/image/24/aa/24ba3548f8574a747b51e291224097aa.png?wh=2175x834"></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="6970"><span data-slate-object="text" data-key="6971"><span data-slate-leaf="true" data-offset-key="6971:0" data-first-offset="true"><span data-slate-string="true">这就来到了第二个问题，一个优雅的 Go 项目，不仅要求我们的 Go 应用是优雅的，还要确保我们的项目管理和文档也是优雅的。这样，我们根据前面几讲学到的 Go 设计规范，很容易就能总结出一个优雅的 Go 应用需要具备的特点：</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="6972"><div data-slate-type="list-line" data-slate-object="block" data-key="6973"><span data-slate-object="text" data-key="6974"><span data-slate-leaf="true" data-offset-key="6974:0" data-first-offset="true"><span data-slate-string="true">符合 Go 编码规范和最佳实践；</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="6975"><span data-slate-object="text" data-key="6976"><span data-slate-leaf="true" data-offset-key="6976:0" data-first-offset="true"><span data-slate-string="true">易阅读、易理解，易维护；</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="6977"><span data-slate-object="text" data-key="6978"><span data-slate-leaf="true" data-offset-key="6978:0" data-first-offset="true"><span data-slate-string="true">易测试、易扩展；</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="6979"><span data-slate-object="text" data-key="6980"><span data-slate-leaf="true" data-offset-key="6980:0" data-first-offset="true"><span data-slate-string="true">代码质量高。</span></span></span></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="6981"><span data-slate-object="text" data-key="6982"><span data-slate-leaf="true" data-offset-key="6982:0" data-first-offset="true"><span data-slate-string="true">解决了这两个问题，让我们回到这一讲的核心问题：如何写出优雅的 Go 项目？</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="6983"><span data-slate-object="text" data-key="6984"><span data-slate-leaf="true" data-offset-key="6984:0" data-first-offset="true"><span data-slate-string="true">写出一个优雅的 Go 项目，在我看来，就是</span></span></span><span data-slate-object="text" data-key="6985"><span data-slate-leaf="true" data-offset-key="6985:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">用 “最佳实践” 的方式去实现 Go 项目中的 Go 应用、项目管理和项目文档</span></span></span></span><span data-slate-object="text" data-key="6986"><span data-slate-leaf="true" data-offset-key="6986:0" data-first-offset="true"><span data-slate-string="true">。具体来说，就是编写高质量的 Go 应用、高效管理项目、编写高质量的项目文档。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="6987"><span data-slate-object="text" data-key="6988"><span data-slate-leaf="true" data-offset-key="6988:0" data-first-offset="true"><span data-slate-string="true">为了协助你理解，我将这些逻辑绘制成了下面一张图。</span></span></span></div><div data-slate-type="image" data-slate-object="block" data-key="6989"><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://static001.geekbang.org/resource/image/77/03/77d541223576135df4c3d511abbfe603.png?wh=3131x1488"></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="6990"><span data-slate-object="text" data-key="6991"><span data-slate-leaf="true" data-offset-key="6991:0" data-first-offset="true"><span data-slate-string="true">接下来，我们就看看如何根据前面几讲学习的 Go 项目设计规范，实现一个优雅的 Go 项目。我们先从编写高质量的 Go 应用看起。</span></span></span></div><h2 data-slate-type="heading" data-slate-object="block" data-key="6992" id="sr-toc-2"><span data-slate-object="text" data-key="6993"><span data-slate-leaf="true" data-offset-key="6993:0" data-first-offset="true"><span data-slate-string="true">编写高质量的 Go 应用</span></span></span></h2><div data-slate-type="paragraph" data-slate-object="block" data-key="6994"><span data-slate-object="text" data-key="6995"><span data-slate-leaf="true" data-offset-key="6995:0" data-first-offset="true"><span data-slate-string="true">基于我的研发经验，要编写一个高质量的 Go 应用，其实可以归纳为 5 个方面：代码结构、代码规范、代码质量、编程哲学和软件设计方法，见下图。</span></span></span></div><div data-slate-type="image" data-slate-object="block" data-key="6996"><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://static001.geekbang.org/resource/image/23/69/2392d94feb95d3d64d765abe7d6e5e69.png?wh=3544x766"></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="6997"><span data-slate-object="text" data-key="6998"><span data-slate-leaf="true" data-offset-key="6998:0" data-first-offset="true"><span data-slate-string="true">接下来，我们详细说说这些内容。</span></span></span></div><h3 data-slate-type="heading" data-slate-object="block" data-key="6999" id="sr-toc-3"><span data-slate-object="text" data-key="7000"><span data-slate-leaf="true" data-offset-key="7000:0" data-first-offset="true"><span data-slate-string="true">代码结构</span></span></span></h3><div data-slate-type="paragraph" data-slate-object="block" data-key="7001"><span data-slate-object="text" data-key="7002"><span data-slate-leaf="true" data-offset-key="7002:0" data-first-offset="true"><span data-slate-string="true">为什么先说代码结构呢？因为组织合理的代码结构是一个项目的门面。我们可以通过两个手段来组织代码结构。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7003"><span data-slate-object="text" data-key="7004"><span data-slate-leaf="true" data-offset-key="7004:0" data-first-offset="true"><span data-slate-string="true">第一个手段是，组织一个好的目录结构。关于如何组合一个好的目录结构，你可以回顾 </span></span></span><a data-slate-type="link" data-slate-object="inline" data-key="7005"><span data-slate-object="text" data-key="7006"><span data-slate-leaf="true" data-offset-key="7006:0" data-first-offset="true"><span data-slate-string="true">06 讲</span></span></span></a><span data-slate-object="text" data-key="7007"><span data-slate-leaf="true" data-offset-key="7007:0" data-first-offset="true"><span data-slate-string="true"> 的内容。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7008"><span data-slate-object="text" data-key="7009"><span data-slate-leaf="true" data-offset-key="7009:0" data-first-offset="true"><span data-slate-string="true">第二个手段是，选择一个好的模块拆分方法。做好模块拆分，可以使项目内模块职责分明，做到低耦合高内聚。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7010"><span data-slate-object="text" data-key="7011"><span data-slate-leaf="true" data-offset-key="7011:0" data-first-offset="true"><span data-slate-string="true">那么 Go 项目开发中，如何拆分模块呢？目前业界有两种拆分方法，分别是按层拆分和按功能拆分。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7012"><span data-slate-object="text" data-key="7013"><span data-slate-leaf="true" data-offset-key="7013:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">首先，我们看下按层拆分</span></span></span></span><span data-slate-object="text" data-key="7014"><span data-slate-leaf="true" data-offset-key="7014:0" data-first-offset="true"><span data-slate-string="true">，最典型的是 MVC 架构中的模块拆分方式。在 MVC 架构中，我们将服务中的不同组件按访问顺序，拆分成了 Model、View 和 Controller 三层。</span></span></span></div><div data-slate-type="image" data-slate-object="block" data-key="7015"><div class="sr-rd-content-center"><img class="" src="https://static001.geekbang.org/resource/image/ed/46/ed0c3dfyy52ac82539cb602eec9f0146.png?wh=497x625" style="width: auto;"></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7016"><span data-slate-object="text" data-key="7017"><span data-slate-leaf="true" data-offset-key="7017:0" data-first-offset="true"><span data-slate-string="true">每层完成不同的功能：</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="7018"><div data-slate-type="list-line" data-slate-object="block" data-key="7019"><span data-slate-object="text" data-key="7020"><span data-slate-leaf="true" data-offset-key="7020:0" data-first-offset="true"><span data-slate-string="true">View（视图）是提供给用户的操作界面，用来处理数据的显示。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="7021"><span data-slate-object="text" data-key="7022"><span data-slate-leaf="true" data-offset-key="7022:0" data-first-offset="true"><span data-slate-string="true">Controller（控制器），负责根据用户从 View 层输入的指令，选取 Model 层中的数据，然后对其进行相应的操作，产生最终结果。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="7023"><span data-slate-object="text" data-key="7024"><span data-slate-leaf="true" data-offset-key="7024:0" data-first-offset="true"><span data-slate-string="true">Model（模型），是应用程序中用于处理数据逻辑的部分。</span></span></span></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7025"><span data-slate-object="text" data-key="7026"><span data-slate-leaf="true" data-offset-key="7026:0" data-first-offset="true"><span data-slate-string="true">我们看一个典型的按层拆分的目录结构：</span></span></span></div><div data-code-language="sql" data-slate-type="pre" data-slate-object="block" data-key="7027"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div><div data-code-line-number="4"></div><div data-code-line-number="5"></div><div data-code-line-number="6"></div><div data-code-line-number="7"></div><div data-code-line-number="8"></div><div data-code-line-number="9"></div><div data-code-line-number="10"></div><div data-code-line-number="11"></div><div data-code-line-number="12"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="7028"><span data-slate-object="text" data-key="7029"><span data-slate-leaf="true" data-offset-key="7029:0" data-first-offset="true"><span data-slate-string="true">$ tree </span></span></span><span data-slate-object="text" data-key="7030"><span data-slate-leaf="true" data-offset-key="7030:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">--noreport -L 2 layers</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7031"><span data-slate-object="text" data-key="7032"><span data-slate-leaf="true" data-offset-key="7032:0" data-first-offset="true"><span data-slate-string="true">layers</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7033"><span data-slate-object="text" data-key="7034"><span data-slate-leaf="true" data-offset-key="7034:0" data-first-offset="true"><span data-slate-string="true">├── controllers</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7035"><span data-slate-object="text" data-key="7036"><span data-slate-leaf="true" data-offset-key="7036:0" data-first-offset="true"><span data-slate-string="true">│   ├── billing</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7037"><span data-slate-object="text" data-key="7038"><span data-slate-leaf="true" data-offset-key="7038:0" data-first-offset="true"><span data-slate-string="true">│   ├── </span></span></span><span data-slate-object="text" data-key="7039"><span data-slate-leaf="true" data-offset-key="7039:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">order</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7040"><span data-slate-object="text" data-key="7041"><span data-slate-leaf="true" data-offset-key="7041:0" data-first-offset="true"><span data-slate-string="true">│   └── </span></span></span><span data-slate-object="text" data-key="7042"><span data-slate-leaf="true" data-offset-key="7042:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">user</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7043"><span data-slate-object="text" data-key="7044"><span data-slate-leaf="true" data-offset-key="7044:0" data-first-offset="true"><span data-slate-string="true">├── models</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7045"><span data-slate-object="text" data-key="7046"><span data-slate-leaf="true" data-offset-key="7046:0" data-first-offset="true"><span data-slate-string="true">│   ├── billing.go</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7047"><span data-slate-object="text" data-key="7048"><span data-slate-leaf="true" data-offset-key="7048:0" data-first-offset="true"><span data-slate-string="true">│   ├── order.go</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7049"><span data-slate-object="text" data-key="7050"><span data-slate-leaf="true" data-offset-key="7050:0" data-first-offset="true"><span data-slate-string="true">│   └── user.go</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7051"><span data-slate-object="text" data-key="7052"><span data-slate-leaf="true" data-offset-key="7052:0" data-first-offset="true"><span data-slate-string="true">└── views</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7053"><span data-slate-object="text" data-key="7054"><span data-slate-leaf="true" data-offset-key="7054:0" data-first-offset="true"><span data-slate-string="true">    └── layouts</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7055"><span data-slate-object="text" data-key="7056"><span data-slate-leaf="true" data-offset-key="7056:0" data-first-offset="true"><span data-slate-string="true">在 Go 项目中，按层拆分会带来很多问题。最大的问题是循环引用：相同功能可能在不同层被使用到，而这些功能又分散在不同的层中，很容易造成循环引用。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7057"><span data-slate-object="text" data-key="7058"><span data-slate-leaf="true" data-offset-key="7058:0" data-first-offset="true"><span data-slate-string="true">所以，</span></span></span><span data-slate-object="text" data-key="7059"><span data-slate-leaf="true" data-offset-key="7059:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_12db3e27" data-attr-id="41438" data-attr-name="public" data-annotation-type="public"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">你只要大概知道按层拆分是什么意思就够了，在 Go 项目中我建议你使用的是按功能拆分的方法，这也是 Go 项目中最常见的拆分方法。</span></span></span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7060"><span data-slate-object="text" data-key="7061"><span data-slate-leaf="true" data-offset-key="7061:0" data-first-offset="true"><span data-slate-string="true">那什么是按功能拆分呢？我给你看一个例子你就明白了。比如，一个订单系统，我们可以根据不同功能将其拆分成用户（user）、订单（order）和计费（billing）3 个模块，每一个模块提供独立的功能，功能更单一：</span></span></span></div><div data-slate-type="image" data-slate-object="block" data-key="7062"><div class="sr-rd-content-center"><img class="" src="https://static001.geekbang.org/resource/image/0d/a5/0d65eb1363bf8055e209bc24d1d99ca5.png?wh=625x572"></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7063"><span data-slate-object="text" data-key="7064"><span data-slate-leaf="true" data-offset-key="7064:0" data-first-offset="true"><span data-slate-string="true">下面是该订单系统的代码目录结构：</span></span></span></div><div data-code-language="sql" data-slate-type="pre" data-slate-object="block" data-key="7065"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div><div data-code-line-number="4"></div><div data-code-line-number="5"></div><div data-code-line-number="6"></div><div data-code-line-number="7"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="7066"><span data-slate-object="text" data-key="7067"><span data-slate-leaf="true" data-offset-key="7067:0" data-first-offset="true"><span data-slate-string="true">$ tree pkg</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7068"><span data-slate-object="text" data-key="7069"><span data-slate-leaf="true" data-offset-key="7069:0" data-first-offset="true"><span data-slate-string="true">$ tree </span></span></span><span data-slate-object="text" data-key="7070"><span data-slate-leaf="true" data-offset-key="7070:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">--noreport -L 2 pkg</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7071"><span data-slate-object="text" data-key="7072"><span data-slate-leaf="true" data-offset-key="7072:0" data-first-offset="true"><span data-slate-string="true">pkg</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7073"><span data-slate-object="text" data-key="7074"><span data-slate-leaf="true" data-offset-key="7074:0" data-first-offset="true"><span data-slate-string="true">├── billing</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7075"><span data-slate-object="text" data-key="7076"><span data-slate-leaf="true" data-offset-key="7076:0" data-first-offset="true"><span data-slate-string="true">├── </span></span></span><span data-slate-object="text" data-key="7077"><span data-slate-leaf="true" data-offset-key="7077:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">order</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7078"><span data-slate-object="text" data-key="7079"><span data-slate-leaf="true" data-offset-key="7079:0" data-first-offset="true"><span data-slate-string="true">│   └── order.go</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7080"><span data-slate-object="text" data-key="7081"><span data-slate-leaf="true" data-offset-key="7081:0" data-first-offset="true"><span data-slate-string="true">└── </span></span></span><span data-slate-object="text" data-key="7082"><span data-slate-leaf="true" data-offset-key="7082:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">user</span></span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7083"><span data-slate-object="text" data-key="7084"><span data-slate-leaf="true" data-offset-key="7084:0" data-first-offset="true"><span data-slate-string="true">相较于按层拆分，按功能拆分模块带来的好处也很好理解：</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="7085"><div data-slate-type="list-line" data-slate-object="block" data-key="7086"><span data-slate-object="text" data-key="7087"><span data-slate-leaf="true" data-offset-key="7087:0" data-first-offset="true"><span data-slate-string="true">不同模块，功能单一，可以实现高内聚低耦合的设计哲学。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="7088"><span data-slate-object="text" data-key="7089"><span data-slate-leaf="true" data-offset-key="7089:0" data-first-offset="true"><span data-slate-string="true">因为所有的功能只需要实现一次，引用逻辑清晰，会大大减少出现循环引用的概率。</span></span></span></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7090"><span data-slate-object="text" data-key="7091"><span data-slate-leaf="true" data-offset-key="7091:0" data-first-offset="true"><span data-slate-string="true">所以，有很多优秀的 Go 项目采用的都是按功能拆分的模块拆分方式，例如 Kubernetes、Docker、Helm、Prometheus 等。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7092"><span data-slate-object="text" data-key="7093"><span data-slate-leaf="true" data-offset-key="7093:0" data-first-offset="true"><span data-slate-string="true">除了组织合理的代码结构这种方式外，编写高质量 Go 应用的另外一个行之有效的方法，是遵循 Go 语言代码规范来编写代码。在我看来，这也是最容易出效果的方式。</span></span></span></div><h3 data-slate-type="heading" data-slate-object="block" data-key="7094" id="sr-toc-4"><span data-slate-object="text" data-key="7095"><span data-slate-leaf="true" data-offset-key="7095:0" data-first-offset="true"><span data-slate-string="true">代码规范</span></span></span></h3><div data-slate-type="paragraph" data-slate-object="block" data-key="7096"><span data-slate-object="text" data-key="7097"><span data-slate-leaf="true" data-offset-key="7097:0" data-first-offset="true"><span data-slate-string="true">那我们要遵循哪些代码规范来编写 Go 应用呢？在我看来，其实就两类：编码规范和最佳实践。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7098"><span data-slate-object="text" data-key="7099"><span data-slate-leaf="true" data-offset-key="7099:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">首先，我们的代码要符合 Go 编码规范，这是最容易实现的途径</span></span></span></span><span data-slate-object="text" data-key="7100"><span data-slate-leaf="true" data-offset-key="7100:0" data-first-offset="true"><span data-slate-string="true">。Go 社区有很多这类规范可供参考，其中，</span></span><span data-slate-leaf="true" data-offset-key="7100:1"><span data-slate-object="annotation" data-annotation-key="gkann_afa164d5" data-attr-id="36320" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">比较受欢迎的是 </span></span></span></span><a data-slate-type="link" data-slate-object="inline" data-key="7101"><span data-slate-object="text" data-key="7102"><span data-slate-leaf="true" data-offset-key="7102:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_afa164d5" data-attr-id="36320" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">Uber Go 语言编码规范</span></span></span></span></a><span data-slate-object="text" data-key="7103"><span data-slate-leaf="true" data-offset-key="7103:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_afa164d5" data-attr-id="36320" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">。</span></span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7104"><span data-slate-object="text" data-key="7105"><span data-slate-leaf="true" data-offset-key="7105:0" data-first-offset="true"><span data-slate-string="true">阅读这些规范确实有用，也确实花时间、花精力。所以，我在参考了已有的很多规范后，结合自己写 Go 代码的经验，特地为你整理了一篇 Go 编码规范作为加餐，也就是 “特别放送 | 给你一份清晰、可直接套用的 Go 编码规范”。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7106"><span data-slate-object="text" data-key="7107"><span data-slate-leaf="true" data-offset-key="7107:0" data-first-offset="true"><span data-slate-string="true">有了可以参考的编码规范之后，我们需要扩展到团队、部门甚至公司层面。只有大家一起参与、遵守，规范才会变得有意义。其实，我们都清楚，要开发者靠自觉来遵守所有的编码规范，不是一件容易的事儿。这时候，我们可以使用静态代码检查工具，来约束开发者的行为。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7108"><span data-slate-object="text" data-key="7109"><span data-slate-leaf="true" data-offset-key="7109:0" data-first-offset="true"><span data-slate-string="true">有了静态代码检查工具后，不仅可以确保开发者写出的每一行代码都是符合 Go 编码规范的，还可以将静态代码检查集成到 CI/CD 流程中。这样，在代码提交后自动地检查代码，就保证了只有符合编码规范的代码，才会被合入主干。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7110"><span data-slate-object="text" data-key="7111"><span data-slate-leaf="true" data-offset-key="7111:0" data-first-offset="true"><span data-slate-string="true">Go 语言的静态代码检查工具有很多，目前用的最多的是 </span></span></span><a data-slate-type="link" data-slate-object="inline" data-key="7112"><span data-slate-object="text" data-key="7113"><span data-slate-leaf="true" data-offset-key="7113:0" data-first-offset="true"><span data-slate-string="true">golangci-lint</span></span></span></a><span data-slate-object="text" data-key="7114"><span data-slate-leaf="true" data-offset-key="7114:0" data-first-offset="true"><span data-slate-string="true">，这也是我极力推荐你使用的一个工具。关于这个工具的使用，我会在</span></span></span><span data-slate-object="text" data-key="7115"><span data-slate-leaf="true" data-offset-key="7115:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">第 15 讲</span></span></span></span><span data-slate-object="text" data-key="7116"><span data-slate-leaf="true" data-offset-key="7116:0" data-first-offset="true"><span data-slate-string="true">和你详细介绍。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7117"><span data-slate-object="text" data-key="7118"><span data-slate-leaf="true" data-offset-key="7118:0" data-first-offset="true"><span data-slate-string="true">除了遵循编码规范，</span></span></span><span data-slate-object="text" data-key="7119"><span data-slate-leaf="true" data-offset-key="7119:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">要想成为 Go 编程高手，你还得学习并遵循一些最佳实践</span></span></span></span><span data-slate-object="text" data-key="7120"><span data-slate-leaf="true" data-offset-key="7120:0" data-first-offset="true"><span data-slate-string="true">。“最佳实践” 是社区经过多年探索沉淀下来的、符合 Go 语言特色的经验和共识，它可以帮助你开发出一个高质量的代码。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7121"><span data-slate-object="text" data-key="7122"><span data-slate-leaf="true" data-offset-key="7122:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_dd29c12d" data-attr-id="35844" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">这里我给你推荐几篇介绍 Go 语言最佳实践的文章，供你参考：</span></span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="7123"><div data-slate-type="list-line" data-slate-object="block" data-key="7124"><a data-slate-type="link" data-slate-object="inline" data-key="7125"><span data-slate-object="text" data-key="7126"><span data-slate-leaf="true" data-offset-key="7126:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_322bffd3" data-attr-id="35845" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">Effective Go</span></span></span></span></a><span data-slate-object="text" data-key="7127"><span data-slate-leaf="true" data-offset-key="7127:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_322bffd3" data-attr-id="35845" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">：高效 Go 编程，由 Golang 官方编写，里面包含了编写 Go 代码的一些建议，也可以理解为最佳实践。</span></span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="7128"><a data-slate-type="link" data-slate-object="inline" data-key="7129"><span data-slate-object="text" data-key="7130"><span data-slate-leaf="true" data-offset-key="7130:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_02c18795" data-attr-id="35846" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">Go Code Review Comments</span></span></span></span></a><span data-slate-object="text" data-key="7131"><span data-slate-leaf="true" data-offset-key="7131:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_02c18795" data-attr-id="35846" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">：Golang 官方编写的 Go 最佳实践，作为 Effective Go 的补充。</span></span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="7132"><a data-slate-type="link" data-slate-object="inline" data-key="7133"><span data-slate-object="text" data-key="7134"><span data-slate-leaf="true" data-offset-key="7134:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_e27bb53a" data-attr-id="35847" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">Style guideline for Go packages</span></span></span></span></a><span data-slate-object="text" data-key="7135"><span data-slate-leaf="true" data-offset-key="7135:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_e27bb53a" data-attr-id="35847" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">：包含了如何组织 Go 包、如何命名 Go 包、如何写 Go 包文档的一些建议。</span></span></span></span></div></div><h3 data-slate-type="heading" data-slate-object="block" data-key="7136" id="sr-toc-5"><span data-slate-object="text" data-key="7137"><span data-slate-leaf="true" data-offset-key="7137:0" data-first-offset="true"><span data-slate-string="true">代码质量</span></span></span></h3><div data-slate-type="paragraph" data-slate-object="block" data-key="7138"><span data-slate-object="text" data-key="7139"><span data-slate-leaf="true" data-offset-key="7139:0" data-first-offset="true"><span data-slate-string="true">有了组织合理的代码结构、符合 Go 语言代码规范的 Go 应用代码之后，我们还需要通过一些手段来确保我们开发出的是一个高质量的代码，这可以通过单元测试和 Code Review 来实现。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7140"><span data-slate-object="text" data-key="7141"><span data-slate-leaf="true" data-offset-key="7141:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">单元测试非常重要。</span></span></span></span><span data-slate-object="text" data-key="7142"><span data-slate-leaf="true" data-offset-key="7142:0" data-first-offset="true"><span data-slate-string="true">我们开发完一段代码后，第一个执行的测试就是单元测试。它可以保证我们的代码是符合预期的，一些异常变动能够被及时感知到。进行单元测试，不仅需要编写单元测试用例，还需要我们确保代码是可测试的，以及具有一个高的单元测试覆盖率。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7143"><span data-slate-object="text" data-key="7144"><span data-slate-leaf="true" data-offset-key="7144:0" data-first-offset="true"><span data-slate-string="true">接下来，我就来介绍下如何编写一个可测试的代码。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7145"><span data-slate-object="text" data-key="7146"><span data-slate-leaf="true" data-offset-key="7146:0" data-first-offset="true"><span data-slate-string="true">如果我们要对函数 A 进行测试，并且 A 中的所有代码均能够在单元测试环境下按预期被执行，那么函数 A 的代码块就是可测试的。我们来看下一般的单元测试环境有什么特点：</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="7147"><div data-slate-type="list-line" data-slate-object="block" data-key="7148"><span data-slate-object="text" data-key="7149"><span data-slate-leaf="true" data-offset-key="7149:0" data-first-offset="true"><span data-slate-string="true">可能无法连接数据库。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="7150"><span data-slate-object="text" data-key="7151"><span data-slate-leaf="true" data-offset-key="7151:0" data-first-offset="true"><span data-slate-string="true">可能无法访问第三方服务。</span></span></span></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7152"><span data-slate-object="text" data-key="7153"><span data-slate-leaf="true" data-offset-key="7153:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_73b5147d" data-attr-id="43847" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">如果函数 A 依赖数据库连接、第三方服务，那么在单元测试环境下执行单元测试就会失败，函数就没法测试，函数是不可测的。</span></span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7154"><span data-slate-object="text" data-key="7155"><span data-slate-leaf="true" data-offset-key="7155:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_018dfb7b" data-attr-id="43848" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">解决方法也很简单：将依赖的数据库、第三方服务等抽象成接口，在被测代码中调用接口的方法，在测试时传入 mock 类型，从而将数据库、第三方服务等依赖从具体的被测函数中解耦出去。</span></span></span><span data-slate-leaf="true" data-offset-key="7155:1"><span data-slate-string="true">如下图所示：</span></span></span></div><div data-slate-type="image" data-slate-object="block" data-key="7156"><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://static001.geekbang.org/resource/image/0c/97/0cef423ec1a4f06f6f4715bd0b9f4497.png?wh=1500x438"></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7157"><span data-slate-object="text" data-key="7158"><span data-slate-leaf="true" data-offset-key="7158:0" data-first-offset="true"><span data-slate-string="true">为了提高代码的可测性，降低单元测试的复杂度，对 function 和 mock 的要求是：</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="7159"><div data-slate-type="list-line" data-slate-object="block" data-key="7160"><span data-slate-object="text" data-key="7161"><span data-slate-leaf="true" data-offset-key="7161:0" data-first-offset="true"><span data-slate-string="true">要尽可能减少 function 中的依赖，让 function 只依赖必要的模块。编写一个功能单一、职责分明的函数，会有利于减少依赖。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="7162"><span data-slate-object="text" data-key="7163"><span data-slate-leaf="true" data-offset-key="7163:0" data-first-offset="true"><span data-slate-string="true">依赖模块应该是易 Mock 的。</span></span></span></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7164"><span data-slate-object="text" data-key="7165"><span data-slate-leaf="true" data-offset-key="7165:0" data-first-offset="true"><span data-slate-string="true">为了协助你理解，我们先来看一段不可测试的代码：</span></span></span></div><div data-code-language="go" data-slate-type="pre" data-slate-object="block" data-key="7166"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div><div data-code-line-number="4"></div><div data-code-line-number="5"></div><div data-code-line-number="6"></div><div data-code-line-number="7"></div><div data-code-line-number="8"></div><div data-code-line-number="9"></div><div data-code-line-number="10"></div><div data-code-line-number="11"></div><div data-code-line-number="12"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="7167"><span data-slate-object="text" data-key="7168"><span data-slate-leaf="true" data-offset-key="7168:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">package</span></span></span></span><span data-slate-object="text" data-key="7169"><span data-slate-leaf="true" data-offset-key="7169:0" data-first-offset="true"><span data-slate-string="true"> post</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7170"></div><div data-slate-type="code-line" data-slate-object="block" data-key="7171"><span data-slate-object="text" data-key="7172"><span data-slate-leaf="true" data-offset-key="7172:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">import</span></span></span></span><span data-slate-object="text" data-key="7173"><span data-slate-leaf="true" data-offset-key="7173:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="7174"><span data-slate-leaf="true" data-offset-key="7174:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">"google.golang.org/grpc"</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7175"></div><div data-slate-type="code-line" data-slate-object="block" data-key="7176"><span data-slate-object="text" data-key="7177"><span data-slate-leaf="true" data-offset-key="7177:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">type</span></span></span></span><span data-slate-object="text" data-key="7178"><span data-slate-leaf="true" data-offset-key="7178:0" data-first-offset="true"><span data-slate-string="true"> Post </span></span></span><span data-slate-object="text" data-key="7179"><span data-slate-leaf="true" data-offset-key="7179:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">struct</span></span></span></span><span data-slate-object="text" data-key="7180"><span data-slate-leaf="true" data-offset-key="7180:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7181"><span data-slate-object="text" data-key="7182"><span data-slate-leaf="true" data-offset-key="7182:0" data-first-offset="true"><span data-slate-string="true">  Name    </span></span></span><span data-slate-object="text" data-key="7183"><span data-slate-leaf="true" data-offset-key="7183:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">string</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7184"><span data-slate-object="text" data-key="7185"><span data-slate-leaf="true" data-offset-key="7185:0" data-first-offset="true"><span data-slate-string="true">  Address </span></span></span><span data-slate-object="text" data-key="7186"><span data-slate-leaf="true" data-offset-key="7186:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">string</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7187"><span data-slate-object="text" data-key="7188"><span data-slate-leaf="true" data-offset-key="7188:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7189"></div><div data-slate-type="code-line" data-slate-object="block" data-key="7190"><span data-slate-object="text" data-key="7191"><span data-slate-leaf="true" data-offset-key="7191:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">func</span></span></span></span></span><span data-slate-object="text" data-key="7192"><span data-slate-leaf="true" data-offset-key="7192:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span><span data-slate-object="text" data-key="7193"><span data-slate-leaf="true" data-offset-key="7193:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">ListPosts</span></span></span></span></span><span data-slate-object="text" data-key="7194"><span data-slate-leaf="true" data-offset-key="7194:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">(client *grpc.ClientConn)</span></span></span></span></span><span data-slate-object="text" data-key="7195"><span data-slate-leaf="true" data-offset-key="7195:0" data-first-offset="true"><span data-slate-string="true"> ([]*Post, </span></span></span><span data-slate-object="text" data-key="7196"><span data-slate-leaf="true" data-offset-key="7196:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">error</span></span></span></span><span data-slate-object="text" data-key="7197"><span data-slate-leaf="true" data-offset-key="7197:0" data-first-offset="true"><span data-slate-string="true">) {</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7198"><span data-slate-object="text" data-key="7199"><span data-slate-leaf="true" data-offset-key="7199:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="7200"><span data-slate-leaf="true" data-offset-key="7200:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">return</span></span></span></span><span data-slate-object="text" data-key="7201"><span data-slate-leaf="true" data-offset-key="7201:0" data-first-offset="true"><span data-slate-string="true"> client.ListPosts()</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7202"><span data-slate-object="text" data-key="7203"><span data-slate-leaf="true" data-offset-key="7203:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7204"><span data-slate-object="text" data-key="7205"><span data-slate-leaf="true" data-offset-key="7205:0" data-first-offset="true"><span data-slate-string="true">这段代码中的 ListPosts 函数是不可测试的。因为 ListPosts 函数中调用了</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="7206"><span data-slate-object="text" data-key="7207"><span data-slate-leaf="true" data-offset-key="7207:0" data-first-offset="true"><span data-slate-string="true"> client.ListPosts()</span></span></span></span><span data-slate-object="text" data-key="7208"><span data-slate-leaf="true" data-offset-key="7208:0" data-first-offset="true"><span data-slate-string="true"> 方法，该方法依赖于一个 gRPC 连接。而我们在做单元测试时，可能因为没有配置 gRPC 服务的地址、网络隔离等原因，导致没法建立 gRPC 连接，从而导致 ListPosts 函数执行失败。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7209"><span data-slate-object="text" data-key="7210"><span data-slate-leaf="true" data-offset-key="7210:0" data-first-offset="true"><span data-slate-string="true">下面，我们把这段代码改成可测试的，如下：</span></span></span></div><div data-code-language="go" data-slate-type="pre" data-slate-object="block" data-key="7211"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div><div data-code-line-number="4"></div><div data-code-line-number="5"></div><div data-code-line-number="6"></div><div data-code-line-number="7"></div><div data-code-line-number="8"></div><div data-code-line-number="9"></div><div data-code-line-number="10"></div><div data-code-line-number="11"></div><div data-code-line-number="12"></div><div data-code-line-number="13"></div><div data-code-line-number="14"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="7212"><span data-slate-object="text" data-key="7213"><span data-slate-leaf="true" data-offset-key="7213:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">package</span></span></span></span><span data-slate-object="text" data-key="7214"><span data-slate-leaf="true" data-offset-key="7214:0" data-first-offset="true"><span data-slate-string="true"> main</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7215"></div><div data-slate-type="code-line" data-slate-object="block" data-key="7216"><span data-slate-object="text" data-key="7217"><span data-slate-leaf="true" data-offset-key="7217:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">type</span></span></span></span><span data-slate-object="text" data-key="7218"><span data-slate-leaf="true" data-offset-key="7218:0" data-first-offset="true"><span data-slate-string="true"> Post </span></span></span><span data-slate-object="text" data-key="7219"><span data-slate-leaf="true" data-offset-key="7219:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">struct</span></span></span></span><span data-slate-object="text" data-key="7220"><span data-slate-leaf="true" data-offset-key="7220:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7221"><span data-slate-object="text" data-key="7222"><span data-slate-leaf="true" data-offset-key="7222:0" data-first-offset="true"><span data-slate-string="true">  Name    </span></span></span><span data-slate-object="text" data-key="7223"><span data-slate-leaf="true" data-offset-key="7223:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">string</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7224"><span data-slate-object="text" data-key="7225"><span data-slate-leaf="true" data-offset-key="7225:0" data-first-offset="true"><span data-slate-string="true">  Address </span></span></span><span data-slate-object="text" data-key="7226"><span data-slate-leaf="true" data-offset-key="7226:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">string</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7227"><span data-slate-object="text" data-key="7228"><span data-slate-leaf="true" data-offset-key="7228:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7229"></div><div data-slate-type="code-line" data-slate-object="block" data-key="7230"><span data-slate-object="text" data-key="7231"><span data-slate-leaf="true" data-offset-key="7231:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">type</span></span></span></span><span data-slate-object="text" data-key="7232"><span data-slate-leaf="true" data-offset-key="7232:0" data-first-offset="true"><span data-slate-string="true"> Service </span></span></span><span data-slate-object="text" data-key="7233"><span data-slate-leaf="true" data-offset-key="7233:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">interface</span></span></span></span><span data-slate-object="text" data-key="7234"><span data-slate-leaf="true" data-offset-key="7234:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7235"><span data-slate-object="text" data-key="7236"><span data-slate-leaf="true" data-offset-key="7236:0" data-first-offset="true"><span data-slate-string="true">  ListPosts() ([]*Post, </span></span></span><span data-slate-object="text" data-key="7237"><span data-slate-leaf="true" data-offset-key="7237:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">error</span></span></span></span><span data-slate-object="text" data-key="7238"><span data-slate-leaf="true" data-offset-key="7238:0" data-first-offset="true"><span data-slate-string="true">)</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7239"><span data-slate-object="text" data-key="7240"><span data-slate-leaf="true" data-offset-key="7240:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7241"></div><div data-slate-type="code-line" data-slate-object="block" data-key="7242"><span data-slate-object="text" data-key="7243"><span data-slate-leaf="true" data-offset-key="7243:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">func</span></span></span></span></span><span data-slate-object="text" data-key="7244"><span data-slate-leaf="true" data-offset-key="7244:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span><span data-slate-object="text" data-key="7245"><span data-slate-leaf="true" data-offset-key="7245:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">ListPosts</span></span></span></span></span><span data-slate-object="text" data-key="7246"><span data-slate-leaf="true" data-offset-key="7246:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">(svc Service)</span></span></span></span></span><span data-slate-object="text" data-key="7247"><span data-slate-leaf="true" data-offset-key="7247:0" data-first-offset="true"><span data-slate-string="true"> ([]*Post, </span></span></span><span data-slate-object="text" data-key="7248"><span data-slate-leaf="true" data-offset-key="7248:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">error</span></span></span></span><span data-slate-object="text" data-key="7249"><span data-slate-leaf="true" data-offset-key="7249:0" data-first-offset="true"><span data-slate-string="true">) {</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7250"><span data-slate-object="text" data-key="7251"><span data-slate-leaf="true" data-offset-key="7251:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="7252"><span data-slate-leaf="true" data-offset-key="7252:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">return</span></span></span></span><span data-slate-object="text" data-key="7253"><span data-slate-leaf="true" data-offset-key="7253:0" data-first-offset="true"><span data-slate-string="true"> svc.ListPosts()</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7254"><span data-slate-object="text" data-key="7255"><span data-slate-leaf="true" data-offset-key="7255:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7256"><span data-slate-object="text" data-key="7257"><span data-slate-leaf="true" data-offset-key="7257:0" data-first-offset="true"><span data-slate-string="true">上面代码中，ListPosts 函数入参为 Service 接口类型，只要我们传入一个实现了 Service 接口类型的实例，ListPosts 函数即可成功运行。因此，我们可以在单元测试中可以实现一个不依赖任何第三方服务的 fake 实例，并传给 ListPosts。上述可测代码的单元测试代码如下：</span></span></span></div><div data-code-language="go" data-slate-type="pre" data-slate-object="block" data-key="7258"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div><div data-code-line-number="4"></div><div data-code-line-number="5"></div><div data-code-line-number="6"></div><div data-code-line-number="7"></div><div data-code-line-number="8"></div><div data-code-line-number="9"></div><div data-code-line-number="10"></div><div data-code-line-number="11"></div><div data-code-line-number="12"></div><div data-code-line-number="13"></div><div data-code-line-number="14"></div><div data-code-line-number="15"></div><div data-code-line-number="16"></div><div data-code-line-number="17"></div><div data-code-line-number="18"></div><div data-code-line-number="19"></div><div data-code-line-number="20"></div><div data-code-line-number="21"></div><div data-code-line-number="22"></div><div data-code-line-number="23"></div><div data-code-line-number="24"></div><div data-code-line-number="25"></div><div data-code-line-number="26"></div><div data-code-line-number="27"></div><div data-code-line-number="28"></div><div data-code-line-number="29"></div><div data-code-line-number="30"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="7259"><span data-slate-object="text" data-key="7260"><span data-slate-leaf="true" data-offset-key="7260:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">package</span></span></span></span><span data-slate-object="text" data-key="7261"><span data-slate-leaf="true" data-offset-key="7261:0" data-first-offset="true"><span data-slate-string="true"> main</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7262"></div><div data-slate-type="code-line" data-slate-object="block" data-key="7263"><span data-slate-object="text" data-key="7264"><span data-slate-leaf="true" data-offset-key="7264:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">import</span></span></span></span><span data-slate-object="text" data-key="7265"><span data-slate-leaf="true" data-offset-key="7265:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="7266"><span data-slate-leaf="true" data-offset-key="7266:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">"testing"</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7267"></div><div data-slate-type="code-line" data-slate-object="block" data-key="7268"><span data-slate-object="text" data-key="7269"><span data-slate-leaf="true" data-offset-key="7269:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">type</span></span></span></span><span data-slate-object="text" data-key="7270"><span data-slate-leaf="true" data-offset-key="7270:0" data-first-offset="true"><span data-slate-string="true"> fakeService </span></span></span><span data-slate-object="text" data-key="7271"><span data-slate-leaf="true" data-offset-key="7271:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">struct</span></span></span></span><span data-slate-object="text" data-key="7272"><span data-slate-leaf="true" data-offset-key="7272:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7273"><span data-slate-object="text" data-key="7274"><span data-slate-leaf="true" data-offset-key="7274:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7275"></div><div data-slate-type="code-line" data-slate-object="block" data-key="7276"><span data-slate-object="text" data-key="7277"><span data-slate-leaf="true" data-offset-key="7277:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">func</span></span></span></span></span><span data-slate-object="text" data-key="7278"><span data-slate-leaf="true" data-offset-key="7278:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span><span data-slate-object="text" data-key="7279"><span data-slate-leaf="true" data-offset-key="7279:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">NewFakeService</span></span></span></span></span><span data-slate-object="text" data-key="7280"><span data-slate-leaf="true" data-offset-key="7280:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">()</span></span></span></span></span><span data-slate-object="text" data-key="7281"><span data-slate-leaf="true" data-offset-key="7281:0" data-first-offset="true"><span data-slate-string="true"> Service {</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7282"><span data-slate-object="text" data-key="7283"><span data-slate-leaf="true" data-offset-key="7283:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="7284"><span data-slate-leaf="true" data-offset-key="7284:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">return</span></span></span></span><span data-slate-object="text" data-key="7285"><span data-slate-leaf="true" data-offset-key="7285:0" data-first-offset="true"><span data-slate-string="true"> &amp;fakeService{}</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7286"><span data-slate-object="text" data-key="7287"><span data-slate-leaf="true" data-offset-key="7287:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7288"></div><div data-slate-type="code-line" data-slate-object="block" data-key="7289"><span data-slate-object="text" data-key="7290"><span data-slate-leaf="true" data-offset-key="7290:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">func</span></span></span></span></span><span data-slate-object="text" data-key="7291"><span data-slate-leaf="true" data-offset-key="7291:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span><span data-slate-object="text" data-key="7292"><span data-slate-leaf="true" data-offset-key="7292:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">(s *fakeService)</span></span></span></span></span><span data-slate-object="text" data-key="7293"><span data-slate-leaf="true" data-offset-key="7293:0" data-first-offset="true"><span data-slate-string="true"> ListPosts() ([]*Post, </span></span></span><span data-slate-object="text" data-key="7294"><span data-slate-leaf="true" data-offset-key="7294:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">error</span></span></span></span><span data-slate-object="text" data-key="7295"><span data-slate-leaf="true" data-offset-key="7295:0" data-first-offset="true"><span data-slate-string="true">) {</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7296"><span data-slate-object="text" data-key="7297"><span data-slate-leaf="true" data-offset-key="7297:0" data-first-offset="true"><span data-slate-string="true">  posts := </span></span></span><span data-slate-object="text" data-key="7298"><span data-slate-leaf="true" data-offset-key="7298:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">make</span></span></span></span><span data-slate-object="text" data-key="7299"><span data-slate-leaf="true" data-offset-key="7299:0" data-first-offset="true"><span data-slate-string="true">([]*Post, </span></span></span><span data-slate-object="text" data-key="7300"><span data-slate-leaf="true" data-offset-key="7300:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">0</span></span></span></span><span data-slate-object="text" data-key="7301"><span data-slate-leaf="true" data-offset-key="7301:0" data-first-offset="true"><span data-slate-string="true">)</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7302"><span data-slate-object="text" data-key="7303"><span data-slate-leaf="true" data-offset-key="7303:0" data-first-offset="true"><span data-slate-string="true">  posts = </span></span></span><span data-slate-object="text" data-key="7304"><span data-slate-leaf="true" data-offset-key="7304:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">append</span></span></span></span><span data-slate-object="text" data-key="7305"><span data-slate-leaf="true" data-offset-key="7305:0" data-first-offset="true"><span data-slate-string="true">(posts, &amp;Post{</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7306"><span data-slate-object="text" data-key="7307"><span data-slate-leaf="true" data-offset-key="7307:0" data-first-offset="true"><span data-slate-string="true">    Name:    </span></span></span><span data-slate-object="text" data-key="7308"><span data-slate-leaf="true" data-offset-key="7308:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">"colin"</span></span></span></span><span data-slate-object="text" data-key="7309"><span data-slate-leaf="true" data-offset-key="7309:0" data-first-offset="true"><span data-slate-string="true">,</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7310"><span data-slate-object="text" data-key="7311"><span data-slate-leaf="true" data-offset-key="7311:0" data-first-offset="true"><span data-slate-string="true">    Address: </span></span></span><span data-slate-object="text" data-key="7312"><span data-slate-leaf="true" data-offset-key="7312:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">"Shenzhen"</span></span></span></span><span data-slate-object="text" data-key="7313"><span data-slate-leaf="true" data-offset-key="7313:0" data-first-offset="true"><span data-slate-string="true">,</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7314"><span data-slate-object="text" data-key="7315"><span data-slate-leaf="true" data-offset-key="7315:0" data-first-offset="true"><span data-slate-string="true">  })</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7316"><span data-slate-object="text" data-key="7317"><span data-slate-leaf="true" data-offset-key="7317:0" data-first-offset="true"><span data-slate-string="true">  posts = </span></span></span><span data-slate-object="text" data-key="7318"><span data-slate-leaf="true" data-offset-key="7318:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">append</span></span></span></span><span data-slate-object="text" data-key="7319"><span data-slate-leaf="true" data-offset-key="7319:0" data-first-offset="true"><span data-slate-string="true">(posts, &amp;Post{</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7320"><span data-slate-object="text" data-key="7321"><span data-slate-leaf="true" data-offset-key="7321:0" data-first-offset="true"><span data-slate-string="true">    Name:    </span></span></span><span data-slate-object="text" data-key="7322"><span data-slate-leaf="true" data-offset-key="7322:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">"alex"</span></span></span></span><span data-slate-object="text" data-key="7323"><span data-slate-leaf="true" data-offset-key="7323:0" data-first-offset="true"><span data-slate-string="true">,</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7324"><span data-slate-object="text" data-key="7325"><span data-slate-leaf="true" data-offset-key="7325:0" data-first-offset="true"><span data-slate-string="true">    Address: </span></span></span><span data-slate-object="text" data-key="7326"><span data-slate-leaf="true" data-offset-key="7326:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">"Beijing"</span></span></span></span><span data-slate-object="text" data-key="7327"><span data-slate-leaf="true" data-offset-key="7327:0" data-first-offset="true"><span data-slate-string="true">,</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7328"><span data-slate-object="text" data-key="7329"><span data-slate-leaf="true" data-offset-key="7329:0" data-first-offset="true"><span data-slate-string="true">  })</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7330"><span data-slate-object="text" data-key="7331"><span data-slate-leaf="true" data-offset-key="7331:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="7332"><span data-slate-leaf="true" data-offset-key="7332:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">return</span></span></span></span><span data-slate-object="text" data-key="7333"><span data-slate-leaf="true" data-offset-key="7333:0" data-first-offset="true"><span data-slate-string="true"> posts, </span></span></span><span data-slate-object="text" data-key="7334"><span data-slate-leaf="true" data-offset-key="7334:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">nil</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7335"><span data-slate-object="text" data-key="7336"><span data-slate-leaf="true" data-offset-key="7336:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7337"></div><div data-slate-type="code-line" data-slate-object="block" data-key="7338"><span data-slate-object="text" data-key="7339"><span data-slate-leaf="true" data-offset-key="7339:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">func</span></span></span></span></span><span data-slate-object="text" data-key="7340"><span data-slate-leaf="true" data-offset-key="7340:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span><span data-slate-object="text" data-key="7341"><span data-slate-leaf="true" data-offset-key="7341:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">TestListPosts</span></span></span></span></span><span data-slate-object="text" data-key="7342"><span data-slate-leaf="true" data-offset-key="7342:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">(t *testing.T)</span></span></span></span></span><span data-slate-object="text" data-key="7343"><span data-slate-leaf="true" data-offset-key="7343:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7344"><span data-slate-object="text" data-key="7345"><span data-slate-leaf="true" data-offset-key="7345:0" data-first-offset="true"><span data-slate-string="true">  fake := NewFakeService()</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7346"><span data-slate-object="text" data-key="7347"><span data-slate-leaf="true" data-offset-key="7347:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="7348"><span data-slate-leaf="true" data-offset-key="7348:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="7349"><span data-slate-leaf="true" data-offset-key="7349:0" data-first-offset="true"><span data-slate-string="true"> _, err := ListPosts(fake); err != </span></span></span><span data-slate-object="text" data-key="7350"><span data-slate-leaf="true" data-offset-key="7350:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">nil</span></span></span></span><span data-slate-object="text" data-key="7351"><span data-slate-leaf="true" data-offset-key="7351:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7352"><span data-slate-object="text" data-key="7353"><span data-slate-leaf="true" data-offset-key="7353:0" data-first-offset="true"><span data-slate-string="true">    t.Fatal(</span></span></span><span data-slate-object="text" data-key="7354"><span data-slate-leaf="true" data-offset-key="7354:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">"list posts failed"</span></span></span></span><span data-slate-object="text" data-key="7355"><span data-slate-leaf="true" data-offset-key="7355:0" data-first-offset="true"><span data-slate-string="true">)</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7356"><span data-slate-object="text" data-key="7357"><span data-slate-leaf="true" data-offset-key="7357:0" data-first-offset="true"><span data-slate-string="true">  }</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7358"><span data-slate-object="text" data-key="7359"><span data-slate-leaf="true" data-offset-key="7359:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7360"><span data-slate-object="text" data-key="7361"><span data-slate-leaf="true" data-offset-key="7361:0" data-first-offset="true"><span data-slate-string="true">当我们的代码可测之后，就可以借助一些工具来 Mock 需要的接口了。常用的 Mock 工具，有这么几个：</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="7362"><div data-slate-type="list-line" data-slate-object="block" data-key="7363"><a data-slate-type="link" data-slate-object="inline" data-key="7364"><span data-slate-object="text" data-key="7365"><span data-slate-leaf="true" data-offset-key="7365:0" data-first-offset="true"><span data-slate-string="true">golang/mock</span></span></span></a><span data-slate-object="text" data-key="7366"><span data-slate-leaf="true" data-offset-key="7366:0" data-first-offset="true"><span data-slate-string="true">，是官方提供的 Mock 框架。它实现了基于 interface 的 Mock 功能，能够与 Golang 内置的 testing 包做很好的集成，是最常用的 Mock 工具。golang/mock 提供了 mockgen 工具用来生成 interface 对应的 Mock 源文件。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="7367"><a data-slate-type="link" data-slate-object="inline" data-key="7368"><span data-slate-object="text" data-key="7369"><span data-slate-leaf="true" data-offset-key="7369:0" data-first-offset="true"><span data-slate-string="true">sqlmock</span></span></span></a><span data-slate-object="text" data-key="7370"><span data-slate-leaf="true" data-offset-key="7370:0" data-first-offset="true"><span data-slate-string="true">，可以用来模拟数据库连接。数据库是项目中比较常见的依赖，在遇到数据库依赖时都可以用它。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="7371"><a data-slate-type="link" data-slate-object="inline" data-key="7372"><span data-slate-object="text" data-key="7373"><span data-slate-leaf="true" data-offset-key="7373:0" data-first-offset="true"><span data-slate-string="true">httpmock</span></span></span></a><span data-slate-object="text" data-key="7374"><span data-slate-leaf="true" data-offset-key="7374:0" data-first-offset="true"><span data-slate-string="true">，可以用来 Mock HTTP 请求。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="7375"><a data-slate-type="link" data-slate-object="inline" data-key="7376"><span data-slate-object="text" data-key="7377"><span data-slate-leaf="true" data-offset-key="7377:0" data-first-offset="true"><span data-slate-string="true">bouk/monkey</span></span></span></a><span data-slate-object="text" data-key="7378"><span data-slate-leaf="true" data-offset-key="7378:0" data-first-offset="true"><span data-slate-string="true">，猴子补丁，能够通过替换函数指针的方式来修改任意函数的实现。如果 golang/mock、sqlmock 和 httpmock 这几种方法都不能满足我们的需求，我们可以尝试通过猴子补丁的方式来 Mock 依赖。可以这么说，猴子补丁提供了单元测试 Mock 依赖的最终解决方案。</span></span></span></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7379"><span data-slate-object="text" data-key="7380"><span data-slate-leaf="true" data-offset-key="7380:0" data-first-offset="true"><span data-slate-string="true">接下来，我们再一起看看</span></span></span><span data-slate-object="text" data-key="7381"><span data-slate-leaf="true" data-offset-key="7381:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">如何提高我们的单元测试覆盖率</span></span></span></span><span data-slate-object="text" data-key="7382"><span data-slate-leaf="true" data-offset-key="7382:0" data-first-offset="true"><span data-slate-string="true">。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7383"><span data-slate-object="text" data-key="7384"><span data-slate-leaf="true" data-offset-key="7384:0" data-first-offset="true"><span data-slate-string="true">当我们编写了可测试的代码之后，接下来就需要编写足够的测试用例，用来提高项目的单元测试覆盖率。这里我有以下两个建议供你参考：</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="7385"><div data-slate-type="list-line" data-slate-object="block" data-key="7386"><span data-slate-object="text" data-key="7387"><span data-slate-leaf="true" data-offset-key="7387:0" data-first-offset="true"><span data-slate-string="true">使用 gotests 工具自动生成单元测试代码，减少编写单元测试用例的工作量，将你从重复的劳动中解放出来。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="7388"><span data-slate-object="text" data-key="7389"><span data-slate-leaf="true" data-offset-key="7389:0" data-first-offset="true"><span data-slate-string="true">定期检查单元测试覆盖率。你可以通过以下方法来检查：</span></span></span></div></div><div data-code-language="shell" data-slate-type="pre" data-slate-object="block" data-key="7390"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="7391"><span data-slate-object="text" data-key="7392"><span data-slate-leaf="true" data-offset-key="7392:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">$ </span></span></span></span><span data-slate-object="text" data-key="7393"><span data-slate-leaf="true" data-offset-key="7393:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">go </span></span></span></span><span data-slate-object="text" data-key="7394"><span data-slate-leaf="true" data-offset-key="7394:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">test</span></span></span></span></span><span data-slate-object="text" data-key="7395"><span data-slate-leaf="true" data-offset-key="7395:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"> -race -cover  -coverprofile=./coverage.out -</span></span></span></span><span data-slate-object="text" data-key="7396"><span data-slate-leaf="true" data-offset-key="7396:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">timeout</span></span></span></span></span><span data-slate-object="text" data-key="7397"><span data-slate-leaf="true" data-offset-key="7397:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">=10m -short -v ./...</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7398"><span data-slate-object="text" data-key="7399"><span data-slate-leaf="true" data-offset-key="7399:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">$ </span></span></span></span><span data-slate-object="text" data-key="7400"><span data-slate-leaf="true" data-offset-key="7400:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">go tool cover -func ./coverage.out</span></span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7401"><span data-slate-object="text" data-key="7402"><span data-slate-leaf="true" data-offset-key="7402:0" data-first-offset="true"><span data-slate-string="true">执行结果如下：</span></span></span></div><div data-slate-type="image" data-slate-object="block" data-key="7403"><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://static001.geekbang.org/resource/image/d2/89/d2fae0aca602c7c33466411e39c49489.png?wh=2162x412"></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7404"><span data-slate-object="text" data-key="7405"><span data-slate-leaf="true" data-offset-key="7405:0" data-first-offset="true"><span data-slate-string="true">在提高项目的单元测试覆盖率时，我们可以先提高单元测试覆盖率低的函数，之后再检查项目的单元测试覆盖率；如果项目的单元测试覆盖率仍然低于期望的值，可以再次提高单元测试覆盖率低的函数的覆盖率，然后再检查。以此循环，最终将项目的单元测试覆盖率优化到预期的值为止。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7406"><span data-slate-object="text" data-key="7407"><span data-slate-leaf="true" data-offset-key="7407:0" data-first-offset="true"><span data-slate-string="true">这里要注意，对于一些可能经常会变动的函数单元测试，覆盖率要达到 100%。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7408"><span data-slate-object="text" data-key="7409"><span data-slate-leaf="true" data-offset-key="7409:0" data-first-offset="true"><span data-slate-string="true">说完了单元测试，我们再看看</span></span></span><span data-slate-object="text" data-key="7410"><span data-slate-leaf="true" data-offset-key="7410:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">如何通过 Code Review 来保证代码质量。</span></span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7411"><span data-slate-object="text" data-key="7412"><span data-slate-leaf="true" data-offset-key="7412:0" data-first-offset="true"><span data-slate-string="true">Code Review 可以提高代码质量、交叉排查缺陷，并且促进团队内知识共享，是保障代码质量非常有效的手段。在我们的项目开发中，一定要建立一套持久可行的 Code Review 机制。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7413"><span data-slate-object="text" data-key="7414"><span data-slate-leaf="true" data-offset-key="7414:0" data-first-offset="true"><span data-slate-string="true">但在我的研发生涯中，发现很多团队没有建立有效的 Code Review 机制。这些团队都认可 Code Review 机制带来的好处，但是因为流程难以遵守，慢慢地 Code Review 就变成了形式主义，最终不了了之。其实，建立 Code Review 机制很简单，主要有 3 点：</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="7415"><div data-slate-type="list-line" data-slate-object="block" data-key="7416"><span data-slate-object="text" data-key="7417"><span data-slate-leaf="true" data-offset-key="7417:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_e15e2163" data-attr-id="32566" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">首先，确保我们使用的代码托管平台有 Code Review 的功能。比如，GitHub、GitLab 这类代码托管平台都具备这种能力。</span></span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="7418"><span data-slate-object="text" data-key="7419"><span data-slate-leaf="true" data-offset-key="7419:0" data-first-offset="true"><span data-slate-string="true">接着，建立一套 Code Review 规范，规定如何进行 Code Review。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="7420"><span data-slate-object="text" data-key="7421"><span data-slate-leaf="true" data-offset-key="7421:0" data-first-offset="true"><span data-slate-string="true">最后，也是最重要的，每次代码变更，相关开发人员都要去落实 Code Review 机制，并形成习惯，直到最后形成团队文化。</span></span></span></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7422"><span data-slate-object="text" data-key="7423"><span data-slate-leaf="true" data-offset-key="7423:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">到这里我们可以小结一下：组织一个合理的代码结构、编写符合 Go 代码规范的代码、保证代码质量，在我看来都是编写高质量 Go 代码的外功。那内功是什么呢？就是编程哲学和软件设计方法。</span></span></span></span></div><h3 data-slate-type="heading" data-slate-object="block" data-key="7424" id="sr-toc-6"><span data-slate-object="text" data-key="7425"><span data-slate-leaf="true" data-offset-key="7425:0" data-first-offset="true"><span data-slate-string="true">编程哲学</span></span></span></h3><div data-slate-type="paragraph" data-slate-object="block" data-key="7426"><span data-slate-object="text" data-key="7427"><span data-slate-leaf="true" data-offset-key="7427:0" data-first-offset="true"><span data-slate-string="true">那编程哲学是什么意思呢？在我看来，编程哲学，其实就是要编写符合 Go 语言设计哲学的代码。Go 语言有很多设计哲学，对代码质量影响比较大的，我认为有两个：面向接口编程和面向 “对象” 编程。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7428"><span data-slate-object="text" data-key="7429"><span data-slate-leaf="true" data-offset-key="7429:0" data-first-offset="true"><span data-slate-string="true">我们先来看下面向接口编程。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7430"><span data-slate-object="text" data-key="7431"><span data-slate-leaf="true" data-offset-key="7431:0" data-first-offset="true"><span data-slate-string="true">Go 接口是一组方法的集合。任何类型，只要实现了该接口中的方法集，那么就属于这个类型，也称为实现了该接口。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7432"><span data-slate-object="text" data-key="7433"><span data-slate-leaf="true" data-offset-key="7433:0" data-first-offset="true"><span data-slate-string="true">接口的作用，其实就是为不同层级的模块提供一个定义好的中间层。这样，上游不再需要依赖下游的具体实现，充分地对上下游进行了解耦。很多流行的 Go 设计模式，就是通过面向接口编程的思想来实现的。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7434"><span data-slate-object="text" data-key="7435"><span data-slate-leaf="true" data-offset-key="7435:0" data-first-offset="true"><span data-slate-string="true">我们看一个面向接口编程的例子。下面这段代码定义了一个</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="7436"><span data-slate-object="text" data-key="7437"><span data-slate-leaf="true" data-offset-key="7437:0" data-first-offset="true"><span data-slate-string="true"> Bird</span></span></span></span><span data-slate-object="text" data-key="7438"><span data-slate-leaf="true" data-offset-key="7438:0" data-first-offset="true"><span data-slate-string="true"> 接口，Canary 和 Crow 类型均实现了</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="7439"><span data-slate-object="text" data-key="7440"><span data-slate-leaf="true" data-offset-key="7440:0" data-first-offset="true"><span data-slate-string="true"> Bird</span></span></span></span><span data-slate-object="text" data-key="7441"><span data-slate-leaf="true" data-offset-key="7441:0" data-first-offset="true"><span data-slate-string="true"> 接口。</span></span></span></div><div data-code-language="go" data-slate-type="pre" data-slate-object="block" data-key="7442"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div><div data-code-line-number="4"></div><div data-code-line-number="5"></div><div data-code-line-number="6"></div><div data-code-line-number="7"></div><div data-code-line-number="8"></div><div data-code-line-number="9"></div><div data-code-line-number="10"></div><div data-code-line-number="11"></div><div data-code-line-number="12"></div><div data-code-line-number="13"></div><div data-code-line-number="14"></div><div data-code-line-number="15"></div><div data-code-line-number="16"></div><div data-code-line-number="17"></div><div data-code-line-number="18"></div><div data-code-line-number="19"></div><div data-code-line-number="20"></div><div data-code-line-number="21"></div><div data-code-line-number="22"></div><div data-code-line-number="23"></div><div data-code-line-number="24"></div><div data-code-line-number="25"></div><div data-code-line-number="26"></div><div data-code-line-number="27"></div><div data-code-line-number="28"></div><div data-code-line-number="29"></div><div data-code-line-number="30"></div><div data-code-line-number="31"></div><div data-code-line-number="32"></div><div data-code-line-number="33"></div><div data-code-line-number="34"></div><div data-code-line-number="35"></div><div data-code-line-number="36"></div><div data-code-line-number="37"></div><div data-code-line-number="38"></div><div data-code-line-number="39"></div><div data-code-line-number="40"></div><div data-code-line-number="41"></div><div data-code-line-number="42"></div><div data-code-line-number="43"></div><div data-code-line-number="44"></div><div data-code-line-number="45"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="7443"><span data-slate-object="text" data-key="7444"><span data-slate-leaf="true" data-offset-key="7444:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">package</span></span></span></span><span data-slate-object="text" data-key="7445"><span data-slate-leaf="true" data-offset-key="7445:0" data-first-offset="true"><span data-slate-string="true"> main</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7446"></div><div data-slate-type="code-line" data-slate-object="block" data-key="7447"><span data-slate-object="text" data-key="7448"><span data-slate-leaf="true" data-offset-key="7448:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">import</span></span></span></span><span data-slate-object="text" data-key="7449"><span data-slate-leaf="true" data-offset-key="7449:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="7450"><span data-slate-leaf="true" data-offset-key="7450:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">"fmt"</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7451"></div><div data-slate-type="code-line" data-slate-object="block" data-key="7452"><span data-slate-object="text" data-key="7453"><span data-slate-leaf="true" data-offset-key="7453:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">// 定义了一个鸟类</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7454"><span data-slate-object="text" data-key="7455"><span data-slate-leaf="true" data-offset-key="7455:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">type</span></span></span></span><span data-slate-object="text" data-key="7456"><span data-slate-leaf="true" data-offset-key="7456:0" data-first-offset="true"><span data-slate-string="true"> Bird </span></span></span><span data-slate-object="text" data-key="7457"><span data-slate-leaf="true" data-offset-key="7457:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">interface</span></span></span></span><span data-slate-object="text" data-key="7458"><span data-slate-leaf="true" data-offset-key="7458:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7459"><span data-slate-object="text" data-key="7460"><span data-slate-leaf="true" data-offset-key="7460:0" data-first-offset="true"><span data-slate-string="true">  Fly()</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7461"><span data-slate-object="text" data-key="7462"><span data-slate-leaf="true" data-offset-key="7462:0" data-first-offset="true"><span data-slate-string="true">  Type() </span></span></span><span data-slate-object="text" data-key="7463"><span data-slate-leaf="true" data-offset-key="7463:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">string</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7464"><span data-slate-object="text" data-key="7465"><span data-slate-leaf="true" data-offset-key="7465:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7466"></div><div data-slate-type="code-line" data-slate-object="block" data-key="7467"><span data-slate-object="text" data-key="7468"><span data-slate-leaf="true" data-offset-key="7468:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">// 鸟类：金丝雀</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7469"><span data-slate-object="text" data-key="7470"><span data-slate-leaf="true" data-offset-key="7470:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">type</span></span></span></span><span data-slate-object="text" data-key="7471"><span data-slate-leaf="true" data-offset-key="7471:0" data-first-offset="true"><span data-slate-string="true"> Canary </span></span></span><span data-slate-object="text" data-key="7472"><span data-slate-leaf="true" data-offset-key="7472:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">struct</span></span></span></span><span data-slate-object="text" data-key="7473"><span data-slate-leaf="true" data-offset-key="7473:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7474"><span data-slate-object="text" data-key="7475"><span data-slate-leaf="true" data-offset-key="7475:0" data-first-offset="true"><span data-slate-string="true">  Name </span></span></span><span data-slate-object="text" data-key="7476"><span data-slate-leaf="true" data-offset-key="7476:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">string</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7477"><span data-slate-object="text" data-key="7478"><span data-slate-leaf="true" data-offset-key="7478:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7479"></div><div data-slate-type="code-line" data-slate-object="block" data-key="7480"><span data-slate-object="text" data-key="7481"><span data-slate-leaf="true" data-offset-key="7481:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">func</span></span></span></span></span><span data-slate-object="text" data-key="7482"><span data-slate-leaf="true" data-offset-key="7482:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span><span data-slate-object="text" data-key="7483"><span data-slate-leaf="true" data-offset-key="7483:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">(c *Canary)</span></span></span></span></span><span data-slate-object="text" data-key="7484"><span data-slate-leaf="true" data-offset-key="7484:0" data-first-offset="true"><span data-slate-string="true"> Fly() {</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7485"><span data-slate-object="text" data-key="7486"><span data-slate-leaf="true" data-offset-key="7486:0" data-first-offset="true"><span data-slate-string="true">  fmt.Printf(</span></span></span><span data-slate-object="text" data-key="7487"><span data-slate-leaf="true" data-offset-key="7487:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">"我是 % s，用黄色的翅膀飞 \n"</span></span></span></span><span data-slate-object="text" data-key="7488"><span data-slate-leaf="true" data-offset-key="7488:0" data-first-offset="true"><span data-slate-string="true">, c.Name)</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7489"><span data-slate-object="text" data-key="7490"><span data-slate-leaf="true" data-offset-key="7490:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7491"><span data-slate-object="text" data-key="7492"><span data-slate-leaf="true" data-offset-key="7492:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">func</span></span></span></span></span><span data-slate-object="text" data-key="7493"><span data-slate-leaf="true" data-offset-key="7493:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span><span data-slate-object="text" data-key="7494"><span data-slate-leaf="true" data-offset-key="7494:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">(c *Canary)</span></span></span></span></span><span data-slate-object="text" data-key="7495"><span data-slate-leaf="true" data-offset-key="7495:0" data-first-offset="true"><span data-slate-string="true"> Type() </span></span></span><span data-slate-object="text" data-key="7496"><span data-slate-leaf="true" data-offset-key="7496:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">string</span></span></span></span><span data-slate-object="text" data-key="7497"><span data-slate-leaf="true" data-offset-key="7497:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7498"><span data-slate-object="text" data-key="7499"><span data-slate-leaf="true" data-offset-key="7499:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="7500"><span data-slate-leaf="true" data-offset-key="7500:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">return</span></span></span></span><span data-slate-object="text" data-key="7501"><span data-slate-leaf="true" data-offset-key="7501:0" data-first-offset="true"><span data-slate-string="true"> c.Name</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7502"><span data-slate-object="text" data-key="7503"><span data-slate-leaf="true" data-offset-key="7503:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7504"></div><div data-slate-type="code-line" data-slate-object="block" data-key="7505"><span data-slate-object="text" data-key="7506"><span data-slate-leaf="true" data-offset-key="7506:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">// 鸟类：乌鸦</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7507"><span data-slate-object="text" data-key="7508"><span data-slate-leaf="true" data-offset-key="7508:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">type</span></span></span></span><span data-slate-object="text" data-key="7509"><span data-slate-leaf="true" data-offset-key="7509:0" data-first-offset="true"><span data-slate-string="true"> Crow </span></span></span><span data-slate-object="text" data-key="7510"><span data-slate-leaf="true" data-offset-key="7510:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">struct</span></span></span></span><span data-slate-object="text" data-key="7511"><span data-slate-leaf="true" data-offset-key="7511:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7512"><span data-slate-object="text" data-key="7513"><span data-slate-leaf="true" data-offset-key="7513:0" data-first-offset="true"><span data-slate-string="true">  Name </span></span></span><span data-slate-object="text" data-key="7514"><span data-slate-leaf="true" data-offset-key="7514:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">string</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7515"><span data-slate-object="text" data-key="7516"><span data-slate-leaf="true" data-offset-key="7516:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7517"></div><div data-slate-type="code-line" data-slate-object="block" data-key="7518"><span data-slate-object="text" data-key="7519"><span data-slate-leaf="true" data-offset-key="7519:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">func</span></span></span></span></span><span data-slate-object="text" data-key="7520"><span data-slate-leaf="true" data-offset-key="7520:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span><span data-slate-object="text" data-key="7521"><span data-slate-leaf="true" data-offset-key="7521:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">(c *Crow)</span></span></span></span></span><span data-slate-object="text" data-key="7522"><span data-slate-leaf="true" data-offset-key="7522:0" data-first-offset="true"><span data-slate-string="true"> Fly() {</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7523"><span data-slate-object="text" data-key="7524"><span data-slate-leaf="true" data-offset-key="7524:0" data-first-offset="true"><span data-slate-string="true">  fmt.Printf(</span></span></span><span data-slate-object="text" data-key="7525"><span data-slate-leaf="true" data-offset-key="7525:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">"我是 % s，我用黑色的翅膀飞 \n"</span></span></span></span><span data-slate-object="text" data-key="7526"><span data-slate-leaf="true" data-offset-key="7526:0" data-first-offset="true"><span data-slate-string="true">, c.Name)</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7527"><span data-slate-object="text" data-key="7528"><span data-slate-leaf="true" data-offset-key="7528:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7529"></div><div data-slate-type="code-line" data-slate-object="block" data-key="7530"><span data-slate-object="text" data-key="7531"><span data-slate-leaf="true" data-offset-key="7531:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">func</span></span></span></span></span><span data-slate-object="text" data-key="7532"><span data-slate-leaf="true" data-offset-key="7532:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span><span data-slate-object="text" data-key="7533"><span data-slate-leaf="true" data-offset-key="7533:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">(c *Crow)</span></span></span></span></span><span data-slate-object="text" data-key="7534"><span data-slate-leaf="true" data-offset-key="7534:0" data-first-offset="true"><span data-slate-string="true"> Type() </span></span></span><span data-slate-object="text" data-key="7535"><span data-slate-leaf="true" data-offset-key="7535:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">string</span></span></span></span><span data-slate-object="text" data-key="7536"><span data-slate-leaf="true" data-offset-key="7536:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7537"><span data-slate-object="text" data-key="7538"><span data-slate-leaf="true" data-offset-key="7538:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="7539"><span data-slate-leaf="true" data-offset-key="7539:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">return</span></span></span></span><span data-slate-object="text" data-key="7540"><span data-slate-leaf="true" data-offset-key="7540:0" data-first-offset="true"><span data-slate-string="true"> c.Name</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7541"><span data-slate-object="text" data-key="7542"><span data-slate-leaf="true" data-offset-key="7542:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7543"></div><div data-slate-type="code-line" data-slate-object="block" data-key="7544"><span data-slate-object="text" data-key="7545"><span data-slate-leaf="true" data-offset-key="7545:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">// 让鸟类飞一下</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7546"><span data-slate-object="text" data-key="7547"><span data-slate-leaf="true" data-offset-key="7547:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">func</span></span></span></span></span><span data-slate-object="text" data-key="7548"><span data-slate-leaf="true" data-offset-key="7548:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span><span data-slate-object="text" data-key="7549"><span data-slate-leaf="true" data-offset-key="7549:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">LetItFly</span></span></span></span></span><span data-slate-object="text" data-key="7550"><span data-slate-leaf="true" data-offset-key="7550:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">(bird Bird)</span></span></span></span></span><span data-slate-object="text" data-key="7551"><span data-slate-leaf="true" data-offset-key="7551:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7552"><span data-slate-object="text" data-key="7553"><span data-slate-leaf="true" data-offset-key="7553:0" data-first-offset="true"><span data-slate-string="true">  fmt.Printf(</span></span></span><span data-slate-object="text" data-key="7554"><span data-slate-leaf="true" data-offset-key="7554:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">"Let %s Fly!\n"</span></span></span></span><span data-slate-object="text" data-key="7555"><span data-slate-leaf="true" data-offset-key="7555:0" data-first-offset="true"><span data-slate-string="true">, bird.Type())</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7556"><span data-slate-object="text" data-key="7557"><span data-slate-leaf="true" data-offset-key="7557:0" data-first-offset="true"><span data-slate-string="true">  bird.Fly()</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7558"><span data-slate-object="text" data-key="7559"><span data-slate-leaf="true" data-offset-key="7559:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7560"></div><div data-slate-type="code-line" data-slate-object="block" data-key="7561"><span data-slate-object="text" data-key="7562"><span data-slate-leaf="true" data-offset-key="7562:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">func</span></span></span></span></span><span data-slate-object="text" data-key="7563"><span data-slate-leaf="true" data-offset-key="7563:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span><span data-slate-object="text" data-key="7564"><span data-slate-leaf="true" data-offset-key="7564:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">main</span></span></span></span></span><span data-slate-object="text" data-key="7565"><span data-slate-leaf="true" data-offset-key="7565:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">()</span></span></span></span></span><span data-slate-object="text" data-key="7566"><span data-slate-leaf="true" data-offset-key="7566:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7567"><span data-slate-object="text" data-key="7568"><span data-slate-leaf="true" data-offset-key="7568:0" data-first-offset="true"><span data-slate-string="true">  LetItFly(&amp;Canary{</span></span></span><span data-slate-object="text" data-key="7569"><span data-slate-leaf="true" data-offset-key="7569:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">"金丝雀"</span></span></span></span><span data-slate-object="text" data-key="7570"><span data-slate-leaf="true" data-offset-key="7570:0" data-first-offset="true"><span data-slate-string="true">})</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7571"><span data-slate-object="text" data-key="7572"><span data-slate-leaf="true" data-offset-key="7572:0" data-first-offset="true"><span data-slate-string="true">  LetItFly(&amp;Crow{</span></span></span><span data-slate-object="text" data-key="7573"><span data-slate-leaf="true" data-offset-key="7573:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">"乌鸦"</span></span></span></span><span data-slate-object="text" data-key="7574"><span data-slate-leaf="true" data-offset-key="7574:0" data-first-offset="true"><span data-slate-string="true">})</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7575"><span data-slate-object="text" data-key="7576"><span data-slate-leaf="true" data-offset-key="7576:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7577"><span data-slate-object="text" data-key="7578"><span data-slate-leaf="true" data-offset-key="7578:0" data-first-offset="true"><span data-slate-string="true">这段代码中，因为 Crow 和 Canary 都实现了 Bird 接口声明的 Fly、Type 方法，所以可以说 Crow、Canary 实现了 Bird 接口，属于 Bird 类型。在函数调用时，可以传入 Bird 类型，并在函数内部调用 Bird 接口提供的方法，以此来解耦 Bird 的具体实现。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7579"><span data-slate-object="text" data-key="7580"><span data-slate-leaf="true" data-offset-key="7580:0" data-first-offset="true"><span data-slate-string="true">好了，我们总结下使用接口的好处吧：</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="7581"><div data-slate-type="list-line" data-slate-object="block" data-key="7582"><span data-slate-object="text" data-key="7583"><span data-slate-leaf="true" data-offset-key="7583:0" data-first-offset="true"><span data-slate-string="true">代码扩展性更强了。例如，同样的 Bird，可以有不同的实现。在开发中用的更多的是，将数据库的 CURD 操作抽象成接口，从而可以实现同一份代码对接不同数据库的目的。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="7584"><span data-slate-object="text" data-key="7585"><span data-slate-leaf="true" data-offset-key="7585:0" data-first-offset="true"><span data-slate-string="true">可以解耦上下游的实现。例如，LetItFly 不用关注 Bird 是如何 Fly 的，只需要调用 Bird 提供的方法即可。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="7586"><span data-slate-object="text" data-key="7587"><span data-slate-leaf="true" data-offset-key="7587:0" data-first-offset="true"><span data-slate-string="true">提高了代码的可测性。因为接口可以解耦上下游实现，我们在单元测试需要依赖第三方系统 / 数据库的代码时，可以利用接口将具体实现解耦，实现 fake 类型。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="7588"><span data-slate-object="text" data-key="7589"><span data-slate-leaf="true" data-offset-key="7589:0" data-first-offset="true"><span data-slate-string="true">代码更健壮、更稳定了。例如，如果要更改 Fly 的方式，只需要更改相关类型的 Fly 方法即可，完全影响不到 LetItFly 函数。</span></span></span></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7590"><span data-slate-object="text" data-key="7591"><span data-slate-leaf="true" data-offset-key="7591:0" data-first-offset="true"><span data-slate-string="true">所以，我建议你，</span></span><span data-slate-leaf="true" data-offset-key="7591:1"><span data-slate-object="annotation" data-annotation-key="gkann_7f38483f" data-attr-id="24272" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">在 Go 项目开发中，一定要多思考，那些可能有多种实现的地方，要考虑使用接口。</span></span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7592"><span data-slate-object="text" data-key="7593"><span data-slate-leaf="true" data-offset-key="7593:0" data-first-offset="true"><span data-slate-string="true">接下来，我们再来看下面向 “对象” 编程。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7594"><span data-slate-object="text" data-key="7595"><span data-slate-leaf="true" data-offset-key="7595:0" data-first-offset="true"><span data-slate-string="true">面向对象编程（OOP）有很多优点，例如可以使我们的代码变得易维护、易扩展，并能提高开发效率等，所以一个高质量的 Go 应用在需要时，也应该采用面向对象的方法去编程。那什么叫 “在需要时” 呢？就是我们在开发代码时，如果一个功能可以通过接近于日常生活和自然的思考方式来实现，这时候就应该考虑使用面向对象的编程方法。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7596"><span data-slate-object="text" data-key="7597"><span data-slate-leaf="true" data-offset-key="7597:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_95fddf19" data-attr-id="43851" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">Go 语言不支持面向对象编程，但是却可以通过一些语言级的特性来实现类似的效果。</span></span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7598"><span data-slate-object="text" data-key="7599"><span data-slate-leaf="true" data-offset-key="7599:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_842efb81" data-attr-id="39630" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">面向对象编程中，有几个核心特性：类、实例、抽象，封装、继承、多态、构造函数、析构函数、方法重载、this 指针。在 Go 中可以通过以下几个方式来实现类似的效果：</span></span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="7600"><div data-slate-type="list-line" data-slate-object="block" data-key="7601"><span data-slate-object="text" data-key="7602"><span data-slate-leaf="true" data-offset-key="7602:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_9b1f69a8" data-attr-id="25457" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">类、抽象、封装通过结构体来实现。</span></span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="7603"><span data-slate-object="text" data-key="7604"><span data-slate-leaf="true" data-offset-key="7604:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_4047e6d3" data-attr-id="25458" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">实例通过结构体变量来实现。</span></span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="7605"><span data-slate-object="text" data-key="7606"><span data-slate-leaf="true" data-offset-key="7606:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_895f8038" data-attr-id="25459" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">继承通过组合来实现。这里解释下什么叫组合：一个结构体嵌到另一个结构体，称作组合。例如一个结构体包含了一个匿名结构体，就说这个结构体组合了该匿名结构体。</span></span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="7607"><span data-slate-object="text" data-key="7608"><span data-slate-leaf="true" data-offset-key="7608:0" data-first-offset="true"><span data-slate-string="true">多态通过接口来实现。</span></span></span></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7609"><span data-slate-object="text" data-key="7610"><span data-slate-leaf="true" data-offset-key="7610:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_f2f66bbd" data-attr-id="43852" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">至于构造函数、析构函数、方法重载和 this 指针等，Go 为了保持语言的简洁性去掉了这些特性。</span></span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7611"><span data-slate-object="text" data-key="7612"><span data-slate-leaf="true" data-offset-key="7612:0" data-first-offset="true"><span data-slate-string="true">Go 中面向对象编程方法，见下图：</span></span></span></div><div data-slate-type="image" data-slate-object="block" data-key="7613"><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://static001.geekbang.org/resource/image/27/b8/27c84757b1f4626e84535d994ca70eb8.png?wh=1872x606"></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7614"><span data-slate-object="text" data-key="7615"><span data-slate-leaf="true" data-offset-key="7615:0" data-first-offset="true"><span data-slate-string="true">我们通过一个示例，来具体看下 Go 是如何实现面向对象编程中的类、抽象、封装、继承和多态的。代码如下：</span></span></span></div><div data-code-language="go" data-slate-type="pre" data-slate-object="block" data-key="7616"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div><div data-code-line-number="4"></div><div data-code-line-number="5"></div><div data-code-line-number="6"></div><div data-code-line-number="7"></div><div data-code-line-number="8"></div><div data-code-line-number="9"></div><div data-code-line-number="10"></div><div data-code-line-number="11"></div><div data-code-line-number="12"></div><div data-code-line-number="13"></div><div data-code-line-number="14"></div><div data-code-line-number="15"></div><div data-code-line-number="16"></div><div data-code-line-number="17"></div><div data-code-line-number="18"></div><div data-code-line-number="19"></div><div data-code-line-number="20"></div><div data-code-line-number="21"></div><div data-code-line-number="22"></div><div data-code-line-number="23"></div><div data-code-line-number="24"></div><div data-code-line-number="25"></div><div data-code-line-number="26"></div><div data-code-line-number="27"></div><div data-code-line-number="28"></div><div data-code-line-number="29"></div><div data-code-line-number="30"></div><div data-code-line-number="31"></div><div data-code-line-number="32"></div><div data-code-line-number="33"></div><div data-code-line-number="34"></div><div data-code-line-number="35"></div><div data-code-line-number="36"></div><div data-code-line-number="37"></div><div data-code-line-number="38"></div><div data-code-line-number="39"></div><div data-code-line-number="40"></div><div data-code-line-number="41"></div><div data-code-line-number="42"></div><div data-code-line-number="43"></div><div data-code-line-number="44"></div><div data-code-line-number="45"></div><div data-code-line-number="46"></div><div data-code-line-number="47"></div><div data-code-line-number="48"></div><div data-code-line-number="49"></div><div data-code-line-number="50"></div><div data-code-line-number="51"></div><div data-code-line-number="52"></div><div data-code-line-number="53"></div><div data-code-line-number="54"></div><div data-code-line-number="55"></div><div data-code-line-number="56"></div><div data-code-line-number="57"></div><div data-code-line-number="58"></div><div data-code-line-number="59"></div><div data-code-line-number="60"></div><div data-code-line-number="61"></div><div data-code-line-number="62"></div><div data-code-line-number="63"></div><div data-code-line-number="64"></div><div data-code-line-number="65"></div><div data-code-line-number="66"></div><div data-code-line-number="67"></div><div data-code-line-number="68"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="7617"><span data-slate-object="text" data-key="7618"><span data-slate-leaf="true" data-offset-key="7618:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">package</span></span></span></span><span data-slate-object="text" data-key="7619"><span data-slate-leaf="true" data-offset-key="7619:0" data-first-offset="true"><span data-slate-string="true"> main</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7620"></div><div data-slate-type="code-line" data-slate-object="block" data-key="7621"><span data-slate-object="text" data-key="7622"><span data-slate-leaf="true" data-offset-key="7622:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">import</span></span></span></span><span data-slate-object="text" data-key="7623"><span data-slate-leaf="true" data-offset-key="7623:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="7624"><span data-slate-leaf="true" data-offset-key="7624:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">"fmt"</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7625"></div><div data-slate-type="code-line" data-slate-object="block" data-key="7626"><span data-slate-object="text" data-key="7627"><span data-slate-leaf="true" data-offset-key="7627:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">// 基类：Bird</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7628"><span data-slate-object="text" data-key="7629"><span data-slate-leaf="true" data-offset-key="7629:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">type</span></span></span></span><span data-slate-object="text" data-key="7630"><span data-slate-leaf="true" data-offset-key="7630:0" data-first-offset="true"><span data-slate-string="true"> Bird </span></span></span><span data-slate-object="text" data-key="7631"><span data-slate-leaf="true" data-offset-key="7631:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">struct</span></span></span></span><span data-slate-object="text" data-key="7632"><span data-slate-leaf="true" data-offset-key="7632:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7633"><span data-slate-object="text" data-key="7634"><span data-slate-leaf="true" data-offset-key="7634:0" data-first-offset="true"><span data-slate-string="true">  Type </span></span></span><span data-slate-object="text" data-key="7635"><span data-slate-leaf="true" data-offset-key="7635:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">string</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7636"><span data-slate-object="text" data-key="7637"><span data-slate-leaf="true" data-offset-key="7637:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7638"></div><div data-slate-type="code-line" data-slate-object="block" data-key="7639"><span data-slate-object="text" data-key="7640"><span data-slate-leaf="true" data-offset-key="7640:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">// 鸟的类别</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7641"><span data-slate-object="text" data-key="7642"><span data-slate-leaf="true" data-offset-key="7642:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">func</span></span></span></span></span><span data-slate-object="text" data-key="7643"><span data-slate-leaf="true" data-offset-key="7643:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span><span data-slate-object="text" data-key="7644"><span data-slate-leaf="true" data-offset-key="7644:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">(bird *Bird)</span></span></span></span></span><span data-slate-object="text" data-key="7645"><span data-slate-leaf="true" data-offset-key="7645:0" data-first-offset="true"><span data-slate-string="true"> Class() </span></span></span><span data-slate-object="text" data-key="7646"><span data-slate-leaf="true" data-offset-key="7646:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">string</span></span></span></span><span data-slate-object="text" data-key="7647"><span data-slate-leaf="true" data-offset-key="7647:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7648"><span data-slate-object="text" data-key="7649"><span data-slate-leaf="true" data-offset-key="7649:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="7650"><span data-slate-leaf="true" data-offset-key="7650:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">return</span></span></span></span><span data-slate-object="text" data-key="7651"><span data-slate-leaf="true" data-offset-key="7651:0" data-first-offset="true"><span data-slate-string="true"> bird.Type</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7652"><span data-slate-object="text" data-key="7653"><span data-slate-leaf="true" data-offset-key="7653:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7654"></div><div data-slate-type="code-line" data-slate-object="block" data-key="7655"><span data-slate-object="text" data-key="7656"><span data-slate-leaf="true" data-offset-key="7656:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">// 定义了一个鸟类</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7657"><span data-slate-object="text" data-key="7658"><span data-slate-leaf="true" data-offset-key="7658:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">type</span></span></span></span><span data-slate-object="text" data-key="7659"><span data-slate-leaf="true" data-offset-key="7659:0" data-first-offset="true"><span data-slate-string="true"> Birds </span></span></span><span data-slate-object="text" data-key="7660"><span data-slate-leaf="true" data-offset-key="7660:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">interface</span></span></span></span><span data-slate-object="text" data-key="7661"><span data-slate-leaf="true" data-offset-key="7661:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7662"><span data-slate-object="text" data-key="7663"><span data-slate-leaf="true" data-offset-key="7663:0" data-first-offset="true"><span data-slate-string="true">  Name() </span></span></span><span data-slate-object="text" data-key="7664"><span data-slate-leaf="true" data-offset-key="7664:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">string</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7665"><span data-slate-object="text" data-key="7666"><span data-slate-leaf="true" data-offset-key="7666:0" data-first-offset="true"><span data-slate-string="true">  Class() </span></span></span><span data-slate-object="text" data-key="7667"><span data-slate-leaf="true" data-offset-key="7667:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">string</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7668"><span data-slate-object="text" data-key="7669"><span data-slate-leaf="true" data-offset-key="7669:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7670"></div><div data-slate-type="code-line" data-slate-object="block" data-key="7671"><span data-slate-object="text" data-key="7672"><span data-slate-leaf="true" data-offset-key="7672:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">// 鸟类：金丝雀</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7673"><span data-slate-object="text" data-key="7674"><span data-slate-leaf="true" data-offset-key="7674:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">type</span></span></span></span><span data-slate-object="text" data-key="7675"><span data-slate-leaf="true" data-offset-key="7675:0" data-first-offset="true"><span data-slate-string="true"> Canary </span></span></span><span data-slate-object="text" data-key="7676"><span data-slate-leaf="true" data-offset-key="7676:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">struct</span></span></span></span><span data-slate-object="text" data-key="7677"><span data-slate-leaf="true" data-offset-key="7677:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7678"><span data-slate-object="text" data-key="7679"><span data-slate-leaf="true" data-offset-key="7679:0" data-first-offset="true"><span data-slate-string="true">  Bird</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7680"><span data-slate-object="text" data-key="7681"><span data-slate-leaf="true" data-offset-key="7681:0" data-first-offset="true"><span data-slate-string="true">  name </span></span></span><span data-slate-object="text" data-key="7682"><span data-slate-leaf="true" data-offset-key="7682:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">string</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7683"><span data-slate-object="text" data-key="7684"><span data-slate-leaf="true" data-offset-key="7684:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7685"></div><div data-slate-type="code-line" data-slate-object="block" data-key="7686"><span data-slate-object="text" data-key="7687"><span data-slate-leaf="true" data-offset-key="7687:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">func</span></span></span></span></span><span data-slate-object="text" data-key="7688"><span data-slate-leaf="true" data-offset-key="7688:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span><span data-slate-object="text" data-key="7689"><span data-slate-leaf="true" data-offset-key="7689:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">(c *Canary)</span></span></span></span></span><span data-slate-object="text" data-key="7690"><span data-slate-leaf="true" data-offset-key="7690:0" data-first-offset="true"><span data-slate-string="true"> Name() </span></span></span><span data-slate-object="text" data-key="7691"><span data-slate-leaf="true" data-offset-key="7691:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">string</span></span></span></span><span data-slate-object="text" data-key="7692"><span data-slate-leaf="true" data-offset-key="7692:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7693"><span data-slate-object="text" data-key="7694"><span data-slate-leaf="true" data-offset-key="7694:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="7695"><span data-slate-leaf="true" data-offset-key="7695:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">return</span></span></span></span><span data-slate-object="text" data-key="7696"><span data-slate-leaf="true" data-offset-key="7696:0" data-first-offset="true"><span data-slate-string="true"> c.name</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7697"><span data-slate-object="text" data-key="7698"><span data-slate-leaf="true" data-offset-key="7698:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7699"></div><div data-slate-type="code-line" data-slate-object="block" data-key="7700"><span data-slate-object="text" data-key="7701"><span data-slate-leaf="true" data-offset-key="7701:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">// 鸟类：乌鸦</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7702"><span data-slate-object="text" data-key="7703"><span data-slate-leaf="true" data-offset-key="7703:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">type</span></span></span></span><span data-slate-object="text" data-key="7704"><span data-slate-leaf="true" data-offset-key="7704:0" data-first-offset="true"><span data-slate-string="true"> Crow </span></span></span><span data-slate-object="text" data-key="7705"><span data-slate-leaf="true" data-offset-key="7705:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">struct</span></span></span></span><span data-slate-object="text" data-key="7706"><span data-slate-leaf="true" data-offset-key="7706:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7707"><span data-slate-object="text" data-key="7708"><span data-slate-leaf="true" data-offset-key="7708:0" data-first-offset="true"><span data-slate-string="true">  Bird</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7709"><span data-slate-object="text" data-key="7710"><span data-slate-leaf="true" data-offset-key="7710:0" data-first-offset="true"><span data-slate-string="true">  name </span></span></span><span data-slate-object="text" data-key="7711"><span data-slate-leaf="true" data-offset-key="7711:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">string</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7712"><span data-slate-object="text" data-key="7713"><span data-slate-leaf="true" data-offset-key="7713:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7714"></div><div data-slate-type="code-line" data-slate-object="block" data-key="7715"><span data-slate-object="text" data-key="7716"><span data-slate-leaf="true" data-offset-key="7716:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">func</span></span></span></span></span><span data-slate-object="text" data-key="7717"><span data-slate-leaf="true" data-offset-key="7717:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span><span data-slate-object="text" data-key="7718"><span data-slate-leaf="true" data-offset-key="7718:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">(c *Crow)</span></span></span></span></span><span data-slate-object="text" data-key="7719"><span data-slate-leaf="true" data-offset-key="7719:0" data-first-offset="true"><span data-slate-string="true"> Name() </span></span></span><span data-slate-object="text" data-key="7720"><span data-slate-leaf="true" data-offset-key="7720:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">string</span></span></span></span><span data-slate-object="text" data-key="7721"><span data-slate-leaf="true" data-offset-key="7721:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7722"><span data-slate-object="text" data-key="7723"><span data-slate-leaf="true" data-offset-key="7723:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="7724"><span data-slate-leaf="true" data-offset-key="7724:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">return</span></span></span></span><span data-slate-object="text" data-key="7725"><span data-slate-leaf="true" data-offset-key="7725:0" data-first-offset="true"><span data-slate-string="true"> c.name</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7726"><span data-slate-object="text" data-key="7727"><span data-slate-leaf="true" data-offset-key="7727:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7728"></div><div data-slate-type="code-line" data-slate-object="block" data-key="7729"><span data-slate-object="text" data-key="7730"><span data-slate-leaf="true" data-offset-key="7730:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">func</span></span></span></span></span><span data-slate-object="text" data-key="7731"><span data-slate-leaf="true" data-offset-key="7731:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span><span data-slate-object="text" data-key="7732"><span data-slate-leaf="true" data-offset-key="7732:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">NewCrow</span></span></span></span></span><span data-slate-object="text" data-key="7733"><span data-slate-leaf="true" data-offset-key="7733:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">(name </span></span></span></span></span><span data-slate-object="text" data-key="7734"><span data-slate-leaf="true" data-offset-key="7734:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">string</span></span></span></span></span></span><span data-slate-object="text" data-key="7735"><span data-slate-leaf="true" data-offset-key="7735:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">)</span></span></span></span></span><span data-slate-object="text" data-key="7736"><span data-slate-leaf="true" data-offset-key="7736:0" data-first-offset="true"><span data-slate-string="true"> *Crow {</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7737"><span data-slate-object="text" data-key="7738"><span data-slate-leaf="true" data-offset-key="7738:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="7739"><span data-slate-leaf="true" data-offset-key="7739:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">return</span></span></span></span><span data-slate-object="text" data-key="7740"><span data-slate-leaf="true" data-offset-key="7740:0" data-first-offset="true"><span data-slate-string="true"> &amp;Crow{</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7741"><span data-slate-object="text" data-key="7742"><span data-slate-leaf="true" data-offset-key="7742:0" data-first-offset="true"><span data-slate-string="true">    Bird: Bird{</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7743"><span data-slate-object="text" data-key="7744"><span data-slate-leaf="true" data-offset-key="7744:0" data-first-offset="true"><span data-slate-string="true">      Type: </span></span></span><span data-slate-object="text" data-key="7745"><span data-slate-leaf="true" data-offset-key="7745:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">"Crow"</span></span></span></span><span data-slate-object="text" data-key="7746"><span data-slate-leaf="true" data-offset-key="7746:0" data-first-offset="true"><span data-slate-string="true">,</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7747"><span data-slate-object="text" data-key="7748"><span data-slate-leaf="true" data-offset-key="7748:0" data-first-offset="true"><span data-slate-string="true">    },</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7749"><span data-slate-object="text" data-key="7750"><span data-slate-leaf="true" data-offset-key="7750:0" data-first-offset="true"><span data-slate-string="true">    name: name,</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7751"><span data-slate-object="text" data-key="7752"><span data-slate-leaf="true" data-offset-key="7752:0" data-first-offset="true"><span data-slate-string="true">  }</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7753"><span data-slate-object="text" data-key="7754"><span data-slate-leaf="true" data-offset-key="7754:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7755"></div><div data-slate-type="code-line" data-slate-object="block" data-key="7756"><span data-slate-object="text" data-key="7757"><span data-slate-leaf="true" data-offset-key="7757:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">func</span></span></span></span></span><span data-slate-object="text" data-key="7758"><span data-slate-leaf="true" data-offset-key="7758:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span><span data-slate-object="text" data-key="7759"><span data-slate-leaf="true" data-offset-key="7759:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">NewCanary</span></span></span></span></span><span data-slate-object="text" data-key="7760"><span data-slate-leaf="true" data-offset-key="7760:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">(name </span></span></span></span></span><span data-slate-object="text" data-key="7761"><span data-slate-leaf="true" data-offset-key="7761:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">string</span></span></span></span></span></span><span data-slate-object="text" data-key="7762"><span data-slate-leaf="true" data-offset-key="7762:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">)</span></span></span></span></span><span data-slate-object="text" data-key="7763"><span data-slate-leaf="true" data-offset-key="7763:0" data-first-offset="true"><span data-slate-string="true"> *Canary {</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7764"><span data-slate-object="text" data-key="7765"><span data-slate-leaf="true" data-offset-key="7765:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="7766"><span data-slate-leaf="true" data-offset-key="7766:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">return</span></span></span></span><span data-slate-object="text" data-key="7767"><span data-slate-leaf="true" data-offset-key="7767:0" data-first-offset="true"><span data-slate-string="true"> &amp;Canary{</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7768"><span data-slate-object="text" data-key="7769"><span data-slate-leaf="true" data-offset-key="7769:0" data-first-offset="true"><span data-slate-string="true">    Bird: Bird{</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7770"><span data-slate-object="text" data-key="7771"><span data-slate-leaf="true" data-offset-key="7771:0" data-first-offset="true"><span data-slate-string="true">      Type: </span></span></span><span data-slate-object="text" data-key="7772"><span data-slate-leaf="true" data-offset-key="7772:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">"Canary"</span></span></span></span><span data-slate-object="text" data-key="7773"><span data-slate-leaf="true" data-offset-key="7773:0" data-first-offset="true"><span data-slate-string="true">,</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7774"><span data-slate-object="text" data-key="7775"><span data-slate-leaf="true" data-offset-key="7775:0" data-first-offset="true"><span data-slate-string="true">    },</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7776"><span data-slate-object="text" data-key="7777"><span data-slate-leaf="true" data-offset-key="7777:0" data-first-offset="true"><span data-slate-string="true">    name: name,</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7778"><span data-slate-object="text" data-key="7779"><span data-slate-leaf="true" data-offset-key="7779:0" data-first-offset="true"><span data-slate-string="true">  }</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7780"><span data-slate-object="text" data-key="7781"><span data-slate-leaf="true" data-offset-key="7781:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7782"></div><div data-slate-type="code-line" data-slate-object="block" data-key="7783"><span data-slate-object="text" data-key="7784"><span data-slate-leaf="true" data-offset-key="7784:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">func</span></span></span></span></span><span data-slate-object="text" data-key="7785"><span data-slate-leaf="true" data-offset-key="7785:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span><span data-slate-object="text" data-key="7786"><span data-slate-leaf="true" data-offset-key="7786:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">BirdInfo</span></span></span></span></span><span data-slate-object="text" data-key="7787"><span data-slate-leaf="true" data-offset-key="7787:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">(birds Birds)</span></span></span></span></span><span data-slate-object="text" data-key="7788"><span data-slate-leaf="true" data-offset-key="7788:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7789"><span data-slate-object="text" data-key="7790"><span data-slate-leaf="true" data-offset-key="7790:0" data-first-offset="true"><span data-slate-string="true">  fmt.Printf(</span></span></span><span data-slate-object="text" data-key="7791"><span data-slate-leaf="true" data-offset-key="7791:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">"I'm %s, I belong to %s bird class!\n"</span></span></span></span><span data-slate-object="text" data-key="7792"><span data-slate-leaf="true" data-offset-key="7792:0" data-first-offset="true"><span data-slate-string="true">, birds.Name(), birds.Class())</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7793"><span data-slate-object="text" data-key="7794"><span data-slate-leaf="true" data-offset-key="7794:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7795"></div><div data-slate-type="code-line" data-slate-object="block" data-key="7796"><span data-slate-object="text" data-key="7797"><span data-slate-leaf="true" data-offset-key="7797:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">func</span></span></span></span></span><span data-slate-object="text" data-key="7798"><span data-slate-leaf="true" data-offset-key="7798:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span><span data-slate-object="text" data-key="7799"><span data-slate-leaf="true" data-offset-key="7799:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">main</span></span></span></span></span><span data-slate-object="text" data-key="7800"><span data-slate-leaf="true" data-offset-key="7800:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">()</span></span></span></span></span><span data-slate-object="text" data-key="7801"><span data-slate-leaf="true" data-offset-key="7801:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7802"><span data-slate-object="text" data-key="7803"><span data-slate-leaf="true" data-offset-key="7803:0" data-first-offset="true"><span data-slate-string="true">    canary := NewCanary(</span></span></span><span data-slate-object="text" data-key="7804"><span data-slate-leaf="true" data-offset-key="7804:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">"CanaryA"</span></span></span></span><span data-slate-object="text" data-key="7805"><span data-slate-leaf="true" data-offset-key="7805:0" data-first-offset="true"><span data-slate-string="true">)</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7806"><span data-slate-object="text" data-key="7807"><span data-slate-leaf="true" data-offset-key="7807:0" data-first-offset="true"><span data-slate-string="true">    crow := NewCrow(</span></span></span><span data-slate-object="text" data-key="7808"><span data-slate-leaf="true" data-offset-key="7808:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">"CrowA"</span></span></span></span><span data-slate-object="text" data-key="7809"><span data-slate-leaf="true" data-offset-key="7809:0" data-first-offset="true"><span data-slate-string="true">)</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7810"><span data-slate-object="text" data-key="7811"><span data-slate-leaf="true" data-offset-key="7811:0" data-first-offset="true"><span data-slate-string="true">  BirdInfo(canary)</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7812"><span data-slate-object="text" data-key="7813"><span data-slate-leaf="true" data-offset-key="7813:0" data-first-offset="true"><span data-slate-string="true">  BirdInfo(crow)</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7814"><span data-slate-object="text" data-key="7815"><span data-slate-leaf="true" data-offset-key="7815:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7816"><span data-slate-object="text" data-key="7817"><span data-slate-leaf="true" data-offset-key="7817:0" data-first-offset="true"><span data-slate-string="true">将上述代码保存在 oop.go 文件中，执行以下代码输出如下：</span></span></span></div><div data-code-language="cpp" data-slate-type="pre" data-slate-object="block" data-key="7818"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="7819"><span data-slate-object="text" data-key="7820"><span data-slate-leaf="true" data-offset-key="7820:0" data-first-offset="true"><span data-slate-string="true">$ go run oop.go</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7821"><span data-slate-object="text" data-key="7822"><span data-slate-leaf="true" data-offset-key="7822:0" data-first-offset="true"><span data-slate-string="true">I</span></span></span><span data-slate-object="text" data-key="7823"><span data-slate-leaf="true" data-offset-key="7823:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">'</span></span></span></span><span data-slate-object="text" data-key="7824"><span data-slate-leaf="true" data-offset-key="7824:0" data-first-offset="true"><span data-slate-string="true">m CanaryA, I belong to Canary bird </span></span></span><span data-slate-object="text" data-key="7825"><span data-slate-leaf="true" data-offset-key="7825:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">class</span></span></span></span><span data-slate-object="text" data-key="7826"><span data-slate-leaf="true" data-offset-key="7826:0" data-first-offset="true"><span data-slate-string="true">!</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7827"><span data-slate-object="text" data-key="7828"><span data-slate-leaf="true" data-offset-key="7828:0" data-first-offset="true"><span data-slate-string="true">I</span></span></span><span data-slate-object="text" data-key="7829"><span data-slate-leaf="true" data-offset-key="7829:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">'</span></span></span></span><span data-slate-object="text" data-key="7830"><span data-slate-leaf="true" data-offset-key="7830:0" data-first-offset="true"><span data-slate-string="true">m CrowA, I belong to Crow bird </span></span></span><span data-slate-object="text" data-key="7831"><span data-slate-leaf="true" data-offset-key="7831:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">class</span></span></span></span><span data-slate-object="text" data-key="7832"><span data-slate-leaf="true" data-offset-key="7832:0" data-first-offset="true"><span data-slate-string="true">!</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7833"><span data-slate-object="text" data-key="7834"><span data-slate-leaf="true" data-offset-key="7834:0" data-first-offset="true"><span data-slate-string="true">在上面的例子中，分别通过 Canary 和 Crow 结构体定义了金丝雀和乌鸦两种类别的鸟，其中分别封装了 name 属性和 Name 方法。也就是说通过结构体实现了类，该类抽象了鸟类，并封装了该鸟类的属性和方法。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7835"><span data-slate-object="text" data-key="7836"><span data-slate-leaf="true" data-offset-key="7836:0" data-first-offset="true"><span data-slate-string="true">在 Canary 和 Crow 结构体中，都有一个 Bird 匿名字段，Bird 字段为 Canary 和 Crow 类的父类，Canary 和 Crow 继承了 Bird 类的 Class 属性和方法。也就是说通过匿名字段实现了继承。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7837"><span data-slate-object="text" data-key="7838"><span data-slate-leaf="true" data-offset-key="7838:0" data-first-offset="true"><span data-slate-string="true">在 main 函数中，通过 NewCanary 创建了 Canary 鸟类实例，并将其传给 BirdInfo 函数。也就是说通过结构体变量实现实例。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7839"><span data-slate-object="text" data-key="7840"><span data-slate-leaf="true" data-offset-key="7840:0" data-first-offset="true"><span data-slate-string="true">在 BirdInfo 函数中，将 Birds 接口类型作为参数传入，并在函数中调用了 birds.Name，birds.Class 方法，这两个方法会根据 birds 类别的不同而返回不同的名字和类别，也就是说通过接口实现了多态。</span></span></span></div><h3 data-slate-type="heading" data-slate-object="block" data-key="7841" id="sr-toc-7"><span data-slate-object="text" data-key="7842"><span data-slate-leaf="true" data-offset-key="7842:0" data-first-offset="true"><span data-slate-string="true">软件设计方法</span></span></span></h3><div data-slate-type="paragraph" data-slate-object="block" data-key="7843"><span data-slate-object="text" data-key="7844"><span data-slate-leaf="true" data-offset-key="7844:0" data-first-offset="true"><span data-slate-string="true">接下来，我们继续学习编写高质量 Go 代码的第二项内功，也就是让编写的代码遵循一些业界沉淀下来的，优秀的软件设计方法。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7845"><span data-slate-object="text" data-key="7846"><span data-slate-leaf="true" data-offset-key="7846:0" data-first-offset="true"><span data-slate-string="true">优秀的软件设计方法有很多，其中有两类方法对我们代码质量的提升特别有帮助，分别是设计模式（Design pattern）和 SOLID 原则。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7847"><span data-slate-object="text" data-key="7848"><span data-slate-leaf="true" data-offset-key="7848:0" data-first-offset="true"><span data-slate-string="true">在我看来，设计模式可以理解为业界针对一些特定的场景总结出来的最佳实现方式。它的特点是解决的场景比较具体，实施起来会比较简单；而 SOLID 原则更侧重设计原则，需要我们彻底理解，并在编写代码时多思考和落地。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7849"><span data-slate-object="text" data-key="7850"><span data-slate-leaf="true" data-offset-key="7850:0" data-first-offset="true"><span data-slate-string="true">关于设计模式和 SOLID 原则，我是这么安排的：在</span></span></span><span data-slate-object="text" data-key="7851"><span data-slate-leaf="true" data-offset-key="7851:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">第 11 讲</span></span></span></span><span data-slate-object="text" data-key="7852"><span data-slate-leaf="true" data-offset-key="7852:0" data-first-offset="true"><span data-slate-string="true">，我会带你学习 Go 项目常用的设计模式；至于 SOLID 原则，网上已经有很多高质量的文章了，所以我会简单告诉你这个原则是啥，然后给你推荐一篇介绍文章。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7853"><span data-slate-object="text" data-key="7854"><span data-slate-leaf="true" data-offset-key="7854:0" data-first-offset="true"><span data-slate-string="true">我们先了解下有哪些设计模式。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7855"><span data-slate-object="text" data-key="7856"><span data-slate-leaf="true" data-offset-key="7856:0" data-first-offset="true"><span data-slate-string="true">在软件领域，沉淀了一些比较优秀的设计模式，其中最受欢迎的是 GOF 设计模式。GOF 设计模式中包含了 3 大类（创建型模式、结构型模式、行为型模式），共 25 种经典的、可以解决常见软件设计问题的设计方案。这 25 种设计方案同样也适用于 Go 语言开发的项目。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7857"><span data-slate-object="text" data-key="7858"><span data-slate-leaf="true" data-offset-key="7858:0" data-first-offset="true"><span data-slate-string="true">这里，我将这 25 种设计模式总结成了一张图，你可以先看看，有个大概的印象，对于一些在 Go 项目开发中常用的设计模式，我会在</span></span></span><span data-slate-object="text" data-key="7859"><span data-slate-leaf="true" data-offset-key="7859:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">第 11 讲</span></span></span></span><span data-slate-object="text" data-key="7860"><span data-slate-leaf="true" data-offset-key="7860:0" data-first-offset="true"><span data-slate-string="true">详细介绍。</span></span></span></div><div data-slate-type="image" data-slate-object="block" data-key="7861"><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://static001.geekbang.org/resource/image/14/9c/1440f4bbcda682c8f5e7a599c8c51f9c.png?wh=2963x1613"></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7862"><span data-slate-object="text" data-key="7863"><span data-slate-leaf="true" data-offset-key="7863:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">如果说设计模式解决的是具体的场景，那么 SOLID 原则就是我们设计应用代码时的指导方针。</span></span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7864"><span data-slate-object="text" data-key="7865"><span data-slate-leaf="true" data-offset-key="7865:0" data-first-offset="true"><span data-slate-string="true">SOLID 原则，是由罗伯特・ C ・马丁在 21 世纪早期引入的，包括了面向对象编程和面向对象设计的五个基本原则：</span></span></span></div><div data-slate-type="image" data-slate-object="block" data-key="7866"><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://static001.geekbang.org/resource/image/19/3b/19b697bbbe31450d6cc8f222491d3e3b.png?wh=1462x879"></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7867"><span data-slate-object="text" data-key="7868"><span data-slate-leaf="true" data-offset-key="7868:0" data-first-offset="true"><span data-slate-string="true">遵循 SOLID 原则可以确保我们设计的代码是易维护、易扩展、易阅读的。SOLID 原则同样也适用于 Go 程序设计。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7869"><span data-slate-object="text" data-key="7870"><span data-slate-leaf="true" data-offset-key="7870:0" data-first-offset="true"><span data-slate-string="true">如果你需要更详细地了解 SOLID 原则，可以参考下 </span></span></span><a data-slate-type="link" data-slate-object="inline" data-key="7871"><span data-slate-object="text" data-key="7872"><span data-slate-leaf="true" data-offset-key="7872:0" data-first-offset="true"><span data-slate-string="true">SOLID 原则介绍</span></span></span></a><span data-slate-object="text" data-key="7873"><span data-slate-leaf="true" data-offset-key="7873:0" data-first-offset="true"><span data-slate-string="true">这篇文章。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7874"><span data-slate-object="text" data-key="7875"><span data-slate-leaf="true" data-offset-key="7875:0" data-first-offset="true"><span data-slate-string="true">到这里，我们就学完了 “编写高质量的 Go 应用” 这部分内容。接下来，我们再来学习下如何高效管理 Go 项目，以及如何编写高质量的项目文档。这里面的大部分内容，之前我们都有学习过，因为它们是 “如何写出优雅的 Go 项目” 的重要组成部分，所以，这里我仍然会简单介绍下它们。</span></span></span></div><h2 data-slate-type="heading" data-slate-object="block" data-key="7876" id="sr-toc-8"><span data-slate-object="text" data-key="7877"><span data-slate-leaf="true" data-offset-key="7877:0" data-first-offset="true"><span data-slate-string="true">高效管理项目</span></span></span></h2><div data-slate-type="paragraph" data-slate-object="block" data-key="7878"><span data-slate-object="text" data-key="7879"><span data-slate-leaf="true" data-offset-key="7879:0" data-first-offset="true"><span data-slate-string="true">一个优雅的 Go 项目，还需要具备高效的项目管理特性。那么如何高效管理我们的项目呢？</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7880"><span data-slate-object="text" data-key="7881"><span data-slate-leaf="true" data-offset-key="7881:0" data-first-offset="true"><span data-slate-string="true">不同团队、不同项目会采用不同的方法来管理项目，在我看来比较重要的有 3 点，分别是制定一个高效的开发流程、使用 Makefile 管理项目和将项目管理自动化。我们可以通过自动生成代码、借助工具、对接 CI/CD 系统等方法来将项目管理自动化。具体见下图：</span></span></span></div><div data-slate-type="image" data-slate-object="block" data-key="7882"><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://static001.geekbang.org/resource/image/61/6d/61e022c1b25dab2b0fefb407fc1c776d.png?wh=2356x766"></div></div><h3 data-slate-type="heading" data-slate-object="block" data-key="7883" id="sr-toc-9"><span data-slate-object="text" data-key="7884"><span data-slate-leaf="true" data-offset-key="7884:0" data-first-offset="true"><span data-slate-string="true">高效的开发流程</span></span></span></h3><div data-slate-type="paragraph" data-slate-object="block" data-key="7885"><span data-slate-object="text" data-key="7886"><span data-slate-leaf="true" data-offset-key="7886:0" data-first-offset="true"><span data-slate-string="true">高效管理项目的第一步，就是要有一个高效的开发流程，这可以提高开发效率、减少软件维护成本。你可以回想一下设计开发流程的知识，如果印象比较模糊了，一定要回去复习下 </span></span></span><span data-slate-object="text" data-key="7887"><span data-slate-leaf="true" data-offset-key="7887:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">08 讲</span></span></span></span><span data-slate-object="text" data-key="7888"><span data-slate-leaf="true" data-offset-key="7888:0" data-first-offset="true"><span data-slate-string="true">的内容</span></span></span><span data-slate-object="text" data-key="7889"><span data-slate-leaf="true" data-offset-key="7889:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">，</span></span></span></span><span data-slate-object="text" data-key="7890"><span data-slate-leaf="true" data-offset-key="7890:0" data-first-offset="true"><span data-slate-string="true">因为这部分很重要 。</span></span></span></div><h3 data-slate-type="heading" data-slate-object="block" data-key="7891" id="sr-toc-10"><span data-slate-object="text" data-key="7892"><span data-slate-leaf="true" data-offset-key="7892:0" data-first-offset="true"><span data-slate-string="true">使用 Makefile 管理项目</span></span></span></h3><div data-slate-type="paragraph" data-slate-object="block" data-key="7893"><span data-slate-object="text" data-key="7894"><span data-slate-leaf="true" data-offset-key="7894:0" data-first-offset="true"><span data-slate-string="true">为了更好地管理项目，除了一个高效的开发流程之外，使用 Makefile 也很重要。Makefile 可以将项目管理的工作通过 Makefile 依赖的方式实现自动化，除了可以提高管理效率之外，还能够减少人为操作带来的失误，并统一操作方式，使项目更加规范。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="7895"><span data-slate-object="text" data-key="7896"><span data-slate-leaf="true" data-offset-key="7896:0" data-first-offset="true"><span data-slate-string="true">IAM 项目的所有操作均是通过 Makefile 来完成的，具体 Makefile 完成了如下操作：</span></span></span></div><div data-code-language="sql" data-slate-type="pre" data-slate-object="block" data-key="7897"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div><div data-code-line-number="4"></div><div data-code-line-number="5"></div><div data-code-line-number="6"></div><div data-code-line-number="7"></div><div data-code-line-number="8"></div><div data-code-line-number="9"></div><div data-code-line-number="10"></div><div data-code-line-number="11"></div><div data-code-line-number="12"></div><div data-code-line-number="13"></div><div data-code-line-number="14"></div><div data-code-line-number="15"></div><div data-code-line-number="16"></div><div data-code-line-number="17"></div><div data-code-line-number="18"></div><div data-code-line-number="19"></div><div data-code-line-number="20"></div><div data-code-line-number="21"></div><div data-code-line-number="22"></div><div data-code-line-number="23"></div><div data-code-line-number="24"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="7898"><span data-slate-object="text" data-key="7899"><span data-slate-leaf="true" data-offset-key="7899:0" data-first-offset="true"><span data-slate-string="true"> build              Build source code </span></span></span><span data-slate-object="text" data-key="7900"><span data-slate-leaf="true" data-offset-key="7900:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">for</span></span></span></span><span data-slate-object="text" data-key="7901"><span data-slate-leaf="true" data-offset-key="7901:0" data-first-offset="true"><span data-slate-string="true"> host platform.</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7902"><span data-slate-object="text" data-key="7903"><span data-slate-leaf="true" data-offset-key="7903:0" data-first-offset="true"><span data-slate-string="true">  build.multiarch    Build source code </span></span></span><span data-slate-object="text" data-key="7904"><span data-slate-leaf="true" data-offset-key="7904:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">for</span></span></span></span><span data-slate-object="text" data-key="7905"><span data-slate-leaf="true" data-offset-key="7905:0" data-first-offset="true"><span data-slate-string="true"> multiple platforms. See option PLATFORMS.</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7906"><span data-slate-object="text" data-key="7907"><span data-slate-leaf="true" data-offset-key="7907:0" data-first-offset="true"><span data-slate-string="true">  image              Build docker images </span></span></span><span data-slate-object="text" data-key="7908"><span data-slate-leaf="true" data-offset-key="7908:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">for</span></span></span></span><span data-slate-object="text" data-key="7909"><span data-slate-leaf="true" data-offset-key="7909:0" data-first-offset="true"><span data-slate-string="true"> host arch.</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7910"><span data-slate-object="text" data-key="7911"><span data-slate-leaf="true" data-offset-key="7911:0" data-first-offset="true"><span data-slate-string="true">  image.multiarch    Build docker images </span></span></span><span data-slate-object="text" data-key="7912"><span data-slate-leaf="true" data-offset-key="7912:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">for</span></span></span></span><span data-slate-object="text" data-key="7913"><span data-slate-leaf="true" data-offset-key="7913:0" data-first-offset="true"><span data-slate-string="true"> multiple platforms. See option PLATFORMS.</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7914"><span data-slate-object="text" data-key="7915"><span data-slate-leaf="true" data-offset-key="7915:0" data-first-offset="true"><span data-slate-string="true">  push               Build docker images </span></span></span><span data-slate-object="text" data-key="7916"><span data-slate-leaf="true" data-offset-key="7916:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">for</span></span></span></span><span data-slate-object="text" data-key="7917"><span data-slate-leaf="true" data-offset-key="7917:0" data-first-offset="true"><span data-slate-string="true"> host arch </span></span></span><span data-slate-object="text" data-key="7918"><span data-slate-leaf="true" data-offset-key="7918:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">and</span></span></span></span><span data-slate-object="text" data-key="7919"><span data-slate-leaf="true" data-offset-key="7919:0" data-first-offset="true"><span data-slate-string="true"> push images </span></span></span><span data-slate-object="text" data-key="7920"><span data-slate-leaf="true" data-offset-key="7920:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">to</span></span></span></span><span data-slate-object="text" data-key="7921"><span data-slate-leaf="true" data-offset-key="7921:0" data-first-offset="true"><span data-slate-string="true"> registry.</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7922"><span data-slate-object="text" data-key="7923"><span data-slate-leaf="true" data-offset-key="7923:0" data-first-offset="true"><span data-slate-string="true">  push.multiarch     Build docker images </span></span></span><span data-slate-object="text" data-key="7924"><span data-slate-leaf="true" data-offset-key="7924:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">for</span></span></span></span><span data-slate-object="text" data-key="7925"><span data-slate-leaf="true" data-offset-key="7925:0" data-first-offset="true"><span data-slate-string="true"> multiple platforms </span></span></span><span data-slate-object="text" data-key="7926"><span data-slate-leaf="true" data-offset-key="7926:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">and</span></span></span></span><span data-slate-object="text" data-key="7927"><span data-slate-leaf="true" data-offset-key="7927:0" data-first-offset="true"><span data-slate-string="true"> push images </span></span></span><span data-slate-object="text" data-key="7928"><span data-slate-leaf="true" data-offset-key="7928:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">to</span></span></span></span><span data-slate-object="text" data-key="7929"><span data-slate-leaf="true" data-offset-key="7929:0" data-first-offset="true"><span data-slate-string="true"> registry.</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7930"><span data-slate-object="text" data-key="7931"><span data-slate-leaf="true" data-offset-key="7931:0" data-first-offset="true"><span data-slate-string="true">  deploy             Deploy updated components </span></span></span><span data-slate-object="text" data-key="7932"><span data-slate-leaf="true" data-offset-key="7932:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">to</span></span></span></span><span data-slate-object="text" data-key="7933"><span data-slate-leaf="true" data-offset-key="7933:0" data-first-offset="true"><span data-slate-string="true"> development env.</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7934"><span data-slate-object="text" data-key="7935"><span data-slate-leaf="true" data-offset-key="7935:0" data-first-offset="true"><span data-slate-string="true">  clean              Remove </span></span></span><span data-slate-object="text" data-key="7936"><span data-slate-leaf="true" data-offset-key="7936:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">all</span></span></span></span><span data-slate-object="text" data-key="7937"><span data-slate-leaf="true" data-offset-key="7937:0" data-first-offset="true"><span data-slate-string="true"> files that </span></span></span><span data-slate-object="text" data-key="7938"><span data-slate-leaf="true" data-offset-key="7938:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">are</span></span></span></span><span data-slate-object="text" data-key="7939"><span data-slate-leaf="true" data-offset-key="7939:0" data-first-offset="true"><span data-slate-string="true"> created </span></span></span><span data-slate-object="text" data-key="7940"><span data-slate-leaf="true" data-offset-key="7940:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">by</span></span></span></span><span data-slate-object="text" data-key="7941"><span data-slate-leaf="true" data-offset-key="7941:0" data-first-offset="true"><span data-slate-string="true"> building.</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7942"><span data-slate-object="text" data-key="7943"><span data-slate-leaf="true" data-offset-key="7943:0" data-first-offset="true"><span data-slate-string="true">  lint               </span></span></span><span data-slate-object="text" data-key="7944"><span data-slate-leaf="true" data-offset-key="7944:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">Check</span></span></span></span><span data-slate-object="text" data-key="7945"><span data-slate-leaf="true" data-offset-key="7945:0" data-first-offset="true"><span data-slate-string="true"> syntax </span></span></span><span data-slate-object="text" data-key="7946"><span data-slate-leaf="true" data-offset-key="7946:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">and</span></span></span></span><span data-slate-object="text" data-key="7947"><span data-slate-leaf="true" data-offset-key="7947:0" data-first-offset="true"><span data-slate-string="true"> styling </span></span></span><span data-slate-object="text" data-key="7948"><span data-slate-leaf="true" data-offset-key="7948:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">of</span></span></span></span><span data-slate-object="text" data-key="7949"><span data-slate-leaf="true" data-offset-key="7949:0" data-first-offset="true"><span data-slate-string="true"> go sources.</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7950"><span data-slate-object="text" data-key="7951"><span data-slate-leaf="true" data-offset-key="7951:0" data-first-offset="true"><span data-slate-string="true">  test               Run unit test.</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7952"><span data-slate-object="text" data-key="7953"><span data-slate-leaf="true" data-offset-key="7953:0" data-first-offset="true"><span data-slate-string="true">  cover              Run unit test </span></span></span><span data-slate-object="text" data-key="7954"><span data-slate-leaf="true" data-offset-key="7954:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">and</span></span></span></span><span data-slate-object="text" data-key="7955"><span data-slate-leaf="true" data-offset-key="7955:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="7956"><span data-slate-leaf="true" data-offset-key="7956:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">get</span></span></span></span><span data-slate-object="text" data-key="7957"><span data-slate-leaf="true" data-offset-key="7957:0" data-first-offset="true"><span data-slate-string="true"> test coverage.</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7958"><span data-slate-object="text" data-key="7959"><span data-slate-leaf="true" data-offset-key="7959:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="7960"><span data-slate-leaf="true" data-offset-key="7960:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">release</span></span></span></span><span data-slate-object="text" data-key="7961"><span data-slate-leaf="true" data-offset-key="7961:0" data-first-offset="true"><span data-slate-string="true">            </span></span></span><span data-slate-object="text" data-key="7962"><span data-slate-leaf="true" data-offset-key="7962:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">Release</span></span></span></span><span data-slate-object="text" data-key="7963"><span data-slate-leaf="true" data-offset-key="7963:0" data-first-offset="true"><span data-slate-string="true"> iam</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7964"><span data-slate-object="text" data-key="7965"><span data-slate-leaf="true" data-offset-key="7965:0" data-first-offset="true"><span data-slate-string="true">  format             Gofmt (reformat) package sources (exclude vendor dir if existed).</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7966"><span data-slate-object="text" data-key="7967"><span data-slate-leaf="true" data-offset-key="7967:0" data-first-offset="true"><span data-slate-string="true">  verify</span></span></span><span data-slate-object="text" data-key="7968"><span data-slate-leaf="true" data-offset-key="7968:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">-</span></span></span></span><span data-slate-object="text" data-key="7969"><span data-slate-leaf="true" data-offset-key="7969:0" data-first-offset="true"><span data-slate-string="true">copyright   Verify the boilerplate headers </span></span></span><span data-slate-object="text" data-key="7970"><span data-slate-leaf="true" data-offset-key="7970:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">for</span></span></span></span><span data-slate-object="text" data-key="7971"><span data-slate-leaf="true" data-offset-key="7971:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="7972"><span data-slate-leaf="true" data-offset-key="7972:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">all</span></span></span></span><span data-slate-object="text" data-key="7973"><span data-slate-leaf="true" data-offset-key="7973:0" data-first-offset="true"><span data-slate-string="true"> files.</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7974"><span data-slate-object="text" data-key="7975"><span data-slate-leaf="true" data-offset-key="7975:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="7976"><span data-slate-leaf="true" data-offset-key="7976:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">add</span></span></span></span><span data-slate-object="text" data-key="7977"><span data-slate-leaf="true" data-offset-key="7977:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">-</span></span></span></span><span data-slate-object="text" data-key="7978"><span data-slate-leaf="true" data-offset-key="7978:0" data-first-offset="true"><span data-slate-string="true">copyright      Ensures source code files have copyright license headers.</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7979"><span data-slate-object="text" data-key="7980"><span data-slate-leaf="true" data-offset-key="7980:0" data-first-offset="true"><span data-slate-string="true">  gen                Generate </span></span></span><span data-slate-object="text" data-key="7981"><span data-slate-leaf="true" data-offset-key="7981:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">all</span></span></span></span><span data-slate-object="text" data-key="7982"><span data-slate-leaf="true" data-offset-key="7982:0" data-first-offset="true"><span data-slate-string="true"> necessary files, such </span></span></span><span data-slate-object="text" data-key="7983"><span data-slate-leaf="true" data-offset-key="7983:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">as</span></span></span></span><span data-slate-object="text" data-key="7984"><span data-slate-leaf="true" data-offset-key="7984:0" data-first-offset="true"><span data-slate-string="true"> error code files.</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7985"><span data-slate-object="text" data-key="7986"><span data-slate-leaf="true" data-offset-key="7986:0" data-first-offset="true"><span data-slate-string="true">  ca                 Generate CA files </span></span></span><span data-slate-object="text" data-key="7987"><span data-slate-leaf="true" data-offset-key="7987:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">for</span></span></span></span><span data-slate-object="text" data-key="7988"><span data-slate-leaf="true" data-offset-key="7988:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="7989"><span data-slate-leaf="true" data-offset-key="7989:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">all</span></span></span></span><span data-slate-object="text" data-key="7990"><span data-slate-leaf="true" data-offset-key="7990:0" data-first-offset="true"><span data-slate-string="true"> iam components.</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7991"><span data-slate-object="text" data-key="7992"><span data-slate-leaf="true" data-offset-key="7992:0" data-first-offset="true"><span data-slate-string="true">  install            Install iam </span></span></span><span data-slate-object="text" data-key="7993"><span data-slate-leaf="true" data-offset-key="7993:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">system</span></span></span></span><span data-slate-object="text" data-key="7994"><span data-slate-leaf="true" data-offset-key="7994:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="7995"><span data-slate-leaf="true" data-offset-key="7995:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">with</span></span></span></span><span data-slate-object="text" data-key="7996"><span data-slate-leaf="true" data-offset-key="7996:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="7997"><span data-slate-leaf="true" data-offset-key="7997:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">all</span></span></span></span><span data-slate-object="text" data-key="7998"><span data-slate-leaf="true" data-offset-key="7998:0" data-first-offset="true"><span data-slate-string="true"> its components.</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="7999"><span data-slate-object="text" data-key="8000"><span data-slate-leaf="true" data-offset-key="8000:0" data-first-offset="true"><span data-slate-string="true">  swagger            Generate swagger document.</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="8001"><span data-slate-object="text" data-key="8002"><span data-slate-leaf="true" data-offset-key="8002:0" data-first-offset="true"><span data-slate-string="true">  serve</span></span></span><span data-slate-object="text" data-key="8003"><span data-slate-leaf="true" data-offset-key="8003:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">-</span></span></span></span><span data-slate-object="text" data-key="8004"><span data-slate-leaf="true" data-offset-key="8004:0" data-first-offset="true"><span data-slate-string="true">swagger      Serve swagger spec </span></span></span><span data-slate-object="text" data-key="8005"><span data-slate-leaf="true" data-offset-key="8005:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">and</span></span></span></span><span data-slate-object="text" data-key="8006"><span data-slate-leaf="true" data-offset-key="8006:0" data-first-offset="true"><span data-slate-string="true"> docs.</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="8007"><span data-slate-object="text" data-key="8008"><span data-slate-leaf="true" data-offset-key="8008:0" data-first-offset="true"><span data-slate-string="true">  dependencies       Install necessary dependencies.</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="8009"><span data-slate-object="text" data-key="8010"><span data-slate-leaf="true" data-offset-key="8010:0" data-first-offset="true"><span data-slate-string="true">  tools              install dependent tools.</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="8011"><span data-slate-object="text" data-key="8012"><span data-slate-leaf="true" data-offset-key="8012:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="8013"><span data-slate-leaf="true" data-offset-key="8013:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">check</span></span></span></span><span data-slate-object="text" data-key="8014"><span data-slate-leaf="true" data-offset-key="8014:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">-</span></span></span></span><span data-slate-object="text" data-key="8015"><span data-slate-leaf="true" data-offset-key="8015:0" data-first-offset="true"><span data-slate-string="true">updates      </span></span></span><span data-slate-object="text" data-key="8016"><span data-slate-leaf="true" data-offset-key="8016:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">Check</span></span></span></span><span data-slate-object="text" data-key="8017"><span data-slate-leaf="true" data-offset-key="8017:0" data-first-offset="true"><span data-slate-string="true"> outdated dependencies </span></span></span><span data-slate-object="text" data-key="8018"><span data-slate-leaf="true" data-offset-key="8018:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">of</span></span></span></span><span data-slate-object="text" data-key="8019"><span data-slate-leaf="true" data-offset-key="8019:0" data-first-offset="true"><span data-slate-string="true"> the go projects.</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="8020"><span data-slate-object="text" data-key="8021"><span data-slate-leaf="true" data-offset-key="8021:0" data-first-offset="true"><span data-slate-string="true">  help               </span></span></span><span data-slate-object="text" data-key="8022"><span data-slate-leaf="true" data-offset-key="8022:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">Show</span></span></span></span><span data-slate-object="text" data-key="8023"><span data-slate-leaf="true" data-offset-key="8023:0" data-first-offset="true"><span data-slate-string="true"> this help info.</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><h3 data-slate-type="heading" data-slate-object="block" data-key="8024" id="sr-toc-11"><span data-slate-object="text" data-key="8025"><span data-slate-leaf="true" data-offset-key="8025:0" data-first-offset="true"><span data-slate-string="true">自动生成代码</span></span></span></h3><div data-slate-type="paragraph" data-slate-object="block" data-key="8026"><span data-slate-object="text" data-key="8027"><span data-slate-leaf="true" data-offset-key="8027:0" data-first-offset="true"><span data-slate-string="true">低代码的理念现在越来越流行。虽然低代码有很多缺点，但确实有很多优点，例如：</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="8028"><div data-slate-type="list-line" data-slate-object="block" data-key="8029"><span data-slate-object="text" data-key="8030"><span data-slate-leaf="true" data-offset-key="8030:0" data-first-offset="true"><span data-slate-string="true">自动化生成代码，减少工作量，提高工作效率。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="8031"><span data-slate-object="text" data-key="8032"><span data-slate-leaf="true" data-offset-key="8032:0" data-first-offset="true"><span data-slate-string="true">代码有既定的生成规则，相比人工编写代码，准确性更高、更规范。</span></span></span></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="8033"><span data-slate-object="text" data-key="8034"><span data-slate-leaf="true" data-offset-key="8034:0" data-first-offset="true"><span data-slate-string="true">目前来看，自动生成代码现在已经成为趋势，比如 Kubernetes 项目有很多代码都是自动生成的。我认为，想写出一个优雅的 Go 项目，你也应该认真思考哪些地方的代码可以自动生成。在这门课的 IAM 项目中，就有大量的代码是自动生成的，我放在这里供你参考：</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="8035"><div data-slate-type="list-line" data-slate-object="block" data-key="8036"><span data-slate-object="text" data-key="8037"><span data-slate-leaf="true" data-offset-key="8037:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_9c7ec2ca" data-attr-id="36380" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">错误码、错误码说明文档。</span></span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="8038"><span data-slate-object="text" data-key="8039"><span data-slate-leaf="true" data-offset-key="8039:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_cb2a09eb" data-attr-id="36381" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">自动生成缺失的 doc.go 文件。</span></span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="8040"><span data-slate-object="text" data-key="8041"><span data-slate-leaf="true" data-offset-key="8041:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_5fd06eb6" data-attr-id="36382" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">利用 gotests 工具，自动生成单元测试用例。</span></span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="8042"><span data-slate-object="text" data-key="8043"><span data-slate-leaf="true" data-offset-key="8043:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_60f69be1" data-attr-id="36383" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">使用 Swagger 工具，自动生成 Swagger 文档。</span></span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="8044"><span data-slate-object="text" data-key="8045"><span data-slate-leaf="true" data-offset-key="8045:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_71bf67b8" data-attr-id="36384" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">使用 Mock 工具，自动生成接口的 Mock 实例。</span></span></span></span></div></div><h3 data-slate-type="heading" data-slate-object="block" data-key="8046" id="sr-toc-12"><span data-slate-object="text" data-key="8047"><span data-slate-leaf="true" data-offset-key="8047:0" data-first-offset="true"><span data-slate-string="true">善于借助工具</span></span></span></h3><div data-slate-type="paragraph" data-slate-object="block" data-key="8048"><span data-slate-object="text" data-key="8049"><span data-slate-leaf="true" data-offset-key="8049:0" data-first-offset="true"><span data-slate-string="true">在开发 Go 项目的过程中，我们也要善于借助工具，来帮助我们完成一部分工作。利用工具可以带来很多好处：</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="8050"><div data-slate-type="list-line" data-slate-object="block" data-key="8051"><span data-slate-object="text" data-key="8052"><span data-slate-leaf="true" data-offset-key="8052:0" data-first-offset="true"><span data-slate-string="true">解放双手，提高工作效率。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="8053"><span data-slate-object="text" data-key="8054"><span data-slate-leaf="true" data-offset-key="8054:0" data-first-offset="true"><span data-slate-string="true">利用工具的确定性，可以确保执行结果的一致性。例如，使用 golangci-lint 对代码进行检查，可以确保不同开发者开发的代码至少都遵循 golangci-lint 的代码检查规范。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="8055"><span data-slate-object="text" data-key="8056"><span data-slate-leaf="true" data-offset-key="8056:0" data-first-offset="true"><span data-slate-string="true">有利于实现自动化，可以将工具集成到 CI/CD 流程中，触发流水线自动执行。</span></span></span></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="8057"><span data-slate-object="text" data-key="8058"><span data-slate-leaf="true" data-offset-key="8058:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_21288618" data-attr-id="39675" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">那么，Go 项目中，有哪些工具可以为我们所用呢？这里，我给你整理了一些有用的工具：</span></span></span></span></div><div data-slate-type="image" data-slate-object="block" data-key="8059"><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://static001.geekbang.org/resource/image/90/80/90ca527c2863fe642f9ab3d5b90fe980.png?wh=1645x1477"></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="8060"><span data-slate-object="text" data-key="8061"><span data-slate-leaf="true" data-offset-key="8061:0" data-first-offset="true"><span data-slate-string="true">所有这些工具都可以通过下面的方式安装。</span></span></span></div><div data-code-language="shell" data-slate-type="pre" data-slate-object="block" data-key="8062"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="8063"><span data-slate-object="text" data-key="8064"><span data-slate-leaf="true" data-offset-key="8064:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">$ </span></span></span></span><span data-slate-object="text" data-key="8065"><span data-slate-leaf="true" data-offset-key="8065:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">cd</span></span></span></span></span><span data-slate-object="text" data-key="8066"><span data-slate-leaf="true" data-offset-key="8066:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span><span data-slate-object="text" data-key="8067"><span data-slate-leaf="true" data-offset-key="8067:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">$IAM_ROOT</span></span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="8068"><span data-slate-object="text" data-key="8069"><span data-slate-leaf="true" data-offset-key="8069:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">$ </span></span></span></span><span data-slate-object="text" data-key="8070"><span data-slate-leaf="true" data-offset-key="8070:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">make tools.install</span></span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="8071"><span data-slate-object="text" data-key="8072"><span data-slate-leaf="true" data-offset-key="8072:0" data-first-offset="true"><span data-slate-string="true">IAM 项目使用了上面这些工具的绝大部分，用来尽可能提高整个项目的自动化程度，提高项目维护效率。</span></span></span></div><h3 data-slate-type="heading" data-slate-object="block" data-key="8073" id="sr-toc-13"><span data-slate-object="text" data-key="8074"><span data-slate-leaf="true" data-offset-key="8074:0" data-first-offset="true"><span data-slate-string="true">对接 CI/CD</span></span></span></h3><div data-slate-type="paragraph" data-slate-object="block" data-key="8075"><span data-slate-object="text" data-key="8076"><span data-slate-leaf="true" data-offset-key="8076:0" data-first-offset="true"><span data-slate-string="true">代码在合并入主干时，应该有一套 CI/CD 流程来自动化地对代码进行检查、编译、单元测试等，只有通过后的代码才可以并入主干。通过 CI/CD 流程来保证代码的质量。当前比较流行的 CI/CD 工具有 Jenkins、GitLab、Argo、Github Actions、JenkinsX 等。在</span></span></span><span data-slate-object="text" data-key="8077"><span data-slate-leaf="true" data-offset-key="8077:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">第 51 讲</span></span></span></span><span data-slate-object="text" data-key="8078"><span data-slate-leaf="true" data-offset-key="8078:0" data-first-offset="true"><span data-slate-string="true"> 和 </span></span></span><span data-slate-object="text" data-key="8079"><span data-slate-leaf="true" data-offset-key="8079:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">第 52 讲</span></span></span></span><span data-slate-object="text" data-key="8080"><span data-slate-leaf="true" data-offset-key="8080:0" data-first-offset="true"><span data-slate-string="true">中，我会详细介绍 CI/CD 的原理和实战。</span></span></span></div><h2 data-slate-type="heading" data-slate-object="block" data-key="8081" id="sr-toc-14"><span data-slate-object="text" data-key="8082"><span data-slate-leaf="true" data-offset-key="8082:0" data-first-offset="true"><span data-slate-string="true">编写高质量的项目文档</span></span></span></h2><div data-slate-type="paragraph" data-slate-object="block" data-key="8083"><span data-slate-object="text" data-key="8084"><span data-slate-leaf="true" data-offset-key="8084:0" data-first-offset="true"><span data-slate-string="true">最后，一个优雅的项目，还应该有完善的文档。例如 README.md、安装文档、开发文档、使用文档、API 接口文档、设计文档等等。这些内容在</span></span></span><a data-slate-type="link" data-slate-object="inline" data-key="8085"><span data-slate-object="text" data-key="8086"><span data-slate-leaf="true" data-offset-key="8086:0" data-first-offset="true"><span data-slate-string="true">第 04 讲</span></span></span></a><span data-slate-object="text" data-key="8087"><span data-slate-leaf="true" data-offset-key="8087:0" data-first-offset="true"><span data-slate-string="true">的文档规范部分有详细介绍，你可以去复习下。</span></span></span></div><h2 data-slate-type="heading" data-slate-object="block" data-key="8088" id="sr-toc-15"><span data-slate-object="text" data-key="8089"><span data-slate-leaf="true" data-offset-key="8089:0" data-first-offset="true"><span data-slate-string="true">总结</span></span></span></h2><div data-slate-type="paragraph" data-slate-object="block" data-key="8090"><span data-slate-object="text" data-key="8091"><span data-slate-leaf="true" data-offset-key="8091:0" data-first-offset="true"><span data-slate-string="true">使用 Go 语言做项目开发，核心目的其实就是</span></span></span><span data-slate-object="text" data-key="8092"><span data-slate-leaf="true" data-offset-key="8092:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">开发一个优雅的 Go 项目</span></span></span></span><span data-slate-object="text" data-key="8093"><span data-slate-leaf="true" data-offset-key="8093:0" data-first-offset="true"><span data-slate-string="true">。那么如何开发一个优雅的 Go 项目呢？Go 项目包含三大内容，即 Go 应用、项目管理、项目文档，因此开发一个优雅的 Go 项目，其实就是</span></span></span><span data-slate-object="text" data-key="8094"><span data-slate-leaf="true" data-offset-key="8094:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">编写高质量的 Go 应用</span></span></span></span><span data-slate-object="text" data-key="8095"><span data-slate-leaf="true" data-offset-key="8095:0" data-first-offset="true"><span data-slate-string="true">、</span></span></span><span data-slate-object="text" data-key="8096"><span data-slate-leaf="true" data-offset-key="8096:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">高效管理项目</span></span></span></span><span data-slate-object="text" data-key="8097"><span data-slate-leaf="true" data-offset-key="8097:0" data-first-offset="true"><span data-slate-string="true">和</span></span></span><span data-slate-object="text" data-key="8098"><span data-slate-leaf="true" data-offset-key="8098:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">编写高质量的项目文档</span></span></span></span><span data-slate-object="text" data-key="8099"><span data-slate-leaf="true" data-offset-key="8099:0" data-first-offset="true"><span data-slate-string="true">。针对每一项，我都给出了一些实现方式，这些方式详见下图：</span></span></span></div><div data-slate-type="image" data-slate-object="block" data-key="8100"><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://static001.geekbang.org/resource/image/b0/cc/b051da025c897996473df44693ea4ecc.png?wh=3619x2006"></div></div><h2 data-slate-type="heading" data-slate-object="block" data-key="8101" id="sr-toc-16"><span data-slate-object="text" data-key="8102"><span data-slate-leaf="true" data-offset-key="8102:0" data-first-offset="true"><span data-slate-string="true">课后练习</span></span></span></h2><div data-slate-type="list" data-slate-object="block" data-key="8103"><div data-slate-type="list-line" data-slate-object="block" data-key="8104"><div data-code-line-number="1"></div><div><span data-slate-object="text" data-key="8105"><span data-slate-leaf="true" data-offset-key="8105:0" data-first-offset="true"><span data-slate-string="true">在工作中，你还有哪些方法，来帮助你开发一个优雅的 Go 项目呢？</span></span></span></div></div><div data-slate-type="list-line" data-slate-object="block" data-key="8106"><div data-code-line-number="2"></div><div><span data-slate-object="text" data-key="8107"><span data-slate-leaf="true" data-offset-key="8107:0" data-first-offset="true"><span data-slate-string="true">在你的当前项目中有哪些可以接口化的代码呢？找到它们，并尝试用面向接口的编程哲学去重写这部分代码吧。</span></span></span></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="8108"><span data-slate-object="text" data-key="8109"><span data-slate-leaf="true" data-offset-key="8109:0" data-first-offset="true"><span data-slate-string="true">期待在留言区看到你的思考和答案，我们下一讲见！</span></span></span></div></div></div></div><div><div></div><div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><textarea placeholder="将学到的知识总结成笔记，方便日后快速查找及复习"></textarea></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div><div><div>确认放弃笔记？</div><div>放弃后所记笔记将不保留。</div></div><div><div>新功能上线，你的历史笔记已初始化为私密笔记，是否一键批量公开？</div><div>批量公开的笔记不会为你同步至部落</div></div><div></div></div><div><div><div>公开</div><div>同步至部落</div></div><div>取消</div><div>完成</div></div><div><span>0/2000</span></div></div><div><div><span>划线</span></div><div></div><div></div><div></div><div><span>笔记</span></div><div></div><div><span>复制</span></div></div></div><div><div><div><span></span></div><p><span>35</span> 人觉得很赞<a href="javascript:void(0);">给文章提建议</a></p></div></div><div><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://static001.geekbang.org/resource/image/1f/81/1f6c18433af717a740f1e49389f2f981.png"></div></div><div><span>©</span> 版权归极客邦科技所有，未经许可不得传播售卖。 页面已增加防盗追踪，如有侵权极客邦将依法追究其法律责任。 </div></div><div><div><div class="sr-rd-content-center-small"><img class="" src="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABkAAD/4QN5aHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0MCA3OS4xNjA0NTEsIDIwMTcvMDUvMDYtMDE6MDg6MjEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YWE3YmZhMDItMzBhMC00MDg3LTg3MmYtOGMwMjMxNjNhZWRjIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjI2MTlEODM3NTgzMTExRTk5NDY4Qjk3QUFCNDFBN0QzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI2MTlEODM2NTgzMTExRTk5NDY4Qjk3QUFCNDFBN0QzIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTYyRTNCMDNBREI4MTFFOEFFNTJDODlGREQ1OTUzMDMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OTYyRTNCMDRBREI4MTFFOEFFNTJDODlGREQ1OTUzMDMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRm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"></div><div>Geek__653581f21177</div></div><div><textarea placeholder="由作者筛选后的优质留言将会公开显示，欢迎踊跃留言。" rows="16"></textarea></div><div><div>Ctrl + Enter 发表</div><div>0/2000 字符</div><div>提交留言</div></div></div><div><h2 id="sr-toc-17">精选留言 (22)</h2><ul><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/12/52/40/e57a736e.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_28"></div></div><div><div><div><span>pedro</span></div></div><div>一节值回票价！！！</div><div><div>2021-06-15</div><div><div><i></i><span></span></div><div><i></i><span>53</span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/10/68/d4/c9b5d3f9.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div></div><div><div><div><span>💎A</span></div></div><div>https://readme.so/editor  readme 模板</div><div><p>作者回复：好网站，感谢分享！</p></div><div><div>2021-06-18</div><div><div><i></i><span>8</span></div><div><i></i><span>18</span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div></div><div><div><div><span>aoe</span></div></div><div>推荐 Copilot 人工智能插件，写起代码一路火花带闪电，自动生成的代码有时让人震惊</div><div><p>作者回复: 666</p></div><div><div>2022-03-10</div><div><div><i></i><span>4</span></div><div><i></i><span>9</span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/10/95/00/a7001873.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div></div><div><div><div><span> 莫林</span></div></div><div>谢谢老师详细的讲解。关于目录结构有两点比较疑惑：
1. 按功能拆分的时候，如果两个功能模块需要相互调用怎么办？例如 User、Article 和 Comment.
2. 每个功能模块里面是不是也要按照分层来：domain、repository 、service?
3. 对于公共组件，如 mysql 连接池。需要如何处理，在何时注入。起 server 的时候注入 context 还是在每个 repository 里引用？
希望老师有空能帮忙解答，谢谢～</div><div><p>作者回复: 1. 2 个模块相互调用，那就会出现循环，可以把功能独立到一个新包，User、Article、Comment 都导入新包。
2. domain、repository、service 是整个项目的软件架构，每个功能模块不需要按这么来分。
3. 把所有的跟数据库操作都封装在 repository 中，然后再 repository 中引用</p></div><div><div>2021-07-21</div><div><div><i></i></div><div><i></i><span>8</span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/0f/64/53/c93b8110.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div></div><div><div><div><span>daz2yy</span></div></div><div>很完善的内容！不过，道理其实都懂，或者多多少少看过一些，如果能结合一些实际落地的例子就更好了；也正如老师说的，要求人去按照规范做很难，需要靠工具实现约束；还有比如 CR 的具体操作细节，花费的时间，参与人，CR 不通过与通过的情况等。</div><div><p>作者回复：项目中会有实战那俩</p></div><div><div>2021-06-16</div><div><div><i></i></div><div><i></i><span>6</span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/11/7a/d2/4ba67c0c.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div></div><div><div><div><span>Sch0ng</span></div></div><div>给出了优雅 go 项目的定义和实现路径，无异于茫茫大海中的指路明灯。
灯塔有了，下一步就是朝着希望的方向慢慢积累徐徐前进。
</div><div><p>作者回复：老哥，语文作文一定是高分！</p></div><div><div>2021-08-06</div><div><div><i></i><span>2</span></div><div><i></i><span>3</span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eo4iaVQmVcDTuU9DFJzzLdNzYAmvjaice7fBYMBIsGd2GbfcG80WS8G2ZZ7QFYCkNocUcOibWiaibyNFJQ/132"></div><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_28"></div></div><div><div><div><span> 狮盔银甲</span></div></div><div>关于项目架构 相比 老师介绍的 按层拆分 (水平拆分) 和按功能拆分 (垂直拆分) 在 &lt;&lt;clean architecture&gt;&gt; 和 领域驱动设计 是不是都推荐六边形架构呢 在这块比较疑惑</div><div><p>作者回复：按功能拆分和六边形架构不冲突。看了下六边形架构介绍，很 cool，IAM 项目也有六边形架构的影子，老哥完全可以按六边形架构来设计系统。</p></div><div><div>2021-07-15</div><div><div><i></i><span>2</span></div><div><i></i><span>3</span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/17/41/be/7c756efa.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div></div><div><div><div><span>timidsmile</span></div></div><div>代码结构这一小节，有点不太理解，求指点～～～
1. 目录结构和分层是二选一吗？还是先按照【目录结构】规范，然后在具体的目录下再按照【分层】来实现呢？
2. 分层建议按功能拆分，那么一个功能模块里还需要考虑分层吗？比如订单模块，里面会包含业务逻辑，db、api、redis 调用，这些都放到一个模块里需要考虑分层吗？</div><div><p>作者回复：需要按功能拆分，而非分层
</p></div><div><div>2021-06-29</div><div><div><i></i></div><div><i></i><span>2</span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/0f/d4/f1/c06aa702.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div></div><div><div><div><span> 惟新</span></div></div><div>我来 催更了。</div><div><div>2021-06-15</div><div><div><i></i><span></span></div><div><i></i><span>3</span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/1d/3c/bd/ea0b59f6.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div></div><div><div><div><span></span></div></div><div>想问问像 changelog 的生成是以为个 维度划分？如 日期？分支提交，还是以功能发布为准？</div><div><p>作者回复：以版本发布为准</p></div><div><div>2021-06-22</div><div><div><i></i></div><div><i></i><span>1</span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/28/61/25/b646d049.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div></div><div><div><div><span>demon</span></div></div><div>你好，请问单元测试文件应该放在哪个文件夹下？</div><div><p>作者回复：建议跟源码文件放一个目录中</p></div><div><div>2021-06-21</div><div><div><i></i><span>2</span></div><div><i></i><span>1</span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div></div><div><div><div><span>aoe</span></div></div><div>瞬间感觉捡到了一堆装备，可以横推了</div><div><div>2022-03-10</div><div><div><i></i><span></span></div><div><i></i><span></span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJoG7YWJ0WsYj2jeLNJAmibIRrEUqlI8nP66895MGbr1tyDrIaykplsCbe5akkJsUCtUQTuV7YUREw/132"></div></div><div><div><div><span>繁星万千不及你</span></div></div><div>func NewFakeService () Service   这个接口 应该是返回 *fakeService 吧？
 func NewFakeService ()  *fakeService</div><div><p>作者回复：可以直接返回 Service 的。看实际需求</p></div><div><div>2022-02-23</div><div><div><i></i><span>2</span></div><div><i></i><span></span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/28/b2/5d/db3ed798.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div></div><div><div><div><span>大头羊</span></div></div><div>hhhhhhh, gothanks!</div><div><div>2022-02-10</div><div><div><i></i><span></span></div><div><i></i><span></span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/0f/87/64/3882d90d.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div></div><div><div><div><span>yandongxiao</span></div></div><div>总结：
    1. Go 项目和 Go 应用的区别？项目还包括项目管理和项目文档。
    2. 如何编写高质量的 Go 应用？
        1. 代码结构：按照功能对项目进行模块划分；
        2. 编码规范：Uber 编码规范 + 静态代码检查 + Code Review + CI 检查；
        3. 代码质量：单元测试 + Code Review
        4. 编程哲学：面向接口编程、面向对象变成
        5. 软件设计方法：设计模式 + SOLID 原则
    3. 如何高效地管理项目？根据第 8 节，在开发阶段和测试阶段描述的子任务，通过 makefile 、bash 以及众多工具将它们管理起来。
    4. 如何编写高质量的文档？ 参见第 4 节。</div><div><p>作者回复：总结的好细呀，66666666</p></div><div><div>2021-11-24</div><div><div><i></i></div><div><i></i><span></span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/10/ad/e6/bf43ee14.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div></div><div><div><div><span>ggchangan</span></div></div><div>不好意思发现之前的留言留错地方了。老师，请教下，如何自动生成基于 Suite 的测试代码呢？gotests 生成的不是基于 Suite 的</div><div><p>作者回复：调研了下，应该没有这类工具当前。如果你了解有，欢迎评论区分享。</p></div><div><div>2021-10-14</div><div><div><i></i></div><div><i></i><span></span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/17/57/2a/3369dbfe.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_28"></div></div><div><div><div><span>Nio</span><span><div class="sr-rd-content-center"><img class="" src="https://static001.geekbang.org/resource/image/89/43/89yyff4c4c2e2b73ce4931bb01a6a943.png"></div></span></div></div><div>我也来催更了</div><div><div>2021-06-17</div><div><div><i></i><span></span></div><div><i></i><span></span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/10/dd/09/feca820a.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div></div><div><div><div><span>helloworld</span></div></div><div>赞👍</div><div><div>2021-06-17</div><div><div><i></i><span></span></div><div><i></i><span></span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/0f/87/2c/013afd74.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div></div><div><div><div><span>夏夜星语</span></div></div><div>golangci-lint 安装失败，换版本为 v1.14.0 也不行：

(base) [cody@dev iam]$ go get -u github.com/golangci/golangci-lint/cmd/golangci-lint
go: downloading github.com/tommy-muehle/go-mnd v1.3.1-0.20200224220436-e6f9a994e8fa
# github.com/golangci/golangci-lint/pkg/golinters
../../../../pkg/mod/github.com/golangci/golangci-lint@v1.40.1/pkg/golinters/gosimple.go:11:40: cannot use simple.Analyzers (type []*"honnef.co/go/tools/analysis/lint".Analyzer) as type map [string]*analysis.Analyzer in argument to setupStaticCheckAnalyzers
../../../../pkg/mod/github.com/golangci/golangci-lint@v1.40.1/pkg/golinters/staticcheck.go:11:40: cannot use staticcheck.Analyzers (type []*"honnef.co/go/tools/analysis/lint".Analyzer) as type map [string]*analysis.Analyzer in argument to setupStaticCheckAnalyzers
../../../../pkg/mod/github.com/golangci/golangci-lint@v1.40.1/pkg/golinters/stylecheck.go:11:40: cannot use stylecheck.Analyzers (type []*"honnef.co/go/tools/analysis/lint".Analyzer) as type map [string]*analysis.Analyzer in argument to setupStaticCheckAnalyzers
../../../../pkg/mod/github.com/golangci/golangci-lint@v1.40.1/pkg/golinters/unused.go:28:3: cannot use unused.Analyzer.Doc (type *"honnef.co/go/tools/analysis/lint".Documentation) as type string in field value
../../../../pkg/mod/github.com/golangci/golangci-lint@v1.40.1/pkg/golinters/unused.go:29:28: unused.Analyzer.Requires undefined (type *"honnef.co/go/tools/analysis/lint".Analyzer has no field or method Requires)
../../../../pkg/mod/github.com/golangci/golangci-lint@v1.40.1/pkg/golinters/unused.go:31:31: unused.Analyzer.Run undefined (type *"honnef.co/go/tools/analysis/lint".Analyzer has no field or method Run)
</div><div><p>作者回复：直接官网下载二进制文件吧，最新版可能有问题</p></div><div><div>2021-06-15</div><div><div><i></i></div><div><i></i><span></span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/22/9a/52/93416b65.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_28"></div></div><div><div><div><span>不明真相的群众</span></div></div><div>我来催更了</div><div><div>2021-06-15</div><div><div><i></i><span></span></div><div><i></i><span></span></div></div></div></div></div></li></ul><div> 收起评论<span></span></div></div></sr-rd-content>
                            <toc-bg><toc style="width: initial;overflow: auto!important;"class="simpread-font simpread-theme-root" data-reactid=".y"><outline class="toc-level-h1" data-reactid=".y.0" style="width: 175px;"><active data-reactid=".y.0.0" ></active><a class="toc-outline-theme-github" href="#sr-toc-0" data-reactid=".y.0.1"><span data-reactid=".y.0.1.0">10 | 设计方法：怎么写出优雅的 Go 项目？</span></a></outline><outline class="toc-level-h2" data-reactid=".y.1" style="width: 165px;"><active data-reactid=".y.1.0"></active><a class="toc-outline-theme-github" href="#sr-toc-1" data-reactid=".y.1.1"><span data-reactid=".y.1.1.0">如何写出优雅的 Go 项目？</span></a></outline><outline class="toc-level-h2" data-reactid=".y.2" style="width: 165px;"><active data-reactid=".y.2.0"></active><a class="toc-outline-theme-github" href="#sr-toc-2" data-reactid=".y.2.1"><span data-reactid=".y.2.1.0">编写高质量的 Go 应用</span></a></outline><outline class="toc-level-h3" data-reactid=".y.3" style="width: 155px;"><active data-reactid=".y.3.0"></active><a class="toc-outline-theme-github" href="#sr-toc-3" data-reactid=".y.3.1"><span data-reactid=".y.3.1.0">代码结构</span></a></outline><outline class="toc-level-h3" data-reactid=".y.4" style="width: 155px;"><active data-reactid=".y.4.0"></active><a class="toc-outline-theme-github" href="#sr-toc-4" data-reactid=".y.4.1"><span data-reactid=".y.4.1.0">代码规范</span></a></outline><outline class="toc-level-h3" data-reactid=".y.5" style="width: 155px;"><active data-reactid=".y.5.0"></active><a class="toc-outline-theme-github" href="#sr-toc-5" data-reactid=".y.5.1"><span data-reactid=".y.5.1.0">代码质量</span></a></outline><outline class="toc-level-h3" data-reactid=".y.6" style="width: 155px;"><active data-reactid=".y.6.0"></active><a class="toc-outline-theme-github" href="#sr-toc-6" data-reactid=".y.6.1"><span data-reactid=".y.6.1.0">编程哲学</span></a></outline><outline class="toc-level-h3" data-reactid=".y.7" style="width: 155px;"><active data-reactid=".y.7.0"></active><a class="toc-outline-theme-github" href="#sr-toc-7" data-reactid=".y.7.1"><span data-reactid=".y.7.1.0">软件设计方法</span></a></outline><outline class="toc-level-h2" data-reactid=".y.8" style="width: 165px;"><active data-reactid=".y.8.0"></active><a class="toc-outline-theme-github" href="#sr-toc-8" data-reactid=".y.8.1"><span data-reactid=".y.8.1.0">高效管理项目</span></a></outline><outline class="toc-level-h3" data-reactid=".y.9" style="width: 155px;"><active data-reactid=".y.9.0"></active><a class="toc-outline-theme-github" href="#sr-toc-9" data-reactid=".y.9.1"><span data-reactid=".y.9.1.0">高效的开发流程</span></a></outline><outline class="toc-level-h3" data-reactid=".y.a" style="width: 155px;"><active data-reactid=".y.a.0"></active><a class="toc-outline-theme-github" href="#sr-toc-10" data-reactid=".y.a.1"><span data-reactid=".y.a.1.0">使用 Makefile 管理项目</span></a></outline><outline class="toc-level-h3" data-reactid=".y.b" style="width: 155px;"><active data-reactid=".y.b.0"></active><a class="toc-outline-theme-github" href="#sr-toc-11" data-reactid=".y.b.1"><span data-reactid=".y.b.1.0">自动生成代码</span></a></outline><outline class="toc-level-h3" data-reactid=".y.c" style="width: 155px;"><active data-reactid=".y.c.0"></active><a class="toc-outline-theme-github" href="#sr-toc-12" data-reactid=".y.c.1"><span data-reactid=".y.c.1.0">善于借助工具</span></a></outline><outline class="toc-level-h3" data-reactid=".y.d" style="width: 155px;"><active data-reactid=".y.d.0"></active><a class="toc-outline-theme-github" href="#sr-toc-13" data-reactid=".y.d.1"><span data-reactid=".y.d.1.0">对接 CI/CD</span></a></outline><outline class="toc-level-h2" data-reactid=".y.e" style="width: 165px;"><active data-reactid=".y.e.0"></active><pangu> </pangu><a class="toc-outline-theme-github" href="#sr-toc-14" data-reactid=".y.e.1"><span data-reactid=".y.e.1.0">编写高质量的项目文档</span></a></outline><outline class="toc-level-h2" data-reactid=".y.f" style="width: 165px;"><active data-reactid=".y.f.0"></active><a class="toc-outline-theme-github" href="#sr-toc-15" data-reactid=".y.f.1"><span data-reactid=".y.f.1.0">总结</span></a></outline><outline class="toc-level-h2" data-reactid=".y.g" style="width: 165px;"><active data-reactid=".y.g.0"></active><a class="toc-outline-theme-github" href="#sr-toc-16" data-reactid=".y.g.1"><span data-reactid=".y.g.1.0">课后练习</span></a></outline><outline class="toc-level-h2" data-reactid=".y.h" style="width: 165px;"><active data-reactid=".y.h.0"></active><a class="toc-outline-theme-github" href="#sr-toc-17" data-reactid=".y.h.1"><span data-reactid=".y.h.1.0">精选留言 (22)</span></a></outline></toc></toc-bg>
                            <sr-rd-footer>
                                <sr-rd-footer-group>
                                    <sr-rd-footer-line></sr-rd-footer-line>
                                    <sr-rd-footer-text>全文完</sr-rd-footer-text>
                                    <sr-rd-footer-line></sr-rd-footer-line>
                                </sr-rd-footer-group>
                                <sr-rd-footer-copywrite>
                                    <div>本文由 <a href="http://ksria.com/simpread" target="_blank">简悦 SimpRead</a> 转码，用以提升阅读体验，<a href="https://time.geekbang.org/column/article/384648" target="_blank">原文地址 </a></div>
                                </sr-rd-footer-copywrite>
                            </sr-rd-footer>
                        </sr-read>
                    </body>
                </html>