
                <html lang="en" class="simpread-font simpread-theme-root" style=''>
                    <head>
                        <meta charset="utf-8">
                        <meta http-equiv="content-type" content="text/html; charset=UTF-8;charset=utf-8">
                        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
                        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=1">
                        <meta name="author" content="Kenshin"/>
                        <meta name="description" content="简悦 SimpRead - 如杂志般沉浸式阅读体验的扩展" />
                        <meta name="keywords" content="Chrome extension, Chrome 扩展, 阅读模式, 沉浸式阅读, 简悦, 简阅, read mode, reading mode, reader view, firefox, firefox addon, userscript, safari, opera, tampermonkey"/>
                        <meta name="thumbnail" content="https://simpread-1254315611.cos.ap-shanghai.myqcloud.com/static/introduce-2.png"/>
                        <meta property="og:title" content="简悦 SimpRead - 如杂志般沉浸式阅读体验的扩展"/>
                        <meta property="og:type" content="website">
                        <meta property="og:local" content="zh_CN"/>
                        <meta property="og:url" content="http://ksria.com/simpread"/>
                        <meta property="og:image" content="https://simpread-1254315611.cos.ap-shanghai.myqcloud.com/static/introduce-2.png"/>
                        <meta property="og:image:type" content="image/png"/>
                        <meta property="og:image:width" content="960"/>
                        <meta property="og:image:height" content="355"/>
                        <meta property="og:site_name" content="http://ksria.com/simpread"/>
                        <meta property="og:description" content="简悦 SimpRead - 如杂志般沉浸式阅读体验的扩展"/>
                        <style type="text/css">.simpread-font{font:300 16px/1.8 -apple-system,PingFang SC,Microsoft Yahei,Lantinghei SC,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;color:#333;text-rendering:optimizelegibility;-webkit-text-size-adjust:100%;-webkit-font-smoothing:antialiased}.simpread-hidden{display:none}.simpread-read-root{display:-webkit-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;margin:0;top:-1000px;left:0;width:100%;z-index:2147483646;overflow-x:hidden;opacity:0;-webkit-transition:all 1s cubic-bezier(.23,1,.32,1) .1s;transition:all 1s cubic-bezier(.23,1,.32,1) .1s}.simpread-read-root-show{top:0}.simpread-read-root-hide{top:1000px}sr-read{display:-webkit-flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-flow:column nowrap;flex-flow:column;margin:20px 20%;min-width:400px;min-height:400px;text-align:center}read-process{position:fixed;top:0;left:0;height:3px;width:100%;background-color:#64b5f6;-webkit-transition:width 2s;transition:width 2s;z-index:20000}sr-rd-content-error{display:block;position:relative;margin:0;margin-bottom:30px;padding:25px;background-color:rgba(0,0,0,.05)}sr-rd-footer{-webkit-box-orient:vertical;-ms-flex-direction:column;flex-direction:column;font-size:14px}sr-rd-footer,sr-rd-footer-group{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-direction:normal}sr-rd-footer-group{-webkit-box-orient:horizontal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}sr-rd-footer-line{width:100%;border-top:1px solid #e0e0e0}sr-rd-footer-text{min-width:150px}sr-rd-footer-copywrite{margin:10px 0 0;color:inherit}sr-rd-footer-copywrite abbr{-webkit-font-feature-settings:normal;font-feature-settings:normal;font-variant:normal;text-decoration:none}sr-rd-footer-copywrite .second{margin:10px 0}sr-rd-footer-copywrite .third a:hover{border:none!important}sr-rd-footer-copywrite .third a:first-child{margin-right:50px}sr-rd-footer-copywrite .sr-icon{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:33px;height:33px;opacity:.8;-webkit-transition:opacity .5s ease;transition:opacity .5s ease;cursor:pointer}sr-rd-footer-copywrite .sr-icon:hover{opacity:1}sr-rd-footer-copywrite a,sr-rd-footer-copywrite a:link,sr-rd-footer-copywrite a:visited{margin:0;padding:0;color:inherit;background-color:transparent;font-size:inherit!important;line-height:normal;text-decoration:none;vertical-align:baseline;vertical-align:initial;border:none!important;box-sizing:border-box}sr-rd-footer-copywrite a:focus,sr-rd-footer-copywrite a:hover,sr-rd-footer a:active{color:inherit;text-decoration:none;border-bottom:1px dotted!important}.simpread-blocks{text-decoration:none!important}.simpread-blocks *{margin:0}.simpread-blocks a{padding:0;text-decoration:none!important}.simpread-blocks img{margin:0;padding:0;border:0;background:transparent;box-shadow:none}.simpread-focus-root{display:block;position:fixed;top:0;left:0;right:0;bottom:0;background-color:hsla(0,0%,92%,.9);z-index:2147483645;opacity:0;-webkit-transition:opacity 1s cubic-bezier(.23,1,.32,1) 0ms;transition:opacity 1s cubic-bezier(.23,1,.32,1) 0ms}.simpread-focus-highlight{position:relative;box-shadow:0 0 0 20px #fff;background-color:#fff;overflow:visible;z-index:2147483646}.sr-controlbar-bg sr-rd-crlbar,.sr-controlbar-bg sr-rd-crlbar fab{z-index:2147483647}sr-rd-crlbar.controlbar{position:fixed;right:0;bottom:0;width:100px;height:100%;opacity:0;-webkit-transition:opacity .5s ease;transition:opacity .5s ease}sr-rd-crlbar.controlbar:hover{opacity:1}sr-rd-crlbar fap *{box-sizing:border-box}@media (max-height:620px){fab{zoom:.8}}@media (max-height:783px){dialog-gp dialog-content{max-height:580px}dialog-gp dialog-footer{border-top:1px solid #e0e0e0}}.simpread-highlight-selector{outline:3px dashed #1976d2!important;cursor:pointer!important}.simpread-highlight-controlbar,.simpread-highlight-selector{background-color:#fafafa!important;opacity:.8!important;-webkit-transition:opacity .5s ease!important;transition:opacity .5s ease!important}.simpread-highlight-controlbar{position:relative!important;border:3px dashed #1976d2!important}simpread-highlight,sr-snapshot-ctlbar{position:fixed;top:0;left:0;right:0;padding:15px;height:50px;background-color:rgba(50,50,50,.9);box-shadow:0 2px 5px rgba(0,0,0,.26);box-sizing:border-box;z-index:2147483640}simpread-highlight,sr-highlight-ctl,sr-snapshot-ctlbar{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}sr-highlight-ctl{margin:0 5px;width:50px;height:20px;color:#fff;background-color:#1976d2;border-radius:4px;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);cursor:pointer}toc-bg{position:fixed;left:0;top:0;width:50px;height:200px;font-size:medium}toc-bg:hover{z-index:3}.toc-bg-hidden{opacity:0;-webkit-transition:opacity .5s ease;transition:opacity .5s ease}.toc-bg-hidden:hover{opacity:1;z-index:3}.toc-bg-hidden:hover toc{width:180px}toc *{all:unset}toc{position:fixed;left:0;top:100px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;padding:10px;width:0;max-width:200px;max-height:500px;overflow-x:hidden;overflow-y:hidden;cursor:pointer;border:1px solid hsla(0,0%,62%,.22);-webkit-transition:width .5s;transition:width .5s}toc:hover{overflow-y:auto}toc.mini:hover{width:200px!important}toc::-webkit-scrollbar{width:3px}toc::-webkit-scrollbar-thumb{border-radius:10px;background-color:hsla(36,2%,54%,.5)}toc outline{position:relative;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;padding:2px 0;min-height:21px;line-height:21px;text-align:left}toc outline a,toc outline a:active,toc outline a:focus,toc outline a:visited{display:block;width:100%;color:inherit;font-size:11px;text-decoration:none!important;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}toc outline a:hover{font-weight:700!important}toc outline a.toc-outline-theme-dark,toc outline a.toc-outline-theme-night{color:#fff!important}.toc-level-h1{padding-left:5px}.toc-level-h2{padding-left:15px}.toc-level-h3{padding-left:25px}.toc-level-h4{padding-left:35px}.toc-outline-active{border-left:2px solid #f44336}toc outline active{position:absolute;left:0;top:0;bottom:0;padding:0 0 0 3px;border-left:2px solid #e8e8e8}sr-kbd{background:-webkit-gradient(linear,0 0,0 100%,from(#fff785),to(#ffc542));border:1px solid #e3be23;-o-border-image:none;border-image:none;-o-border-image:initial;border-image:initial;position:absolute;left:0;padding:1px 3px 0;font-size:11px!important;font-weight:700;box-shadow:0 3px 7px 0 rgba(0,0,0,.3);overflow:hidden;border-radius:3px}.sr-kbd-a{position:relative}kbd-mapping{position:fixed;left:5px;bottom:5px;-ms-flex-flow:row;flex-flow:row;width:250px;height:500px;background-color:#fff;border:1px solid hsla(0,0%,62%,.22);box-shadow:0 2px 5px rgba(0,0,0,.26);border-radius:3px}kbd-mapping,kbd-maps{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}kbd-maps{margin:40px 0 20px;width:100%;overflow-x:auto}kbd-maps::-webkit-scrollbar-thumb{background-clip:padding-box;border-radius:10px;border:2px solid transparent;background-color:rgba(85,85,85,.55)}kbd-maps::-webkit-scrollbar{width:10px;-webkit-transition:width .7s cubic-bezier(.4,0,.2,1);transition:width .7s cubic-bezier(.4,0,.2,1)}kbd-mapping kbd-map-title{position:absolute;margin:5px 0;width:100%;font-size:14px;font-weight:700}kbd-maps-group{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}kbd-maps-title{margin:5px 0;padding-left:53px;font-size:12px;font-weight:700}kbd-map kbd{display:inline-block;padding:3px 5px;font-size:11px;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #c6cbd1;border-bottom-color:#959da5;border-radius:3px;box-shadow:inset 0 -1px 0 #959da5}kbd-map kbd-name{display:inline-block;text-align:right;width:50px}kbd-map kbd-desc{padding-left:3px}sharecard-bg{position:fixed;top:0;left:0;width:100%;height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:rgba(0,0,0,.4);z-index:2147483647}sharecard{max-width:450px;background-color:#64b5f6}sharecard,sharecard-head{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}sharecard-head{margin:25px;color:#fff;border-radius:10px;box-shadow:0 2px 6px 0 rgba(0,0,0,.2),0 25px 50px 0 rgba(0,0,0,.15)}sharecard-card{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}sharecard-card,sharecard-top{display:-webkit-box;display:-ms-flexbox;display:flex}sharecard-top{-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding-right:5px;height:65px;background-color:#fff;color:#878787;font-size:25px;font-weight:500;border-top-left-radius:10px;border-top-right-radius:10px}sharecard-top span.logos{display:block;width:48px;height:48px;margin:5px;background-repeat:no-repeat;background-position:50%;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAABU1BMVEUAAAAnNJMnNZI3Q5onNJInNJMnNJInNJMnNJI8SJ0tOZY/S55EUKAoNJI6RpwoNJNIU6InNJInNJImNJI7SJwmNJJ2fLUiMJFKVaNCTJ9faK1HUaJOWKVSXaUnNJNYY6pye7cmM5JXYKhwebMjMI8mL4719fW9vb0oNZP/UlLz8/QqN5TAwMAnNJPv7+/Pz8/q6+/p6enNzc3Kysry8vMsOJXc3env7/LU1uXo29vR0dHOzs7ExMTwjo73bW37XV3Aj1TCYELl5u3n5+fW2Obn6O7f4OrZ2+g0QJkxPpgvO5bh4uvS1OTP0ePCwsJQW6ZLVqTs7fHd3d3V1dXqv79VX6lET6A1TIxXUIBSgHxWQnpelHf+WVnopkXqbC7j5Ozi4uLDw8NGUaFATJ9SgH3r6+vGyd7BxNva2trX19ejqM2gpczHx8dze7Zha67Z2dlTgH1aXQeSAAAAJnRSTlMA6ff+497Y8NL+/fv49P379sqab/BeOiX06tzVy8m/tKqpalA7G6oKj0EAAAJlSURBVEjHndNXWxpBFIDhcS2ICRLAkt4Dx4WhLk0E6R0MYoIISrWX5P9f5cwSIRC2+T1czMV5n2FnZwn2eWONUqCAv3H2Uf5Ra1hx4+0WEXtDQW0fCPYJ1EffEfIV4CSROAE4jsePoTFsNmTJF/IeIHF2lgCIn57GodlqDWXBK7IwBYatVlMWFAildPKX7I3m74Z9fsCiQChoimoFQAz04Ad2gH1n9fv9n9hgMNDr9euLWD6fLxQKxaLfb7dTSlahbFVdEPwIQtrAihZQgyKCtCagbQe3xh0QFMgy5MR11+ewYY5/qlZ7vT2xu93ULKjbFLpiUxnIIwjgKmVTLDUFXMrAi2NJWCRLIthTBo4xyOLKpwyqU6CuDCI41hFBCVdOhyLw4FgJ1skCAiyl9BSHbCorgo6VJXTru5hrVCQS8Yr5xLzX59YJSFpVFwD9U0BGC3hGdFpATgRupTGe9R9I1b1ePBvXKDyvq/O/44LT4/E4BUbSCAwj8Evq6HlnOBprx6JhJz8Gktc7xeaP9ndY+0coQvCccFBD4JW60UIY50ciLOAODAQRVOeCHm4Q3Xks6uRDY+CQ+AR4T2wMYh6+jMCIQOp78CFoj0H7EQgIuhI3dGaHCrwgADwCPjJvA372GRigCJg49FUdk3D87pq3zp4SA5zc1Zh9DxfwkpjgUg5Mv+lbeE3McC8Lpu7SA3wk2xzcqL2tN5DfIsQC8HB7UamUy6FQOpTO5QKBQDZbKnWSyUzGjdWCwaDA8+7Le4BNgm3qQGWchYh9s5hNq6wVbBlbwhZYOp3OYOA4zmgEypnM2zj8ByIdedKrH8vDAAAAAElFTkSuQmCC");zoom:.8}sharecard-content{padding:15px;max-height:500px;font-size:20px;text-align:justify;background-color:#2196f3;overflow-x:hidden;overflow-y:auto}sharecard-via{padding:10px;font-size:10px;background-color:#2196f3}sharecard-footer{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding-right:5px;height:100px;background-color:#fff;color:#878787;font-size:15px;font-weight:500;border-bottom-left-radius:10px;border-bottom-right-radius:10px}sharecard-footer,sharecard-footer div{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}sharecard-footer span.qrcode{display:block;width:100px;height:100px;margin:5px;background-repeat:no-repeat;background-position:50%;background-image:url("data:image/png;base64,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")}sharecard-control{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 19px;height:80px;background-color:#fff}simpread-snapshot{width:100%;height:100%;cursor:move;z-index:2147483645}simpread-snapshot,sr-mask{position:fixed;left:0;top:0}sr-mask{background-color:rgba(0,0,0,.1)}.simpread-feedback,.simpread-urlscheme{position:fixed;right:20px;bottom:20px;z-index:2147483646}simpread-feedback,simpread-urlscheme{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:20px 20px 0;width:500px;color:rgba(51,51,51,.87);background-color:#fff;border-radius:3px;box-shadow:0 0 2px rgba(0,0,0,.12),0 2px 2px rgba(0,0,0,.26);overflow:hidden;-webkit-transform-origin:bottom;transform-origin:bottom;-webkit-transition:all .6s ease;transition:all .6s ease}simpread-feedback *,simpread-urlscheme *{font-size:12px!important;box-sizing:border-box}simpread-feedback.active,simpread-urlscheme.active{-webkit-animation-name:srFadeInUp;animation-name:srFadeInUp;-webkit-animation-duration:.45s;animation-duration:.45s;-webkit-animation-fill-mode:both;animation-fill-mode:both}simpread-feedback.hide,simpread-urlscheme.hide{-webkit-animation-name:srFadeInDown;animation-name:srFadeInDown;-webkit-animation-duration:.45s;animation-duration:.45s;-webkit-animation-fill-mode:both;animation-fill-mode:both}simpread-feedback sr-fb-label,simpread-urlscheme sr-urls-label{width:100%}simpread-feedback sr-fb-head,simpread-urlscheme sr-urls-head{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;margin-bottom:5px;width:100%}simpread-feedback sr-fb-content,simpread-urlscheme sr-urls-content{margin-bottom:5px;width:100%}simpread-feedback sr-urls-footer,simpread-urlscheme sr-urls-footer{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;width:100%}simpread-feedback sr-fb-a,simpread-urlscheme sr-urls-a{color:#2163f7;cursor:pointer}simpread-feedback text-field-state,simpread-urlscheme text-field-state{border-top:none rgba(34,101,247,.8)!important;border-left:none rgba(34,101,247,.8)!important;border-right:none rgba(34,101,247,.8)!important;border-bottom:2px solid rgba(34,101,247,.8)!important}simpread-feedback switch,simpread-urlscheme switch{margin-top:0!important}@-webkit-keyframes srFadeInUp{0%{opacity:0;-webkit-transform:translateY(100px);transform:translateY(100px)}to{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes srFadeInUp{0%{opacity:0;-webkit-transform:translateY(100px);transform:translateY(100px)}to{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes srFadeInDown{0%{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}to{opacity:0;-webkit-transform:translateY(100px);transform:translateY(100px)}}@keyframes srFadeInDown{0%{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}to{opacity:0;-webkit-transform:translateY(100px);transform:translateY(100px)}}simpread-feedback sr-fb-head{font-weight:700}simpread-feedback sr-fb-content{-webkit-box-orient:vertical;-ms-flex-direction:column;flex-direction:column}simpread-feedback sr-fb-content,simpread-feedback sr-fb-footer{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-direction:normal}simpread-feedback sr-fb-footer{-webkit-box-orient:horizontal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;width:100%}simpread-feedback sr-close{position:absolute;right:20px;cursor:pointer;-webkit-transition:all 1s cubic-bezier(.23,1,.32,1) .1s;transition:all 1s cubic-bezier(.23,1,.32,1) .1s;z-index:200}simpread-feedback sr-close:hover{-webkit-transform:rotate(-15deg) scale(1.3);transform:rotate(-15deg) scale(1.3)}simpread-feedback sr-stars{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-top:10px}simpread-feedback sr-stars i{margin-right:10px;cursor:pointer}simpread-feedback sr-stars i svg{-webkit-transition:all 1s cubic-bezier(.23,1,.32,1) .1s;transition:all 1s cubic-bezier(.23,1,.32,1) .1s}simpread-feedback sr-stars i svg:hover{-webkit-transform:rotate(-15deg) scale(1.3);transform:rotate(-15deg) scale(1.3)}simpread-feedback sr-stars i.active svg{-webkit-transform:rotate(0) scale(1);transform:rotate(0) scale(1)}simpread-feedback sr-emojis{display:block;height:100px;overflow:hidden}simpread-feedback sr-emoji{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-transition:.3s;transition:.3s}simpread-feedback sr-emoji>svg{margin:15px 0;width:70px;height:70px;-ms-flex-negative:0;flex-shrink:0}simpread-feedback sr-stars-footer{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin:10px 0 20px}</style>
                        <style type="text/css">.simpread-theme-root{font-size:62.5%!important}sr-rd-content,sr-rd-desc,sr-rd-title{width:100%}sr-rd-title{display:-webkit-box;margin:1em 0 .5em;overflow:hidden;text-overflow:ellipsis;text-rendering:optimizelegibility;-webkit-line-clamp:3;-webkit-box-orient:vertical}sr-rd-content{text-align:left;word-break:break-word}sr-rd-desc{text-align:justify;line-height:2.4;margin:0 0 1.2em;box-sizing:border-box}sr-rd-content{font-size:25.6px;font-size:1.6rem;line-height:1.6}sr-rd-content h1,sr-rd-content h1 *,sr-rd-content h2,sr-rd-content h2 *,sr-rd-content h3,sr-rd-content h3 *,sr-rd-content h4,sr-rd-content h4 *,sr-rd-content h5,sr-rd-content h5 *,sr-rd-content h6,sr-rd-content h6 *{word-break:break-all}sr-rd-content div,sr-rd-content p{display:block;float:inherit;line-height:1.6;font-size:25.6px;font-size:1.6rem}sr-rd-content div,sr-rd-content p,sr-rd-content pre,sr-rd-content sr-blockquote{margin:0 0 1.2em;word-break:break-word}sr-rd-content a{padding:0 5px;vertical-align:baseline;vertical-align:initial}sr-rd-content a,sr-rd-content a:link{color:inherit;font-size:inherit;font-weight:inherit;border:none}sr-rd-content a:hover{background:transparent}sr-rd-content img{margin:10px;padding:5px;max-width:100%;background:#fff;border:1px solid #bbb;box-shadow:1px 1px 3px #d4d4d4}sr-rd-content figcaption{text-align:center;font-size:14px}sr-rd-content sr-blockquote{display:block;position:relative;padding:15px 25px;text-align:left;line-height:inherit}sr-rd-content sr-blockquote:before{position:absolute}sr-rd-content sr-blockquote *{margin:0;font-size:inherit}sr-rd-content table{width:100%;margin:0 0 1.2em;word-break:keep-all;word-break:normal;overflow:auto;border:none}sr-rd-content table td,sr-rd-content table th{border:none}sr-rd-content ul{margin:0 0 1.2em;margin-left:1.3em;padding:0;list-style:disc}sr-rd-content ol{list-style:decimal;margin:0;padding:0}sr-rd-content ol li,sr-rd-content ul li{font-size:inherit;list-style:disc;margin:0 0 1.2em}sr-rd-content ol li{list-style:decimal;margin-left:1.3em}sr-rd-content ol li *,sr-rd-content ul li *{margin:0;text-align:left;text-align:initial}sr-rd-content li ol,sr-rd-content li ul{margin-bottom:.8em;margin-left:2em}sr-rd-content li ul{list-style:circle}sr-rd-content pre{font-family:Consolas,Monaco,Andale Mono,Source Code Pro,Liberation Mono,Courier,monospace;display:block;padding:15px;line-height:1.5;word-break:break-all;word-wrap:break-word;white-space:pre;overflow:auto}sr-rd-content pre,sr-rd-content pre *,sr-rd-content pre div{font-size:17.6px;font-size:1.1rem}sr-rd-content li pre code,sr-rd-content p pre code,sr-rd-content pre{background-color:transparent;border:none}sr-rd-content pre code{margin:0;padding:0}sr-rd-content pre code,sr-rd-content pre code *{font-size:17.6px;font-size:1.1rem}sr-rd-content pre p{margin:0;padding:0;color:inherit;font-size:inherit;line-height:inherit}sr-rd-content li code,sr-rd-content p code{margin:0 4px;padding:2px 4px;font-size:17.6px;font-size:1.1rem}sr-rd-content mark{margin:0 5px;padding:2px;background:#fffdd1;border-bottom:1px solid #ffedce}.sr-rd-content-img{width:90%;height:auto}.sr-rd-content-img-load{width:48px;height:48px;margin:0;padding:0;border-style:none;border-width:0;background-repeat:no-repeat;background-image:url(data:image/gif;base64,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)}.sr-rd-content-center{text-align:center;display:-webkit-box;-webkit-box-align:center;-webkit-box-pack:center;-webkit-box-orient:vertical}.sr-rd-content-center-small{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex}.sr-rd-content-center-small img{margin:0;padding:0;border:0;box-shadow:none}img.simpread-img-broken{cursor:pointer}.sr-rd-content-nobeautify{margin:0;padding:0;border:0;box-shadow:0 0 0}sr-rd-mult{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;margin:0 0 16px;padding:16px 0 24px;width:100%;background-color:#fff;border-radius:4px;box-shadow:0 1px 2px 0 rgba(60,64,67,.3),0 2px 6px 2px rgba(60,64,67,.15)}sr-rd-mult:hover{-webkit-transition:all .45s 0ms;transition:all .45s 0ms;box-shadow:1px 1px 8px rgba(0,0,0,.16)}sr-rd-mult sr-rd-mult-content{padding:0 16px;overflow:auto}sr-rd-mult sr-rd-mult-avatar,sr-rd-mult sr-rd-mult-content{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}sr-rd-mult sr-rd-mult-avatar{-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0 15px}sr-rd-mult sr-rd-mult-avatar span{display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;max-width:75px;overflow:hidden;text-overflow:ellipsis;text-align:left;font-size:16px;font-size:1rem}sr-rd-mult sr-rd-mult-avatar img{margin-bottom:0;max-width:50px;max-height:50px;width:50px;height:50px;border-radius:50%}sr-rd-mult sr-rd-mult-content img{max-width:80%}sr-rd-mult sr-rd-mult-avatar .sr-rd-content-center{margin:0}sr-page{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;width:100%}</style>
                        <style type="text/css">sr-rd-theme-github{display:none}sr-rd-content h1,sr-rd-content h2,sr-rd-content h3,sr-rd-content h4,sr-rd-content h5,sr-rd-content h6{position:relative;margin-top:1em;margin-bottom:1pc;font-weight:700;line-height:1.4;text-align:left;color:#363636}sr-rd-content h1{padding-bottom:.3em;font-size:57.6px;font-size:3.6rem;line-height:1.2}sr-rd-content h2{padding-bottom:.3em;font-size:44.8px;font-size:2.8rem;line-height:1.225}sr-rd-content h3{font-size:38.4px;font-size:2.4rem;line-height:1.43}sr-rd-content h4{font-size:32px;font-size:2rem}sr-rd-content h5,sr-rd-content h6{font-size:25.6px;font-size:1.6rem}sr-rd-content h6{color:#777}sr-rd-content ol,sr-rd-content ul{list-style-type:disc;padding:0;padding-left:2em}sr-rd-content ol ol,sr-rd-content ul ol{list-style-type:lower-roman}sr-rd-content ol ol ol,sr-rd-content ol ul ol,sr-rd-content ul ol ol,sr-rd-content ul ul ol{list-style-type:lower-alpha}sr-rd-content table{width:100%;overflow:auto;word-break:normal;word-break:keep-all}sr-rd-content table th{font-weight:700}sr-rd-content table td,sr-rd-content table th{padding:6px 13px;border:1px solid #ddd}sr-rd-content table tr{background-color:#fff;border-top:1px solid #ccc}sr-rd-content table tr:nth-child(2n){background-color:#f8f8f8}sr-rd-content sr-blockquote{border-left:4px solid #ddd}.simpread-theme-root{background-color:#fff;color:#333}sr-rd-title{font-family:PT Sans,SF UI Display,\.PingFang SC,PingFang SC,Neue Haas Grotesk Text Pro,Arial Nova,Segoe UI,Microsoft YaHei,Microsoft JhengHei,Helvetica Neue,Source Han Sans SC,Noto Sans CJK SC,Source Han Sans CN,Noto Sans SC,Source Han Sans TC,Noto Sans CJK TC,Hiragino Sans GB,sans-serif;font-size:54.4px;font-size:3.4rem;font-weight:700;line-height:1.3}sr-rd-desc{position:relative;margin:0;margin-bottom:30px;padding:25px;padding-left:56px;font-size:28.8px;font-size:1.8rem;color:#777;background-color:rgba(0,0,0,.05);box-sizing:border-box}sr-rd-desc:before{content:"\201C";position:absolute;top:-28px;left:16px;font-size:80px;font-family:Arial;color:rgba(0,0,0,.15)}sr-rd-content,sr-rd-content *,sr-rd-content div,sr-rd-content p{color:#363636;font-weight:400;line-height:1.8}sr-rd-content b *,sr-rd-content strong,sr-rd-content strong * sr-rd-content b{-webkit-animation:none 0s ease 0s 1 normal none running;animation:none 0s ease 0s 1 normal none running;-webkit-backface-visibility:visible;backface-visibility:visible;background:transparent none repeat 0 0/auto auto padding-box border-box scroll;border:medium none currentColor;border-collapse:separate;-o-border-image:none;border-image:none;border-radius:0;border-spacing:0;bottom:auto;box-shadow:none;box-sizing:content-box;caption-side:top;clear:none;clip:auto;color:#000;-webkit-columns:auto;-moz-columns:auto;columns:auto;-webkit-column-count:auto;-moz-column-count:auto;column-count:auto;-webkit-column-fill:balance;-moz-column-fill:balance;column-fill:balance;-webkit-column-gap:normal;-moz-column-gap:normal;column-gap:normal;-webkit-column-rule:medium none currentColor;-moz-column-rule:medium none currentColor;column-rule:medium none currentColor;-webkit-column-span:1;-moz-column-span:1;column-span:1;-webkit-column-width:auto;-moz-column-width:auto;column-width:auto;content:normal;counter-increment:none;counter-reset:none;cursor:auto;direction:ltr;display:inline;empty-cells:show;float:none;font-family:serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;line-height:normal;height:auto;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;left:auto;letter-spacing:normal;list-style:disc outside none;margin:0;max-height:none;max-width:none;min-height:0;min-width:0;opacity:1;orphans:2;outline:medium none invert;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;-webkit-perspective:none;perspective:none;-webkit-perspective-origin:50% 50%;perspective-origin:50% 50%;position:static;right:auto;-moz-tab-size:8;-o-tab-size:8;tab-size:8;table-layout:auto;text-align:left;text-align-last:auto;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;top:auto;-webkit-transform:none;transform:none;-webkit-transform-origin:50% 50% 0;transform-origin:50% 50% 0;-webkit-transform-style:flat;transform-style:flat;-webkit-transition:none 0s ease 0s;transition:none 0s ease 0s;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:2;width:auto;word-spacing:normal;z-index:auto;all:initial}sr-rd-content a,sr-rd-content a:link{color:#4183c4;text-decoration:none}sr-rd-content a:active,sr-rd-content a:focus,sr-rd-content a:hover{color:#4183c4;text-decoration:underline}sr-rd-content pre{background-color:#f7f7f7;border-radius:3px}sr-rd-content li code,sr-rd-content p code{background-color:rgba(0,0,0,.04);border-radius:3px}.simpread-multi-root{background:#f8f9fa}</style>
                        <style type="text/css"></style>
                        <style type="text/css">@media (pointer:coarse){sr-read{margin:20px 5%!important;min-width:0!important;max-width:90%!important}sr-rd-title{margin-top:0;font-size:2.7rem}sr-rd-content sr-blockquote,sr-rd-desc{margin:10 0!important;padding:0 0 0 10px!important;width:90%;font-size:1.8rem;font-style:normal;line-height:1.7;text-align:justify}sr-rd-content{font-size:1.75rem;font-weight:300}sr-rd-content figure{margin:0;padding:0;text-align:center}sr-rd-content a,sr-rd-content a:link,sr-rd-content li code,sr-rd-content p code{font-size:inherit}sr-rd-footer{margin-top:20px}sr-blockquote,sr-blockquote *{margin:5px!important;padding:5px!important}sr-rd-content h1,sr-rd-content h2,sr-rd-content h3,sr-rd-content h4,sr-rd-content h5,sr-rd-content h6,sr-rd-title{font-family:PingFang SC,Verdana,Helvetica Neue,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;color:#000;font-weight:100;line-height:1.35}sr-rd-content-h1,sr-rd-content-h2,sr-rd-content-h3,sr-rd-content-h4,sr-rd-content-h5,sr-rd-content-h6,sr-rd-content h1,sr-rd-content h2,sr-rd-content h3,sr-rd-content h4,sr-rd-content h5,sr-rd-content h6{margin-top:1.2em;margin-bottom:.6em;line-height:1.35}sr-rd-content-h1,sr-rd-content h1{font-size:1.8em}sr-rd-content-h2,sr-rd-content h2{font-size:1.6em}sr-rd-content-h3,sr-rd-content h3{font-size:1.4em}sr-rd-content-h4,sr-rd-content-h5,sr-rd-content-h6,sr-rd-content h4,sr-rd-content h5,sr-rd-content h6{font-size:1.2em}sr-rd-content-ul,sr-rd-content ul{margin-left:1.3em!important;list-style:disc}sr-rd-content-ol,sr-rd-content ol{list-style:decimal;margin-left:1.9em!important}sr-rd-content-ol ol,sr-rd-content-ol ul,sr-rd-content-ul ol,sr-rd-content-ul ul,sr-rd-content li ol,sr-rd-content li ul{margin-bottom:.8em;margin-left:2em!important}sr-rd-content img{margin:0;padding:0;border:0;max-width:100%!important;height:auto;box-shadow:0 20px 20px -10px rgba(0,0,0,.1)}sr-rd-mult{min-width:0;background-color:#fff;box-shadow:0 1px 6px rgba(32,33,36,.28);border-radius:8px}sr-rd-mult sr-rd-mult-avatar div{margin:0}sr-rd-mult sr-rd-mult-avatar .sr-rd-content-center-small{margin:7px 0!important}sr-rd-mult sr-rd-mult-avatar span{display:block}sr-rd-mult sr-rd-mult-content{padding-left:0}@media only screen and (max-device-width:1024px){.simpread-theme-root,html.simpread-theme-root{font-size:80%!important}sr-rd-mult sr-rd-mult-avatar img{width:50px;height:50px;min-width:50px;min-height:50px}toc-bg toc{width:10px!important}toc-bg:hover toc{width:auto!important}}@media only screen and (max-device-width:414px){.simpread-theme-root,html.simpread-theme-root{font-size:70%!important}sr-rd-mult sr-rd-mult-avatar img{width:30px;height:30px;min-width:30px;min-height:30px}}@media only screen and (max-device-width:320px){.simpread-theme-root,html.simpread-theme-root{font-size:90%!important}sr-rd-content p{margin-bottom:.5em}}}</style>
                        <style type="text/css">undefinedsr-rd-content *, sr-rd-content p, sr-rd-content div {}sr-rd-content pre code, sr-rd-content pre code * {}sr-rd-desc {}sr-rd-content pre {}sr-rd-title {}</style>
                        <style type="text/css"></style>
                        <style type="text/css"></style>
                        <style type="text/css"></style>
                        <style type="text/css"></style>
                        <style type="text/css">sr-rd-content *, sr-rd-content p, sr-rd-content div {
        font-size: 15px;
    }

    .annote-perview, .annote-perview * {
        color: rgb(85, 85, 85);
        font-weight: 400;
        line-height: 1.8;
    }</style>
                        
                        
                        <script>setTimeout(()=>{const e=location.hash.replace("#id=","");let t,a=!1;const n=t=>{for(let n of t){let t;if((t=e.length>6?n.getAttribute("data-id"):n.getAttribute("data-idx"))==e){n.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}),a=!0;break}}};e&&(0==(t=document.getElementsByClassName("sr-unread-card")).length&&(t=document.getElementsByTagName("sr-annote")),n(t),a||n(t=document.getElementsByClassName("sr-annote")))},500);</script>
                        <script>document.addEventListener("DOMContentLoaded",function(){if("localhost"==location.hostname){const t=document.getElementsByTagName("img");for(let o of t){const t=o.src;t.startsWith("http")&&(o.src=location.origin+"/proxy?url="+t)}}},!1);</script>
                        <style>toc a {font-size: inherit!important;font-weight: 300!important;}</style><script>setTimeout(()=>{const max=document.getElementsByTagName('sr-annote-note-tip').length;for(let i=0;i<max;i++){const target=document.getElementsByTagName('sr-annote-note-tip')[i],value=target.dataset.value;value&&(target.innerText=value)}},1000);</script><title>简悦 | 特别放送 | 给你一份 Go 项目中最常用的 Makefile 核心语法</title>
                    </head>
                    <body>
                        <sr-read style='font-family: "LXGW WenKai Screen";'>
                            <sr-rd-title>特别放送 | 给你一份 Go 项目中最常用的 Makefile 核心语法</sr-rd-title>
                    <sr-rd-desc style="margin: 0;padding-top: 0;padding-bottom: 0;font-style: normal;font-size: 18px;">每种语言通常都有自己的测试包 / 模块，Go 语言也不例外。在 Go 中，我们可以通过 testing 包对代码进行单元测试和性能测试。今天，我会用一些示</sr-rd-desc>
                    <sr-rd-content><h1 id="sr-toc-0">特别放送 | 给你一份 Go 项目中最常用的 Makefile 核心语法</h1><div><span>孔令飞</span> <span> 2021-06-28</span></div><div><div><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://static001.geekbang.org/resource/image/ed/62/edeb791a2839ed39c667fbf510bb3162.jpg"></div><div><div class="sr-rd-content-center-small"><img class="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADEAAAABCAYAAAB35kaxAAAAAXNSR0IArs4c6QAAAChJREFUGFdjfPfu3X8GKBAUFASz3r9/DxNiQBbDxcamn1yzSLEDZi8A2agny86FR+IAAAAASUVORK5CYII="></div><div class="sr-rd-content-center-small"><img class="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAABCAYAAAA8TpVcAAAAAXNSR0IArs4c6QAAAB1JREFUGFdjfPfu3X9BQUEGEHj//j2YBgFCYtjkAcT9D8ti7hUOAAAAAElFTkSuQmCC"></div><div class="sr-rd-content-center-small"><img class="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD0AAAABCAYAAABt2qY/AAAAAXNSR0IArs4c6QAAACdJREFUGFdjfPfu3X9BQUEGEHj//j2YBgFkMULy2PQQK0YLewiZCQDhUS3LBhDf1QAAAABJRU5ErkJggg=="></div><div class="sr-rd-content-center-small"><img class="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAABCAYAAAA4u0VhAAAAAXNSR0IArs4c6QAAAB1JREFUGFdjfPfu3X9BQUEGEHj//j2YBgFkMULyAF6lD8tbqYWOAAAAAElFTkSuQmCC"></div></div></div><div><div><div></div></div><div><div><div><div><div><div>00:00</div></div><div></div></div></div><a href="javascript:;"> 1.0x <i><span></span></i></a></div><div><span>讲述：孔令飞</span><span>大小：1.06M</span><span> 时长：01:09</span></div></div><audio title="特别放送 | 给你一份Go项目中最常用的Makefile核心语法" src="https://res001.geekbang.org/media/audio/c3/8d/c3e5d99d3a5575f52148ed0104ecd48d/ld/ld.m3u8" __idm_id__="327698"></audio></div><div><div><div><div data-slate-editor="true" data-key="17810" autocorrect="off" spellcheck="false" data-gramm="false"><div data-slate-type="paragraph" data-slate-object="block" data-key="17811"><span data-slate-object="text" data-key="17812"><span data-slate-leaf="true" data-offset-key="17812:0" data-first-offset="true"><span data-slate-string="true">你好，我是孔令飞。今天，我们更新一期特别放送作为 “加餐”，希望日常催更的朋友们食用愉快。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="17813"><span data-slate-object="text" data-key="17814"><span data-slate-leaf="true" data-offset-key="17814:0" data-first-offset="true"><span data-slate-string="true">在第 </span></span></span><a data-slate-type="link" data-slate-object="inline" data-key="17815"><span data-slate-object="text" data-key="17816"><span data-slate-leaf="true" data-offset-key="17816:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">14 讲</span></span></span></span></a><span data-slate-object="text" data-key="17817"><span data-slate-leaf="true" data-offset-key="17817:0" data-first-offset="true"><span data-slate-string="true">  里</span></span></span><span data-slate-object="text" data-key="17818"><span data-slate-leaf="true" data-offset-key="17818:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">，</span></span></span></span><span data-slate-object="text" data-key="17819"><span data-slate-leaf="true" data-offset-key="17819:0" data-first-offset="true"><span data-slate-string="true">我强调了熟练掌握 Makefile 语法的重要性，还推荐你去学习陈皓老师编写的</span></span></span><a data-slate-type="link" data-slate-object="inline" data-key="17820"><span data-slate-object="text" data-key="17821"><span data-slate-leaf="true" data-offset-key="17821:0" data-first-offset="true"><span data-slate-string="true">《跟我一起写 Makefile》 (PDF 重制版)</span></span></span></a><span data-slate-object="text" data-key="17822"><span data-slate-leaf="true" data-offset-key="17822:0" data-first-offset="true"><span data-slate-string="true">。也许你已经点开了链接，看到那么多 Makefile 语法，是不是有点被 “劝退” 的感觉？</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="17823"><span data-slate-object="text" data-key="17824"><span data-slate-leaf="true" data-offset-key="17824:0" data-first-offset="true"><span data-slate-string="true">其实在我看来，虽然 Makefile 有很多语法，但不是所有的语法都需要你熟练掌握，有些语法在 Go 项目中是很少用到的。要编写一个高质量的 Makefile，首先应该掌握一些核心的、最常用的语法知识。这一讲我就来具体介绍下 Go 项目中常用的 Makefile 语法和规则，帮助你快速打好最重要的基础。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="17825"><span data-slate-object="text" data-key="17826"><span data-slate-leaf="true" data-offset-key="17826:0" data-first-offset="true"><span data-slate-string="true">Makefile 文件由三个部分组成，分别是 Makefile 规则、Makefile 语法和 Makefile 命令（这些命令可以是 Linux 命令，也可以是可执行的脚本文件）。在这一讲里，我会介绍下 Makefile 规则和 Makefile 语法里的一些核心语法知识。在介绍这些语法知识之前，我们先来看下如何使用 Makefile 脚本。</span></span></span></div><h2 data-slate-type="heading" data-slate-object="block" data-key="17827" id="sr-toc-1"><span data-slate-object="text" data-key="17828"><span data-slate-leaf="true" data-offset-key="17828:0" data-first-offset="true"><span data-slate-string="true">Makefile 的使用方法</span></span></span></h2><div data-slate-type="paragraph" data-slate-object="block" data-key="17829"><span data-slate-object="text" data-key="17830"><span data-slate-leaf="true" data-offset-key="17830:0" data-first-offset="true"><span data-slate-string="true">在实际使用过程中，我们一般是先编写一个 Makefile 文件，指定整个项目的编译规则，然后通过 Linux make 命令来解析该 Makefile 文件，实现项目编译、管理的自动化。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="17831"><span data-slate-object="text" data-key="17832"><span data-slate-leaf="true" data-offset-key="17832:0" data-first-offset="true"><span data-slate-string="true">默认情况下，make 命令会在当前目录下，按照 GNUmakefile、makefile、Makefile 文件的顺序查找 Makefile 文件，一旦找到，就开始读取这个文件并执行。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="17833"><span data-slate-object="text" data-key="17834"><span data-slate-leaf="true" data-offset-key="17834:0" data-first-offset="true"><span data-slate-string="true">大多数的 make 都支持 “makefile” 和 “Makefile” 这两种文件名，但</span></span></span><span data-slate-object="text" data-key="17835"><span data-slate-leaf="true" data-offset-key="17835:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">我建议使用 “Makefile”</span></span></span></span><span data-slate-object="text" data-key="17836"><span data-slate-leaf="true" data-offset-key="17836:0" data-first-offset="true"><span data-slate-string="true">。因为这个文件名第一个字符大写，会很明显，容易辨别。make 也支持 </span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="17837"><span data-slate-object="text" data-key="17838"><span data-slate-leaf="true" data-offset-key="17838:0" data-first-offset="true"><span data-slate-string="true">-f</span></span></span></span><span data-slate-object="text" data-key="17839"><span data-slate-leaf="true" data-offset-key="17839:0" data-first-offset="true"><span data-slate-string="true"> 和 </span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="17840"><span data-slate-object="text" data-key="17841"><span data-slate-leaf="true" data-offset-key="17841:0" data-first-offset="true"><span data-slate-string="true">--file</span></span></span></span><span data-slate-object="text" data-key="17842"><span data-slate-leaf="true" data-offset-key="17842:0" data-first-offset="true"><span data-slate-string="true"> 参数来指定其他文件名，比如 </span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="17843"><span data-slate-object="text" data-key="17844"><span data-slate-leaf="true" data-offset-key="17844:0" data-first-offset="true"><span data-slate-string="true">make -f golang.mk</span></span></span></span><span data-slate-object="text" data-key="17845"><span data-slate-leaf="true" data-offset-key="17845:0" data-first-offset="true"><span data-slate-string="true"> 或者 </span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="17846"><span data-slate-object="text" data-key="17847"><span data-slate-leaf="true" data-offset-key="17847:0" data-first-offset="true"><span data-slate-string="true">make --file golang.mk</span></span></span></span><span data-slate-object="text" data-key="17848"><span data-slate-leaf="true" data-offset-key="17848:0" data-first-offset="true"><span data-slate-string="true"> 。</span></span></span></div><h2 data-slate-type="heading" data-slate-object="block" data-key="17849" id="sr-toc-2"><span data-slate-object="text" data-key="17850"><span data-slate-leaf="true" data-offset-key="17850:0" data-first-offset="true"><span data-slate-string="true">Makefile 规则介绍</span></span></span></h2><div data-slate-type="paragraph" data-slate-object="block" data-key="17851"><span data-slate-object="text" data-key="17852"><span data-slate-leaf="true" data-offset-key="17852:0" data-first-offset="true"><span data-slate-string="true">学习 Makefile，最核心的就是学习 Makefile 的规则。规则是 Makefile 中的重要概念，它一般由目标、依赖和命令组成，用来指定源文件编译的先后顺序。Makefile 之所以受欢迎，核心原因就是 Makefile 规则，因为 Makefile 规则可以自动判断是否需要重新编译某个目标，从而确保目标仅在需要时编译。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="17853"><span data-slate-object="text" data-key="17854"><span data-slate-leaf="true" data-offset-key="17854:0" data-first-offset="true"><span data-slate-string="true">这一讲我们主要来看 Makefile 规则里的规则语法、伪目标和 order-only 依赖。</span></span></span></div><h3 data-slate-type="heading" data-slate-object="block" data-key="17855" id="sr-toc-3"><span data-slate-object="text" data-key="17856"><span data-slate-leaf="true" data-offset-key="17856:0" data-first-offset="true"><span data-slate-string="true">规则语法</span></span></span></h3><div data-slate-type="paragraph" data-slate-object="block" data-key="17857"><span data-slate-object="text" data-key="17858"><span data-slate-leaf="true" data-offset-key="17858:0" data-first-offset="true"><span data-slate-string="true">Makefile 的规则语法，主要包括 target、prerequisites 和 command，示例如下：</span></span></span></div><div data-code-language="bash" data-slate-type="pre" data-slate-object="block" data-key="17859"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div><div data-code-line-number="4"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="17860"><span data-slate-object="text" data-key="17861"><span data-slate-leaf="true" data-offset-key="17861:0" data-first-offset="true"><span data-slate-string="true">target ...: prerequisites ...</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="17862"><span data-slate-object="text" data-key="17863"><span data-slate-leaf="true" data-offset-key="17863:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="17864"><span data-slate-leaf="true" data-offset-key="17864:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">command</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="17865"><span data-slate-object="text" data-key="17866"><span data-slate-leaf="true" data-offset-key="17866:0" data-first-offset="true"><span data-slate-string="true">    ...</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="17867"><span data-slate-object="text" data-key="17868"><span data-slate-leaf="true" data-offset-key="17868:0" data-first-offset="true"><span data-slate-string="true">    ...</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="17869"><span data-slate-object="text" data-key="17870"><span data-slate-leaf="true" data-offset-key="17870:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">target，</span></span></span></span><span data-slate-object="text" data-key="17871"><span data-slate-leaf="true" data-offset-key="17871:0" data-first-offset="true"><span data-slate-string="true">可以是一个 object file（目标文件），也可以是一个执行文件，还可以是一个标签（label）。target 可使用通配符，当有多个目标时，目标之间用空格分隔。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="17872"><span data-slate-object="text" data-key="17873"><span data-slate-leaf="true" data-offset-key="17873:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">prerequisites，</span></span></span></span><span data-slate-object="text" data-key="17874"><span data-slate-leaf="true" data-offset-key="17874:0" data-first-offset="true"><span data-slate-string="true">代表生成该 target 所需要的依赖项。当有多个依赖项时，依赖项之间用空格分隔。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="17875"><span data-slate-object="text" data-key="17876"><span data-slate-leaf="true" data-offset-key="17876:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">command</span></span></span></span><span data-slate-object="text" data-key="17877"><span data-slate-leaf="true" data-offset-key="17877:0" data-first-offset="true"><span data-slate-string="true">，代表该 target 要执行的命令（可以是任意的 shell 命令）。</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="17878"><div data-slate-type="list-line" data-slate-object="block" data-key="17879"><span data-slate-object="text" data-key="17880"><span data-slate-leaf="true" data-offset-key="17880:0" data-first-offset="true"><span data-slate-string="true">在执行 command 之前，默认会先打印出该命令，然后再输出命令的结果；如果不想打印出命令，可在各个 command 前加上</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="17881"><span data-slate-object="text" data-key="17882"><span data-slate-leaf="true" data-offset-key="17882:0" data-first-offset="true"><span data-slate-string="true"> @</span></span></span></span><span data-slate-object="text" data-key="17883"><span data-slate-leaf="true" data-offset-key="17883:0" data-first-offset="true"><span data-slate-string="true">。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="17884"><span data-slate-object="text" data-key="17885"><span data-slate-leaf="true" data-offset-key="17885:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_e1fd24a7" data-attr-id="43430" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">command 可以为多条，也可以分行写，但每行都要以 tab 键开始。另外，如果后一条命令依赖前一条命令，则这两条命令需要写在同一行，并用分号进行分隔。</span></span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="17886"><span data-slate-object="text" data-key="17887"><span data-slate-leaf="true" data-offset-key="17887:0" data-first-offset="true"><span data-slate-string="true">如果要忽略命令的出错，需要在各个 command 之前加上减号</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="17888"><span data-slate-object="text" data-key="17889"><span data-slate-leaf="true" data-offset-key="17889:0" data-first-offset="true"><span data-slate-string="true"> -</span></span></span></span><span data-slate-object="text" data-key="17890"><span data-slate-leaf="true" data-offset-key="17890:0" data-first-offset="true"><span data-slate-string="true">。</span></span></span></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="17891"><span data-slate-object="text" data-key="17892"><span data-slate-leaf="true" data-offset-key="17892:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">只要 targets 不存在，或 prerequisites 中有一个以上的文件比 targets 文件新，那么 command 所定义的命令就会被执行，从而产生我们需要的文件，或执行我们期望的操作。</span></span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="17893"><span data-slate-object="text" data-key="17894"><span data-slate-leaf="true" data-offset-key="17894:0" data-first-offset="true"><span data-slate-string="true">我们直接通过一个例子来理解下 Makefile 的规则吧。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="17895"><span data-slate-object="text" data-key="17896"><span data-slate-leaf="true" data-offset-key="17896:0" data-first-offset="true"><span data-slate-string="true">第一步，先编写一个 hello.c 文件。</span></span></span></div><div data-code-language="cpp" data-slate-type="pre" data-slate-object="block" data-key="17897"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div><div data-code-line-number="4"></div><div data-code-line-number="5"></div><div data-code-line-number="6"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="17898"><span data-slate-object="text" data-key="17899"><span data-slate-leaf="true" data-offset-key="17899:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">#</span></span></span></span><span data-slate-object="text" data-key="17900"><span data-slate-leaf="true" data-offset-key="17900:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">include</span></span></span></span></span><span data-slate-object="text" data-key="17901"><span data-slate-leaf="true" data-offset-key="17901:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span><span data-slate-object="text" data-key="17902"><span data-slate-leaf="true" data-offset-key="17902:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&lt;stdio.h&gt;</span></span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="17903"><span data-slate-object="text" data-key="17904"><span data-slate-leaf="true" data-offset-key="17904:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">int</span></span></span></span></span><span data-slate-object="text" data-key="17905"><span data-slate-leaf="true" data-offset-key="17905:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span><span data-slate-object="text" data-key="17906"><span data-slate-leaf="true" data-offset-key="17906:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">main</span></span></span></span></span><span data-slate-object="text" data-key="17907"><span data-slate-leaf="true" data-offset-key="17907:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">()</span></span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="17908"><span data-slate-object="text" data-key="17909"><span data-slate-leaf="true" data-offset-key="17909:0" data-first-offset="true"><span data-slate-string="true">{</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="17910"><span data-slate-object="text" data-key="17911"><span data-slate-leaf="true" data-offset-key="17911:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="17912"><span data-slate-leaf="true" data-offset-key="17912:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">printf</span></span></span></span><span data-slate-object="text" data-key="17913"><span data-slate-leaf="true" data-offset-key="17913:0" data-first-offset="true"><span data-slate-string="true">(</span></span></span><span data-slate-object="text" data-key="17914"><span data-slate-leaf="true" data-offset-key="17914:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">"Hello World!\n"</span></span></span></span><span data-slate-object="text" data-key="17915"><span data-slate-leaf="true" data-offset-key="17915:0" data-first-offset="true"><span data-slate-string="true">);</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="17916"><span data-slate-object="text" data-key="17917"><span data-slate-leaf="true" data-offset-key="17917:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="17918"><span data-slate-leaf="true" data-offset-key="17918:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">return</span></span></span></span><span data-slate-object="text" data-key="17919"><span data-slate-leaf="true" data-offset-key="17919:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="17920"><span data-slate-leaf="true" data-offset-key="17920:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">0</span></span></span></span><span data-slate-object="text" data-key="17921"><span data-slate-leaf="true" data-offset-key="17921:0" data-first-offset="true"><span data-slate-string="true">;</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="17922"><span data-slate-object="text" data-key="17923"><span data-slate-leaf="true" data-offset-key="17923:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="17924"><span data-slate-object="text" data-key="17925"><span data-slate-leaf="true" data-offset-key="17925:0" data-first-offset="true"><span data-slate-string="true">第二步，在当前目录下，编写 Makefile 文件。</span></span></span></div><div data-code-language="bash" data-slate-type="pre" data-slate-object="block" data-key="17926"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div><div data-code-line-number="4"></div><div data-code-line-number="5"></div><div data-code-line-number="6"></div><div data-code-line-number="7"></div><div data-code-line-number="8"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="17927"><span data-slate-object="text" data-key="17928"><span data-slate-leaf="true" data-offset-key="17928:0" data-first-offset="true"><span data-slate-string="true">hello: hello.o</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="17929"><span data-slate-object="text" data-key="17930"><span data-slate-leaf="true" data-offset-key="17930:0" data-first-offset="true"><span data-slate-string="true">  gcc -o hello hello.o</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="17931"></div><div data-slate-type="code-line" data-slate-object="block" data-key="17932"><span data-slate-object="text" data-key="17933"><span data-slate-leaf="true" data-offset-key="17933:0" data-first-offset="true"><span data-slate-string="true">hello.o: hello.c</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="17934"><span data-slate-object="text" data-key="17935"><span data-slate-leaf="true" data-offset-key="17935:0" data-first-offset="true"><span data-slate-string="true">  gcc -c hello.c</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="17936"></div><div data-slate-type="code-line" data-slate-object="block" data-key="17937"><span data-slate-object="text" data-key="17938"><span data-slate-leaf="true" data-offset-key="17938:0" data-first-offset="true"><span data-slate-string="true">clean:</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="17939"><span data-slate-object="text" data-key="17940"><span data-slate-leaf="true" data-offset-key="17940:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="17941"><span data-slate-leaf="true" data-offset-key="17941:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">rm</span></span></span></span><span data-slate-object="text" data-key="17942"><span data-slate-leaf="true" data-offset-key="17942:0" data-first-offset="true"><span data-slate-string="true"> hello.o</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="17943"><span data-slate-object="text" data-key="17944"><span data-slate-leaf="true" data-offset-key="17944:0" data-first-offset="true"><span data-slate-string="true">第三步，执行 make，产生可执行文件。</span></span></span></div><div data-code-language="shell" data-slate-type="pre" data-slate-object="block" data-key="17945"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div><div data-code-line-number="4"></div><div data-code-line-number="5"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="17946"><span data-slate-object="text" data-key="17947"><span data-slate-leaf="true" data-offset-key="17947:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">$ </span></span></span></span><span data-slate-object="text" data-key="17948"><span data-slate-leaf="true" data-offset-key="17948:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">make</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="17949"><span data-slate-object="text" data-key="17950"><span data-slate-leaf="true" data-offset-key="17950:0" data-first-offset="true"><span data-slate-string="true">gcc -c hello.c</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="17951"><span data-slate-object="text" data-key="17952"><span data-slate-leaf="true" data-offset-key="17952:0" data-first-offset="true"><span data-slate-string="true">gcc -o hello hello.o</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="17953"><span data-slate-object="text" data-key="17954"><span data-slate-leaf="true" data-offset-key="17954:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">$ </span></span></span></span><span data-slate-object="text" data-key="17955"><span data-slate-leaf="true" data-offset-key="17955:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">ls</span></span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="17956"><span data-slate-object="text" data-key="17957"><span data-slate-leaf="true" data-offset-key="17957:0" data-first-offset="true"><span data-slate-string="true">hello  hello.c  hello.o  Makefile</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="17958"><span data-slate-object="text" data-key="17959"><span data-slate-leaf="true" data-offset-key="17959:0" data-first-offset="true"><span data-slate-string="true">上面的示例 Makefile 文件有两个 target，分别是 hello 和 hello.o，每个 target 都指定了构建 command。当执行 make 命令时，发现 hello、hello.o 文件不存在，就会执行 command 命令生成 target。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="17960"><span data-slate-object="text" data-key="17961"><span data-slate-leaf="true" data-offset-key="17961:0" data-first-offset="true"><span data-slate-string="true">第四步，不更新任何文件，再次执行 make。</span></span></span></div><div data-code-language="go" data-slate-type="pre" data-slate-object="block" data-key="17962"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="17963"><span data-slate-object="text" data-key="17964"><span data-slate-leaf="true" data-offset-key="17964:0" data-first-offset="true"><span data-slate-string="true">$ </span></span></span><span data-slate-object="text" data-key="17965"><span data-slate-leaf="true" data-offset-key="17965:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">make</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="17966"><span data-slate-object="text" data-key="17967"><span data-slate-leaf="true" data-offset-key="17967:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">make</span></span></span></span><span data-slate-object="text" data-key="17968"><span data-slate-leaf="true" data-offset-key="17968:0" data-first-offset="true"><span data-slate-string="true">: </span></span></span><span data-slate-object="text" data-key="17969"><span data-slate-leaf="true" data-offset-key="17969:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">'hello'</span></span></span></span><span data-slate-object="text" data-key="17970"><span data-slate-leaf="true" data-offset-key="17970:0" data-first-offset="true"><span data-slate-string="true"> is up to date.</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="17971"><span data-slate-object="text" data-key="17972"><span data-slate-leaf="true" data-offset-key="17972:0" data-first-offset="true"><span data-slate-string="true">当 target 存在，并且 prerequisites 都不比 target 新时，不会执行对应的 command。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="17973"><span data-slate-object="text" data-key="17974"><span data-slate-leaf="true" data-offset-key="17974:0" data-first-offset="true"><span data-slate-string="true">第五步，更新 hello.c，并再次执行 make。</span></span></span></div><div data-code-language="shell" data-slate-type="pre" data-slate-object="block" data-key="17975"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div><div data-code-line-number="4"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="17976"><span data-slate-object="text" data-key="17977"><span data-slate-leaf="true" data-offset-key="17977:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">$ </span></span></span></span><span data-slate-object="text" data-key="17978"><span data-slate-leaf="true" data-offset-key="17978:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">touch</span></span></span></span></span><span data-slate-object="text" data-key="17979"><span data-slate-leaf="true" data-offset-key="17979:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"> hello.c</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="17980"><span data-slate-object="text" data-key="17981"><span data-slate-leaf="true" data-offset-key="17981:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">$ </span></span></span></span><span data-slate-object="text" data-key="17982"><span data-slate-leaf="true" data-offset-key="17982:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">make</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="17983"><span data-slate-object="text" data-key="17984"><span data-slate-leaf="true" data-offset-key="17984:0" data-first-offset="true"><span data-slate-string="true">gcc -c hello.c</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="17985"><span data-slate-object="text" data-key="17986"><span data-slate-leaf="true" data-offset-key="17986:0" data-first-offset="true"><span data-slate-string="true">gcc -o hello hello.o</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="17987"><span data-slate-object="text" data-key="17988"><span data-slate-leaf="true" data-offset-key="17988:0" data-first-offset="true"><span data-slate-string="true">当 target 存在，但 prerequisites 比 target 新时，会重新执行对应的 command。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="17989"><span data-slate-object="text" data-key="17990"><span data-slate-leaf="true" data-offset-key="17990:0" data-first-offset="true"><span data-slate-string="true">第六步，清理编译中间文件。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="17991"><span data-slate-object="text" data-key="17992"><span data-slate-leaf="true" data-offset-key="17992:0" data-first-offset="true"><span data-slate-string="true">Makefile 一般都会有一个 clean 伪目标，用来清理编译中间产物，或者对源码目录做一些定制化的清理：</span></span></span></div><div data-code-language="shell" data-slate-type="pre" data-slate-object="block" data-key="17993"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="17994"><span data-slate-object="text" data-key="17995"><span data-slate-leaf="true" data-offset-key="17995:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">$ </span></span></span></span><span data-slate-object="text" data-key="17996"><span data-slate-leaf="true" data-offset-key="17996:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">make clean</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="17997"><span data-slate-object="text" data-key="17998"><span data-slate-leaf="true" data-offset-key="17998:0" data-first-offset="true"><span data-slate-string="true">rm hello.o</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="17999"><span data-slate-object="text" data-key="18000"><span data-slate-leaf="true" data-offset-key="18000:0" data-first-offset="true"><span data-slate-string="true">我们可以在规则中使用通配符，make 支持三个通配符：*，? 和～，例如：</span></span></span></div><div data-code-language="bash" data-slate-type="pre" data-slate-object="block" data-key="18001"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18002"><span data-slate-object="text" data-key="18003"><span data-slate-leaf="true" data-offset-key="18003:0" data-first-offset="true"><span data-slate-string="true">objects = *.o</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18004"><span data-slate-object="text" data-key="18005"><span data-slate-leaf="true" data-offset-key="18005:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">print</span></span></span></span><span data-slate-object="text" data-key="18006"><span data-slate-leaf="true" data-offset-key="18006:0" data-first-offset="true"><span data-slate-string="true">: *.c</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18007"><span data-slate-object="text" data-key="18008"><span data-slate-leaf="true" data-offset-key="18008:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="18009"><span data-slate-leaf="true" data-offset-key="18009:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">rm</span></span></span></span><span data-slate-object="text" data-key="18010"><span data-slate-leaf="true" data-offset-key="18010:0" data-first-offset="true"><span data-slate-string="true"> *.c</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><h3 data-slate-type="heading" data-slate-object="block" data-key="18011" id="sr-toc-4"><span data-slate-object="text" data-key="18012"><span data-slate-leaf="true" data-offset-key="18012:0" data-first-offset="true"><span data-slate-string="true">伪目标</span></span></span></h3><div data-slate-type="paragraph" data-slate-object="block" data-key="18013"><span data-slate-object="text" data-key="18014"><span data-slate-leaf="true" data-offset-key="18014:0" data-first-offset="true"><span data-slate-string="true">接下来我们介绍下 Makefile 中的伪目标。Makefile 的管理能力基本上都是通过伪目标来实现的。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18015"><span data-slate-object="text" data-key="18016"><span data-slate-leaf="true" data-offset-key="18016:0" data-first-offset="true"><span data-slate-string="true">在上面的 Makefile 示例中，我们定义了一个 clean 目标，这其实是一个伪目标，也就是说我们不会为该目标生成任何文件。因为伪目标不是文件，make 无法生成它的依赖关系，也无法决定是否要执行它。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18017"><span data-slate-object="text" data-key="18018"><span data-slate-leaf="true" data-offset-key="18018:0" data-first-offset="true"><span data-slate-string="true">通常情况下，我们需要显式地标识这个目标为伪目标。在 Makefile 中可以使用</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18019"><span data-slate-object="text" data-key="18020"><span data-slate-leaf="true" data-offset-key="18020:0" data-first-offset="true"><span data-slate-string="true">.PHONY</span></span></span></span><span data-slate-object="text" data-key="18021"><span data-slate-leaf="true" data-offset-key="18021:0" data-first-offset="true"><span data-slate-string="true"> 来标识一个目标为伪目标：</span></span></span></div><div data-code-language="bash" data-slate-type="pre" data-slate-object="block" data-key="18022"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18023"><span data-slate-object="text" data-key="18024"><span data-slate-leaf="true" data-offset-key="18024:0" data-first-offset="true"><span data-slate-string="true">.PHONY: clean</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18025"><span data-slate-object="text" data-key="18026"><span data-slate-leaf="true" data-offset-key="18026:0" data-first-offset="true"><span data-slate-string="true">clean:</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18027"><span data-slate-object="text" data-key="18028"><span data-slate-leaf="true" data-offset-key="18028:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="18029"><span data-slate-leaf="true" data-offset-key="18029:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">rm</span></span></span></span><span data-slate-object="text" data-key="18030"><span data-slate-leaf="true" data-offset-key="18030:0" data-first-offset="true"><span data-slate-string="true"> hello.o</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18031"><span data-slate-object="text" data-key="18032"><span data-slate-leaf="true" data-offset-key="18032:0" data-first-offset="true"><span data-slate-string="true">伪目标可以有依赖文件，也可以作为 “默认目标”，例如：</span></span></span></div><div data-code-language="python" data-slate-type="pre" data-slate-object="block" data-key="18033"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18034"><span data-slate-object="text" data-key="18035"><span data-slate-leaf="true" data-offset-key="18035:0" data-first-offset="true"><span data-slate-string="true">.PHONY: </span></span></span><span data-slate-object="text" data-key="18036"><span data-slate-leaf="true" data-offset-key="18036:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">all</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18037"><span data-slate-object="text" data-key="18038"><span data-slate-leaf="true" data-offset-key="18038:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">all</span></span></span></span><span data-slate-object="text" data-key="18039"><span data-slate-leaf="true" data-offset-key="18039:0" data-first-offset="true"><span data-slate-string="true">: lint test build</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18040"><span data-slate-object="text" data-key="18041"><span data-slate-leaf="true" data-offset-key="18041:0" data-first-offset="true"><span data-slate-object="annotation" data-annotation-key="gkann_e0dd4cca" data-attr-id="25179" data-attr-name="public" data-annotation-type="public"><span data-slate-string="true">因为伪目标总是会被执行，所以其依赖总是会被决议。</span></span></span><span data-slate-leaf="true" data-offset-key="18041:1"><span data-slate-string="true">通过这种方式，可以达到</span></span></span><span data-slate-object="text" data-key="18042"><span data-slate-leaf="true" data-offset-key="18042:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">同时执行所有依赖项</span></span></span></span><span data-slate-object="text" data-key="18043"><span data-slate-leaf="true" data-offset-key="18043:0" data-first-offset="true"><span data-slate-string="true">的目的。</span></span></span></div><h3 data-slate-type="heading" data-slate-object="block" data-key="18044" id="sr-toc-5"><span data-slate-object="text" data-key="18045"><span data-slate-leaf="true" data-offset-key="18045:0" data-first-offset="true"><span data-slate-string="true">order-only 依赖</span></span></span></h3><div data-slate-type="paragraph" data-slate-object="block" data-key="18046"><span data-slate-object="text" data-key="18047"><span data-slate-leaf="true" data-offset-key="18047:0" data-first-offset="true"><span data-slate-string="true">在上面介绍的规则中，只要 prerequisites 中有任何文件发生改变，就会重新构造 target。但是有时候，我们希望</span></span></span><span data-slate-object="text" data-key="18048"><span data-slate-leaf="true" data-offset-key="18048:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">只有当 prerequisites 中的部分文件改变时，才重新构造 target。</span></span></span></span><span data-slate-object="text" data-key="18049"><span data-slate-leaf="true" data-offset-key="18049:0" data-first-offset="true"><span data-slate-string="true">这时，你可以通过 order-only prerequisites 实现。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18050"><span data-slate-object="text" data-key="18051"><span data-slate-leaf="true" data-offset-key="18051:0" data-first-offset="true"><span data-slate-string="true">order-only prerequisites 的形式如下：</span></span></span></div><div data-code-language="sql" data-slate-type="pre" data-slate-object="block" data-key="18052"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div><div data-code-line-number="4"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18053"><span data-slate-object="text" data-key="18054"><span data-slate-leaf="true" data-offset-key="18054:0" data-first-offset="true"><span data-slate-string="true">targets : normal</span></span></span><span data-slate-object="text" data-key="18055"><span data-slate-leaf="true" data-offset-key="18055:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">-</span></span></span></span><span data-slate-object="text" data-key="18056"><span data-slate-leaf="true" data-offset-key="18056:0" data-first-offset="true"><span data-slate-string="true">prerequisites </span></span></span><span data-slate-object="text" data-key="18057"><span data-slate-leaf="true" data-offset-key="18057:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">|</span></span></span></span><span data-slate-object="text" data-key="18058"><span data-slate-leaf="true" data-offset-key="18058:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="18059"><span data-slate-leaf="true" data-offset-key="18059:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">order</span></span></span></span><span data-slate-object="text" data-key="18060"><span data-slate-leaf="true" data-offset-key="18060:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">-</span></span></span></span><span data-slate-object="text" data-key="18061"><span data-slate-leaf="true" data-offset-key="18061:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">only</span></span></span></span><span data-slate-object="text" data-key="18062"><span data-slate-leaf="true" data-offset-key="18062:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">-</span></span></span></span><span data-slate-object="text" data-key="18063"><span data-slate-leaf="true" data-offset-key="18063:0" data-first-offset="true"><span data-slate-string="true">prerequisites</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18064"><span data-slate-object="text" data-key="18065"><span data-slate-leaf="true" data-offset-key="18065:0" data-first-offset="true"><span data-slate-string="true">    command</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18066"><span data-slate-object="text" data-key="18067"><span data-slate-leaf="true" data-offset-key="18067:0" data-first-offset="true"><span data-slate-string="true">    ...</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18068"><span data-slate-object="text" data-key="18069"><span data-slate-leaf="true" data-offset-key="18069:0" data-first-offset="true"><span data-slate-string="true">    ...</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18070"><span data-slate-object="text" data-key="18071"><span data-slate-leaf="true" data-offset-key="18071:0" data-first-offset="true"><span data-slate-string="true">在上面的规则中，只有第一次构造 targets 时，才会使用 order-only-prerequisites。后面即使 order-only-prerequisites 发生改变，也不会重新构造 targets。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18072"><span data-slate-object="text" data-key="18073"><span data-slate-leaf="true" data-offset-key="18073:0" data-first-offset="true"><span data-slate-string="true">只有 normal-prerequisites 中的文件发生改变时，才会重新构造 targets。这里，符号 “|” 后面的 prerequisites 就是 order-only-prerequisites。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18074"><span data-slate-object="text" data-key="18075"><span data-slate-leaf="true" data-offset-key="18075:0" data-first-offset="true"><span data-slate-string="true">到这里，我们就介绍了 Makefile 的规则。接下来，我们再来看下 Makefile 中的一些核心语法知识。</span></span></span></div><h2 data-slate-type="heading" data-slate-object="block" data-key="18076" id="sr-toc-6"><span data-slate-object="text" data-key="18077"><span data-slate-leaf="true" data-offset-key="18077:0" data-first-offset="true"><span data-slate-string="true">Makefile 语法概览</span></span></span></h2><div data-slate-type="paragraph" data-slate-object="block" data-key="18078"><span data-slate-object="text" data-key="18079"><span data-slate-leaf="true" data-offset-key="18079:0" data-first-offset="true"><span data-slate-string="true">因为 Makefile 的语法比较多，这一讲只介绍 Makefile 的核心语法，以及 IAM 项目的 Makefile 用到的语法，包括命令、变量、条件语句和函数。因为 Makefile 没有太多复杂的语法，你掌握了这些知识点之后，再在实践中多加运用，融会贯通，就可以写出非常复杂、功能强大的 Makefile 文件了。</span></span></span></div><h3 data-slate-type="heading" data-slate-object="block" data-key="18080" id="sr-toc-7"><span data-slate-object="text" data-key="18081"><span data-slate-leaf="true" data-offset-key="18081:0" data-first-offset="true"><span data-slate-string="true">命令</span></span></span></h3><div data-slate-type="paragraph" data-slate-object="block" data-key="18082"><span data-slate-object="text" data-key="18083"><span data-slate-leaf="true" data-offset-key="18083:0" data-first-offset="true"><span data-slate-string="true">Makefile 支持 Linux 命令，调用方式跟在 Linux 系统下调用命令的方式基本一致。默认情况下，make 会把正在执行的命令输出到当前屏幕上。但我们可以通过在命令前加</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18084"><span data-slate-object="text" data-key="18085"><span data-slate-leaf="true" data-offset-key="18085:0" data-first-offset="true"><span data-slate-string="true"> @</span></span></span></span><span data-slate-object="text" data-key="18086"><span data-slate-leaf="true" data-offset-key="18086:0" data-first-offset="true"><span data-slate-string="true">符号的方式，禁止 make 输出当前正在执行的命令。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18087"><span data-slate-object="text" data-key="18088"><span data-slate-leaf="true" data-offset-key="18088:0" data-first-offset="true"><span data-slate-string="true">我们看一个例子。现在有这么一个 Makefile：</span></span></span></div><div data-code-language="bash" data-slate-type="pre" data-slate-object="block" data-key="18089"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18090"><span data-slate-object="text" data-key="18091"><span data-slate-leaf="true" data-offset-key="18091:0" data-first-offset="true"><span data-slate-string="true">.PHONY: </span></span></span><span data-slate-object="text" data-key="18092"><span data-slate-leaf="true" data-offset-key="18092:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">test</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18093"><span data-slate-object="text" data-key="18094"><span data-slate-leaf="true" data-offset-key="18094:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">test</span></span></span></span><span data-slate-object="text" data-key="18095"><span data-slate-leaf="true" data-offset-key="18095:0" data-first-offset="true"><span data-slate-string="true">:</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18096"><span data-slate-object="text" data-key="18097"><span data-slate-leaf="true" data-offset-key="18097:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="18098"><span data-slate-leaf="true" data-offset-key="18098:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">echo</span></span></span></span><span data-slate-object="text" data-key="18099"><span data-slate-leaf="true" data-offset-key="18099:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="18100"><span data-slate-leaf="true" data-offset-key="18100:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">"hello world"</span></span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18101"><span data-slate-object="text" data-key="18102"><span data-slate-leaf="true" data-offset-key="18102:0" data-first-offset="true"><span data-slate-string="true">执行 make 命令：</span></span></span></div><div data-code-language="bash" data-slate-type="pre" data-slate-object="block" data-key="18103"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18104"><span data-slate-object="text" data-key="18105"><span data-slate-leaf="true" data-offset-key="18105:0" data-first-offset="true"><span data-slate-string="true">$ make </span></span></span><span data-slate-object="text" data-key="18106"><span data-slate-leaf="true" data-offset-key="18106:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">test</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18107"><span data-slate-object="text" data-key="18108"><span data-slate-leaf="true" data-offset-key="18108:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">echo</span></span></span></span><span data-slate-object="text" data-key="18109"><span data-slate-leaf="true" data-offset-key="18109:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="18110"><span data-slate-leaf="true" data-offset-key="18110:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">"hello world"</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18111"><span data-slate-object="text" data-key="18112"><span data-slate-leaf="true" data-offset-key="18112:0" data-first-offset="true"><span data-slate-string="true">hello world</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18113"><span data-slate-object="text" data-key="18114"><span data-slate-leaf="true" data-offset-key="18114:0" data-first-offset="true"><span data-slate-string="true">可以看到，make 输出了执行的命令。很多时候，我们不需要这样的提示，因为我们更想看的是命令产生的日志，而不是执行的命令。这时就可以在命令行前加</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18115"><span data-slate-object="text" data-key="18116"><span data-slate-leaf="true" data-offset-key="18116:0" data-first-offset="true"><span data-slate-string="true"> @</span></span></span></span><span data-slate-object="text" data-key="18117"><span data-slate-leaf="true" data-offset-key="18117:0" data-first-offset="true"><span data-slate-string="true">，禁止 make 输出所执行的命令：</span></span></span></div><div data-code-language="bash" data-slate-type="pre" data-slate-object="block" data-key="18118"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18119"><span data-slate-object="text" data-key="18120"><span data-slate-leaf="true" data-offset-key="18120:0" data-first-offset="true"><span data-slate-string="true">.PHONY: </span></span></span><span data-slate-object="text" data-key="18121"><span data-slate-leaf="true" data-offset-key="18121:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">test</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18122"><span data-slate-object="text" data-key="18123"><span data-slate-leaf="true" data-offset-key="18123:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">test</span></span></span></span><span data-slate-object="text" data-key="18124"><span data-slate-leaf="true" data-offset-key="18124:0" data-first-offset="true"><span data-slate-string="true">:</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18125"><span data-slate-object="text" data-key="18126"><span data-slate-leaf="true" data-offset-key="18126:0" data-first-offset="true"><span data-slate-string="true">    @</span></span></span><span data-slate-object="text" data-key="18127"><span data-slate-leaf="true" data-offset-key="18127:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">echo</span></span></span></span><span data-slate-object="text" data-key="18128"><span data-slate-leaf="true" data-offset-key="18128:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="18129"><span data-slate-leaf="true" data-offset-key="18129:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">"hello world"</span></span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18130"><span data-slate-object="text" data-key="18131"><span data-slate-leaf="true" data-offset-key="18131:0" data-first-offset="true"><span data-slate-string="true">再次执行 make 命令：</span></span></span></div><div data-code-language="shell" data-slate-type="pre" data-slate-object="block" data-key="18132"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18133"><span data-slate-object="text" data-key="18134"><span data-slate-leaf="true" data-offset-key="18134:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">$ </span></span></span></span><span data-slate-object="text" data-key="18135"><span data-slate-leaf="true" data-offset-key="18135:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">make </span></span></span></span><span data-slate-object="text" data-key="18136"><span data-slate-leaf="true" data-offset-key="18136:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">test</span></span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18137"><span data-slate-object="text" data-key="18138"><span data-slate-leaf="true" data-offset-key="18138:0" data-first-offset="true"><span data-slate-string="true">hello world</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18139"><span data-slate-object="text" data-key="18140"><span data-slate-leaf="true" data-offset-key="18140:0" data-first-offset="true"><span data-slate-string="true">可以看到，make 只是执行了命令，而没有打印命令本身。这样 make 输出就清晰了很多。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18141"><span data-slate-object="text" data-key="18142"><span data-slate-leaf="true" data-offset-key="18142:0" data-first-offset="true"><span data-slate-string="true">这里，</span></span></span><span data-slate-object="text" data-key="18143"><span data-slate-leaf="true" data-offset-key="18143:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">我建议在命令前都加</span></span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18144"><span data-slate-object="text" data-key="18145"><span data-slate-leaf="true" data-offset-key="18145:0" data-first-offset="true"><span data-slate-string="true"> @</span></span></span></span><span data-slate-object="text" data-key="18146"><span data-slate-leaf="true" data-offset-key="18146:0" data-first-offset="true"><span data-slate-string="true">符号，禁止打印命令本身，以保证你的 Makefile 输出易于阅读的、有用的信息。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18147"><span data-slate-object="text" data-key="18148"><span data-slate-leaf="true" data-offset-key="18148:0" data-first-offset="true"><span data-slate-string="true">默认情况下，每条命令执行完 make 就会检查其返回码。如果返回成功（返回码为 0），make 就执行下一条指令；如果返回失败（返回码非 0），make 就会终止当前命令。很多时候，命令出错（比如删除了一个不存在的文件）时，我们并不想终止，这时就可以在命令行前加 </span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18149"><span data-slate-object="text" data-key="18150"><span data-slate-leaf="true" data-offset-key="18150:0" data-first-offset="true"><span data-slate-string="true">-</span></span></span></span><span data-slate-object="text" data-key="18151"><span data-slate-leaf="true" data-offset-key="18151:0" data-first-offset="true"><span data-slate-string="true"> 符号，来让 make 忽略命令的出错，以继续执行下一条命令，比如：</span></span></span></div><div data-code-language="bash" data-slate-type="pre" data-slate-object="block" data-key="18152"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18153"><span data-slate-object="text" data-key="18154"><span data-slate-leaf="true" data-offset-key="18154:0" data-first-offset="true"><span data-slate-string="true">clean:</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18155"><span data-slate-object="text" data-key="18156"><span data-slate-leaf="true" data-offset-key="18156:0" data-first-offset="true"><span data-slate-string="true">    -</span></span></span><span data-slate-object="text" data-key="18157"><span data-slate-leaf="true" data-offset-key="18157:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">rm</span></span></span></span><span data-slate-object="text" data-key="18158"><span data-slate-leaf="true" data-offset-key="18158:0" data-first-offset="true"><span data-slate-string="true"> hello.o</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><h3 data-slate-type="heading" data-slate-object="block" data-key="18159" id="sr-toc-8"><span data-slate-object="text" data-key="18160"><span data-slate-leaf="true" data-offset-key="18160:0" data-first-offset="true"><span data-slate-string="true">变量</span></span></span></h3><div data-slate-type="paragraph" data-slate-object="block" data-key="18161"><span data-slate-object="text" data-key="18162"><span data-slate-leaf="true" data-offset-key="18162:0" data-first-offset="true"><span data-slate-string="true">变量，可能是 Makefile 中使用最频繁的语法了，Makefile 支持变量赋值、多行变量和环境变量。另外，Makefile 还内置了一些特殊变量和自动化变量。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18163"><span data-slate-object="text" data-key="18164"><span data-slate-leaf="true" data-offset-key="18164:0" data-first-offset="true"><span data-slate-string="true">我们先来看下最基本的</span></span></span><span data-slate-object="text" data-key="18165"><span data-slate-leaf="true" data-offset-key="18165:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">变量赋值</span></span></span></span><span data-slate-object="text" data-key="18166"><span data-slate-leaf="true" data-offset-key="18166:0" data-first-offset="true"><span data-slate-string="true">功能。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18167"><span data-slate-object="text" data-key="18168"><span data-slate-leaf="true" data-offset-key="18168:0" data-first-offset="true"><span data-slate-string="true">Makefile 也可以像其他语言一样支持变量。在使用变量时，会像 shell 变量一样原地展开，然后再执行替换后的内容。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18169"><span data-slate-object="text" data-key="18170"><span data-slate-leaf="true" data-offset-key="18170:0" data-first-offset="true"><span data-slate-string="true">Makefile 可以通过变量声明来声明一个变量，变量在声明时需要赋予一个初值，比如</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18171"><span data-slate-object="text" data-key="18172"><span data-slate-leaf="true" data-offset-key="18172:0" data-first-offset="true"><span data-slate-string="true"> ROOT_PACKAGE=github.com/marmotedu/iam</span></span></span></span><span data-slate-object="text" data-key="18173"><span data-slate-leaf="true" data-offset-key="18173:0" data-first-offset="true"><span data-slate-string="true">。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18174"><span data-slate-object="text" data-key="18175"><span data-slate-leaf="true" data-offset-key="18175:0" data-first-offset="true"><span data-slate-string="true">引用变量时可以通过</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18176"><span data-slate-object="text" data-key="18177"><span data-slate-leaf="true" data-offset-key="18177:0" data-first-offset="true"><span data-slate-string="true"> $()</span></span></span></span><span data-slate-object="text" data-key="18178"><span data-slate-leaf="true" data-offset-key="18178:0" data-first-offset="true"><span data-slate-string="true"> 或者</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18179"><span data-slate-object="text" data-key="18180"><span data-slate-leaf="true" data-offset-key="18180:0" data-first-offset="true"><span data-slate-string="true"> ${}</span></span></span></span><span data-slate-object="text" data-key="18181"><span data-slate-leaf="true" data-offset-key="18181:0" data-first-offset="true"><span data-slate-string="true"> 方式引用。我的建议是，用</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18182"><span data-slate-object="text" data-key="18183"><span data-slate-leaf="true" data-offset-key="18183:0" data-first-offset="true"><span data-slate-string="true"> $()</span></span></span></span><span data-slate-object="text" data-key="18184"><span data-slate-leaf="true" data-offset-key="18184:0" data-first-offset="true"><span data-slate-string="true"> 方式引用变量，例如</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18185"><span data-slate-object="text" data-key="18186"><span data-slate-leaf="true" data-offset-key="18186:0" data-first-offset="true"><span data-slate-string="true"> $(ROOT_PACKAGE)</span></span></span></span><span data-slate-object="text" data-key="18187"><span data-slate-leaf="true" data-offset-key="18187:0" data-first-offset="true"><span data-slate-string="true">，也建议整个 makefile 的变量引用方式保持一致。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18188"><span data-slate-object="text" data-key="18189"><span data-slate-leaf="true" data-offset-key="18189:0" data-first-offset="true"><span data-slate-string="true">变量会像 bash 变量一样，在使用它的地方展开。比如：</span></span></span></div><div data-code-language="javascript" data-slate-type="pre" data-slate-object="block" data-key="18190"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18191"><span data-slate-object="text" data-key="18192"><span data-slate-leaf="true" data-offset-key="18192:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">GO</span></span></span></span><span data-slate-object="text" data-key="18193"><span data-slate-leaf="true" data-offset-key="18193:0" data-first-offset="true"><span data-slate-string="true">=go</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18194"><span data-slate-object="text" data-key="18195"><span data-slate-leaf="true" data-offset-key="18195:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">build</span></span></span></span><span data-slate-object="text" data-key="18196"><span data-slate-leaf="true" data-offset-key="18196:0" data-first-offset="true"><span data-slate-string="true">:</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18197"><span data-slate-object="text" data-key="18198"><span data-slate-leaf="true" data-offset-key="18198:0" data-first-offset="true"><span data-slate-string="true">    $(</span></span></span><span data-slate-object="text" data-key="18199"><span data-slate-leaf="true" data-offset-key="18199:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">GO</span></span></span></span><span data-slate-object="text" data-key="18200"><span data-slate-leaf="true" data-offset-key="18200:0" data-first-offset="true"><span data-slate-string="true">) build -v .</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18201"><span data-slate-object="text" data-key="18202"><span data-slate-leaf="true" data-offset-key="18202:0" data-first-offset="true"><span data-slate-string="true">展开后为：</span></span></span></div><div data-code-language="go" data-slate-type="pre" data-slate-object="block" data-key="18203"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18204"><span data-slate-object="text" data-key="18205"><span data-slate-leaf="true" data-offset-key="18205:0" data-first-offset="true"><span data-slate-string="true">GO=</span></span></span><span data-slate-object="text" data-key="18206"><span data-slate-leaf="true" data-offset-key="18206:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">go</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18207"><span data-slate-object="text" data-key="18208"><span data-slate-leaf="true" data-offset-key="18208:0" data-first-offset="true"><span data-slate-string="true">build:</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18209"><span data-slate-object="text" data-key="18210"><span data-slate-leaf="true" data-offset-key="18210:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="18211"><span data-slate-leaf="true" data-offset-key="18211:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">go</span></span></span></span><span data-slate-object="text" data-key="18212"><span data-slate-leaf="true" data-offset-key="18212:0" data-first-offset="true"><span data-slate-string="true"> build -v .</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18213"><span data-slate-object="text" data-key="18214"><span data-slate-leaf="true" data-offset-key="18214:0" data-first-offset="true"><span data-slate-string="true">接下来，我给你介绍下 Makefile 中的 4 种变量赋值方法。</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="18215"><div data-slate-type="list-line" data-slate-object="block" data-key="18216"><div data-code-line-number="1"></div><div><span data-slate-type="code" data-slate-object="inline" data-key="18217"><span data-slate-object="text" data-key="18218"><span data-slate-leaf="true" data-offset-key="18218:0" data-first-offset="true"><span data-slate-string="true">=</span></span></span></span><span data-slate-object="text" data-key="18219"><span data-slate-leaf="true" data-offset-key="18219:0" data-first-offset="true"><span data-slate-string="true"> 最基本的赋值方法。</span></span></span></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18220"><span data-slate-object="text" data-key="18221"><span data-slate-leaf="true" data-offset-key="18221:0" data-first-offset="true"><span data-slate-string="true">例如：</span></span></span></div><div data-slate-type="pre" data-slate-object="block" data-key="18222"><div><span></span></div><div><div data-code-line-number="1"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18223"><span data-slate-object="text" data-key="18224"><span data-slate-leaf="true" data-offset-key="18224:0" data-first-offset="true"><span data-slate-string="true">BASE_IMAGE = alpine:3.10</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18225"><span data-slate-object="text" data-key="18226"><span data-slate-leaf="true" data-offset-key="18226:0" data-first-offset="true"><span data-slate-string="true">使用 </span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18227"><span data-slate-object="text" data-key="18228"><span data-slate-leaf="true" data-offset-key="18228:0" data-first-offset="true"><span data-slate-string="true">=</span></span></span></span><span data-slate-object="text" data-key="18229"><span data-slate-leaf="true" data-offset-key="18229:0" data-first-offset="true"><span data-slate-string="true"> 进行赋值时，要注意下面这样的情况：</span></span></span></div><div data-code-language="java" data-slate-type="pre" data-slate-object="block" data-key="18230"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18231"><span data-slate-object="text" data-key="18232"><span data-slate-leaf="true" data-offset-key="18232:0" data-first-offset="true"><span data-slate-string="true">A = </span></span></span><span data-slate-object="text" data-key="18233"><span data-slate-leaf="true" data-offset-key="18233:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">a</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18234"><span data-slate-object="text" data-key="18235"><span data-slate-leaf="true" data-offset-key="18235:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">B</span></span></span></span><span data-slate-object="text" data-key="18236"><span data-slate-leaf="true" data-offset-key="18236:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="18237"><span data-slate-leaf="true" data-offset-key="18237:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">=</span></span></span></span><span data-slate-object="text" data-key="18238"><span data-slate-leaf="true" data-offset-key="18238:0" data-first-offset="true"><span data-slate-string="true"> $(A) </span></span></span><span data-slate-object="text" data-key="18239"><span data-slate-leaf="true" data-offset-key="18239:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">b</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18240"><span data-slate-object="text" data-key="18241"><span data-slate-leaf="true" data-offset-key="18241:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">A</span></span></span></span><span data-slate-object="text" data-key="18242"><span data-slate-leaf="true" data-offset-key="18242:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="18243"><span data-slate-leaf="true" data-offset-key="18243:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">=</span></span></span></span><span data-slate-object="text" data-key="18244"><span data-slate-leaf="true" data-offset-key="18244:0" data-first-offset="true"><span data-slate-string="true"> c</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18245"><span data-slate-object="text" data-key="18246"><span data-slate-leaf="true" data-offset-key="18246:0" data-first-offset="true"><span data-slate-string="true">B 最后的值为 c b，而不是 a b。也就是说，在用变量给变量赋值时，右边变量的取值，取的是最终的变量值。</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="18247"><div data-slate-type="list-line" data-slate-object="block" data-key="18248"><div data-code-line-number="2"></div><div><span data-slate-type="code" data-slate-object="inline" data-key="18249"><span data-slate-object="text" data-key="18250"><span data-slate-leaf="true" data-offset-key="18250:0" data-first-offset="true"><span data-slate-string="true">:=</span></span></span></span><span data-slate-object="text" data-key="18251"><span data-slate-leaf="true" data-offset-key="18251:0" data-first-offset="true"><span data-slate-string="true"> 直接赋值，赋予当前位置的值。</span></span></span></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18252"><span data-slate-object="text" data-key="18253"><span data-slate-leaf="true" data-offset-key="18253:0" data-first-offset="true"><span data-slate-string="true">例如：</span></span></span></div><div data-code-language="javascript" data-slate-type="pre" data-slate-object="block" data-key="18254"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18255"><span data-slate-object="text" data-key="18256"><span data-slate-leaf="true" data-offset-key="18256:0" data-first-offset="true"><span data-slate-string="true">A = a</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18257"><span data-slate-object="text" data-key="18258"><span data-slate-leaf="true" data-offset-key="18258:0" data-first-offset="true"><span data-slate-string="true">B := $(A) b</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18259"><span data-slate-object="text" data-key="18260"><span data-slate-leaf="true" data-offset-key="18260:0" data-first-offset="true"><span data-slate-string="true">A = c</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18261"><span data-slate-object="text" data-key="18262"><span data-slate-leaf="true" data-offset-key="18262:0" data-first-offset="true"><span data-slate-string="true">B 最后的值为 a b。通过 </span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18263"><span data-slate-object="text" data-key="18264"><span data-slate-leaf="true" data-offset-key="18264:0" data-first-offset="true"><span data-slate-string="true">:=</span></span></span></span><span data-slate-object="text" data-key="18265"><span data-slate-leaf="true" data-offset-key="18265:0" data-first-offset="true"><span data-slate-string="true"> 的赋值方式，可以避免 </span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18266"><span data-slate-object="text" data-key="18267"><span data-slate-leaf="true" data-offset-key="18267:0" data-first-offset="true"><span data-slate-string="true">=</span></span></span></span><span data-slate-object="text" data-key="18268"><span data-slate-leaf="true" data-offset-key="18268:0" data-first-offset="true"><span data-slate-string="true"> 赋值带来的潜在的不一致。</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="18269"><div data-slate-type="list-line" data-slate-object="block" data-key="18270"><div data-code-line-number="3"></div><div><span data-slate-type="code" data-slate-object="inline" data-key="18271"><span data-slate-object="text" data-key="18272"><span data-slate-leaf="true" data-offset-key="18272:0" data-first-offset="true"><span data-slate-string="true">?=</span></span></span></span><span data-slate-object="text" data-key="18273"><span data-slate-leaf="true" data-offset-key="18273:0" data-first-offset="true"><span data-slate-string="true"> 表示如果该变量没有被赋值，则赋予等号后的值。</span></span></span></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18274"><span data-slate-object="text" data-key="18275"><span data-slate-leaf="true" data-offset-key="18275:0" data-first-offset="true"><span data-slate-string="true">例如：</span></span></span></div><div data-slate-type="pre" data-slate-object="block" data-key="18276"><div><span></span></div><div><div data-code-line-number="1"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18277"><span data-slate-object="text" data-key="18278"><span data-slate-leaf="true" data-offset-key="18278:0" data-first-offset="true"><span data-slate-string="true">PLATFORMS ?= linux_amd64 linux_arm64</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="list" data-slate-object="block" data-key="18279"><div data-slate-type="list-line" data-slate-object="block" data-key="18280"><div data-code-line-number="4"></div><div><span data-slate-type="code" data-slate-object="inline" data-key="18281"><span data-slate-object="text" data-key="18282"><span data-slate-leaf="true" data-offset-key="18282:0" data-first-offset="true"><span data-slate-string="true">+=</span></span></span></span><span data-slate-object="text" data-key="18283"><span data-slate-leaf="true" data-offset-key="18283:0" data-first-offset="true"><span data-slate-string="true"> 表示将等号后面的值添加到前面的变量上。</span></span></span></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18284"><span data-slate-object="text" data-key="18285"><span data-slate-leaf="true" data-offset-key="18285:0" data-first-offset="true"><span data-slate-string="true">例如：</span></span></span></div><div data-code-language="python" data-slate-type="pre" data-slate-object="block" data-key="18286"><div><span></span></div><div><div data-code-line-number="1"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18287"><span data-slate-object="text" data-key="18288"><span data-slate-leaf="true" data-offset-key="18288:0" data-first-offset="true"><span data-slate-string="true">MAKEFLAGS += --no-</span></span></span><span data-slate-object="text" data-key="18289"><span data-slate-leaf="true" data-offset-key="18289:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">print</span></span></span></span><span data-slate-object="text" data-key="18290"><span data-slate-leaf="true" data-offset-key="18290:0" data-first-offset="true"><span data-slate-string="true">-directory</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18291"><span data-slate-object="text" data-key="18292"><span data-slate-leaf="true" data-offset-key="18292:0" data-first-offset="true"><span data-slate-string="true">Makefile 还支持</span></span></span><span data-slate-object="text" data-key="18293"><span data-slate-leaf="true" data-offset-key="18293:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">多行变量</span></span></span></span><span data-slate-object="text" data-key="18294"><span data-slate-leaf="true" data-offset-key="18294:0" data-first-offset="true"><span data-slate-string="true">。可以通过 define 关键字设置多行变量，变量中允许换行。定义方式为：</span></span></span></div><div data-code-language="sql" data-slate-type="pre" data-slate-object="block" data-key="18295"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div><div data-code-line-number="4"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18296"><span data-slate-object="text" data-key="18297"><span data-slate-leaf="true" data-offset-key="18297:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">define</span></span></span></span><span data-slate-object="text" data-key="18298"><span data-slate-leaf="true" data-offset-key="18298:0" data-first-offset="true"><span data-slate-string="true"> 变量名</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18299"><span data-slate-object="text" data-key="18300"><span data-slate-leaf="true" data-offset-key="18300:0" data-first-offset="true"><span data-slate-string="true">变量内容</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18301"><span data-slate-object="text" data-key="18302"><span data-slate-leaf="true" data-offset-key="18302:0" data-first-offset="true"><span data-slate-string="true">...</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18303"><span data-slate-object="text" data-key="18304"><span data-slate-leaf="true" data-offset-key="18304:0" data-first-offset="true"><span data-slate-string="true">endef</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18305"><span data-slate-object="text" data-key="18306"><span data-slate-leaf="true" data-offset-key="18306:0" data-first-offset="true"><span data-slate-string="true">变量的内容可以包含函数、命令、文字或是其他变量。例如，我们可以定义一个 USAGE_OPTIONS 变量：</span></span></span></div><div data-code-language="sql" data-slate-type="pre" data-slate-object="block" data-key="18307"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div><div data-code-line-number="4"></div><div data-code-line-number="5"></div><div data-code-line-number="6"></div><div data-code-line-number="7"></div><div data-code-line-number="8"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18308"><span data-slate-object="text" data-key="18309"><span data-slate-leaf="true" data-offset-key="18309:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">define</span></span></span></span><span data-slate-object="text" data-key="18310"><span data-slate-leaf="true" data-offset-key="18310:0" data-first-offset="true"><span data-slate-string="true"> USAGE_OPTIONS</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18311"></div><div data-slate-type="code-line" data-slate-object="block" data-key="18312"><span data-slate-object="text" data-key="18313"><span data-slate-leaf="true" data-offset-key="18313:0" data-first-offset="true"><span data-slate-string="true">Options:</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18314"><span data-slate-object="text" data-key="18315"><span data-slate-leaf="true" data-offset-key="18315:0" data-first-offset="true"><span data-slate-string="true">  DEBUG        Whether </span></span></span><span data-slate-object="text" data-key="18316"><span data-slate-leaf="true" data-offset-key="18316:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">to</span></span></span></span><span data-slate-object="text" data-key="18317"><span data-slate-leaf="true" data-offset-key="18317:0" data-first-offset="true"><span data-slate-string="true"> generate debug symbols. </span></span></span><span data-slate-object="text" data-key="18318"><span data-slate-leaf="true" data-offset-key="18318:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">Default</span></span></span></span><span data-slate-object="text" data-key="18319"><span data-slate-leaf="true" data-offset-key="18319:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="18320"><span data-slate-leaf="true" data-offset-key="18320:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">is</span></span></span></span><span data-slate-object="text" data-key="18321"><span data-slate-leaf="true" data-offset-key="18321:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="18322"><span data-slate-leaf="true" data-offset-key="18322:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">0.</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18323"><span data-slate-object="text" data-key="18324"><span data-slate-leaf="true" data-offset-key="18324:0" data-first-offset="true"><span data-slate-string="true">  BINS         The binaries </span></span></span><span data-slate-object="text" data-key="18325"><span data-slate-leaf="true" data-offset-key="18325:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">to</span></span></span></span><span data-slate-object="text" data-key="18326"><span data-slate-leaf="true" data-offset-key="18326:0" data-first-offset="true"><span data-slate-string="true"> build. </span></span></span><span data-slate-object="text" data-key="18327"><span data-slate-leaf="true" data-offset-key="18327:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">Default</span></span></span></span><span data-slate-object="text" data-key="18328"><span data-slate-leaf="true" data-offset-key="18328:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="18329"><span data-slate-leaf="true" data-offset-key="18329:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">is</span></span></span></span><span data-slate-object="text" data-key="18330"><span data-slate-leaf="true" data-offset-key="18330:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="18331"><span data-slate-leaf="true" data-offset-key="18331:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">all</span></span></span></span><span data-slate-object="text" data-key="18332"><span data-slate-leaf="true" data-offset-key="18332:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="18333"><span data-slate-leaf="true" data-offset-key="18333:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">of</span></span></span></span><span data-slate-object="text" data-key="18334"><span data-slate-leaf="true" data-offset-key="18334:0" data-first-offset="true"><span data-slate-string="true"> cmd.</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18335"><span data-slate-object="text" data-key="18336"><span data-slate-leaf="true" data-offset-key="18336:0" data-first-offset="true"><span data-slate-string="true">  ...</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18337"><span data-slate-object="text" data-key="18338"><span data-slate-leaf="true" data-offset-key="18338:0" data-first-offset="true"><span data-slate-string="true">  V            </span></span></span><span data-slate-object="text" data-key="18339"><span data-slate-leaf="true" data-offset-key="18339:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">Set</span></span></span></span><span data-slate-object="text" data-key="18340"><span data-slate-leaf="true" data-offset-key="18340:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="18341"><span data-slate-leaf="true" data-offset-key="18341:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">to</span></span></span></span><span data-slate-object="text" data-key="18342"><span data-slate-leaf="true" data-offset-key="18342:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="18343"><span data-slate-leaf="true" data-offset-key="18343:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">1</span></span></span></span><span data-slate-object="text" data-key="18344"><span data-slate-leaf="true" data-offset-key="18344:0" data-first-offset="true"><span data-slate-string="true"> enable verbose build. </span></span></span><span data-slate-object="text" data-key="18345"><span data-slate-leaf="true" data-offset-key="18345:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">Default</span></span></span></span><span data-slate-object="text" data-key="18346"><span data-slate-leaf="true" data-offset-key="18346:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="18347"><span data-slate-leaf="true" data-offset-key="18347:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">is</span></span></span></span><span data-slate-object="text" data-key="18348"><span data-slate-leaf="true" data-offset-key="18348:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="18349"><span data-slate-leaf="true" data-offset-key="18349:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">0.</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18350"><span data-slate-object="text" data-key="18351"><span data-slate-leaf="true" data-offset-key="18351:0" data-first-offset="true"><span data-slate-string="true">endef</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18352"><span data-slate-object="text" data-key="18353"><span data-slate-leaf="true" data-offset-key="18353:0" data-first-offset="true"><span data-slate-string="true">Makefile 还支持</span></span></span><span data-slate-object="text" data-key="18354"><span data-slate-leaf="true" data-offset-key="18354:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">环境变量</span></span></span></span><span data-slate-object="text" data-key="18355"><span data-slate-leaf="true" data-offset-key="18355:0" data-first-offset="true"><span data-slate-string="true">。在 Makefile 中，有两种环境变量，分别是 Makefile 预定义的环境变量和自定义的环境变量。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18356"><span data-slate-object="text" data-key="18357"><span data-slate-leaf="true" data-offset-key="18357:0" data-first-offset="true"><span data-slate-string="true">其中，自定义的环境变量可以覆盖 Makefile 预定义的环境变量。默认情况下，Makefile 中定义的环境变量只在当前 Makefile 有效，如果想向下层传递（Makefile 中调用另一个 Makefile），需要使用 export 关键字来声明。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18358"><span data-slate-object="text" data-key="18359"><span data-slate-leaf="true" data-offset-key="18359:0" data-first-offset="true"><span data-slate-string="true">下面的例子声明了一个环境变量，并可以在下层 Makefile 中使用：</span></span></span></div><div data-code-language="javascript" data-slate-type="pre" data-slate-object="block" data-key="18360"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18361"><span data-slate-object="text" data-key="18362"><span data-slate-leaf="true" data-offset-key="18362:0" data-first-offset="true"><span data-slate-string="true">...</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18363"><span data-slate-object="text" data-key="18364"><span data-slate-leaf="true" data-offset-key="18364:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">export</span></span></span></span><span data-slate-object="text" data-key="18365"><span data-slate-leaf="true" data-offset-key="18365:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="18366"><span data-slate-leaf="true" data-offset-key="18366:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">USAGE_OPTIONS</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18367"><span data-slate-object="text" data-key="18368"><span data-slate-leaf="true" data-offset-key="18368:0" data-first-offset="true"><span data-slate-string="true">...</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18369"><span data-slate-object="text" data-key="18370"><span data-slate-leaf="true" data-offset-key="18370:0" data-first-offset="true"><span data-slate-string="true">此外，Makefile 还支持两种内置的变量：特殊变量和自动化变量。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18371"><span data-slate-object="text" data-key="18372"><span data-slate-leaf="true" data-offset-key="18372:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">特殊变量</span></span></span></span><span data-slate-object="text" data-key="18373"><span data-slate-leaf="true" data-offset-key="18373:0" data-first-offset="true"><span data-slate-string="true">是 make 提前定义好的，可以在 makefile 中直接引用。特殊变量列表如下：</span></span></span></div><div data-slate-type="image" data-slate-object="block" data-key="18374"><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://static001.geekbang.org/resource/image/c1/1d/c1cba21aaed2eb0117yyb0470byy641d.png?wh=1052x978"></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18375"><span data-slate-object="text" data-key="18376"><span data-slate-leaf="true" data-offset-key="18376:0" data-first-offset="true"><span data-slate-string="true">Makefile 还支持</span></span></span><span data-slate-object="text" data-key="18377"><span data-slate-leaf="true" data-offset-key="18377:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">自动化变量</span></span></span></span><span data-slate-object="text" data-key="18378"><span data-slate-leaf="true" data-offset-key="18378:0" data-first-offset="true"><span data-slate-string="true">。自动化变量可以提高我们编写 Makefile 的效率和质量。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18379"><span data-slate-object="text" data-key="18380"><span data-slate-leaf="true" data-offset-key="18380:0" data-first-offset="true"><span data-slate-string="true">在 Makefile 的模式规则中，目标和依赖文件都是一系列的文件，那么我们如何书写一个命令，来完成从不同的依赖文件生成相对应的目标呢？</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18381"><span data-slate-object="text" data-key="18382"><span data-slate-leaf="true" data-offset-key="18382:0" data-first-offset="true"><span data-slate-string="true">这时就可以用到自动化变量。所谓自动化变量，就是这种变量会把模式中所定义的一系列的文件自动地挨个取出，一直到所有符合模式的文件都取完为止。这种自动化变量只应出现在规则的命令中。Makefile 中支持的自动化变量见下表。</span></span></span></div><div data-slate-type="image" data-slate-object="block" data-key="18383"><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://static001.geekbang.org/resource/image/13/12/13ec33008eaff973c0dd854a795ff712.png?wh=1263x1303"></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18384"><span data-slate-object="text" data-key="18385"><span data-slate-leaf="true" data-offset-key="18385:0" data-first-offset="true"><span data-slate-string="true">上面这些自动化变量中，</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18386"><span data-slate-object="text" data-key="18387"><span data-slate-leaf="true" data-offset-key="18387:0" data-first-offset="true"><span data-slate-string="true">$*</span></span></span></span><span data-slate-object="text" data-key="18388"><span data-slate-leaf="true" data-offset-key="18388:0" data-first-offset="true"><span data-slate-string="true"> 是用得最多的。</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18389"><span data-slate-object="text" data-key="18390"><span data-slate-leaf="true" data-offset-key="18390:0" data-first-offset="true"><span data-slate-string="true">$*</span></span></span></span><span data-slate-object="text" data-key="18391"><span data-slate-leaf="true" data-offset-key="18391:0" data-first-offset="true"><span data-slate-string="true"> 对于构造有关联的文件名是比较有效的。如果目标中没有模式的定义，那么 </span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18392"><span data-slate-object="text" data-key="18393"><span data-slate-leaf="true" data-offset-key="18393:0" data-first-offset="true"><span data-slate-string="true">$*</span></span></span></span><span data-slate-object="text" data-key="18394"><span data-slate-leaf="true" data-offset-key="18394:0" data-first-offset="true"><span data-slate-string="true"> 也就不能被推导出。但是，如果目标文件的后缀是 make 所识别的，那么 </span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18395"><span data-slate-object="text" data-key="18396"><span data-slate-leaf="true" data-offset-key="18396:0" data-first-offset="true"><span data-slate-string="true">$*</span></span></span></span><span data-slate-object="text" data-key="18397"><span data-slate-leaf="true" data-offset-key="18397:0" data-first-offset="true"><span data-slate-string="true"> 就是除了后缀的那一部分。例如：如果目标是 foo.c ，因为. c 是 make 所能识别的后缀名，所以 </span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18398"><span data-slate-object="text" data-key="18399"><span data-slate-leaf="true" data-offset-key="18399:0" data-first-offset="true"><span data-slate-string="true">$*</span></span></span></span><span data-slate-object="text" data-key="18400"><span data-slate-leaf="true" data-offset-key="18400:0" data-first-offset="true"><span data-slate-string="true"> 的值就是 foo。</span></span></span></div><h3 data-slate-type="heading" data-slate-object="block" data-key="18401" id="sr-toc-9"><span data-slate-object="text" data-key="18402"><span data-slate-leaf="true" data-offset-key="18402:0" data-first-offset="true"><span data-slate-string="true">条件语句</span></span></span></h3><div data-slate-type="paragraph" data-slate-object="block" data-key="18403"><span data-slate-object="text" data-key="18404"><span data-slate-leaf="true" data-offset-key="18404:0" data-first-offset="true"><span data-slate-string="true">Makefile 也支持条件语句。这里先看一个示例。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18405"><span data-slate-object="text" data-key="18406"><span data-slate-leaf="true" data-offset-key="18406:0" data-first-offset="true"><span data-slate-string="true">下面的例子判断变量</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18407"><span data-slate-object="text" data-key="18408"><span data-slate-leaf="true" data-offset-key="18408:0" data-first-offset="true"><span data-slate-string="true"> ROOT_PACKAGE</span></span></span></span><span data-slate-object="text" data-key="18409"><span data-slate-leaf="true" data-offset-key="18409:0" data-first-offset="true"><span data-slate-string="true"> 是否为空，如果为空，则输出错误信息，不为空则打印变量值：</span></span></span></div><div data-code-language="javascript" data-slate-type="pre" data-slate-object="block" data-key="18410"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div><div data-code-line-number="4"></div><div data-code-line-number="5"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18411"><span data-slate-object="text" data-key="18412"><span data-slate-leaf="true" data-offset-key="18412:0" data-first-offset="true"><span data-slate-string="true">ifeq ($(</span></span></span><span data-slate-object="text" data-key="18413"><span data-slate-leaf="true" data-offset-key="18413:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">ROOT_PACKAGE</span></span></span></span><span data-slate-object="text" data-key="18414"><span data-slate-leaf="true" data-offset-key="18414:0" data-first-offset="true"><span data-slate-string="true">),)</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18415"><span data-slate-object="text" data-key="18416"><span data-slate-leaf="true" data-offset-key="18416:0" data-first-offset="true"><span data-slate-string="true">$(error the variable </span></span></span><span data-slate-object="text" data-key="18417"><span data-slate-leaf="true" data-offset-key="18417:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">ROOT_PACKAGE</span></span></span></span><span data-slate-object="text" data-key="18418"><span data-slate-leaf="true" data-offset-key="18418:0" data-first-offset="true"><span data-slate-string="true"> must be set prior to including golang.</span></span></span><span data-slate-object="text" data-key="18419"><span data-slate-leaf="true" data-offset-key="18419:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">mk</span></span></span></span><span data-slate-object="text" data-key="18420"><span data-slate-leaf="true" data-offset-key="18420:0" data-first-offset="true"><span data-slate-string="true">)</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18421"><span data-slate-object="text" data-key="18422"><span data-slate-leaf="true" data-offset-key="18422:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">else</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18423"><span data-slate-object="text" data-key="18424"><span data-slate-leaf="true" data-offset-key="18424:0" data-first-offset="true"><span data-slate-string="true">$(info the value </span></span></span><span data-slate-object="text" data-key="18425"><span data-slate-leaf="true" data-offset-key="18425:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">of</span></span></span></span><span data-slate-object="text" data-key="18426"><span data-slate-leaf="true" data-offset-key="18426:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="18427"><span data-slate-leaf="true" data-offset-key="18427:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">ROOT_PACKAGE</span></span></span></span><span data-slate-object="text" data-key="18428"><span data-slate-leaf="true" data-offset-key="18428:0" data-first-offset="true"><span data-slate-string="true"> is $(</span></span></span><span data-slate-object="text" data-key="18429"><span data-slate-leaf="true" data-offset-key="18429:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">ROOT_PACKAGE</span></span></span></span><span data-slate-object="text" data-key="18430"><span data-slate-leaf="true" data-offset-key="18430:0" data-first-offset="true"><span data-slate-string="true">))</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18431"><span data-slate-object="text" data-key="18432"><span data-slate-leaf="true" data-offset-key="18432:0" data-first-offset="true"><span data-slate-string="true">endif</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18433"><span data-slate-object="text" data-key="18434"><span data-slate-leaf="true" data-offset-key="18434:0" data-first-offset="true"><span data-slate-string="true">条件语句的语法为：</span></span></span></div><div data-code-language="cpp" data-slate-type="pre" data-slate-object="block" data-key="18435"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div><div data-code-line-number="4"></div><div data-code-line-number="5"></div><div data-code-line-number="6"></div><div data-code-line-number="7"></div><div data-code-line-number="8"></div><div data-code-line-number="9"></div><div data-code-line-number="10"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18436"><span data-slate-object="text" data-key="18437"><span data-slate-leaf="true" data-offset-key="18437:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"># </span></span></span></span><span data-slate-object="text" data-key="18438"><span data-slate-leaf="true" data-offset-key="18438:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span></span><span data-slate-object="text" data-key="18439"><span data-slate-leaf="true" data-offset-key="18439:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"> ...</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18440"><span data-slate-object="text" data-key="18441"><span data-slate-leaf="true" data-offset-key="18441:0" data-first-offset="true"><span data-slate-string="true">&lt;conditional-directive&gt;</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18442"><span data-slate-object="text" data-key="18443"><span data-slate-leaf="true" data-offset-key="18443:0" data-first-offset="true"><span data-slate-string="true">&lt;text-</span></span></span><span data-slate-object="text" data-key="18444"><span data-slate-leaf="true" data-offset-key="18444:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="18445"><span data-slate-leaf="true" data-offset-key="18445:0" data-first-offset="true"><span data-slate-string="true">-</span></span></span><span data-slate-object="text" data-key="18446"><span data-slate-leaf="true" data-offset-key="18446:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">true</span></span></span></span><span data-slate-object="text" data-key="18447"><span data-slate-leaf="true" data-offset-key="18447:0" data-first-offset="true"><span data-slate-string="true">&gt;</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18448"><span data-slate-object="text" data-key="18449"><span data-slate-leaf="true" data-offset-key="18449:0" data-first-offset="true"><span data-slate-string="true">endif</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18450"><span data-slate-object="text" data-key="18451"><span data-slate-leaf="true" data-offset-key="18451:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"># </span></span></span></span><span data-slate-object="text" data-key="18452"><span data-slate-leaf="true" data-offset-key="18452:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span></span><span data-slate-object="text" data-key="18453"><span data-slate-leaf="true" data-offset-key="18453:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"> ... </span></span></span></span><span data-slate-object="text" data-key="18454"><span data-slate-leaf="true" data-offset-key="18454:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">else</span></span></span></span></span><span data-slate-object="text" data-key="18455"><span data-slate-leaf="true" data-offset-key="18455:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true"> ...</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18456"><span data-slate-object="text" data-key="18457"><span data-slate-leaf="true" data-offset-key="18457:0" data-first-offset="true"><span data-slate-string="true">&lt;conditional-directive&gt;</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18458"><span data-slate-object="text" data-key="18459"><span data-slate-leaf="true" data-offset-key="18459:0" data-first-offset="true"><span data-slate-string="true">&lt;text-</span></span></span><span data-slate-object="text" data-key="18460"><span data-slate-leaf="true" data-offset-key="18460:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="18461"><span data-slate-leaf="true" data-offset-key="18461:0" data-first-offset="true"><span data-slate-string="true">-</span></span></span><span data-slate-object="text" data-key="18462"><span data-slate-leaf="true" data-offset-key="18462:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">true</span></span></span></span><span data-slate-object="text" data-key="18463"><span data-slate-leaf="true" data-offset-key="18463:0" data-first-offset="true"><span data-slate-string="true">&gt;</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18464"><span data-slate-object="text" data-key="18465"><span data-slate-leaf="true" data-offset-key="18465:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">else</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18466"><span data-slate-object="text" data-key="18467"><span data-slate-leaf="true" data-offset-key="18467:0" data-first-offset="true"><span data-slate-string="true">&lt;text-</span></span></span><span data-slate-object="text" data-key="18468"><span data-slate-leaf="true" data-offset-key="18468:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="18469"><span data-slate-leaf="true" data-offset-key="18469:0" data-first-offset="true"><span data-slate-string="true">-</span></span></span><span data-slate-object="text" data-key="18470"><span data-slate-leaf="true" data-offset-key="18470:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">false</span></span></span></span><span data-slate-object="text" data-key="18471"><span data-slate-leaf="true" data-offset-key="18471:0" data-first-offset="true"><span data-slate-string="true">&gt;</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18472"><span data-slate-object="text" data-key="18473"><span data-slate-leaf="true" data-offset-key="18473:0" data-first-offset="true"><span data-slate-string="true">endif</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18474"><span data-slate-object="text" data-key="18475"><span data-slate-leaf="true" data-offset-key="18475:0" data-first-offset="true"><span data-slate-string="true">例如，判断两个值是否相等：</span></span></span></div><div data-code-language="javascript" data-slate-type="pre" data-slate-object="block" data-key="18476"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div><div data-code-line-number="4"></div><div data-code-line-number="5"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18477"><span data-slate-object="text" data-key="18478"><span data-slate-leaf="true" data-offset-key="18478:0" data-first-offset="true"><span data-slate-string="true">ifeq 条件表达式</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18479"><span data-slate-object="text" data-key="18480"><span data-slate-leaf="true" data-offset-key="18480:0" data-first-offset="true"><span data-slate-string="true">...</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18481"><span data-slate-object="text" data-key="18482"><span data-slate-leaf="true" data-offset-key="18482:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">else</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18483"><span data-slate-object="text" data-key="18484"><span data-slate-leaf="true" data-offset-key="18484:0" data-first-offset="true"><span data-slate-string="true">...</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18485"><span data-slate-object="text" data-key="18486"><span data-slate-leaf="true" data-offset-key="18486:0" data-first-offset="true"><span data-slate-string="true">endif</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="list" data-slate-object="block" data-key="18487"><div data-slate-type="list-line" data-slate-object="block" data-key="18488"><span data-slate-object="text" data-key="18489"><span data-slate-leaf="true" data-offset-key="18489:0" data-first-offset="true"><span data-slate-string="true">ifeq 表示条件语句的开始，并指定一个条件表达式。表达式包含两个参数，参数之间用逗号分隔，并且表达式用圆括号括起来。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="18490"><span data-slate-object="text" data-key="18491"><span data-slate-leaf="true" data-offset-key="18491:0" data-first-offset="true"><span data-slate-string="true">else 表示条件表达式为假的情况。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="18492"><span data-slate-object="text" data-key="18493"><span data-slate-leaf="true" data-offset-key="18493:0" data-first-offset="true"><span data-slate-string="true">endif 表示一个条件语句的结束，任何一个条件表达式都应该以 endif 结束。</span></span></span></div><div data-slate-type="list-line" data-slate-object="block" data-key="18494"><span data-slate-object="text" data-key="18495"><span data-slate-leaf="true" data-offset-key="18495:0" data-first-offset="true"><span data-slate-string="true">表示条件关键字，有 4 个关键字：ifeq、ifneq、ifdef、ifndef。</span></span></span></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18496"><span data-slate-object="text" data-key="18497"><span data-slate-leaf="true" data-offset-key="18497:0" data-first-offset="true"><span data-slate-string="true">为了加深你的理解，我们分别来看下这 4 个关键字的例子。</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="18498"><div data-slate-type="list-line" data-slate-object="block" data-key="18499"><div data-code-line-number="1"></div><div><span data-slate-object="text" data-key="18500"><span data-slate-leaf="true" data-offset-key="18500:0" data-first-offset="true"><span data-slate-string="true">ifeq：条件判断，判断是否相等。</span></span></span></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18501"><span data-slate-object="text" data-key="18502"><span data-slate-leaf="true" data-offset-key="18502:0" data-first-offset="true"><span data-slate-string="true">例如：</span></span></span></div><div data-code-language="xml" data-slate-type="pre" data-slate-object="block" data-key="18503"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div><div data-code-line-number="4"></div><div data-code-line-number="5"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18504"><span data-slate-object="text" data-key="18505"><span data-slate-leaf="true" data-offset-key="18505:0" data-first-offset="true"><span data-slate-string="true">ifeq (</span></span></span><span data-slate-object="text" data-key="18506"><span data-slate-leaf="true" data-offset-key="18506:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&lt;</span></span></span></span><span data-slate-object="text" data-key="18507"><span data-slate-leaf="true" data-offset-key="18507:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">arg1</span></span></span></span></span><span data-slate-object="text" data-key="18508"><span data-slate-leaf="true" data-offset-key="18508:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&gt;</span></span></span></span><span data-slate-object="text" data-key="18509"><span data-slate-leaf="true" data-offset-key="18509:0" data-first-offset="true"><span data-slate-string="true">, </span></span></span><span data-slate-object="text" data-key="18510"><span data-slate-leaf="true" data-offset-key="18510:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&lt;</span></span></span></span><span data-slate-object="text" data-key="18511"><span data-slate-leaf="true" data-offset-key="18511:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">arg2</span></span></span></span></span><span data-slate-object="text" data-key="18512"><span data-slate-leaf="true" data-offset-key="18512:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&gt;</span></span></span></span><span data-slate-object="text" data-key="18513"><span data-slate-leaf="true" data-offset-key="18513:0" data-first-offset="true"><span data-slate-string="true">)</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18514"><span data-slate-object="text" data-key="18515"><span data-slate-leaf="true" data-offset-key="18515:0" data-first-offset="true"><span data-slate-string="true">ifeq '</span></span></span><span data-slate-object="text" data-key="18516"><span data-slate-leaf="true" data-offset-key="18516:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&lt;</span></span></span></span><span data-slate-object="text" data-key="18517"><span data-slate-leaf="true" data-offset-key="18517:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">arg1</span></span></span></span></span><span data-slate-object="text" data-key="18518"><span data-slate-leaf="true" data-offset-key="18518:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&gt;</span></span></span></span><span data-slate-object="text" data-key="18519"><span data-slate-leaf="true" data-offset-key="18519:0" data-first-offset="true"><span data-slate-string="true">' '</span></span></span><span data-slate-object="text" data-key="18520"><span data-slate-leaf="true" data-offset-key="18520:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&lt;</span></span></span></span><span data-slate-object="text" data-key="18521"><span data-slate-leaf="true" data-offset-key="18521:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">arg2</span></span></span></span></span><span data-slate-object="text" data-key="18522"><span data-slate-leaf="true" data-offset-key="18522:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&gt;</span></span></span></span><span data-slate-object="text" data-key="18523"><span data-slate-leaf="true" data-offset-key="18523:0" data-first-offset="true"><span data-slate-string="true">'</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18524"><span data-slate-object="text" data-key="18525"><span data-slate-leaf="true" data-offset-key="18525:0" data-first-offset="true"><span data-slate-string="true">ifeq "</span></span></span><span data-slate-object="text" data-key="18526"><span data-slate-leaf="true" data-offset-key="18526:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&lt;</span></span></span></span><span data-slate-object="text" data-key="18527"><span data-slate-leaf="true" data-offset-key="18527:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">arg1</span></span></span></span></span><span data-slate-object="text" data-key="18528"><span data-slate-leaf="true" data-offset-key="18528:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&gt;</span></span></span></span><span data-slate-object="text" data-key="18529"><span data-slate-leaf="true" data-offset-key="18529:0" data-first-offset="true"><span data-slate-string="true">" "</span></span></span><span data-slate-object="text" data-key="18530"><span data-slate-leaf="true" data-offset-key="18530:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&lt;</span></span></span></span><span data-slate-object="text" data-key="18531"><span data-slate-leaf="true" data-offset-key="18531:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">arg2</span></span></span></span></span><span data-slate-object="text" data-key="18532"><span data-slate-leaf="true" data-offset-key="18532:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&gt;</span></span></span></span><span data-slate-object="text" data-key="18533"><span data-slate-leaf="true" data-offset-key="18533:0" data-first-offset="true"><span data-slate-string="true">"</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18534"><span data-slate-object="text" data-key="18535"><span data-slate-leaf="true" data-offset-key="18535:0" data-first-offset="true"><span data-slate-string="true">ifeq "</span></span></span><span data-slate-object="text" data-key="18536"><span data-slate-leaf="true" data-offset-key="18536:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&lt;</span></span></span></span><span data-slate-object="text" data-key="18537"><span data-slate-leaf="true" data-offset-key="18537:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">arg1</span></span></span></span></span><span data-slate-object="text" data-key="18538"><span data-slate-leaf="true" data-offset-key="18538:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&gt;</span></span></span></span><span data-slate-object="text" data-key="18539"><span data-slate-leaf="true" data-offset-key="18539:0" data-first-offset="true"><span data-slate-string="true">" '</span></span></span><span data-slate-object="text" data-key="18540"><span data-slate-leaf="true" data-offset-key="18540:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&lt;</span></span></span></span><span data-slate-object="text" data-key="18541"><span data-slate-leaf="true" data-offset-key="18541:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">arg2</span></span></span></span></span><span data-slate-object="text" data-key="18542"><span data-slate-leaf="true" data-offset-key="18542:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&gt;</span></span></span></span><span data-slate-object="text" data-key="18543"><span data-slate-leaf="true" data-offset-key="18543:0" data-first-offset="true"><span data-slate-string="true">'</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18544"><span data-slate-object="text" data-key="18545"><span data-slate-leaf="true" data-offset-key="18545:0" data-first-offset="true"><span data-slate-string="true">ifeq '</span></span></span><span data-slate-object="text" data-key="18546"><span data-slate-leaf="true" data-offset-key="18546:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&lt;</span></span></span></span><span data-slate-object="text" data-key="18547"><span data-slate-leaf="true" data-offset-key="18547:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">arg1</span></span></span></span></span><span data-slate-object="text" data-key="18548"><span data-slate-leaf="true" data-offset-key="18548:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&gt;</span></span></span></span><span data-slate-object="text" data-key="18549"><span data-slate-leaf="true" data-offset-key="18549:0" data-first-offset="true"><span data-slate-string="true">' "</span></span></span><span data-slate-object="text" data-key="18550"><span data-slate-leaf="true" data-offset-key="18550:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&lt;</span></span></span></span><span data-slate-object="text" data-key="18551"><span data-slate-leaf="true" data-offset-key="18551:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">arg2</span></span></span></span></span><span data-slate-object="text" data-key="18552"><span data-slate-leaf="true" data-offset-key="18552:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&gt;</span></span></span></span><span data-slate-object="text" data-key="18553"><span data-slate-leaf="true" data-offset-key="18553:0" data-first-offset="true"><span data-slate-string="true">"</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18554"><span data-slate-object="text" data-key="18555"><span data-slate-leaf="true" data-offset-key="18555:0" data-first-offset="true"><span data-slate-string="true">比较 arg1 和 arg2 的值是否相同，如果相同则为真。也可以用 make 函数 / 变量替代 arg1 或 arg2，例如 </span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18556"><span data-slate-object="text" data-key="18557"><span data-slate-leaf="true" data-offset-key="18557:0" data-first-offset="true"><span data-slate-string="true">ifeq ($(origin ROOT_DIR),undefined)</span></span></span></span><span data-slate-object="text" data-key="18558"><span data-slate-leaf="true" data-offset-key="18558:0" data-first-offset="true"><span data-slate-string="true"> 或 </span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18559"><span data-slate-object="text" data-key="18560"><span data-slate-leaf="true" data-offset-key="18560:0" data-first-offset="true"><span data-slate-string="true">ifeq ($(ROOT_PACKAGE),)</span></span></span></span><span data-slate-object="text" data-key="18561"><span data-slate-leaf="true" data-offset-key="18561:0" data-first-offset="true"><span data-slate-string="true"> 。origin 函数会在之后专门讲函数的一讲中介绍到。</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="18562"><div data-slate-type="list-line" data-slate-object="block" data-key="18563"><div data-code-line-number="2"></div><div><span data-slate-object="text" data-key="18564"><span data-slate-leaf="true" data-offset-key="18564:0" data-first-offset="true"><span data-slate-string="true">ifneq：条件判断，判断是否不相等。</span></span></span></div></div></div><div data-code-language="xml" data-slate-type="pre" data-slate-object="block" data-key="18565"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div><div data-code-line-number="4"></div><div data-code-line-number="5"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18566"><span data-slate-object="text" data-key="18567"><span data-slate-leaf="true" data-offset-key="18567:0" data-first-offset="true"><span data-slate-string="true">ifneq (</span></span></span><span data-slate-object="text" data-key="18568"><span data-slate-leaf="true" data-offset-key="18568:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&lt;</span></span></span></span><span data-slate-object="text" data-key="18569"><span data-slate-leaf="true" data-offset-key="18569:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">arg1</span></span></span></span></span><span data-slate-object="text" data-key="18570"><span data-slate-leaf="true" data-offset-key="18570:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&gt;</span></span></span></span><span data-slate-object="text" data-key="18571"><span data-slate-leaf="true" data-offset-key="18571:0" data-first-offset="true"><span data-slate-string="true">, </span></span></span><span data-slate-object="text" data-key="18572"><span data-slate-leaf="true" data-offset-key="18572:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&lt;</span></span></span></span><span data-slate-object="text" data-key="18573"><span data-slate-leaf="true" data-offset-key="18573:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">arg2</span></span></span></span></span><span data-slate-object="text" data-key="18574"><span data-slate-leaf="true" data-offset-key="18574:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&gt;</span></span></span></span><span data-slate-object="text" data-key="18575"><span data-slate-leaf="true" data-offset-key="18575:0" data-first-offset="true"><span data-slate-string="true">)</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18576"><span data-slate-object="text" data-key="18577"><span data-slate-leaf="true" data-offset-key="18577:0" data-first-offset="true"><span data-slate-string="true">ifneq '</span></span></span><span data-slate-object="text" data-key="18578"><span data-slate-leaf="true" data-offset-key="18578:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&lt;</span></span></span></span><span data-slate-object="text" data-key="18579"><span data-slate-leaf="true" data-offset-key="18579:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">arg1</span></span></span></span></span><span data-slate-object="text" data-key="18580"><span data-slate-leaf="true" data-offset-key="18580:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&gt;</span></span></span></span><span data-slate-object="text" data-key="18581"><span data-slate-leaf="true" data-offset-key="18581:0" data-first-offset="true"><span data-slate-string="true">' '</span></span></span><span data-slate-object="text" data-key="18582"><span data-slate-leaf="true" data-offset-key="18582:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&lt;</span></span></span></span><span data-slate-object="text" data-key="18583"><span data-slate-leaf="true" data-offset-key="18583:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">arg2</span></span></span></span></span><span data-slate-object="text" data-key="18584"><span data-slate-leaf="true" data-offset-key="18584:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&gt;</span></span></span></span><span data-slate-object="text" data-key="18585"><span data-slate-leaf="true" data-offset-key="18585:0" data-first-offset="true"><span data-slate-string="true">'</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18586"><span data-slate-object="text" data-key="18587"><span data-slate-leaf="true" data-offset-key="18587:0" data-first-offset="true"><span data-slate-string="true">ifneq "</span></span></span><span data-slate-object="text" data-key="18588"><span data-slate-leaf="true" data-offset-key="18588:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&lt;</span></span></span></span><span data-slate-object="text" data-key="18589"><span data-slate-leaf="true" data-offset-key="18589:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">arg1</span></span></span></span></span><span data-slate-object="text" data-key="18590"><span data-slate-leaf="true" data-offset-key="18590:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&gt;</span></span></span></span><span data-slate-object="text" data-key="18591"><span data-slate-leaf="true" data-offset-key="18591:0" data-first-offset="true"><span data-slate-string="true">" "</span></span></span><span data-slate-object="text" data-key="18592"><span data-slate-leaf="true" data-offset-key="18592:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&lt;</span></span></span></span><span data-slate-object="text" data-key="18593"><span data-slate-leaf="true" data-offset-key="18593:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">arg2</span></span></span></span></span><span data-slate-object="text" data-key="18594"><span data-slate-leaf="true" data-offset-key="18594:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&gt;</span></span></span></span><span data-slate-object="text" data-key="18595"><span data-slate-leaf="true" data-offset-key="18595:0" data-first-offset="true"><span data-slate-string="true">"</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18596"><span data-slate-object="text" data-key="18597"><span data-slate-leaf="true" data-offset-key="18597:0" data-first-offset="true"><span data-slate-string="true">ifneq "</span></span></span><span data-slate-object="text" data-key="18598"><span data-slate-leaf="true" data-offset-key="18598:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&lt;</span></span></span></span><span data-slate-object="text" data-key="18599"><span data-slate-leaf="true" data-offset-key="18599:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">arg1</span></span></span></span></span><span data-slate-object="text" data-key="18600"><span data-slate-leaf="true" data-offset-key="18600:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&gt;</span></span></span></span><span data-slate-object="text" data-key="18601"><span data-slate-leaf="true" data-offset-key="18601:0" data-first-offset="true"><span data-slate-string="true">" '</span></span></span><span data-slate-object="text" data-key="18602"><span data-slate-leaf="true" data-offset-key="18602:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&lt;</span></span></span></span><span data-slate-object="text" data-key="18603"><span data-slate-leaf="true" data-offset-key="18603:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">arg2</span></span></span></span></span><span data-slate-object="text" data-key="18604"><span data-slate-leaf="true" data-offset-key="18604:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&gt;</span></span></span></span><span data-slate-object="text" data-key="18605"><span data-slate-leaf="true" data-offset-key="18605:0" data-first-offset="true"><span data-slate-string="true">'</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18606"><span data-slate-object="text" data-key="18607"><span data-slate-leaf="true" data-offset-key="18607:0" data-first-offset="true"><span data-slate-string="true">ifneq '</span></span></span><span data-slate-object="text" data-key="18608"><span data-slate-leaf="true" data-offset-key="18608:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&lt;</span></span></span></span><span data-slate-object="text" data-key="18609"><span data-slate-leaf="true" data-offset-key="18609:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">arg1</span></span></span></span></span><span data-slate-object="text" data-key="18610"><span data-slate-leaf="true" data-offset-key="18610:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&gt;</span></span></span></span><span data-slate-object="text" data-key="18611"><span data-slate-leaf="true" data-offset-key="18611:0" data-first-offset="true"><span data-slate-string="true">' "</span></span></span><span data-slate-object="text" data-key="18612"><span data-slate-leaf="true" data-offset-key="18612:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&lt;</span></span></span></span><span data-slate-object="text" data-key="18613"><span data-slate-leaf="true" data-offset-key="18613:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">arg2</span></span></span></span></span><span data-slate-object="text" data-key="18614"><span data-slate-leaf="true" data-offset-key="18614:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&gt;</span></span></span></span><span data-slate-object="text" data-key="18615"><span data-slate-leaf="true" data-offset-key="18615:0" data-first-offset="true"><span data-slate-string="true">"</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18616"><span data-slate-object="text" data-key="18617"><span data-slate-leaf="true" data-offset-key="18617:0" data-first-offset="true"><span data-slate-string="true">比较 arg1 和 arg2 的值是否不同，如果不同则为真。</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="18618"><div data-slate-type="list-line" data-slate-object="block" data-key="18619"><div data-code-line-number="3"></div><div><span data-slate-object="text" data-key="18620"><span data-slate-leaf="true" data-offset-key="18620:0" data-first-offset="true"><span data-slate-string="true">ifdef：条件判断，判断变量是否已定义。</span></span></span></div></div></div><div data-code-language="xml" data-slate-type="pre" data-slate-object="block" data-key="18621"><div><span></span></div><div><div data-code-line-number="1"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18622"><span data-slate-object="text" data-key="18623"><span data-slate-leaf="true" data-offset-key="18623:0" data-first-offset="true"><span data-slate-string="true">ifdef </span></span></span><span data-slate-object="text" data-key="18624"><span data-slate-leaf="true" data-offset-key="18624:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&lt;</span></span></span></span><span data-slate-object="text" data-key="18625"><span data-slate-leaf="true" data-offset-key="18625:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">variable-name</span></span></span></span></span><span data-slate-object="text" data-key="18626"><span data-slate-leaf="true" data-offset-key="18626:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&gt;</span></span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18627"><span data-slate-object="text" data-key="18628"><span data-slate-leaf="true" data-offset-key="18628:0" data-first-offset="true"><span data-slate-string="true">如果</span></span></span><span data-slate-object="text" data-key="18629"><span data-slate-leaf="true" data-offset-key="18629:0" data-first-offset="true"><span data-slate-string="true">值非空，则表达式为真，否则为假。</span></span></span><span data-slate-object="text" data-key="18630"><span data-slate-leaf="true" data-offset-key="18630:0" data-first-offset="true"><span data-slate-string="true">也可以是函数的返回值。</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="18631"><div data-slate-type="list-line" data-slate-object="block" data-key="18632"><div data-code-line-number="4"></div><div><span data-slate-object="text" data-key="18633"><span data-slate-leaf="true" data-offset-key="18633:0" data-first-offset="true"><span data-slate-string="true">ifndef：条件判断，判断变量是否未定义。</span></span></span></div></div></div><div data-code-language="xml" data-slate-type="pre" data-slate-object="block" data-key="18634"><div><span></span></div><div><div data-code-line-number="1"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18635"><span data-slate-object="text" data-key="18636"><span data-slate-leaf="true" data-offset-key="18636:0" data-first-offset="true"><span data-slate-string="true">ifndef </span></span></span><span data-slate-object="text" data-key="18637"><span data-slate-leaf="true" data-offset-key="18637:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&lt;</span></span></span></span><span data-slate-object="text" data-key="18638"><span data-slate-leaf="true" data-offset-key="18638:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">variable-name</span></span></span></span></span><span data-slate-object="text" data-key="18639"><span data-slate-leaf="true" data-offset-key="18639:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">&gt;</span></span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18640"><span data-slate-object="text" data-key="18641"><span data-slate-leaf="true" data-offset-key="18641:0" data-first-offset="true"><span data-slate-string="true">如果</span></span></span><span data-slate-object="text" data-key="18642"><span data-slate-leaf="true" data-offset-key="18642:0" data-first-offset="true"><span data-slate-string="true">值为空，则表达式为真，否则为假。</span></span></span><span data-slate-object="text" data-key="18643"><span data-slate-leaf="true" data-offset-key="18643:0" data-first-offset="true"><span data-slate-string="true">也可以是函数的返回值。</span></span></span></div><h3 data-slate-type="heading" data-slate-object="block" data-key="18644" id="sr-toc-10"><span data-slate-object="text" data-key="18645"><span data-slate-leaf="true" data-offset-key="18645:0" data-first-offset="true"><span data-slate-string="true">函数</span></span></span></h3><div data-slate-type="paragraph" data-slate-object="block" data-key="18646"><span data-slate-object="text" data-key="18647"><span data-slate-leaf="true" data-offset-key="18647:0" data-first-offset="true"><span data-slate-string="true">Makefile 同样也支持函数，函数语法包括定义语法和调用语法。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18648"><span data-slate-object="text" data-key="18649"><span data-slate-leaf="true" data-offset-key="18649:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">我们先来看下自定义函数。</span></span></span></span><span data-slate-object="text" data-key="18650"><span data-slate-leaf="true" data-offset-key="18650:0" data-first-offset="true"><span data-slate-string="true"> make 解释器提供了一系列的函数供 Makefile 调用，这些函数是 Makefile 的预定义函数。我们可以通过 define 关键字来自定义一个函数。自定义函数的语法为：</span></span></span></div><div data-code-language="sql" data-slate-type="pre" data-slate-object="block" data-key="18651"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18652"><span data-slate-object="text" data-key="18653"><span data-slate-leaf="true" data-offset-key="18653:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">define</span></span></span></span><span data-slate-object="text" data-key="18654"><span data-slate-leaf="true" data-offset-key="18654:0" data-first-offset="true"><span data-slate-string="true"> 函数名</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18655"><span data-slate-object="text" data-key="18656"><span data-slate-leaf="true" data-offset-key="18656:0" data-first-offset="true"><span data-slate-string="true">函数体</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18657"><span data-slate-object="text" data-key="18658"><span data-slate-leaf="true" data-offset-key="18658:0" data-first-offset="true"><span data-slate-string="true">endef</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18659"><span data-slate-object="text" data-key="18660"><span data-slate-leaf="true" data-offset-key="18660:0" data-first-offset="true"><span data-slate-string="true">例如，下面这个自定义函数：</span></span></span></div><div data-code-language="bash" data-slate-type="pre" data-slate-object="block" data-key="18661"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div><div data-code-line-number="3"></div><div data-code-line-number="4"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18662"><span data-slate-object="text" data-key="18663"><span data-slate-leaf="true" data-offset-key="18663:0" data-first-offset="true"><span data-slate-string="true">define Foo</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18664"><span data-slate-object="text" data-key="18665"><span data-slate-leaf="true" data-offset-key="18665:0" data-first-offset="true"><span data-slate-string="true">    @</span></span></span><span data-slate-object="text" data-key="18666"><span data-slate-leaf="true" data-offset-key="18666:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">echo</span></span></span></span><span data-slate-object="text" data-key="18667"><span data-slate-leaf="true" data-offset-key="18667:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="18668"><span data-slate-leaf="true" data-offset-key="18668:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">"my name is </span></span></span></span><span data-slate-object="text" data-key="18669"><span data-slate-leaf="true" data-offset-key="18669:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">$(0)</span></span></span></span></span><span data-slate-object="text" data-key="18670"><span data-slate-leaf="true" data-offset-key="18670:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">"</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18671"><span data-slate-object="text" data-key="18672"><span data-slate-leaf="true" data-offset-key="18672:0" data-first-offset="true"><span data-slate-string="true">    @</span></span></span><span data-slate-object="text" data-key="18673"><span data-slate-leaf="true" data-offset-key="18673:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">echo</span></span></span></span><span data-slate-object="text" data-key="18674"><span data-slate-leaf="true" data-offset-key="18674:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="18675"><span data-slate-leaf="true" data-offset-key="18675:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">"param is </span></span></span></span><span data-slate-object="text" data-key="18676"><span data-slate-leaf="true" data-offset-key="18676:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">$(1)</span></span></span></span></span><span data-slate-object="text" data-key="18677"><span data-slate-leaf="true" data-offset-key="18677:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">"</span></span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18678"><span data-slate-object="text" data-key="18679"><span data-slate-leaf="true" data-offset-key="18679:0" data-first-offset="true"><span data-slate-string="true">endef</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18680"><span data-slate-object="text" data-key="18681"><span data-slate-leaf="true" data-offset-key="18681:0" data-first-offset="true"><span data-slate-string="true">define 本质上是定义一个多行变量，可以在 call 的作用下当作函数来使用，在其他位置使用只能作为多行变量来使用，例如：</span></span></span></div><div data-code-language="javascript" data-slate-type="pre" data-slate-object="block" data-key="18682"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18683"><span data-slate-object="text" data-key="18684"><span data-slate-leaf="true" data-offset-key="18684:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">var</span></span></span></span><span data-slate-object="text" data-key="18685"><span data-slate-leaf="true" data-offset-key="18685:0" data-first-offset="true"><span data-slate-string="true"> := $(call </span></span></span><span data-slate-object="text" data-key="18686"><span data-slate-leaf="true" data-offset-key="18686:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">Foo</span></span></span></span><span data-slate-object="text" data-key="18687"><span data-slate-leaf="true" data-offset-key="18687:0" data-first-offset="true"><span data-slate-string="true">)</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18688"><span data-slate-object="text" data-key="18689"><span data-slate-leaf="true" data-offset-key="18689:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">new</span></span></span></span><span data-slate-object="text" data-key="18690"><span data-slate-leaf="true" data-offset-key="18690:0" data-first-offset="true"><span data-slate-string="true"> := $(</span></span></span><span data-slate-object="text" data-key="18691"><span data-slate-leaf="true" data-offset-key="18691:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">Foo</span></span></span></span><span data-slate-object="text" data-key="18692"><span data-slate-leaf="true" data-offset-key="18692:0" data-first-offset="true"><span data-slate-string="true">)</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18693"><span data-slate-object="text" data-key="18694"><span data-slate-leaf="true" data-offset-key="18694:0" data-first-offset="true"><span data-slate-string="true">自定义函数是一种过程调用，没有任何的返回值。可以使用自定义函数来定义命令的集合，并应用在规则中。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18695"><span data-slate-object="text" data-key="18696"><span data-slate-leaf="true" data-offset-key="18696:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">再来看下预定义函数。</span></span></span></span><span data-slate-object="text" data-key="18697"><span data-slate-leaf="true" data-offset-key="18697:0" data-first-offset="true"><span data-slate-string="true"> 刚才提到，make 编译器也定义了很多函数，这些函数叫作预定义函数，调用语法和变量类似，语法为：</span></span></span></div><div data-code-language="javascript" data-slate-type="pre" data-slate-object="block" data-key="18698"><div><span></span></div><div><div data-code-line-number="1"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18699"><span data-slate-object="text" data-key="18700"><span data-slate-leaf="true" data-offset-key="18700:0" data-first-offset="true"><span data-slate-string="true">$(&lt;</span></span></span><span data-slate-object="text" data-key="18701"><span data-slate-leaf="true" data-offset-key="18701:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">function</span></span></span></span><span data-slate-object="text" data-key="18702"><span data-slate-leaf="true" data-offset-key="18702:0" data-first-offset="true"><span data-slate-string="true">&gt; &lt;</span></span></span><span data-slate-object="text" data-key="18703"><span data-slate-leaf="true" data-offset-key="18703:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">arguments</span></span></span></span><span data-slate-object="text" data-key="18704"><span data-slate-leaf="true" data-offset-key="18704:0" data-first-offset="true"><span data-slate-string="true">&gt;)</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18705"><span data-slate-object="text" data-key="18706"><span data-slate-leaf="true" data-offset-key="18706:0" data-first-offset="true"><span data-slate-string="true">或者</span></span></span></div><div data-code-language="javascript" data-slate-type="pre" data-slate-object="block" data-key="18707"><div><span></span></div><div><div data-code-line-number="1"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18708"><span data-slate-object="text" data-key="18709"><span data-slate-leaf="true" data-offset-key="18709:0" data-first-offset="true"><span data-slate-string="true">${&lt;</span></span></span><span data-slate-object="text" data-key="18710"><span data-slate-leaf="true" data-offset-key="18710:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">function</span></span></span></span><span data-slate-object="text" data-key="18711"><span data-slate-leaf="true" data-offset-key="18711:0" data-first-offset="true"><span data-slate-string="true">&gt; &lt;</span></span></span><span data-slate-object="text" data-key="18712"><span data-slate-leaf="true" data-offset-key="18712:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">arguments</span></span></span></span><span data-slate-object="text" data-key="18713"><span data-slate-leaf="true" data-offset-key="18713:0" data-first-offset="true"><span data-slate-string="true">&gt;}</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18714"><span data-slate-type="code" data-slate-object="inline" data-key="18715"><span data-slate-object="text" data-key="18716"><span data-slate-leaf="true" data-offset-key="18716:0" data-first-offset="true"><span data-slate-string="true">&lt;function&gt;</span></span></span></span><span data-slate-object="text" data-key="18717"><span data-slate-leaf="true" data-offset-key="18717:0" data-first-offset="true"><span data-slate-string="true"> 是函数名，</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18718"><span data-slate-object="text" data-key="18719"><span data-slate-leaf="true" data-offset-key="18719:0" data-first-offset="true"><span data-slate-string="true">&lt;arguments&gt;</span></span></span></span><span data-slate-object="text" data-key="18720"><span data-slate-leaf="true" data-offset-key="18720:0" data-first-offset="true"><span data-slate-string="true"> 是函数参数，参数间用逗号分割。函数的参数也可以是变量。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18721"><span data-slate-object="text" data-key="18722"><span data-slate-leaf="true" data-offset-key="18722:0" data-first-offset="true"><span data-slate-string="true">我们来看一个例子：</span></span></span></div><div data-code-language="javascript" data-slate-type="pre" data-slate-object="block" data-key="18723"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18724"><span data-slate-object="text" data-key="18725"><span data-slate-leaf="true" data-offset-key="18725:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">PLATFORM</span></span></span></span><span data-slate-object="text" data-key="18726"><span data-slate-leaf="true" data-offset-key="18726:0" data-first-offset="true"><span data-slate-string="true"> = linux_amd64</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18727"><span data-slate-object="text" data-key="18728"><span data-slate-leaf="true" data-offset-key="18728:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">GOOS</span></span></span></span><span data-slate-object="text" data-key="18729"><span data-slate-leaf="true" data-offset-key="18729:0" data-first-offset="true"><span data-slate-string="true"> := $(word </span></span></span><span data-slate-object="text" data-key="18730"><span data-slate-leaf="true" data-offset-key="18730:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">1</span></span></span></span><span data-slate-object="text" data-key="18731"><span data-slate-leaf="true" data-offset-key="18731:0" data-first-offset="true"><span data-slate-string="true">, $(subst _, ,$(</span></span></span><span data-slate-object="text" data-key="18732"><span data-slate-leaf="true" data-offset-key="18732:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">PLATFORM</span></span></span></span><span data-slate-object="text" data-key="18733"><span data-slate-leaf="true" data-offset-key="18733:0" data-first-offset="true"><span data-slate-string="true">)))</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18734"><span data-slate-object="text" data-key="18735"><span data-slate-leaf="true" data-offset-key="18735:0" data-first-offset="true"><span data-slate-string="true">上面的例子用到了两个函数：word 和 subst。word 函数有两个参数，1 和 subst 函数的输出。subst 函数将 PLATFORM 变量值中的 _ 替换成空格（替换后的 PLATFORM 值为 linux amd64）。word 函数取 linux amd64 字符串中的第一个单词。所以最后 GOOS 的值为 linux。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18736"><span data-slate-object="text" data-key="18737"><span data-slate-leaf="true" data-offset-key="18737:0" data-first-offset="true"><span data-slate-string="true">Makefile 预定义函数能够帮助我们实现很多强大的功能，在编写 Makefile 的过程中，如果有功能需求，可以优先使用这些函数。如果你想使用这些函数，那就需要知道有哪些函数，以及它们实现的功能。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18738"><span data-slate-object="text" data-key="18739"><span data-slate-leaf="true" data-offset-key="18739:0" data-first-offset="true"><span data-slate-string="true">常用的函数包括下面这些，你需要先有个印象，以后用到时再来查看。</span></span></span></div><div data-slate-type="image" data-slate-object="block" data-key="18740"><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://static001.geekbang.org/resource/image/96/5f/96da0853e8225a656d2c0489e544865f.jpg?wh=2248x3692"></div></div><h2 data-slate-type="heading" data-slate-object="block" data-key="18741" id="sr-toc-11"><span data-slate-object="text" data-key="18742"><span data-slate-leaf="true" data-offset-key="18742:0" data-first-offset="true"><span data-slate-string="true">引入其他 Makefile</span></span></span></h2><div data-slate-type="paragraph" data-slate-object="block" data-key="18743"><span data-slate-object="text" data-key="18744"><span data-slate-leaf="true" data-offset-key="18744:0" data-first-offset="true"><span data-slate-string="true">除了 Makefile 规则、Makefile 语法之外，Makefile 还有很多特性，比如可以引入其他 Makefile、自动生成依赖关系、文件搜索等等。这里我再介绍一个 IAM 项目的 Makefile 用到的重点特性：引入其他 Makefile。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18745"><span data-slate-object="text" data-key="18746"><span data-slate-leaf="true" data-offset-key="18746:0" data-first-offset="true"><span data-slate-string="true">在 </span></span></span><a data-slate-type="link" data-slate-object="inline" data-key="18747"><span data-slate-object="text" data-key="18748"><span data-slate-leaf="true" data-offset-key="18748:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">14 讲</span></span></span></span></a><span data-slate-object="text" data-key="18749"><span data-slate-leaf="true" data-offset-key="18749:0" data-first-offset="true"><span data-slate-string="true"> 中，我们介绍过 Makefile 要结构化、层次化，这一点可以通过</span></span></span><span data-slate-object="text" data-key="18750"><span data-slate-leaf="true" data-offset-key="18750:0" data-first-offset="true"><span data-slate-type="bold" data-slate-object="mark"><span data-slate-string="true">在项目根目录下的 Makefile 中引入其他 Makefile</span></span></span></span><span data-slate-object="text" data-key="18751"><span data-slate-leaf="true" data-offset-key="18751:0" data-first-offset="true"><span data-slate-string="true"> 来实现。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18752"><span data-slate-object="text" data-key="18753"><span data-slate-leaf="true" data-offset-key="18753:0" data-first-offset="true"><span data-slate-string="true">在 Makefile 中，我们可以通过关键字 include，把别的 makefile 包含进来，类似于 C 语言的</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18754"><span data-slate-object="text" data-key="18755"><span data-slate-leaf="true" data-offset-key="18755:0" data-first-offset="true"><span data-slate-string="true">#include</span></span></span></span><span data-slate-object="text" data-key="18756"><span data-slate-leaf="true" data-offset-key="18756:0" data-first-offset="true"><span data-slate-string="true">，被包含的文件会插入在当前的位置。include 用法为</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18757"><span data-slate-object="text" data-key="18758"><span data-slate-leaf="true" data-offset-key="18758:0" data-first-offset="true"><span data-slate-string="true"> include &lt;filename&gt;</span></span></span></span><span data-slate-object="text" data-key="18759"><span data-slate-leaf="true" data-offset-key="18759:0" data-first-offset="true"><span data-slate-string="true">，示例如下：</span></span></span></div><div data-code-language="go" data-slate-type="pre" data-slate-object="block" data-key="18760"><div><span></span></div><div><div data-code-line-number="1"></div><div data-code-line-number="2"></div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><div data-origin="pm_code_preview"><div data-slate-type="code-line" data-slate-object="block" data-key="18761"><span data-slate-object="text" data-key="18762"><span data-slate-leaf="true" data-offset-key="18762:0" data-first-offset="true"><span data-slate-string="true">include scripts/</span></span></span><span data-slate-object="text" data-key="18763"><span data-slate-leaf="true" data-offset-key="18763:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">make</span></span></span></span><span data-slate-object="text" data-key="18764"><span data-slate-leaf="true" data-offset-key="18764:0" data-first-offset="true"><span data-slate-string="true">-rules/common.mk</span></span></span></div><div data-slate-type="code-line" data-slate-object="block" data-key="18765"><span data-slate-object="text" data-key="18766"><span data-slate-leaf="true" data-offset-key="18766:0" data-first-offset="true"><span data-slate-string="true">include scripts/</span></span></span><span data-slate-object="text" data-key="18767"><span data-slate-leaf="true" data-offset-key="18767:0" data-first-offset="true"><span data-slate-type="mark-class" data-slate-object="mark"><span data-slate-string="true">make</span></span></span></span><span data-slate-object="text" data-key="18768"><span data-slate-leaf="true" data-offset-key="18768:0" data-first-offset="true"><span data-slate-string="true">-rules/golang.mk</span></span></span></div></div></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18769"><span data-slate-object="text" data-key="18770"><span data-slate-leaf="true" data-offset-key="18770:0" data-first-offset="true"><span data-slate-string="true">include 也可以包含通配符</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18771"><span data-slate-object="text" data-key="18772"><span data-slate-leaf="true" data-offset-key="18772:0" data-first-offset="true"><span data-slate-string="true"> include scripts/make-rules/*</span></span></span></span><span data-slate-object="text" data-key="18773"><span data-slate-leaf="true" data-offset-key="18773:0" data-first-offset="true"><span data-slate-string="true">。make 命令会按下面的顺序查找 makefile 文件：</span></span></span></div><div data-slate-type="list" data-slate-object="block" data-key="18774"><div data-slate-type="list-line" data-slate-object="block" data-key="18775"><div data-code-line-number="1"></div><div><span data-slate-object="text" data-key="18776"><span data-slate-leaf="true" data-offset-key="18776:0" data-first-offset="true"><span data-slate-string="true">如果是绝对或相对路径，就直接根据路径 include 进来。</span></span></span></div></div><div data-slate-type="list-line" data-slate-object="block" data-key="18777"><div data-code-line-number="2"></div><div><span data-slate-object="text" data-key="18778"><span data-slate-leaf="true" data-offset-key="18778:0" data-first-offset="true"><span data-slate-string="true">如果 make 执行时，有</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18779"><span data-slate-object="text" data-key="18780"><span data-slate-leaf="true" data-offset-key="18780:0" data-first-offset="true"><span data-slate-string="true"> -I</span></span></span></span><span data-slate-object="text" data-key="18781"><span data-slate-leaf="true" data-offset-key="18781:0" data-first-offset="true"><span data-slate-string="true"> 或</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18782"><span data-slate-object="text" data-key="18783"><span data-slate-leaf="true" data-offset-key="18783:0" data-first-offset="true"><span data-slate-string="true"> --include-dir</span></span></span></span><span data-slate-object="text" data-key="18784"><span data-slate-leaf="true" data-offset-key="18784:0" data-first-offset="true"><span data-slate-string="true"> 参数，那么 make 就会在这个参数所指定的目录下去找。</span></span></span></div></div><div data-slate-type="list-line" data-slate-object="block" data-key="18785"><div data-code-line-number="3"></div><div><span data-slate-object="text" data-key="18786"><span data-slate-leaf="true" data-offset-key="18786:0" data-first-offset="true"><span data-slate-string="true">如果目录</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18787"><span data-slate-object="text" data-key="18788"><span data-slate-leaf="true" data-offset-key="18788:0" data-first-offset="true"><span data-slate-string="true"> &lt;prefix&gt;/include</span></span></span></span><span data-slate-object="text" data-key="18789"><span data-slate-leaf="true" data-offset-key="18789:0" data-first-offset="true"><span data-slate-string="true">（一般是</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18790"><span data-slate-object="text" data-key="18791"><span data-slate-leaf="true" data-offset-key="18791:0" data-first-offset="true"><span data-slate-string="true"> /usr/local/bin</span></span></span></span><span data-slate-object="text" data-key="18792"><span data-slate-leaf="true" data-offset-key="18792:0" data-first-offset="true"><span data-slate-string="true"> 或</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18793"><span data-slate-object="text" data-key="18794"><span data-slate-leaf="true" data-offset-key="18794:0" data-first-offset="true"><span data-slate-string="true"> /usr/include</span></span></span></span><span data-slate-object="text" data-key="18795"><span data-slate-leaf="true" data-offset-key="18795:0" data-first-offset="true"><span data-slate-string="true">）存在的话，make 也会去找。</span></span></span></div></div></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18796"><span data-slate-object="text" data-key="18797"><span data-slate-leaf="true" data-offset-key="18797:0" data-first-offset="true"><span data-slate-string="true">如果有文件没有找到，make 会生成一条警告信息，但不会马上出现致命错误，而是继续载入其他的文件。一旦完成 makefile 的读取，make 会再重试这些没有找到或是不能读取的文件。如果还是不行，make 才会出现一条致命错误信息。如果你想让 make 忽略那些无法读取的文件继续执行，可以在 include 前加一个减号</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18798"><span data-slate-object="text" data-key="18799"><span data-slate-leaf="true" data-offset-key="18799:0" data-first-offset="true"><span data-slate-string="true"> -</span></span></span></span><span data-slate-object="text" data-key="18800"><span data-slate-leaf="true" data-offset-key="18800:0" data-first-offset="true"><span data-slate-string="true">，如</span></span></span><span data-slate-type="code" data-slate-object="inline" data-key="18801"><span data-slate-object="text" data-key="18802"><span data-slate-leaf="true" data-offset-key="18802:0" data-first-offset="true"><span data-slate-string="true"> -include &lt;filename&gt;</span></span></span></span><span data-slate-object="text" data-key="18803"><span data-slate-leaf="true" data-offset-key="18803:0" data-first-offset="true"><span data-slate-string="true">。</span></span></span></div><h2 data-slate-type="heading" data-slate-object="block" data-key="18804" id="sr-toc-12"><span data-slate-object="text" data-key="18805"><span data-slate-leaf="true" data-offset-key="18805:0" data-first-offset="true"><span data-slate-string="true">总结</span></span></span></h2><div data-slate-type="paragraph" data-slate-object="block" data-key="18806"><span data-slate-object="text" data-key="18807"><span data-slate-leaf="true" data-offset-key="18807:0" data-first-offset="true"><span data-slate-string="true">在这一讲里，为了帮助你编写一个高质量的 Makefile，我重点介绍了 Makefile 规则和 Makefile 语法里的一些核心语法知识。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18808"><span data-slate-object="text" data-key="18809"><span data-slate-leaf="true" data-offset-key="18809:0" data-first-offset="true"><span data-slate-string="true">在讲 Makefile 规则时，我们主要学习了规则语法、伪目标和 order-only 依赖。掌握了这些 Makefile 规则，你就掌握了 Makefile 中最核心的内容。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18810"><span data-slate-object="text" data-key="18811"><span data-slate-leaf="true" data-offset-key="18811:0" data-first-offset="true"><span data-slate-string="true">在介绍 Makefile 的语法时，我只介绍了 Makefile 的核心语法，以及 IAM 项目的 Makefile 用到的语法，包括命令、变量、条件语句和函数。你可能会觉得这些语法学习起来比较枯燥，但还是那句话，工欲善其事，必先利其器。希望你能熟练掌握 Makefile 的核心语法，为编写高质量的 Makefile 打好基础。</span></span></span></div><div data-slate-type="paragraph" data-slate-object="block" data-key="18812"><span data-slate-object="text" data-key="18813"><span data-slate-leaf="true" data-offset-key="18813:0" data-first-offset="true"><span data-slate-string="true">今天的内容就到这里啦，欢迎你在下面的留言区谈谈自己的看法，我们下一讲见。</span></span></span></div></div></div></div><div><div></div><div></div><div><div data-simplebar="init"><div><div><div></div></div><div><div><div><div><textarea placeholder="将学到的知识总结成笔记，方便日后快速查找及复习"></textarea></div></div></div></div><div></div></div><div><div></div></div><div><div></div></div></div><div><div>确认放弃笔记？</div><div>放弃后所记笔记将不保留。</div></div><div><div>新功能上线，你的历史笔记已初始化为私密笔记，是否一键批量公开？</div><div>批量公开的笔记不会为你同步至部落</div></div><div></div></div><div><div><div>公开</div><div>同步至部落</div></div><div>取消</div><div>完成</div></div><div><span>0/2000</span></div></div><div><div><span>划线</span></div><div></div><div></div><div></div><div><span>笔记</span></div><div></div><div><span>复制</span></div></div></div><div><div><div><span></span></div><p><a href="javascript:void(0);">给文章提建议</a></p></div></div><div><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://static001.geekbang.org/resource/image/1f/81/1f6c18433af717a740f1e49389f2f981.png"></div></div><div><span>©</span> 版权归极客邦科技所有，未经许可不得传播售卖。 页面已增加防盗追踪，如有侵权极客邦将依法追究其法律责任。 </div></div><div><div><div class="sr-rd-content-center-small"><img class="" src="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABkAAD/4QN5aHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0MCA3OS4xNjA0NTEsIDIwMTcvMDUvMDYtMDE6MDg6MjEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YWE3YmZhMDItMzBhMC00MDg3LTg3MmYtOGMwMjMxNjNhZWRjIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjI2MTlEODM3NTgzMTExRTk5NDY4Qjk3QUFCNDFBN0QzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI2MTlEODM2NTgzMTExRTk5NDY4Qjk3QUFCNDFBN0QzIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTYyRTNCMDNBREI4MTFFOEFFNTJDODlGREQ1OTUzMDMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OTYyRTNCMDRBREI4MTFFOEFFNTJDODlGREQ1OTUzMDMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRm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"></div><div>Geek__653581f21177</div></div><div><textarea placeholder="由作者筛选后的优质留言将会公开显示，欢迎踊跃留言。" rows="16"></textarea></div><div><div>Ctrl + Enter 发表</div><div>0/2000 字符</div><div>提交留言</div></div></div><div><h2 id="sr-toc-13">精选留言 (10)</h2><ul><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/10/dd/09/feca820a.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div></div><div><div><div><span>helloworld</span></div></div><div>我觉得变量用 ${}, 函数用 $(), 这样能很好区分，对熟悉 shell 的人也更友好</div><div><p>作者回复：听起来没毛病，保持一致即可</p></div><div><div>2021-06-28</div><div><div><i></i></div><div><i></i><span>14</span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/12/52/40/e57a736e.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_28"></div></div><div><div><div><span>pedro</span></div></div><div>周一就更新，值😂</div><div><p>编辑回复：这篇是额外的加餐，不占排期哦</p></div><div><div>2021-06-28</div><div><div><i></i></div><div><i></i><span>7</span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/10/6b/90/ca3bf377.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div></div><div><div><div><span> 成楼</span></div></div><div>有学员群吗？可以加入下吗？方便交流和提升，谢谢。</div><div><p>作者回复：可以看下 iam 仓库根目录下的 README 文档，最后有微信号</p></div><div><div>2021-07-16</div><div><div><i></i></div><div><i></i><span>2</span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/11/04/60/64d166b6.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div></div><div><div><div><span>Fan</span></div></div><div>多行变量 的例子没明白


define USAGE_OPTIONS

Options:
  DEBUG        Whether to generate debug symbols. Default is 0.
  BINS         The binaries to build. Default is all of cmd.
  ...
  V            Set to 1 enable verbose build. Default is 0.
endef</div><div><p>作者回复: USAGE_OPTIONS 的值可以是多行字符串</p></div><div><div>2021-08-11</div><div><div><i></i></div><div><i></i><span>1</span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/15/7b/c5/35f92dad.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div></div><div><div><div><span>Jone_乔泓恺</span></div></div><div>老师，有问格式问题想问下：ifeq 语句中的内容建议要用 tab，还是顶格呢？</div><div><div>2022-07-01</div><div><div><i></i><span></span></div><div><i></i><span></span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/15/7b/c5/35f92dad.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div></div><div><div><div><span>Jone_乔泓恺</span></div></div><div>ifeq ($(origin ROOT_DIR),undefined)
ROOT_DIR := $(abspath $(shell cd $(COMMON_SELF_DIR)/../.. &amp;&amp; pwd -P))
endif
和 
ROOT_DIR ?= $(abspath $(shell cd $(COMMON_SELF_DIR)/../.. &amp;&amp; pwd -P))

请问：这两种方式的效果是否相同？
</div><div><div>2022-06-30</div><div><div><i></i><span></span></div><div><i></i><span></span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div></div><div><div><div><span>lesserror</span></div></div><div>大家有什么不懂的，可以结合：陈皓老师编写的《跟我一起写 Makefile》 (PDF 重制版) 来看，本文受限于篇幅，有些概念可能不能花很大的篇幅去讲解。</div><div><p>作者回复：陈皓老师编写的这份 Makefile 指南很详尽</p></div><div><div>2021-09-29</div><div><div><i></i></div><div><i></i><span></span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/10/6b/90/ca3bf377.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div></div><div><div><div><span>成楼</span></div></div><div>由于缺少云上开发资源，本地虚拟机的环境配置能否给些建议，可以创建一个群方便交流吗？</div><div><p>作者回复：可以看下 IAM 项目根目录下的 README 文档，有微信号</p></div><div><div>2021-07-16</div><div><div><i></i></div><div><i></i><span></span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/10/7f/d3/b5896293.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/resource/image/eb/56/eb5afbf568af2917033e5a860de0b756.png?x-oss-process=image/resize,w_28"></div></div><div><div><div><span>Realm</span></div></div><div>老师，函数 dir ，nodir 注释好像有笔误.</div><div><p>作者回复：没找到你说的哪个位置，可以再明确下位置吗，thanks</p></div><div><div>2021-07-10</div><div><div><i></i><span>3</span></div><div><i></i><span></span></div></div></div></div></div></li><li><div><div data-v-3d2acdda=""><div class="sr-rd-content-center-small"><img class="" src="https://static001.geekbang.org/account/avatar/00/11/01/8c/41adb537.jpg?x-oss-process=image/resize,m_fill,h_68,w_68"></div></div><div><div><div><span>Tiandh</span></div></div><div>老师，这两句话不理解
因为伪目标不是文件，make 无法生成它的依赖关系，也无法决定是否要执行它。
因为伪目标总是会被执行，所以其依赖总是会被决议。</div><div><p>作者回复：就是伪目标总是会被执行</p></div><div><div>2021-06-28</div><div><div><i></i><span>4</span></div><div><i></i><span></span></div></div></div></div></div></li></ul><div> 收起评论<span></span></div></div></sr-rd-content>
                            <toc-bg><toc style="width: initial;overflow: auto!important;"class="simpread-font simpread-theme-root" data-reactid=".1g"><outline class="toc-level-h1" data-reactid=".1g.0" style="width: 175px;"><active data-reactid=".1g.0.0" ></active><a class="toc-outline-theme-github" href="#sr-toc-0" data-reactid=".1g.0.1"><span data-reactid=".1g.0.1.0">特别放送 | 给你一份 Go 项目中最常用的 Makefile 核心语法</span></a></outline><outline class="toc-level-h2" data-reactid=".1g.1" style="width: 165px;"><active data-reactid=".1g.1.0"></active><pangu> </pangu><a class="toc-outline-theme-github" href="#sr-toc-1" data-reactid=".1g.1.1"><span data-reactid=".1g.1.1.0">Makefile 的使用方法</span></a></outline><outline class="toc-level-h2" data-reactid=".1g.2" style="width: 165px;"><active data-reactid=".1g.2.0"></active><pangu> </pangu><a class="toc-outline-theme-github" href="#sr-toc-2" data-reactid=".1g.2.1"><span data-reactid=".1g.2.1.0">Makefile 规则介绍</span></a></outline><outline class="toc-level-h3" data-reactid=".1g.3" style="width: 155px;"><active data-reactid=".1g.3.0"></active><a class="toc-outline-theme-github" href="#sr-toc-3" data-reactid=".1g.3.1"><span data-reactid=".1g.3.1.0">规则语法</span></a></outline><outline class="toc-level-h3" data-reactid=".1g.4" style="width: 155px;"><active data-reactid=".1g.4.0"></active><a class="toc-outline-theme-github" href="#sr-toc-4" data-reactid=".1g.4.1"><span data-reactid=".1g.4.1.0">伪目标</span></a></outline><outline class="toc-level-h3" data-reactid=".1g.5" style="width: 155px;"><active data-reactid=".1g.5.0"></active><pangu> </pangu><a class="toc-outline-theme-github" href="#sr-toc-5" data-reactid=".1g.5.1"><span data-reactid=".1g.5.1.0">order-only 依赖</span></a></outline><outline class="toc-level-h2" data-reactid=".1g.6" style="width: 165px;"><active data-reactid=".1g.6.0"></active><pangu> </pangu><a class="toc-outline-theme-github" href="#sr-toc-6" data-reactid=".1g.6.1"><span data-reactid=".1g.6.1.0">Makefile 语法概览</span></a></outline><outline class="toc-level-h3" data-reactid=".1g.7" style="width: 155px;"><active data-reactid=".1g.7.0"></active><a class="toc-outline-theme-github" href="#sr-toc-7" data-reactid=".1g.7.1"><span data-reactid=".1g.7.1.0">命令</span></a></outline><outline class="toc-level-h3" data-reactid=".1g.8" style="width: 155px;"><active data-reactid=".1g.8.0"></active><a class="toc-outline-theme-github" href="#sr-toc-8" data-reactid=".1g.8.1"><span data-reactid=".1g.8.1.0">变量</span></a></outline><outline class="toc-level-h3" data-reactid=".1g.9" style="width: 155px;"><active data-reactid=".1g.9.0"></active><a class="toc-outline-theme-github" href="#sr-toc-9" data-reactid=".1g.9.1"><span data-reactid=".1g.9.1.0">条件语句</span></a></outline><outline class="toc-level-h3" data-reactid=".1g.a" style="width: 155px;"><active data-reactid=".1g.a.0"></active><a class="toc-outline-theme-github" href="#sr-toc-10" data-reactid=".1g.a.1"><span data-reactid=".1g.a.1.0">函数</span></a></outline><outline class="toc-level-h2" data-reactid=".1g.b" style="width: 165px;"><active data-reactid=".1g.b.0"></active><a class="toc-outline-theme-github" href="#sr-toc-11" data-reactid=".1g.b.1"><span data-reactid=".1g.b.1.0">引入其他 Makefile</span></a></outline><outline class="toc-level-h2" data-reactid=".1g.c" style="width: 165px;"><active data-reactid=".1g.c.0"></active><pangu> </pangu><a class="toc-outline-theme-github" href="#sr-toc-12" data-reactid=".1g.c.1"><span data-reactid=".1g.c.1.0">总结</span></a></outline><outline class="toc-level-h2" data-reactid=".1g.d" style="width: 165px;"><active data-reactid=".1g.d.0"></active><a class="toc-outline-theme-github" href="#sr-toc-13" data-reactid=".1g.d.1"><span data-reactid=".1g.d.1.0">精选留言 (10)</span></a></outline></toc></toc-bg>
                            <sr-rd-footer>
                                <sr-rd-footer-group>
                                    <sr-rd-footer-line></sr-rd-footer-line>
                                    <sr-rd-footer-text>全文完</sr-rd-footer-text>
                                    <sr-rd-footer-line></sr-rd-footer-line>
                                </sr-rd-footer-group>
                                <sr-rd-footer-copywrite>
                                    <div>本文由 <a href="http://ksria.com/simpread" target="_blank">简悦 SimpRead</a> 转码，用以提升阅读体验，<a href="https://time.geekbang.org/column/article/389115" target="_blank">原文地址 </a></div>
                                </sr-rd-footer-copywrite>
                            </sr-rd-footer>
                        </sr-read>
                    </body>
                </html>