
                <html lang="en" class="simpread-font simpread-theme-root" style='undefined'>
                    <head>
                        <meta charset="utf-8">
                        <meta http-equiv="content-type" content="text/html; charset=UTF-8;charset=utf-8">
                        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
                        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=1">
                        <meta name="author" content="Kenshin"/>
                        <meta name="description" content="简悦 SimpRead - 如杂志般沉浸式阅读体验的扩展" />
                        <meta name="keywords" content="Chrome extension, Chrome 扩展, 阅读模式, 沉浸式阅读, 简悦, 简阅, read mode, reading mode, reader view, firefox, firefox addon, userscript, safari, opera, tampermonkey"/>
                        <meta name="thumbnail" content="https://simpread-1254315611.cos.ap-shanghai.myqcloud.com/static/introduce-2.png"/>
                        <meta property="og:title" content="简悦 SimpRead - 如杂志般沉浸式阅读体验的扩展"/>
                        <meta property="og:type" content="website">
                        <meta property="og:local" content="zh_CN"/>
                        <meta property="og:url" content="http://ksria.com/simpread"/>
                        <meta property="og:image" content="https://simpread-1254315611.cos.ap-shanghai.myqcloud.com/static/introduce-2.png"/>
                        <meta property="og:image:type" content="image/png"/>
                        <meta property="og:image:width" content="960"/>
                        <meta property="og:image:height" content="355"/>
                        <meta property="og:site_name" content="http://ksria.com/simpread"/>
                        <meta property="og:description" content="简悦 SimpRead - 如杂志般沉浸式阅读体验的扩展"/>
                        <style type="text/css">.simpread-font{font:300 16px/1.8 -apple-system,PingFang SC,Microsoft Yahei,Lantinghei SC,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;color:#333;text-rendering:optimizelegibility;-webkit-text-size-adjust:100%;-webkit-font-smoothing:antialiased}.simpread-hidden{display:none}.simpread-read-root{display:-webkit-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;margin:0;top:-1000px;left:0;width:100%;z-index:2147483646;overflow-x:hidden;opacity:0;-webkit-transition:all 1s cubic-bezier(.23,1,.32,1) .1s;transition:all 1s cubic-bezier(.23,1,.32,1) .1s}.simpread-read-root-show{top:0}.simpread-read-root-hide{top:1000px}sr-read{display:-webkit-flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-flow:column nowrap;flex-flow:column;margin:20px 20%;min-width:400px;min-height:400px;text-align:center}read-process{position:fixed;top:0;left:0;height:3px;width:100%;background-color:#64b5f6;-webkit-transition:width 2s;transition:width 2s;z-index:20000}sr-rd-content-error{display:block;position:relative;margin:0;margin-bottom:30px;padding:25px;background-color:rgba(0,0,0,.05)}sr-rd-footer{-webkit-box-orient:vertical;-ms-flex-direction:column;flex-direction:column;font-size:14px}sr-rd-footer,sr-rd-footer-group{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-direction:normal}sr-rd-footer-group{-webkit-box-orient:horizontal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}sr-rd-footer-line{width:100%;border-top:1px solid #e0e0e0}sr-rd-footer-text{min-width:150px}sr-rd-footer-copywrite{margin:10px 0 0;color:inherit}sr-rd-footer-copywrite abbr{-webkit-font-feature-settings:normal;font-feature-settings:normal;font-variant:normal;text-decoration:none}sr-rd-footer-copywrite .second{margin:10px 0}sr-rd-footer-copywrite .third a:hover{border:none!important}sr-rd-footer-copywrite .third a:first-child{margin-right:50px}sr-rd-footer-copywrite .sr-icon{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:33px;height:33px;opacity:.8;-webkit-transition:opacity .5s ease;transition:opacity .5s ease;cursor:pointer}sr-rd-footer-copywrite .sr-icon:hover{opacity:1}sr-rd-footer-copywrite a,sr-rd-footer-copywrite a:link,sr-rd-footer-copywrite a:visited{margin:0;padding:0;color:inherit;background-color:transparent;font-size:inherit!important;line-height:normal;text-decoration:none;vertical-align:baseline;vertical-align:initial;border:none!important;box-sizing:border-box}sr-rd-footer-copywrite a:focus,sr-rd-footer-copywrite a:hover,sr-rd-footer a:active{color:inherit;text-decoration:none;border-bottom:1px dotted!important}.simpread-blocks{text-decoration:none!important}.simpread-blocks *{margin:0}.simpread-blocks a{padding:0;text-decoration:none!important}.simpread-blocks img{margin:0;padding:0;border:0;background:transparent;box-shadow:none}.simpread-focus-root{display:block;position:fixed;top:0;left:0;right:0;bottom:0;background-color:hsla(0,0%,92%,.9);z-index:2147483645;opacity:0;-webkit-transition:opacity 1s cubic-bezier(.23,1,.32,1) 0ms;transition:opacity 1s cubic-bezier(.23,1,.32,1) 0ms}.simpread-focus-highlight{position:relative;box-shadow:0 0 0 20px #fff;background-color:#fff;overflow:visible;z-index:2147483646}.sr-controlbar-bg sr-rd-crlbar,.sr-controlbar-bg sr-rd-crlbar fab{z-index:2147483647}sr-rd-crlbar.controlbar{position:fixed;right:0;bottom:0;width:100px;height:100%;opacity:0;-webkit-transition:opacity .5s ease;transition:opacity .5s ease}sr-rd-crlbar.controlbar:hover{opacity:1}sr-rd-crlbar fap *{box-sizing:border-box}@media (max-height:620px){fab{zoom:.8}}@media (max-height:783px){dialog-gp dialog-content{max-height:580px}dialog-gp dialog-footer{border-top:1px solid #e0e0e0}}.simpread-highlight-selector{outline:3px dashed #1976d2!important;cursor:pointer!important}.simpread-highlight-controlbar,.simpread-highlight-selector{background-color:#fafafa!important;opacity:.8!important;-webkit-transition:opacity .5s ease!important;transition:opacity .5s ease!important}.simpread-highlight-controlbar{position:relative!important;border:3px dashed #1976d2!important}simpread-highlight,sr-snapshot-ctlbar{position:fixed;top:0;left:0;right:0;padding:15px;height:50px;background-color:rgba(50,50,50,.9);box-shadow:0 2px 5px rgba(0,0,0,.26);box-sizing:border-box;z-index:2147483640}simpread-highlight,sr-highlight-ctl,sr-snapshot-ctlbar{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}sr-highlight-ctl{margin:0 5px;width:50px;height:20px;color:#fff;background-color:#1976d2;border-radius:4px;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);cursor:pointer}toc-bg{position:fixed;left:0;top:0;width:50px;height:200px;font-size:medium}toc-bg:hover{z-index:3}.toc-bg-hidden{opacity:0;-webkit-transition:opacity .5s ease;transition:opacity .5s ease}.toc-bg-hidden:hover{opacity:1;z-index:3}.toc-bg-hidden:hover toc{width:180px}toc *{all:unset}toc{position:fixed;left:0;top:100px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;padding:10px;width:0;max-width:200px;max-height:500px;overflow-x:hidden;overflow-y:hidden;cursor:pointer;border:1px solid hsla(0,0%,62%,.22);-webkit-transition:width .5s;transition:width .5s}toc:hover{overflow-y:auto}toc.mini:hover{width:200px!important}toc::-webkit-scrollbar{width:3px}toc::-webkit-scrollbar-thumb{border-radius:10px;background-color:hsla(36,2%,54%,.5)}toc outline{position:relative;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;padding:2px 0;min-height:21px;line-height:21px;text-align:left}toc outline a,toc outline a:active,toc outline a:focus,toc outline a:visited{display:block;width:100%;color:inherit;font-size:11px;text-decoration:none!important;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}toc outline a:hover{font-weight:700!important}toc outline a.toc-outline-theme-dark,toc outline a.toc-outline-theme-night{color:#fff!important}.toc-level-h1{padding-left:5px}.toc-level-h2{padding-left:15px}.toc-level-h3{padding-left:25px}.toc-level-h4{padding-left:35px}.toc-outline-active{border-left:2px solid #f44336}toc outline active{position:absolute;left:0;top:0;bottom:0;padding:0 0 0 3px;border-left:2px solid #e8e8e8}sr-kbd{background:-webkit-gradient(linear,0 0,0 100%,from(#fff785),to(#ffc542));border:1px solid #e3be23;-o-border-image:none;border-image:none;-o-border-image:initial;border-image:initial;position:absolute;left:0;padding:1px 3px 0;font-size:11px!important;font-weight:700;box-shadow:0 3px 7px 0 rgba(0,0,0,.3);overflow:hidden;border-radius:3px}.sr-kbd-a{position:relative}kbd-mapping{position:fixed;left:5px;bottom:5px;-ms-flex-flow:row;flex-flow:row;width:250px;height:500px;background-color:#fff;border:1px solid hsla(0,0%,62%,.22);box-shadow:0 2px 5px rgba(0,0,0,.26);border-radius:3px}kbd-mapping,kbd-maps{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}kbd-maps{margin:40px 0 20px;width:100%;overflow-x:auto}kbd-maps::-webkit-scrollbar-thumb{background-clip:padding-box;border-radius:10px;border:2px solid transparent;background-color:rgba(85,85,85,.55)}kbd-maps::-webkit-scrollbar{width:10px;-webkit-transition:width .7s cubic-bezier(.4,0,.2,1);transition:width .7s cubic-bezier(.4,0,.2,1)}kbd-mapping kbd-map-title{position:absolute;margin:5px 0;width:100%;font-size:14px;font-weight:700}kbd-maps-group{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}kbd-maps-title{margin:5px 0;padding-left:53px;font-size:12px;font-weight:700}kbd-map kbd{display:inline-block;padding:3px 5px;font-size:11px;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #c6cbd1;border-bottom-color:#959da5;border-radius:3px;box-shadow:inset 0 -1px 0 #959da5}kbd-map kbd-name{display:inline-block;text-align:right;width:50px}kbd-map kbd-desc{padding-left:3px}sharecard-bg{position:fixed;top:0;left:0;width:100%;height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:rgba(0,0,0,.4);z-index:2147483647}sharecard{max-width:450px;background-color:#64b5f6}sharecard,sharecard-head{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}sharecard-head{margin:25px;color:#fff;border-radius:10px;box-shadow:0 2px 6px 0 rgba(0,0,0,.2),0 25px 50px 0 rgba(0,0,0,.15)}sharecard-card{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}sharecard-card,sharecard-top{display:-webkit-box;display:-ms-flexbox;display:flex}sharecard-top{-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding-right:5px;height:65px;background-color:#fff;color:#878787;font-size:25px;font-weight:500;border-top-left-radius:10px;border-top-right-radius:10px}sharecard-top span.logos{display:block;width:48px;height:48px;margin:5px;background-repeat:no-repeat;background-position:50%;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAABU1BMVEUAAAAnNJMnNZI3Q5onNJInNJMnNJInNJMnNJI8SJ0tOZY/S55EUKAoNJI6RpwoNJNIU6InNJInNJImNJI7SJwmNJJ2fLUiMJFKVaNCTJ9faK1HUaJOWKVSXaUnNJNYY6pye7cmM5JXYKhwebMjMI8mL4719fW9vb0oNZP/UlLz8/QqN5TAwMAnNJPv7+/Pz8/q6+/p6enNzc3Kysry8vMsOJXc3env7/LU1uXo29vR0dHOzs7ExMTwjo73bW37XV3Aj1TCYELl5u3n5+fW2Obn6O7f4OrZ2+g0QJkxPpgvO5bh4uvS1OTP0ePCwsJQW6ZLVqTs7fHd3d3V1dXqv79VX6lET6A1TIxXUIBSgHxWQnpelHf+WVnopkXqbC7j5Ozi4uLDw8NGUaFATJ9SgH3r6+vGyd7BxNva2trX19ejqM2gpczHx8dze7Zha67Z2dlTgH1aXQeSAAAAJnRSTlMA6ff+497Y8NL+/fv49P379sqab/BeOiX06tzVy8m/tKqpalA7G6oKj0EAAAJlSURBVEjHndNXWxpBFIDhcS2ICRLAkt4Dx4WhLk0E6R0MYoIISrWX5P9f5cwSIRC2+T1czMV5n2FnZwn2eWONUqCAv3H2Uf5Ra1hx4+0WEXtDQW0fCPYJ1EffEfIV4CSROAE4jsePoTFsNmTJF/IeIHF2lgCIn57GodlqDWXBK7IwBYatVlMWFAildPKX7I3m74Z9fsCiQChoimoFQAz04Ad2gH1n9fv9n9hgMNDr9euLWD6fLxQKxaLfb7dTSlahbFVdEPwIQtrAihZQgyKCtCagbQe3xh0QFMgy5MR11+ewYY5/qlZ7vT2xu93ULKjbFLpiUxnIIwjgKmVTLDUFXMrAi2NJWCRLIthTBo4xyOLKpwyqU6CuDCI41hFBCVdOhyLw4FgJ1skCAiyl9BSHbCorgo6VJXTru5hrVCQS8Yr5xLzX59YJSFpVFwD9U0BGC3hGdFpATgRupTGe9R9I1b1ePBvXKDyvq/O/44LT4/E4BUbSCAwj8Evq6HlnOBprx6JhJz8Gktc7xeaP9ndY+0coQvCccFBD4JW60UIY50ciLOAODAQRVOeCHm4Q3Xks6uRDY+CQ+AR4T2wMYh6+jMCIQOp78CFoj0H7EQgIuhI3dGaHCrwgADwCPjJvA372GRigCJg49FUdk3D87pq3zp4SA5zc1Zh9DxfwkpjgUg5Mv+lbeE3McC8Lpu7SA3wk2xzcqL2tN5DfIsQC8HB7UamUy6FQOpTO5QKBQDZbKnWSyUzGjdWCwaDA8+7Le4BNgm3qQGWchYh9s5hNq6wVbBlbwhZYOp3OYOA4zmgEypnM2zj8ByIdedKrH8vDAAAAAElFTkSuQmCC");zoom:.8}sharecard-content{padding:15px;max-height:500px;font-size:20px;text-align:justify;background-color:#2196f3;overflow-x:hidden;overflow-y:auto}sharecard-via{padding:10px;font-size:10px;background-color:#2196f3}sharecard-footer{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding-right:5px;height:100px;background-color:#fff;color:#878787;font-size:15px;font-weight:500;border-bottom-left-radius:10px;border-bottom-right-radius:10px}sharecard-footer,sharecard-footer div{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}sharecard-footer span.qrcode{display:block;width:100px;height:100px;margin:5px;background-repeat:no-repeat;background-position:50%;background-image:url("data:image/png;base64,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")}sharecard-control{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 19px;height:80px;background-color:#fff}simpread-snapshot{width:100%;height:100%;cursor:move;z-index:2147483645}simpread-snapshot,sr-mask{position:fixed;left:0;top:0}sr-mask{background-color:rgba(0,0,0,.1)}.simpread-feedback,.simpread-urlscheme{position:fixed;right:20px;bottom:20px;z-index:2147483646}simpread-feedback,simpread-urlscheme{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:20px 20px 0;width:500px;color:rgba(51,51,51,.87);background-color:#fff;border-radius:3px;box-shadow:0 0 2px rgba(0,0,0,.12),0 2px 2px rgba(0,0,0,.26);overflow:hidden;-webkit-transform-origin:bottom;transform-origin:bottom;-webkit-transition:all .6s ease;transition:all .6s ease}simpread-feedback *,simpread-urlscheme *{font-size:12px!important;box-sizing:border-box}simpread-feedback.active,simpread-urlscheme.active{-webkit-animation-name:srFadeInUp;animation-name:srFadeInUp;-webkit-animation-duration:.45s;animation-duration:.45s;-webkit-animation-fill-mode:both;animation-fill-mode:both}simpread-feedback.hide,simpread-urlscheme.hide{-webkit-animation-name:srFadeInDown;animation-name:srFadeInDown;-webkit-animation-duration:.45s;animation-duration:.45s;-webkit-animation-fill-mode:both;animation-fill-mode:both}simpread-feedback sr-fb-label,simpread-urlscheme sr-urls-label{width:100%}simpread-feedback sr-fb-head,simpread-urlscheme sr-urls-head{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;margin-bottom:5px;width:100%}simpread-feedback sr-fb-content,simpread-urlscheme sr-urls-content{margin-bottom:5px;width:100%}simpread-feedback sr-urls-footer,simpread-urlscheme sr-urls-footer{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;width:100%}simpread-feedback sr-fb-a,simpread-urlscheme sr-urls-a{color:#2163f7;cursor:pointer}simpread-feedback text-field-state,simpread-urlscheme text-field-state{border-top:none rgba(34,101,247,.8)!important;border-left:none rgba(34,101,247,.8)!important;border-right:none rgba(34,101,247,.8)!important;border-bottom:2px solid rgba(34,101,247,.8)!important}simpread-feedback switch,simpread-urlscheme switch{margin-top:0!important}@-webkit-keyframes srFadeInUp{0%{opacity:0;-webkit-transform:translateY(100px);transform:translateY(100px)}to{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes srFadeInUp{0%{opacity:0;-webkit-transform:translateY(100px);transform:translateY(100px)}to{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes srFadeInDown{0%{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}to{opacity:0;-webkit-transform:translateY(100px);transform:translateY(100px)}}@keyframes srFadeInDown{0%{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}to{opacity:0;-webkit-transform:translateY(100px);transform:translateY(100px)}}simpread-feedback sr-fb-head{font-weight:700}simpread-feedback sr-fb-content{-webkit-box-orient:vertical;-ms-flex-direction:column;flex-direction:column}simpread-feedback sr-fb-content,simpread-feedback sr-fb-footer{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-direction:normal}simpread-feedback sr-fb-footer{-webkit-box-orient:horizontal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;width:100%}simpread-feedback sr-close{position:absolute;right:20px;cursor:pointer;-webkit-transition:all 1s cubic-bezier(.23,1,.32,1) .1s;transition:all 1s cubic-bezier(.23,1,.32,1) .1s;z-index:200}simpread-feedback sr-close:hover{-webkit-transform:rotate(-15deg) scale(1.3);transform:rotate(-15deg) scale(1.3)}simpread-feedback sr-stars{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-top:10px}simpread-feedback sr-stars i{margin-right:10px;cursor:pointer}simpread-feedback sr-stars i svg{-webkit-transition:all 1s cubic-bezier(.23,1,.32,1) .1s;transition:all 1s cubic-bezier(.23,1,.32,1) .1s}simpread-feedback sr-stars i svg:hover{-webkit-transform:rotate(-15deg) scale(1.3);transform:rotate(-15deg) scale(1.3)}simpread-feedback sr-stars i.active svg{-webkit-transform:rotate(0) scale(1);transform:rotate(0) scale(1)}simpread-feedback sr-emojis{display:block;height:100px;overflow:hidden}simpread-feedback sr-emoji{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-transition:.3s;transition:.3s}simpread-feedback sr-emoji>svg{margin:15px 0;width:70px;height:70px;-ms-flex-negative:0;flex-shrink:0}simpread-feedback sr-stars-footer{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin:10px 0 20px}</style>
                        <style type="text/css">.simpread-theme-root{font-size:62.5%!important}sr-rd-content,sr-rd-desc,sr-rd-title{width:100%}sr-rd-title{display:-webkit-box;margin:1em 0 .5em;overflow:hidden;text-overflow:ellipsis;text-rendering:optimizelegibility;-webkit-line-clamp:3;-webkit-box-orient:vertical}sr-rd-content{text-align:left;word-break:break-word}sr-rd-desc{text-align:justify;line-height:2.4;margin:0 0 1.2em;box-sizing:border-box}sr-rd-content{font-size:25.6px;font-size:1.6rem;line-height:1.6}sr-rd-content h1,sr-rd-content h1 *,sr-rd-content h2,sr-rd-content h2 *,sr-rd-content h3,sr-rd-content h3 *,sr-rd-content h4,sr-rd-content h4 *,sr-rd-content h5,sr-rd-content h5 *,sr-rd-content h6,sr-rd-content h6 *{word-break:break-all}sr-rd-content div,sr-rd-content p{display:block;float:inherit;line-height:1.6;font-size:25.6px;font-size:1.6rem}sr-rd-content div,sr-rd-content p,sr-rd-content pre,sr-rd-content sr-blockquote{margin:0 0 1.2em;word-break:break-word}sr-rd-content a{padding:0 5px;vertical-align:baseline;vertical-align:initial}sr-rd-content a,sr-rd-content a:link{color:inherit;font-size:inherit;font-weight:inherit;border:none}sr-rd-content a:hover{background:transparent}sr-rd-content img{margin:10px;padding:5px;max-width:100%;background:#fff;border:1px solid #bbb;box-shadow:1px 1px 3px #d4d4d4}sr-rd-content figcaption{text-align:center;font-size:14px}sr-rd-content sr-blockquote{display:block;position:relative;padding:15px 25px;text-align:left;line-height:inherit}sr-rd-content sr-blockquote:before{position:absolute}sr-rd-content sr-blockquote *{margin:0;font-size:inherit}sr-rd-content table{width:100%;margin:0 0 1.2em;word-break:keep-all;word-break:normal;overflow:auto;border:none}sr-rd-content table td,sr-rd-content table th{border:none}sr-rd-content ul{margin:0 0 1.2em;margin-left:1.3em;padding:0;list-style:disc}sr-rd-content ol{list-style:decimal;margin:0;padding:0}sr-rd-content ol li,sr-rd-content ul li{font-size:inherit;list-style:disc;margin:0 0 1.2em}sr-rd-content ol li{list-style:decimal;margin-left:1.3em}sr-rd-content ol li *,sr-rd-content ul li *{margin:0;text-align:left;text-align:initial}sr-rd-content li ol,sr-rd-content li ul{margin-bottom:.8em;margin-left:2em}sr-rd-content li ul{list-style:circle}sr-rd-content pre{font-family:Consolas,Monaco,Andale Mono,Source Code Pro,Liberation Mono,Courier,monospace;display:block;padding:15px;line-height:1.5;word-break:break-all;word-wrap:break-word;white-space:pre;overflow:auto}sr-rd-content pre,sr-rd-content pre *,sr-rd-content pre div{font-size:17.6px;font-size:1.1rem}sr-rd-content li pre code,sr-rd-content p pre code,sr-rd-content pre{background-color:transparent;border:none}sr-rd-content pre code{margin:0;padding:0}sr-rd-content pre code,sr-rd-content pre code *{font-size:17.6px;font-size:1.1rem}sr-rd-content pre p{margin:0;padding:0;color:inherit;font-size:inherit;line-height:inherit}sr-rd-content li code,sr-rd-content p code{margin:0 4px;padding:2px 4px;font-size:17.6px;font-size:1.1rem}sr-rd-content mark{margin:0 5px;padding:2px;background:#fffdd1;border-bottom:1px solid #ffedce}.sr-rd-content-img{width:90%;height:auto}.sr-rd-content-img-load{width:48px;height:48px;margin:0;padding:0;border-style:none;border-width:0;background-repeat:no-repeat;background-image:url(data:image/gif;base64,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)}.sr-rd-content-center{text-align:center;display:-webkit-box;-webkit-box-align:center;-webkit-box-pack:center;-webkit-box-orient:vertical}.sr-rd-content-center-small{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex}.sr-rd-content-center-small img{margin:0;padding:0;border:0;box-shadow:none}img.simpread-img-broken{cursor:pointer}.sr-rd-content-nobeautify{margin:0;padding:0;border:0;box-shadow:0 0 0}sr-rd-mult{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;margin:0 0 16px;padding:16px 0 24px;width:100%;background-color:#fff;border-radius:4px;box-shadow:0 1px 2px 0 rgba(60,64,67,.3),0 2px 6px 2px rgba(60,64,67,.15)}sr-rd-mult:hover{-webkit-transition:all .45s 0ms;transition:all .45s 0ms;box-shadow:1px 1px 8px rgba(0,0,0,.16)}sr-rd-mult sr-rd-mult-content{padding:0 16px;overflow:auto}sr-rd-mult sr-rd-mult-avatar,sr-rd-mult sr-rd-mult-content{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}sr-rd-mult sr-rd-mult-avatar{-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0 15px}sr-rd-mult sr-rd-mult-avatar span{display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;max-width:75px;overflow:hidden;text-overflow:ellipsis;text-align:left;font-size:16px;font-size:1rem}sr-rd-mult sr-rd-mult-avatar img{margin-bottom:0;max-width:50px;max-height:50px;width:50px;height:50px;border-radius:50%}sr-rd-mult sr-rd-mult-content img{max-width:80%}sr-rd-mult sr-rd-mult-avatar .sr-rd-content-center{margin:0}sr-page{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;width:100%}</style>
                        <style type="text/css">sr-rd-theme-github{display:none}sr-rd-content h1,sr-rd-content h2,sr-rd-content h3,sr-rd-content h4,sr-rd-content h5,sr-rd-content h6{position:relative;margin-top:1em;margin-bottom:1pc;font-weight:700;line-height:1.4;text-align:left;color:#363636}sr-rd-content h1{padding-bottom:.3em;font-size:57.6px;font-size:3.6rem;line-height:1.2}sr-rd-content h2{padding-bottom:.3em;font-size:44.8px;font-size:2.8rem;line-height:1.225}sr-rd-content h3{font-size:38.4px;font-size:2.4rem;line-height:1.43}sr-rd-content h4{font-size:32px;font-size:2rem}sr-rd-content h5,sr-rd-content h6{font-size:25.6px;font-size:1.6rem}sr-rd-content h6{color:#777}sr-rd-content ol,sr-rd-content ul{list-style-type:disc;padding:0;padding-left:2em}sr-rd-content ol ol,sr-rd-content ul ol{list-style-type:lower-roman}sr-rd-content ol ol ol,sr-rd-content ol ul ol,sr-rd-content ul ol ol,sr-rd-content ul ul ol{list-style-type:lower-alpha}sr-rd-content table{width:100%;overflow:auto;word-break:normal;word-break:keep-all}sr-rd-content table th{font-weight:700}sr-rd-content table td,sr-rd-content table th{padding:6px 13px;border:1px solid #ddd}sr-rd-content table tr{background-color:#fff;border-top:1px solid #ccc}sr-rd-content table tr:nth-child(2n){background-color:#f8f8f8}sr-rd-content sr-blockquote{border-left:4px solid #ddd}.simpread-theme-root{background-color:#fff;color:#333}sr-rd-title{font-family:PT Sans,SF UI Display,\.PingFang SC,PingFang SC,Neue Haas Grotesk Text Pro,Arial Nova,Segoe UI,Microsoft YaHei,Microsoft JhengHei,Helvetica Neue,Source Han Sans SC,Noto Sans CJK SC,Source Han Sans CN,Noto Sans SC,Source Han Sans TC,Noto Sans CJK TC,Hiragino Sans GB,sans-serif;font-size:54.4px;font-size:3.4rem;font-weight:700;line-height:1.3}sr-rd-desc{position:relative;margin:0;margin-bottom:30px;padding:25px;padding-left:56px;font-size:28.8px;font-size:1.8rem;color:#777;background-color:rgba(0,0,0,.05);box-sizing:border-box}sr-rd-desc:before{content:"\201C";position:absolute;top:-28px;left:16px;font-size:80px;font-family:Arial;color:rgba(0,0,0,.15)}sr-rd-content,sr-rd-content *,sr-rd-content div,sr-rd-content p{color:#363636;font-weight:400;line-height:1.8}sr-rd-content b *,sr-rd-content strong,sr-rd-content strong * sr-rd-content b{-webkit-animation:none 0s ease 0s 1 normal none running;animation:none 0s ease 0s 1 normal none running;-webkit-backface-visibility:visible;backface-visibility:visible;background:transparent none repeat 0 0/auto auto padding-box border-box scroll;border:medium none currentColor;border-collapse:separate;-o-border-image:none;border-image:none;border-radius:0;border-spacing:0;bottom:auto;box-shadow:none;box-sizing:content-box;caption-side:top;clear:none;clip:auto;color:#000;-webkit-columns:auto;-moz-columns:auto;columns:auto;-webkit-column-count:auto;-moz-column-count:auto;column-count:auto;-webkit-column-fill:balance;-moz-column-fill:balance;column-fill:balance;-webkit-column-gap:normal;-moz-column-gap:normal;column-gap:normal;-webkit-column-rule:medium none currentColor;-moz-column-rule:medium none currentColor;column-rule:medium none currentColor;-webkit-column-span:1;-moz-column-span:1;column-span:1;-webkit-column-width:auto;-moz-column-width:auto;column-width:auto;content:normal;counter-increment:none;counter-reset:none;cursor:auto;direction:ltr;display:inline;empty-cells:show;float:none;font-family:serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;line-height:normal;height:auto;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;left:auto;letter-spacing:normal;list-style:disc outside none;margin:0;max-height:none;max-width:none;min-height:0;min-width:0;opacity:1;orphans:2;outline:medium none invert;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;-webkit-perspective:none;perspective:none;-webkit-perspective-origin:50% 50%;perspective-origin:50% 50%;position:static;right:auto;-moz-tab-size:8;-o-tab-size:8;tab-size:8;table-layout:auto;text-align:left;text-align-last:auto;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;top:auto;-webkit-transform:none;transform:none;-webkit-transform-origin:50% 50% 0;transform-origin:50% 50% 0;-webkit-transform-style:flat;transform-style:flat;-webkit-transition:none 0s ease 0s;transition:none 0s ease 0s;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:2;width:auto;word-spacing:normal;z-index:auto;all:initial}sr-rd-content a,sr-rd-content a:link{color:#4183c4;text-decoration:none}sr-rd-content a:active,sr-rd-content a:focus,sr-rd-content a:hover{color:#4183c4;text-decoration:underline}sr-rd-content pre{background-color:#f7f7f7;border-radius:3px}sr-rd-content li code,sr-rd-content p code{background-color:rgba(0,0,0,.04);border-radius:3px}.simpread-multi-root{background:#f8f9fa}</style>
                        <style type="text/css"></style>
                        <style type="text/css">@media (pointer:coarse){sr-read{margin:20px 5%!important;min-width:0!important;max-width:90%!important}sr-rd-title{margin-top:0;font-size:2.7rem}sr-rd-content sr-blockquote,sr-rd-desc{margin:10 0!important;padding:0 0 0 10px!important;width:90%;font-size:1.8rem;font-style:normal;line-height:1.7;text-align:justify}sr-rd-content{font-size:1.75rem;font-weight:300}sr-rd-content figure{margin:0;padding:0;text-align:center}sr-rd-content a,sr-rd-content a:link,sr-rd-content li code,sr-rd-content p code{font-size:inherit}sr-rd-footer{margin-top:20px}sr-blockquote,sr-blockquote *{margin:5px!important;padding:5px!important}sr-rd-content h1,sr-rd-content h2,sr-rd-content h3,sr-rd-content h4,sr-rd-content h5,sr-rd-content h6,sr-rd-title{font-family:PingFang SC,Verdana,Helvetica Neue,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;color:#000;font-weight:100;line-height:1.35}sr-rd-content-h1,sr-rd-content-h2,sr-rd-content-h3,sr-rd-content-h4,sr-rd-content-h5,sr-rd-content-h6,sr-rd-content h1,sr-rd-content h2,sr-rd-content h3,sr-rd-content h4,sr-rd-content h5,sr-rd-content h6{margin-top:1.2em;margin-bottom:.6em;line-height:1.35}sr-rd-content-h1,sr-rd-content h1{font-size:1.8em}sr-rd-content-h2,sr-rd-content h2{font-size:1.6em}sr-rd-content-h3,sr-rd-content h3{font-size:1.4em}sr-rd-content-h4,sr-rd-content-h5,sr-rd-content-h6,sr-rd-content h4,sr-rd-content h5,sr-rd-content h6{font-size:1.2em}sr-rd-content-ul,sr-rd-content ul{margin-left:1.3em!important;list-style:disc}sr-rd-content-ol,sr-rd-content ol{list-style:decimal;margin-left:1.9em!important}sr-rd-content-ol ol,sr-rd-content-ol ul,sr-rd-content-ul ol,sr-rd-content-ul ul,sr-rd-content li ol,sr-rd-content li ul{margin-bottom:.8em;margin-left:2em!important}sr-rd-content img{margin:0;padding:0;border:0;max-width:100%!important;height:auto;box-shadow:0 20px 20px -10px rgba(0,0,0,.1)}sr-rd-mult{min-width:0;background-color:#fff;box-shadow:0 1px 6px rgba(32,33,36,.28);border-radius:8px}sr-rd-mult sr-rd-mult-avatar div{margin:0}sr-rd-mult sr-rd-mult-avatar .sr-rd-content-center-small{margin:7px 0!important}sr-rd-mult sr-rd-mult-avatar span{display:block}sr-rd-mult sr-rd-mult-content{padding-left:0}@media only screen and (max-device-width:1024px){.simpread-theme-root,html.simpread-theme-root{font-size:80%!important}sr-rd-mult sr-rd-mult-avatar img{width:50px;height:50px;min-width:50px;min-height:50px}toc-bg toc{width:10px!important}toc-bg:hover toc{width:auto!important}}@media only screen and (max-device-width:414px){.simpread-theme-root,html.simpread-theme-root{font-size:70%!important}sr-rd-mult sr-rd-mult-avatar img{width:30px;height:30px;min-width:30px;min-height:30px}}@media only screen and (max-device-width:320px){.simpread-theme-root,html.simpread-theme-root{font-size:90%!important}sr-rd-content p{margin-bottom:.5em}}}</style>
                        <style type="text/css">sr-rd-content *, sr-rd-content p, sr-rd-content div {}sr-rd-content pre code, sr-rd-content pre code * {}sr-rd-desc {}sr-rd-content pre {}sr-rd-title {}</style>
                        <style type="text/css"></style>
                        <style type="text/css"></style>
                        <style type="text/css"></style>
                        <style type="text/css"></style>
                        <style type="text/css">sr-rd-content *, sr-rd-content p, sr-rd-content div {
        font-size: 15px;
    }

    .annote-perview, .annote-perview * {
        color: rgb(85, 85, 85);
        font-weight: 400;
        line-height: 1.8;
    }</style>
                        
                        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/default.min.css">
                        <script>setTimeout(()=>{const e=location.hash.replace("#id=","");let t,a=!1;const n=t=>{for(let n of t){let t;if((t=e.length>6?n.getAttribute("data-id"):n.getAttribute("data-idx"))==e){n.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}),a=!0;break}}};e&&(0==(t=document.getElementsByClassName("sr-unread-card")).length&&(t=document.getElementsByTagName("sr-annote")),n(t),a||n(t=document.getElementsByClassName("sr-annote")))},500);</script>
                        <script>document.addEventListener("DOMContentLoaded",function(){if("localhost"==location.hostname){const t=document.getElementsByTagName("img");for(let o of t){const t=o.src;t.startsWith("http")&&(o.src=location.origin+"/proxy?url="+t)}}},!1);</script>
                        <style>toc a {font-size: inherit!important;font-weight: 300!important;}</style><script>setTimeout(()=>{const max=document.getElementsByTagName('sr-annote-note-tip').length;for(let i=0;i<max;i++){const target=document.getElementsByTagName('sr-annote-note-tip')[i],value=target.dataset.value;value&&(target.innerText=value)}},1000);</script><title>简悦 | 懒人党的福音 -- 顶级全自动化影音系统全方位深入剖析 | 杰森的博客</title>
                    </head>
                    <body>
                        <sr-read style='font-family: "LXGW WenKai Screen";'>
                            <sr-rd-title>懒人党的福音 -- 顶级全自动化影音系统全方位深入剖析 | 杰森的博客</sr-rd-title>
                    <sr-rd-desc style="margin: 0;padding-top: 0;padding-bottom: 0;font-style: normal;font-size: 18px;">懒人党的福音–顶级全自动化影音系统全方位深入剖析首先，为什么我们需要影音系统？ 想象这样一个场景：  打开一个网页，点开搜索框输入想看的电影 / 电视剧 / 音乐 / 书籍，点一个按钮，过几分钟对应的高清资源已经呈现在你的 Emby 影视库中，刮削完毕，字幕配好，你什么都不需要干，只需要找个舒服的地方开开心心地享受就行。</sr-rd-desc>
                    <sr-rd-content><p></p><div>
        <div>
          

          <div>
            

    
  
  
  <article itemscope="" itemtype="http://schema.org/Article" lang="zh-CN">
    

    

    
      

    
    
    
    <div itemprop="articleBody">

      
        <p>首先，为什么我们需要影音系统？</p>
<p>想象这样一个场景：</p>
<sr-blockquote>
<p>打开一个网页，点开搜索框输入想看的电影 / 电视剧 / 音乐 / 书籍，点一个按钮，过几分钟对应的高清资源已经呈现在你的 Emby 影视库中，刮削完毕，字幕配好，你什么都不需要干，只需要找个舒服的地方开开心心地享受就行。</p>
</sr-blockquote>
<p><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://leishi.io/static/8a26eae7c1dabc38b4224546ac504645/0d465/flow.jpg"></div></p>
<p>观影、追剧、刮削、字幕，下载全部自动化，爽不爽？牛不牛逼？开不开心？想不想学？</p>
<p>那么本文就教你如何在 VPS 或 NAS 上实现这一整套流程以及这一切的背后究竟是怎么实现的。</p>
<sr-blockquote>
<p>转载请标注出处。</p>
</sr-blockquote>
<h2 id="sr-toc-0"><a href="#TL-DR" title="TL;DR" one-link-mark="yes"></a>TL;DR</h2><ol>
<li>Emby 负责影片的播放，刮削</li>
<li> Ombi 是一个搜索前端</li>
<li> Sonarr,Radarr,Lidarr,Readarr 负责资源的请求和整理</li>
<li> Prowlarr/Jackett 负责 indexers 的管理和维护</li>
<li> Bazarr/Chinesesubfinder 负责字幕的获取，整理，升级和维护</li>
<li> qBittorrent 和 NZBget 负责资源的实际下载工作</li>
</ol>
<h2 id="sr-toc-1"><a href="#硬件需求" title="硬件需求" one-link-mark="yes"></a>硬件需求</h2><p>最低:</p>
<ul>
<li>CPU: 2 Cores 2 Threads</li>
<li>Ram: 4 GB</li>
<li>Storage: 200 GB</li>
</ul>
<p>建议：</p>
<ul>
<li>CPU: 4 Cores 8 Threads</li>
<li>Ram: 8 GB</li>
<li>Storage: 10 TB</li>
</ul>
<h2 id="sr-toc-2"><a href="#巧妇难为无米之炊" title="巧妇难为无米之炊" one-link-mark="yes"></a>巧妇难为无米之炊</h2><p>那么，首先最重要的问题：巧妇难为无米之炊，我们要怎么获取这些影视资源呢？</p>
<p>摆在我们面前的有三条道路：BT/PT/Usenet，条条道路通罗马。</p>
<sr-blockquote>
<p>以下部分资料来源于 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://leishi.io/blog/posts/2021-12/home-nas-media-center/" one-link-mark="yes">Lei Shi</a>。</p>
</sr-blockquote>
<ol>
<li>BT</li>
</ol>
<p>相信大部分人对 BT 并不陌生，相较于中心化的下载服务器，BT 利用 P2P（Peer-to-Peer）技术，使每个在 P2P 网络中的用户都成为了资源的提供方；而资源则以分块的形式，散落在每个人的硬盘中，除非拿到种子文件，否则任何人都不（太）可能从网络中拿到完整的文件。正是这些特性，使得 BT 自一发布就流行至今。本文中使用的 qBittorrent 即是一款 BT 下载器，另外比较常用的还有 Transmission/Deluge/uTorrent/aria2 等。</p>
<p>比较常用的公网 BT 影视资源站有：</p>
<ul>
<li>Pirate Bay，大名鼎鼎的海盗湾</li>
<li> RARBG，主要是影视资源，质量参差不齐</li>
<li> Nyaa，主要是动漫类资源，追番必备</li>
<li> dmhy，动漫花园，同上</li>
</ul>
<p>优势：</p>
<ul>
<li>新内容多且下载速度快</li>
<li>无入门门槛，免费</li>
</ul>
<p>劣势：</p>
<ul>
<li>旧内容（一般指大于 3 个月）下载速度相当慢</li>
<li>国内有迅雷吸血的问题（我用 qbt 加强版解决此问题）</li>
<li>需要公网 IP 以实现最大下载上传速度</li>
</ul>
<ol start="2">
<li> PT</li>
</ol>
<p>PT（Private Tracker）在技术与 BT 并无本质不同，唯一的区别是，BT 连接的是公开的 Tracker，而 PT 通常需要邀请注册，并且用自己密钥才能连上 Tracker。PT 相比 BT，入门有一定的门槛，高质量的站点要么只通过熟人间口口相传，要么需要捐赠注册，价格从几十到几百不等。拥有帐号后还需要一定的设备和动手能力来保持帐号的活跃。新入门 PT 建议从 PT 吧或者 Reddit 起步，从开放注册的 PT 站点或者有人大量发放的新手站点玩起，慢慢熟悉规则，再逐步进入更好的站点。</p>
<p>优势：</p>
<ul>
<li>不论新旧下载速度都相当不错</li>
<li>没有迅雷吸血的问题</li>
</ul>
<p>劣势</p>
<ul>
<li>资源数量及质量取决于 PT 站本身</li>
<li>有入门门槛且需要一定技术知识</li>
<li>需要公网 IP 以实现最大下载上传速度</li>
</ul>
<ol start="3">
<li> Usenet</li>
</ol>
<p>Usenet 是早期的一种互联网形式，它甚至比现在的互联网 www 更早。在早期的语境中，Usenet 一般指新闻组，类似于 BBS 论坛。在本文中提到的 Usenet，指的是利用 Usenet 网络，存储和分发大容量二进制内容（即各种影视资源）的特性。</p>
<p>相对于 BT 资源的良莠不齐，PT 的高不可攀，Usenet 兼具高质量资源和低门槛（有不少人不间断地从 topsite/PT 下载资源上传到 Usenet），你只要有钱就行，并且也不是很多钱（大约 $40+/ 年），同时还不需要像 PT 一样维护帐号活跃 / 长时间做种。</p>
<p>事实上，如果仅从影视资源角度，Usenet 上的资源比任何一个顶级 PT 都要多、全，甚至有不少玩 PT 的人，使用 Usenet 完全是为了下载上面的资源再上传到 PT 上去；Usenet 另一大优势是极快的下载速度，不像 BT/PT，资源的下载速度严重依赖于做种人数的多少，Usenet 的资源存在服务器上，几乎任何时刻你都可以跑满你的大部分带宽。</p>
<p>Usenet 需要以下 3 个模块共同协作来下载资源：</p>
<p>Indexer，类似于种子搜索网站，提供下载 Usenet 资源需要的 nzb 文件。Indexer 有免费的，有收费的，也有类似于 PT 一样进入门槛很高的，本文不作推荐，新手可以从免费的玩起，熟悉流程后再寻找质量更高的 Indexer。</p>
<p>Provider，负责提供连接 Usenet 的帐号。Usenet 的内容存储是分布式的，但是你需要一个 Provider 才能连上 Usenet 网络，Provider 大部分收费，月付费 $3-$5 左右，这是使用 Usenet 最大的花销。</p>
<p>nzb 下载软件，一般用 nzbget 即可。</p>
<p>优势</p>
<ul>
<li>资源齐全且无论新旧都有极高的下载速度</li>
<li>不需要公网 IP</li>
</ul>
<p>劣势</p>
<ul>
<li>没有中文</li>
<li>有入门门槛且付费</li>
<li> NZBGet 在国内需要配合透明代理使用，有较高的技术门槛</li>
</ul>
<sr-blockquote>
<p>Usenet Indexer 列表 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.reddit.com/r/usenet/wiki/indexers" one-link-mark="yes">Usenet Index Sites</a> – 来自 Reddit ，本文不做推荐。</p>
</sr-blockquote>
<sr-blockquote>
<p>Usenet Provider 优惠 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.reddit.com/r/usenet/wiki/providerdeals" one-link-mark="yes">Usenet Service Provider Deals</a> – 来自 Reddit ，本文不做推荐</p>
</sr-blockquote>
<h2 id="sr-toc-3"><a href="#化零为整" title="化零为整" one-link-mark="yes"></a>化零为整</h2><p>有了资源还不够，这些资源是零散的，并不利于我们进行搜索。因此我们需要能将这些资源整合起来方便我们查询的软件。于是就有了 Prowlarr Jackett 以及 FlareSolverr。 </p>
<p><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/prowlarr.png"></div></p>
<sr-blockquote>
<p>Prowlarr 是建立在流行的 *arr .net/reactjs 基础堆栈上的索引器管理器 / 代理，可与您的各种 PVR 应用程序集成。 Prowlarr 支持 Torrent Tracker 和 Usenet Indexer 的管理。 它与 Lidarr、Mylar3、Radarr、Readarr 和 Sonarr 无缝集成，提供对您的索引器的完整管理，无需为每个应用程序设置索引器（我们全部完成）。 – 来自 Prowlarr Github Repo</p>
</sr-blockquote>
<p><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/jackett.png"></div></p>
<sr-blockquote>
<p>Jackett 充当代理服务器：它将来自应用程序（Sonarr、Radarr、SickRage、CouchPotato、Mylar3、Lidarr、DuckieTV、qBittorrent、Nefarious 等）的查询转换为特定于跟踪器站点的 http 查询，解析 html 或 json 响应，以及 然后将结果发送回请求软件。 这允许获取最近的上传（如 RSS）和执行搜索。 Jackett 是维护索引器抓取和翻译逻辑的单一存储库 - 消除了其他应用程序的负担。 – 来自 Jackett Github Repo</p>
</sr-blockquote>
<p>Prowlarr 相当于 Jackett 的升级版，不仅可以让我们进行手动搜索，也可以全自动化地将配置同步给 Sonarr Radarr Lidarr Readarr，省去了使用 Jackett 时必需手动配置与同步 indexers 的步骤。</p>
<sr-blockquote>
<p>FlareSolverr 用于过 CF 的 5 秒盾。</p>
</sr-blockquote>
<h2 id="sr-toc-4"><a href="#化整为零" title="化整为零" one-link-mark="yes"></a>化整为零</h2><p>由于各种资源的分类不同，因此我们需要使用专门的软件去查询专门的分类以实现资源的最大化利用以及效率的最优解。因此这就有了 Sonarr 用于查询并下载电视剧，动画片等有集数的内容；Radarr 电影；Lidarr: 音乐；Readarr：电子书。</p>
<p><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/sonarr.png"></div></p>
<sr-blockquote>
<p>Sonarr 是供 Usenet 和 BitTorrent 用户使用的 PVR (其实就是一个电视剧管理器)。 它可以监控多个 RSS 源以获取您最喜欢的节目的新剧集，并全自动化地抓取、排序和重命名它们。 它还可以配置为在质量更好的格式可用时自动升级已下载文件的质量。 – 来自 Sonarr Github Repo</p>
</sr-blockquote>
<p><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/radarr.png"></div></p>
<sr-blockquote>
<p>Radarr 是 Usenet 和 BitTorrent 用户的电影收藏管理器。 它可以监控新电影的多个 RSS 提要，并将与客户端和索引器交互以全自动化地抓取、排序和重命名它们。 它还可以配置为在质量更好的格式可用时自动升级库中现有文件的质量。 – 来自 Radarr Github Repo</p>
</sr-blockquote>
<p><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/lidarr.png"></div></p>
<sr-blockquote>
<p>Lidarr 是 Usenet 和 BitTorrent 用户的音乐收藏管理器。 它可以监控多个 RSS 提要以获取您最喜欢的艺术家的新曲目，并全自动化地抓取、排序和重命名它们。 它还可以配置为在质量更好的格式可用时自动升级已下载文件的质量。 – 来自 Lidarr Github Repo</p>
</sr-blockquote>
<p><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/readarr.png"></div></p>
<sr-blockquote>
<p>Readarr 是 Usenet 和 BitTorrent 用户的电子书和有声读物收藏管理器。 它可以监控来自您最喜欢的作者的新书的多个 RSS 提要，并全自动化地抓取、排序和重命名它们。 请注意，仅支持给定书籍的一种类型。 如果您想要给定书籍的有声读物和电子书，则需要多个实例。 – 来自 Readarr Github Repo</p>
</sr-blockquote>
<h2 id="sr-toc-5"><a href="#化零为整-1" title="化零为整" one-link-mark="yes"></a>化零为整</h2><p>但是作为用户，我们并不关心软件的具体分类，因此就有了 Ombi 来整合 Sonarr Radarr 以及 Lidarr 的搜索功能 (暂时不支持 Readarr)，让我们可以用一个前端完成所有的搜索工作。</p>
<p><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/ombi_search.png"></div></p>
<sr-blockquote>
<p>Ombi 是您友好的媒体请求工具，可自动与您的媒体服务器同步！ 别担心，它对奶奶很友好，更重要的是； 有老婆认可证😂 – 来自 Ombi Github Repo</p>
</sr-blockquote>
<h2 id="sr-toc-6"><a href="#无中生有" title="无中生有" one-link-mark="yes"></a>无中生有</h2><p>当我们确定了需要的内容后，我们就需要软件来从网络中下载需要的资源到本地。因此我们就有了 qBittorrent (BT/PT) 以及 NZBGet (Usenet)。</p>
<p><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/qbt.png"></div></p>
<sr-blockquote>
<p>qBittorrent 是一个用 C++/Qt 编程的 bittorrent 客户端，它使用 Arvid Norberg 的 libtorrent（有时称为 libtorrent-rasterbar）。它旨在成为所有其他 bittorrent 客户端的良好替代品。 qBittorrent 快速、稳定并提供 unicode 支持以及许多功能。 – 来自 qBittorrent Github Repo</p>
</sr-blockquote>
<p><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/nzbget.png"></div></p>
<sr-blockquote>
<p>NZBGet 是一个二进制下载器，它根据 nzb-files 中给出的信息从 Usenet 下载文件。NZBGet 是用 C++ 编写的，以其性能和效率而闻名。 – 来自 NZBGet Github Repo</p>
</sr-blockquote>
<h2 id="sr-toc-7"><a href="#锦上添花" title="锦上添花" one-link-mark="yes"></a>锦上添花</h2><p>在拿到了需要的资源后，很多时候它们并没有附带我们所需要的字幕，因此我们就需要从网络中下载字幕的软件。于是就有了 Bazarr 以及 Chinesesubfinder。</p>
<p><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/bazarr.png"></div></p>
<sr-blockquote>
<p>Bazarr 是 Sonarr 和 Radarr 的配套应用程序。 它根据您的要求管理和下载字幕。 您可以通过电视节目或电影定义您的偏好，Bazarr 会为您处理一切。 – 来自 Bazarr Github Repo</p>
</sr-blockquote>
<p><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/chinesesubfinder.png"></div></p>
<sr-blockquote>
<p>本项目的初衷仅仅是想自动化搞定限定条件下 中文 字幕下载。 – 来自 Chinesesubfinder Github Repo</p>
</sr-blockquote>
<h2 id="sr-toc-8"><a href="#放飞自我" title="放飞自我" one-link-mark="yes"></a>放飞自我</h2><p>一切都就绪了，是时候开始享受了。拿瓶快乐水，躺在沙发上，打开 Emby 。远离现实的嘈杂，开始欣赏属于另一个世界的故事吧！</p>
<p><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/emby.png"></div></p>
<h2 id="sr-toc-9"><a href="#流程总结" title="流程总结" one-link-mark="yes"></a>流程总结</h2><p>那么现在让我们换个角度，从我们作为用户的角度出发总结一下发生了什么。</p>
<p>我们在 Ombi (或者 Sonarr 等) 中搜索了想要的内容，点击了添加至库存，等了一段时间，哇，Emby 里面出现了！是不是很神奇？</p>
<h2 id="sr-toc-10"><a href="#千里之行始于足下" title="千里之行始于足下" one-link-mark="yes"></a>千里之行始于足下</h2><p>工作是为了躺平，现在让我们开始搭建吧。</p>
<sr-blockquote>
<p>以下案例中所有的代码均可在 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/johnrosen1/vpstoolbox/blob/master/install/" one-link-mark="yes">这里</a> 找到并复制黏贴。</p>
</sr-blockquote>
<p>本文使用 <code>Debian Linux</code> 操作系统以及 <code>root</code> 用户作为示范。默认用户名为 <code>admin</code>, 密码为 <code>adminadmin</code>。</p>
<figure><pre class="hljs ini"><span class="hljs-attr">password1</span>=<span class="hljs-string">"adminadmin"</span></pre></figure>

<h2 id="sr-toc-11"><a href="#文件架构" title="文件架构" one-link-mark="yes"></a>文件架构</h2><sr-blockquote>
<p>所有文件都需要放在同一个 /data 目录下以启用硬链接，更多内容请看 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://trash-guides.info/Hardlinks/How-to-setup-for/Docker/" one-link-mark="yes">这个链接</a></p>
</sr-blockquote>
<figure><pre class="hljs nginx"><span class="hljs-attribute">data</span>
├── torrents
│  ├── Movies
│  ├── Series
│  ├── Music
│  └── Books
│  └── XXX
│  └── Others
├── usenet
│  ├── Movies
│  ├── Series
│  ├── Music
│  └── Books
│  └── XXX
│  └── Others
└── media
   ├── Movies
   ├── Series
   ├── Music
   ├── Books
   ├── XXX
   └── Others</pre></figure>

<p>新建文件夹</p>
<figure><pre class="hljs perl"><span class="hljs-keyword">mkdir</span> /data/

<span class="hljs-keyword">mkdir</span> /data/torrents/
<span class="hljs-keyword">mkdir</span> /data/usenet/
<span class="hljs-keyword">mkdir</span> /data/media/

<span class="hljs-keyword">mkdir</span> /data/torrents/Movies/
<span class="hljs-keyword">mkdir</span> /data/torrents/Series/
<span class="hljs-keyword">mkdir</span> /data/torrents/Music/
<span class="hljs-keyword">mkdir</span> /data/torrents/Books/
<span class="hljs-keyword">mkdir</span> /data/torrents/XXX/
<span class="hljs-keyword">mkdir</span> /data/torrents/Others/

<span class="hljs-keyword">mkdir</span> /data/usenet/Movies/
<span class="hljs-keyword">mkdir</span> /data/usenet/Series/
<span class="hljs-keyword">mkdir</span> /data/usenet/Music/
<span class="hljs-keyword">mkdir</span> /data/usenet/Books/
<span class="hljs-keyword">mkdir</span> /data/usenet/XXX/
<span class="hljs-keyword">mkdir</span> /data/usenet/Others/

<span class="hljs-keyword">mkdir</span> /data/media/Movies/
<span class="hljs-keyword">mkdir</span> /data/media/Series/
<span class="hljs-keyword">mkdir</span> /data/media/Music/
<span class="hljs-keyword">mkdir</span> /data/media/Books/
<span class="hljs-keyword">mkdir</span> /data/media/XXX/
<span class="hljs-keyword">mkdir</span> /data/media/Others/



apt-get install xml-twig-tools lsb-release unzip sqlite3 jq sudo -<span class="hljs-keyword">y</span>



<span class="hljs-keyword">mkdir</span> /usr/share/nginx/nzbget
<span class="hljs-keyword">mkdir</span> /usr/share/nginx/nzbget/config
<span class="hljs-keyword">mkdir</span> /usr/share/nginx/sonarr
<span class="hljs-keyword">mkdir</span> /usr/share/nginx/sonarr/config
<span class="hljs-keyword">mkdir</span> /usr/share/nginx/radarr
<span class="hljs-keyword">mkdir</span> /usr/share/nginx/radarr/config
<span class="hljs-keyword">mkdir</span> /usr/share/nginx/lidarr
<span class="hljs-keyword">mkdir</span> /usr/share/nginx/lidarr/config
<span class="hljs-keyword">mkdir</span> /usr/share/nginx/readarr
<span class="hljs-keyword">mkdir</span> /usr/share/nginx/readarr/config
<span class="hljs-keyword">mkdir</span> /usr/share/nginx/prowlarr
<span class="hljs-keyword">mkdir</span> /usr/share/nginx/prowlarr/config
<span class="hljs-keyword">mkdir</span> /usr/share/nginx/jackett
<span class="hljs-keyword">mkdir</span> /usr/share/nginx/jackett/config
<span class="hljs-keyword">mkdir</span> /usr/share/nginx/bazarr
<span class="hljs-keyword">mkdir</span> /usr/share/nginx/bazarr/config
<span class="hljs-keyword">mkdir</span> /usr/share/nginx/chinesesubfinder
<span class="hljs-keyword">mkdir</span> /usr/share/nginx/chinesesubfinder/app/
<span class="hljs-keyword">mkdir</span> /usr/share/nginx/chinesesubfinder/app/cache
<span class="hljs-keyword">mkdir</span> /usr/share/nginx/chinesesubfinder/config
<span class="hljs-keyword">mkdir</span> /usr/share/nginx/ombi
<span class="hljs-keyword">mkdir</span> /usr/share/nginx/ombi/config


<span class="hljs-keyword">mkdir</span> /usr/share/nginx/ddclient</pre></figure>

<h2 id="sr-toc-12"><a href="#Nginx" title="Nginx" one-link-mark="yes"></a>Nginx</h2><p>因为没有人会想去记各个应用的端口号，因此我们需要安装 Nginx 并配置子目录以及反向代理。</p>
<p>安装 Nginx</p>
<figure><pre class="hljs makefile">apt-get update
apt-get install ca-certificates lsb-release -y
apt-get install gnupg2 -y
touch /etc/apt/sources.list.d/nginx.list
  cat &gt; '/etc/apt/sources.list.d/nginx.list' &lt;&lt; EOF
deb https://nginx.org/packages/mainline/debian/ <span class="hljs-variable">$(lsb_release -cs)</span> nginx
EOF
  curl -fsSL https://nginx.org/keys/nginx_signing.key | apt-key add -
  apt-get update
  apt-get install nginx -y
  cat &gt; '/lib/systemd/system/nginx.service' &lt;&lt; EOF
[Unit]
Description=The NGINX HTTP and reverse proxy server
Before=netdata.service trojan.service
After=syslog.target network.target remote-fs.target nss-lookup.target

[Service]
Type=forking
PIDFile=/run/nginx.pid
ExecStartPre=/usr/sbin/nginx -t
ExecStart=/usr/sbin/nginx
ExecReload=/usr/sbin/nginx -s reload
ExecStop=/bin/kill -s QUIT \$MAINPID
PrivateTmp=true
LimitNOFILE=65536
Restart=always
RestartSec=3s

[Install]
WantedBy=multi-user.target
EOF
systemctl daemon-reload</pre></figure>

<p>配置 NGINX 主配置文件</p>
<figure><pre class="hljs properties"><span class="hljs-attr">cat</span> <span class="hljs-string">&gt; '/etc/nginx/nginx.conf' &lt;&lt; EOF</span>
<span class="hljs-attr">user</span> <span class="hljs-string">nginx;</span>
<span class="hljs-attr">worker_processes</span> <span class="hljs-string">auto;</span>

<span class="hljs-attr">error_log</span> <span class="hljs-string">/var/log/nginx/error.log warn;</span>
<span class="hljs-attr">pid</span> <span class="hljs-string">/run/nginx.pid;</span>
<span class="hljs-attr">include</span> <span class="hljs-string">/etc/nginx/modules-enabled/*.conf;</span>
<span class="hljs-attr">events</span> <span class="hljs-string">{</span>
  <span class="hljs-attr">worker_connections</span> <span class="hljs-string">65536;</span>
  <span class="hljs-attr">use</span> <span class="hljs-string">epoll;</span>
  <span class="hljs-attr">multi_accept</span> <span class="hljs-string">on;</span>
<span class="hljs-attr">}</span>

<span class="hljs-attr">http</span> <span class="hljs-string">{</span>

  <span class="hljs-attr">autoindex_exact_size</span> <span class="hljs-string">off;</span>
  <span class="hljs-attr">http2_push_preload</span> <span class="hljs-string">on;</span>
  <span class="hljs-attr">aio</span> <span class="hljs-string">threads;</span>
  <span class="hljs-attr">charset</span> <span class="hljs-string">UTF-8;</span>
  <span class="hljs-attr">tcp_nodelay</span> <span class="hljs-string">on;</span>
  <span class="hljs-attr">tcp_nopush</span> <span class="hljs-string">on;</span>
  <span class="hljs-attr">server_tokens</span> <span class="hljs-string">off;</span>
  
  <span class="hljs-attr">proxy_intercept_errors</span> <span class="hljs-string">on;</span>
  <span class="hljs-attr">proxy_http_version</span> <span class="hljs-string">1.1;</span>
  <span class="hljs-attr">proxy_ssl_protocols</span> <span class="hljs-string">TLSv1.2 TLSv1.3;</span>
  <span class="hljs-attr">proxy_set_header</span> <span class="hljs-string">Host \$http_host;</span>
  <span class="hljs-attr">proxy_set_header</span> <span class="hljs-string">X-Real-IP \$remote_addr;</span>
  <span class="hljs-attr">proxy_set_header</span> <span class="hljs-string">X-Forwarded-For \$proxy_add_x_forwarded_for;</span>

  <span class="hljs-attr">include</span> <span class="hljs-string">/etc/nginx/mime.types;</span>
  <span class="hljs-attr">default_type</span> <span class="hljs-string">application/octet-stream;</span>

  <span class="hljs-attr">access_log</span> <span class="hljs-string">/var/log/nginx/access.log;</span>

  <span class="hljs-attr">log_format</span>  <span class="hljs-string">main  '\$remote_addr - \$remote_user [\$time_local] "\$request" '</span>
    <span class="hljs-meta">'\$status</span> <span class="hljs-string">\$body_bytes_sent "\$http_referer" '</span>
    <span class="hljs-meta">'"\$http_user_agent"</span> <span class="hljs-string">"\$http_x_forwarded_for"';</span>

  <span class="hljs-attr">sendfile</span> <span class="hljs-string">on;</span>
  <span class="hljs-attr">gzip</span> <span class="hljs-string">on; # 本地Nas可以考虑把这个关掉节省CPU资源</span>
  <span class="hljs-attr">gzip_proxied</span> <span class="hljs-string">any;</span>
  <span class="hljs-attr">gzip_types</span> <span class="hljs-string">*;</span>
  <span class="hljs-attr">gzip_comp_level</span> <span class="hljs-string">1;</span>

  <span class="hljs-attr">include</span> <span class="hljs-string">/etc/nginx/conf.d/default.conf;</span>
<span class="hljs-attr">}</span>
<span class="hljs-attr">EOF</span></pre></figure>

<p>启动 Nginx</p>
<figure><pre class="hljs bash">systemctl <span class="hljs-built_in">enable</span> nginx --now</pre></figure>

<p>配置子目录以及反向代理</p>
<p>新建 NGINX 配置</p>
<figure><pre class="hljs coffeescript">rm <span class="hljs-regexp">/etc/nginx/conf.d/</span>*.conf <span class="hljs-comment"># 删除旧配置</span>
touch /etc/nginx/conf.d/<span class="hljs-keyword">default</span>.conf</pre></figure>

<p>写入新配置</p>
<figure><pre class="hljs coffeescript">nano /etc/nginx/conf.d/<span class="hljs-keyword">default</span>.conf</pre></figure>

<figure><pre class="hljs nginx"><span class="hljs-section">server</span> {
  <span class="hljs-attribute">listen</span> <span class="hljs-number">80</span> fastopen=<span class="hljs-number">20</span> reuseport default_server so_keepalive=<span class="hljs-literal">on</span>;
  <span class="hljs-attribute">server_name</span> _;
  <span class="hljs-attribute">location</span> / {
    <span class="hljs-attribute">root</span> /usr/share/nginx/html/;
  }
    <span class="hljs-attribute">location</span> /qbt/ {
        <span class="hljs-comment">#access_log off;</span>
        <span class="hljs-attribute">proxy_pass</span>              http://127.0.0.1:8080/;
        <span class="hljs-attribute">client_max_body_size</span> <span class="hljs-number">0</span>;
        <span class="hljs-attribute">proxy_set_header</span>        X-Forwarded-Host        <span class="hljs-variable">$http_host</span>;
        }
    <span class="hljs-attribute">location</span> /emby/ {
        <span class="hljs-comment">#access_log off;</span>
        <span class="hljs-attribute">proxy_pass</span> http://127.0.0.1:8096/;
        <span class="hljs-attribute">proxy_pass_request_headers</span> <span class="hljs-literal">on</span>;
        <span class="hljs-attribute">proxy_set_header</span> Host <span class="hljs-variable">$host</span>;
        <span class="hljs-attribute">proxy_set_header</span> X-Real-IP <span class="hljs-variable">$remote_addr</span>;
        <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-For <span class="hljs-variable">$proxy_add_x_forwarded_for</span>;
        <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-Host <span class="hljs-variable">$http_host</span>;
        <span class="hljs-attribute">proxy_set_header</span> Upgrade <span class="hljs-variable">$http_upgrade</span>;
        <span class="hljs-attribute">proxy_set_header</span> Connection <span class="hljs-variable">$http_connection</span>;
        <span class="hljs-attribute">proxy_buffering</span> <span class="hljs-literal">off</span>;
        }
    <span class="hljs-attribute">location</span> /sonarr/ {
        <span class="hljs-comment">#access_log off;</span>
        <span class="hljs-attribute">proxy_pass</span> http://127.0.0.1:8989/sonarr/;
        <span class="hljs-attribute">proxy_pass_request_headers</span> <span class="hljs-literal">on</span>;
        <span class="hljs-attribute">proxy_set_header</span> Host <span class="hljs-variable">$host</span>;
        <span class="hljs-attribute">proxy_set_header</span> X-Real-IP <span class="hljs-variable">$remote_addr</span>;
        <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-For <span class="hljs-variable">$proxy_add_x_forwarded_for</span>;
        <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-Host <span class="hljs-variable">$http_host</span>;
        <span class="hljs-attribute">proxy_set_header</span> Upgrade <span class="hljs-variable">$http_upgrade</span>;
        <span class="hljs-attribute">proxy_set_header</span> Connection <span class="hljs-variable">$http_connection</span>;
        <span class="hljs-comment">#proxy_buffering off;</span>
        }
    <span class="hljs-attribute">location</span> /radarr/ {
        <span class="hljs-comment">#access_log off;</span>
        <span class="hljs-attribute">proxy_pass</span> http://127.0.0.1:7878/radarr/;
        <span class="hljs-attribute">proxy_pass_request_headers</span> <span class="hljs-literal">on</span>;
        <span class="hljs-attribute">proxy_set_header</span> Host <span class="hljs-variable">$host</span>;
        <span class="hljs-attribute">proxy_set_header</span> X-Real-IP <span class="hljs-variable">$remote_addr</span>;
        <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-For <span class="hljs-variable">$proxy_add_x_forwarded_for</span>;
        <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-Host <span class="hljs-variable">$http_host</span>;
        <span class="hljs-attribute">proxy_set_header</span> Upgrade <span class="hljs-variable">$http_upgrade</span>;
        <span class="hljs-attribute">proxy_set_header</span> Connection <span class="hljs-variable">$http_connection</span>;
        <span class="hljs-comment">#proxy_buffering off;</span>
        }
    <span class="hljs-attribute">location</span> /lidarr/ {
        <span class="hljs-comment">#access_log off;</span>
        <span class="hljs-attribute">proxy_pass</span> http://127.0.0.1:8686/lidarr/;
        <span class="hljs-attribute">proxy_pass_request_headers</span> <span class="hljs-literal">on</span>;
        <span class="hljs-attribute">proxy_set_header</span> Host <span class="hljs-variable">$host</span>;
        <span class="hljs-attribute">proxy_set_header</span> X-Real-IP <span class="hljs-variable">$remote_addr</span>;
        <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-For <span class="hljs-variable">$proxy_add_x_forwarded_for</span>;
        <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-Host <span class="hljs-variable">$http_host</span>;
        <span class="hljs-attribute">proxy_set_header</span> Upgrade <span class="hljs-variable">$http_upgrade</span>;
        <span class="hljs-attribute">proxy_set_header</span> Connection <span class="hljs-variable">$http_connection</span>;
        <span class="hljs-comment">#proxy_buffering off;</span>
        }
    <span class="hljs-attribute">location</span> /readarr/ {
        <span class="hljs-comment">#access_log off;</span>
        <span class="hljs-attribute">proxy_pass</span> http://127.0.0.1:8787/readarr/;
        <span class="hljs-attribute">proxy_pass_request_headers</span> <span class="hljs-literal">on</span>;
        <span class="hljs-attribute">proxy_set_header</span> Host <span class="hljs-variable">$host</span>;
        <span class="hljs-attribute">proxy_set_header</span> X-Real-IP <span class="hljs-variable">$remote_addr</span>;
        <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-For <span class="hljs-variable">$proxy_add_x_forwarded_for</span>;
        <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-Host <span class="hljs-variable">$http_host</span>;
        <span class="hljs-attribute">proxy_set_header</span> Upgrade <span class="hljs-variable">$http_upgrade</span>;
        <span class="hljs-attribute">proxy_set_header</span> Connection <span class="hljs-variable">$http_connection</span>;
        <span class="hljs-comment">#proxy_buffering off;</span>
        }
    <span class="hljs-attribute">location</span> /bazarr/ {
        <span class="hljs-comment">#access_log off;</span>
        <span class="hljs-attribute">proxy_pass</span> http://127.0.0.1:6767/bazarr/;
        <span class="hljs-attribute">proxy_pass_request_headers</span> <span class="hljs-literal">on</span>;
        <span class="hljs-attribute">proxy_set_header</span> Host <span class="hljs-variable">$host</span>;
        <span class="hljs-attribute">proxy_set_header</span> X-Real-IP <span class="hljs-variable">$remote_addr</span>;
        <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-For <span class="hljs-variable">$proxy_add_x_forwarded_for</span>;
        <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-Host <span class="hljs-variable">$http_host</span>;
        <span class="hljs-attribute">proxy_set_header</span> Upgrade <span class="hljs-variable">$http_upgrade</span>;
        <span class="hljs-attribute">proxy_set_header</span> Connection <span class="hljs-variable">$http_connection</span>;
        <span class="hljs-comment">#proxy_buffering off;</span>
        }
    <span class="hljs-attribute">location</span> /chinesesubfinder/ {
        <span class="hljs-comment">#access_log off;</span>
        <span class="hljs-attribute">proxy_pass</span> http://127.0.0.1:19035/;
        <span class="hljs-attribute">proxy_pass_request_headers</span> <span class="hljs-literal">on</span>;
        <span class="hljs-attribute">proxy_set_header</span> Host <span class="hljs-variable">$host</span>;
        <span class="hljs-attribute">proxy_set_header</span> X-Real-IP <span class="hljs-variable">$remote_addr</span>;
        <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-For <span class="hljs-variable">$proxy_add_x_forwarded_for</span>;
        <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-Host <span class="hljs-variable">$http_host</span>;
        <span class="hljs-attribute">proxy_set_header</span> Upgrade <span class="hljs-variable">$http_upgrade</span>;
        <span class="hljs-attribute">proxy_set_header</span> Connection <span class="hljs-variable">$http_connection</span>;
        <span class="hljs-comment">#proxy_buffering off;</span>
        }
    <span class="hljs-attribute">location</span> /prowlarr/ {
        <span class="hljs-comment">#access_log off;</span>
        <span class="hljs-attribute">proxy_pass</span> http://127.0.0.1:9696/prowlarr/;
        <span class="hljs-attribute">proxy_pass_request_headers</span> <span class="hljs-literal">on</span>;
        <span class="hljs-attribute">proxy_set_header</span> Host <span class="hljs-variable">$host</span>;
        <span class="hljs-attribute">proxy_set_header</span> X-Real-IP <span class="hljs-variable">$remote_addr</span>;
        <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-For <span class="hljs-variable">$proxy_add_x_forwarded_for</span>;
        <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-Host <span class="hljs-variable">$http_host</span>;
        <span class="hljs-attribute">proxy_set_header</span> Upgrade <span class="hljs-variable">$http_upgrade</span>;
        <span class="hljs-attribute">proxy_set_header</span> Connection <span class="hljs-variable">$http_connection</span>;
        <span class="hljs-comment">#proxy_buffering off;</span>
        }
    <span class="hljs-attribute">location</span> /jackett/ {
        <span class="hljs-comment">#access_log off;</span>
        <span class="hljs-attribute">proxy_pass</span> http://127.0.0.1:9117/jackett/;
        <span class="hljs-attribute">proxy_pass_request_headers</span> <span class="hljs-literal">on</span>;
        <span class="hljs-attribute">proxy_set_header</span> Host <span class="hljs-variable">$host</span>;
        <span class="hljs-attribute">proxy_set_header</span> X-Real-IP <span class="hljs-variable">$remote_addr</span>;
        <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-For <span class="hljs-variable">$proxy_add_x_forwarded_for</span>;
        <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-Host <span class="hljs-variable">$http_host</span>;
        <span class="hljs-attribute">proxy_set_header</span> Upgrade <span class="hljs-variable">$http_upgrade</span>;
        <span class="hljs-attribute">proxy_set_header</span> Connection <span class="hljs-variable">$http_connection</span>;
        <span class="hljs-comment">#proxy_buffering off;</span>
        }
    <span class="hljs-attribute">location</span> /ombi/ {
        <span class="hljs-comment">#access_log off;</span>
        <span class="hljs-attribute">proxy_pass</span> http://127.0.0.1:3579/ombi/;
        <span class="hljs-attribute">proxy_pass_request_headers</span> <span class="hljs-literal">on</span>;
        <span class="hljs-attribute">proxy_set_header</span> Host <span class="hljs-variable">$host</span>;
        <span class="hljs-attribute">proxy_set_header</span> X-Real-IP <span class="hljs-variable">$remote_addr</span>;
        <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-For <span class="hljs-variable">$proxy_add_x_forwarded_for</span>;
        <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-Host <span class="hljs-variable">$http_host</span>;
        <span class="hljs-attribute">proxy_set_header</span> Upgrade <span class="hljs-variable">$http_upgrade</span>;
        <span class="hljs-attribute">proxy_set_header</span> Connection <span class="hljs-variable">$http_connection</span>;
        <span class="hljs-comment">#proxy_buffering off;</span>
        }
    <span class="hljs-attribute">location</span> /nzbget/ {
        <span class="hljs-comment">#access_log off;</span>
        <span class="hljs-attribute">client_max_body_size</span> <span class="hljs-number">0</span>;
        <span class="hljs-attribute">proxy_pass</span> http://127.0.0.1:6789/;
        <span class="hljs-attribute">proxy_pass_request_headers</span> <span class="hljs-literal">on</span>;
        <span class="hljs-attribute">proxy_set_header</span> Host <span class="hljs-variable">$host</span>;
        <span class="hljs-attribute">proxy_set_header</span> X-Real-IP <span class="hljs-variable">$remote_addr</span>;
        <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-For <span class="hljs-variable">$proxy_add_x_forwarded_for</span>;
        <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-Host <span class="hljs-variable">$http_host</span>;
        <span class="hljs-attribute">proxy_set_header</span> Upgrade <span class="hljs-variable">$http_upgrade</span>;
        <span class="hljs-attribute">proxy_set_header</span> Connection <span class="hljs-variable">$http_connection</span>;
        <span class="hljs-comment">#proxy_buffering off;</span>
        }
    <span class="hljs-attribute">location</span> /rsshub/ {
        <span class="hljs-attribute">proxy_redirect</span> <span class="hljs-literal">off</span>;
        <span class="hljs-attribute">proxy_pass</span> http://127.0.0.1:1200/;
        }
}</pre></figure>

<p>修改 NGINX 默认前端页面以方便进入</p>
<figure><pre class="hljs nginx"><span class="hljs-attribute">nano</span> /usr/share/nginx/html/index.html</pre></figure>

<p>写入以下配置</p>
<sr-blockquote>
<p>2022.3.25 更新：新增 <code>Resilio Sync</code> 配置。</p>
</sr-blockquote>
<figure><pre class="hljs xml"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Welcome to nginx!<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
<span class="hljs-selector-tag">html</span> { <span class="hljs-attribute">color-scheme</span>: light dark; }
<span class="hljs-selector-tag">body</span> { <span class="hljs-attribute">width</span>: <span class="hljs-number">35em</span>; <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
<span class="hljs-attribute">font-family</span>: Tahoma, Verdana, Arial, sans-serif; }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Welcome to nginx!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>If you see this page, the nginx web server is successfully installed and
working. Further configuration is required.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>前端<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"http://10.0.0.1:80/emby/"</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"_blank"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"noreferrer"</span>&gt;</span>Emby<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"http://10.0.0.1:80/ombi/"</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"_blank"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"noreferrer"</span>&gt;</span>Ombi<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"http://10.0.0.1:8888"</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"_blank"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"noreferrer"</span>&gt;</span>Resilio-sync<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>中间层<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"http://10.0.0.1:80/sonarr/"</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"_blank"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"noreferrer"</span>&gt;</span>Sonarr<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"http://10.0.0.1:80/radarr/"</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"_blank"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"noreferrer"</span>&gt;</span>Radarr<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"http://10.0.0.1:80/lidarr/"</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"_blank"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"noreferrer"</span>&gt;</span>Lidarr<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"http://10.0.0.1:80/readarr/"</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"_blank"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"noreferrer"</span>&gt;</span>Readarr<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>字幕<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"http://10.0.0.1:80/bazarr/"</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"_blank"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"noreferrer"</span>&gt;</span>Bazarr<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"http://10.0.0.1:80/chinesesubfinder/"</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"_blank"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"noreferrer"</span>&gt;</span>Chinesesubfinder<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>索引器<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"http://10.0.0.1:80/prowlarr/"</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"_blank"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"noreferrer"</span>&gt;</span>Prowlarr<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"http://10.0.0.1:80/jackett/"</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"_blank"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"noreferrer"</span>&gt;</span>Jackett<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"http://10.0.0.1:80/rsshub/"</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"_blank"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"noreferrer"</span>&gt;</span>Rsshub<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>下载器<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"http://10.0.0.1:80/qbt/"</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"_blank"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"noreferrer"</span>&gt;</span>Qbittorrent<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"http://10.0.0.1:80/nzbget/"</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"_blank"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"noreferrer"</span>&gt;</span>Nzbget<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>For online documentation and support please refer to
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"http://nginx.org/"</span>&gt;</span>nginx.org<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>.<span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span>
Commercial support is available at
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"http://nginx.com/"</span>&gt;</span>nginx.com<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">em</span>&gt;</span>Thank you for using nginx.<span class="hljs-tag">&lt;/<span class="hljs-name">em</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></pre></figure>

<p><strong><code>10.0.0.1</code> 替换成你自己 Nas/VPS 的 IP</strong>，效果图如下</p>
<p><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/nginx.png"></div></p>
<ol start="5">
<li>使配置生效 </li>
</ol>
<figure><pre class="hljs nginx"><span class="hljs-attribute">nginx</span> -t &amp;&amp; nginx -s reload</pre></figure>

<ol start="6">
<li>VPS 请记得去自行配置 SSL 证书并修改 NGINX 配置。</li>
</ol>
<h2 id="sr-toc-13"><a href="#Docker" title="Docker" one-link-mark="yes"></a>Docker</h2><p>安装 Docker</p>
<figure><pre class="hljs sql">apt-get <span class="hljs-keyword">install</span> apt-transport-https ca-certificates curl gnupg-<span class="hljs-keyword">agent</span> software-properties-common -y
curl -fsSL https://download.docker.com/linux/debian/gpg | sudo apt-<span class="hljs-keyword">key</span> <span class="hljs-keyword">add</span> -

<span class="hljs-keyword">add</span>-apt-repository <span class="hljs-string">"deb [arch=amd64] https://download.docker.com/linux/debian $(lsb_release -cs) stable"</span>
apt-<span class="hljs-keyword">get</span> <span class="hljs-keyword">update</span>
apt-<span class="hljs-keyword">get</span> <span class="hljs-keyword">install</span> docker-ce docker-ce-cli containerd.io -y</pre></figure>

<p>安装 Docker-compose</p>
<figure><pre class="hljs bash">dockerver=$(curl --retry 5 -s <span class="hljs-string">"https://api.github.com/repos/docker/compose/releases/latest"</span> | grep <span class="hljs-string">'"tag_name":'</span> | sed -E <span class="hljs-string">'s/.*"([^"]+)".*/\1/'</span>) <span class="hljs-comment"># 获取最新版Docker-compose</span>
sudo curl --retry 5 -L <span class="hljs-string">"https://github.com/docker/compose/releases/download/<span class="hljs-variable">${dockerver}</span>/docker-compose-<span class="hljs-variable">$(uname -s)</span>-<span class="hljs-variable">$(uname -m)</span>"</span> -o /usr/<span class="hljs-built_in">local</span>/bin/docker-compose
sudo chmod +x /usr/<span class="hljs-built_in">local</span>/bin/docker-compose</pre></figure>

<h2 id="sr-toc-14"><a href="#Emby" title="Emby" one-link-mark="yes"></a>Emby</h2><p>安装 Emby</p>
<figure><pre class="hljs nginx"><span class="hljs-attribute">apt</span> install -y apt-transport-https
curl --retry <span class="hljs-number">5</span> -LO https://github.com/MediaBrowser/Emby.Releases/releases/download/4.7.0.32/emby-server-deb_4.7.0.32_amd64.deb
dpkg -i emby-server<span class="hljs-regexp">*.deb</span>
rm emby-server-<span class="hljs-regexp">*.deb</span></pre></figure>

<h2 id="sr-toc-15"><a href="#qBittorrent" title="qBittorrent" one-link-mark="yes"></a>qBittorrent</h2><p>安装 qBittorrent 加强版</p>
<sr-blockquote>
<p>有些 PT 站可能指名不得使用这个版本，如遇此情况，请用原版。</p>
</sr-blockquote>
<figure><pre class="hljs properties"><span class="hljs-attr">mkdir</span> <span class="hljs-string">/root/qbt</span>
<span class="hljs-attr">cd</span> <span class="hljs-string">/root/qbt</span>
<span class="hljs-attr">qbtver</span>=<span class="hljs-string">$(curl --retry 5 -s "https://api.github.com/repos/c0re100/qBittorrent-Enhanced-Edition/releases/latest" | grep '"tag_name":' | sed -E 's/.*"([^"]+)".*/\1/')</span>
<span class="hljs-attr">curl</span> <span class="hljs-string">--retry 5 -LO https://github.com/c0re100/qBittorrent-Enhanced-Edition/releases/download/${qbtver}/qbittorrent-enhanced-nox_x86_64-linux-musl_static.zip</span>
<span class="hljs-attr">unzip</span> <span class="hljs-string">-o qb*.zip</span>
<span class="hljs-attr">rm</span> <span class="hljs-string">qb*.zip</span>
<span class="hljs-attr">cp</span> <span class="hljs-string">-f qb* /usr/bin/</span>
<span class="hljs-attr">chmod</span> <span class="hljs-string">+x /usr/bin/qbittorrent-nox</span>
<span class="hljs-attr">cd</span> <span class="hljs-string">/root</span>
<span class="hljs-attr">rm</span> <span class="hljs-string">-rf /root/qbt</span>
  <span class="hljs-attr">cat</span> <span class="hljs-string">&gt; '/etc/systemd/system/qbittorrent.service' &lt;&lt; EOF</span>
<span class="hljs-attr">[Unit]</span>
<span class="hljs-attr">Description</span>=<span class="hljs-string">qBittorrent Daemon Service</span>
<span class="hljs-attr">Documentation</span>=<span class="hljs-string">https://github.com/c0re100/qBittorrent-Enhanced-Edition</span>
<span class="hljs-attr">Wants</span>=<span class="hljs-string">network-online.target</span>
<span class="hljs-attr">After</span>=<span class="hljs-string">network-online.target nss-lookup.target</span>

<span class="hljs-attr">[Service]</span>
<span class="hljs-attr">Type</span>=<span class="hljs-string">simple</span>
<span class="hljs-attr">User</span>=<span class="hljs-string">root</span>
<span class="hljs-attr">RemainAfterExit</span>=<span class="hljs-string">yes</span>
<span class="hljs-attr">ExecStart</span>=<span class="hljs-string">/usr/bin/qbittorrent-nox --profile=/usr/share/nginx/</span>
<span class="hljs-attr">TimeoutStopSec</span>=<span class="hljs-string">infinity</span>
<span class="hljs-attr">LimitNOFILE</span>=<span class="hljs-string">65536</span>
<span class="hljs-attr">Restart</span>=<span class="hljs-string">always</span>
<span class="hljs-attr">RestartSec</span>=<span class="hljs-string">3s</span>

<span class="hljs-attr">[Install]</span>
<span class="hljs-attr">WantedBy</span>=<span class="hljs-string">multi-user.target</span>
<span class="hljs-attr">EOF</span>
<span class="hljs-attr">systemctl</span> <span class="hljs-string">daemon-reload</span>
<span class="hljs-attr">systemctl</span> <span class="hljs-string">enable qbittorrent.service</span></pre></figure>

<p>下载 mmdb 这样 peer 的国旗才会显示</p>
<figure><pre class="hljs properties"><span class="hljs-attr">mkdir</span> <span class="hljs-string">/usr/share/nginx/qBittorrent/</span>
<span class="hljs-attr">mkdir</span> <span class="hljs-string">/usr/share/nginx/qBittorrent/data/</span>
<span class="hljs-attr">mkdir</span> <span class="hljs-string">/usr/share/nginx/qBittorrent/data/GeoIP/</span>
<span class="hljs-attr">cd</span> <span class="hljs-string">/usr/share/nginx/qBittorrent/data/GeoIP/</span>
<span class="hljs-attr">curl</span> <span class="hljs-string">-LO --progress-bar https://raw.githubusercontent.com/johnrosen1/vpstoolbox/master/binary/GeoLite2-Country.mmdb</span>
<span class="hljs-attr">systemctl</span> <span class="hljs-string">restart qbittorrent</span></pre></figure>

<p>修改性能设置</p>
<figure><pre class="hljs perl">cpu_thread_count=$(nproc --all)
io_thread=$((${cpu_thread_count}*<span class="hljs-number">4</span>))

qbtcookie=$(curl -i --header <span class="hljs-string">'Referer: http://127.0.0.1:8080'</span> --data <span class="hljs-string">'username=admin&amp;password=adminadmin'</span> http:<span class="hljs-regexp">//</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>:<span class="hljs-number">8080</span>/api/v2/auth/login | <span class="hljs-keyword">grep</span> -i set-cookie | cut -c13-<span class="hljs-number">48</span>) 

curl http:<span class="hljs-regexp">//</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>:<span class="hljs-number">8080</span>/api/v2/app/setPreferences?json=%7B%22auto_delete_mode%22:<span class="hljs-number">1</span>%7D  --cookie <span class="hljs-string">"<span class="hljs-subst">${qbtcookie}</span>"</span>
curl http:<span class="hljs-regexp">//</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>:<span class="hljs-number">8080</span>/api/v2/app/setPreferences?json=%7B%22async_io_threads%22:${io_thread}%7D  --cookie <span class="hljs-string">"<span class="hljs-subst">${qbtcookie}</span>"</span>
curl http:<span class="hljs-regexp">//</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>:<span class="hljs-number">8080</span>/api/v2/app/setPreferences?json=%7B%22preallocate_all%22:true%7D  --cookie <span class="hljs-string">"<span class="hljs-subst">${qbtcookie}</span>"</span>
curl http:<span class="hljs-regexp">//</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>:<span class="hljs-number">8080</span>/api/v2/app/setPreferences?json=%7B%22customize_trackers_list_url%22:%22https:%2f%2ftrackerslist.com%2fall.txt%22%7D  --cookie <span class="hljs-string">"<span class="hljs-subst">${qbtcookie}</span>"</span>
curl http:<span class="hljs-regexp">//</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>:<span class="hljs-number">8080</span>/api/v2/app/setPreferences?json=%7B%22auto_update_trackers_enabled%22:true%7D  --cookie <span class="hljs-string">"<span class="hljs-subst">${qbtcookie}</span>"</span>
curl http:<span class="hljs-regexp">//</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>:<span class="hljs-number">8080</span>/api/v2/app/setPreferences?json=%7B%22idn_support_enabled%22:true%7D  --cookie <span class="hljs-string">"<span class="hljs-subst">${qbtcookie}</span>"</span>
curl http:<span class="hljs-regexp">//</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>:<span class="hljs-number">8080</span>/api/v2/app/setPreferences?json=%7B%22enable_multi_connections_from_same_ip%22:true%7D  --cookie <span class="hljs-string">"<span class="hljs-subst">${qbtcookie}</span>"</span>
curl http:<span class="hljs-regexp">//</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>:<span class="hljs-number">8080</span>/api/v2/app/setPreferences?json=%7B%22add_trackers_enabled%22:true%7D  --cookie <span class="hljs-string">"<span class="hljs-subst">${qbtcookie}</span>"</span>
curl http:<span class="hljs-regexp">//</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>:<span class="hljs-number">8080</span>/api/v2/app/setPreferences?json=%7B%22announce_to_all_tiers%22:true%7D  --cookie <span class="hljs-string">"<span class="hljs-subst">${qbtcookie}</span>"</span>
curl http:<span class="hljs-regexp">//</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>:<span class="hljs-number">8080</span>/api/v2/app/setPreferences?json=%7B%22announce_to_all_trackers%22:true%7D  --cookie <span class="hljs-string">"<span class="hljs-subst">${qbtcookie}</span>"</span>
curl http:<span class="hljs-regexp">//</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>:<span class="hljs-number">8080</span>/api/v2/app/setPreferences?json=%7B%22announce_to_all_trackers%22:true%7D  --cookie <span class="hljs-string">"<span class="hljs-subst">${qbtcookie}</span>"</span>
curl http:<span class="hljs-regexp">//</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>:<span class="hljs-number">8080</span>/api/v2/app/setPreferences?json=%7B%22limit_utp_rate%22:true%7D  --cookie <span class="hljs-string">"<span class="hljs-subst">${qbtcookie}</span>"</span>
curl http:<span class="hljs-regexp">//</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>:<span class="hljs-number">8080</span>/api/v2/app/setPreferences?json=%7B%22limit_tcp_overhead%22:true%7D  --cookie <span class="hljs-string">"<span class="hljs-subst">${qbtcookie}</span>"</span>
curl http:<span class="hljs-regexp">//</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>:<span class="hljs-number">8080</span>/api/v2/app/setPreferences?json=%7B%22limit_lan_peers%22:false%7D  --cookie <span class="hljs-string">"<span class="hljs-subst">${qbtcookie}</span>"</span>
curl http:<span class="hljs-regexp">//</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>:<span class="hljs-number">8080</span>/api/v2/app/setPreferences?json=%7B%22enable_os_cache%22:false%7D  --cookie <span class="hljs-string">"<span class="hljs-subst">${qbtcookie}</span>"</span>
curl http:<span class="hljs-regexp">//</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>:<span class="hljs-number">8080</span>/api/v2/app/setPreferences?json=%7B%22alternative_webui_enabled%22:false%7D  --cookie <span class="hljs-string">"<span class="hljs-subst">${qbtcookie}</span>"</span>
curl http:<span class="hljs-regexp">//</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>:<span class="hljs-number">8080</span>/api/v2/app/setPreferences?json=%7B%22web_ui_upnp%22:false%7D  --cookie <span class="hljs-string">"<span class="hljs-subst">${qbtcookie}</span>"</span>
curl http:<span class="hljs-regexp">//</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>:<span class="hljs-number">8080</span>/api/v2/app/setPreferences?json=%7B%22alternative_webui_path%22:%22%2fusr%2fshare%2fnginx%2fqBittorrent%2fweb%2f%22%7D  --cookie <span class="hljs-string">"<span class="hljs-subst">${qbtcookie}</span>"</span>
curl http:<span class="hljs-regexp">//</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>:<span class="hljs-number">8080</span>/api/v2/app/setPreferences?json=%7B%22max_connec%22:-<span class="hljs-number">1</span>%7D  --cookie <span class="hljs-string">"<span class="hljs-subst">${qbtcookie}</span>"</span>
curl http:<span class="hljs-regexp">//</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>:<span class="hljs-number">8080</span>/api/v2/app/setPreferences?json=%7B%22max_connec_per_torrent%22:-<span class="hljs-number">1</span>%7D  --cookie <span class="hljs-string">"<span class="hljs-subst">${qbtcookie}</span>"</span>
curl http:<span class="hljs-regexp">//</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>:<span class="hljs-number">8080</span>/api/v2/app/setPreferences?json=%7B%22web_ui_address%22:%22127.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>%22%7D  --cookie <span class="hljs-string">"<span class="hljs-subst">${qbtcookie}</span>"</span>
curl http:<span class="hljs-regexp">//</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>:<span class="hljs-number">8080</span>/api/v2/app/setPreferences?json=%7B%22validate_https_tracker_certificate%22:false%7D  --cookie <span class="hljs-string">"<span class="hljs-subst">${qbtcookie}</span>"</span>
curl http:<span class="hljs-regexp">//</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>:<span class="hljs-number">8080</span>/api/v2/app/setPreferences?json=%7B%22peer_tos%22:<span class="hljs-number">0</span>%7D  --cookie <span class="hljs-string">"<span class="hljs-subst">${qbtcookie}</span>"</span>

curl http:<span class="hljs-regexp">//</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>:<span class="hljs-number">8080</span>/api/v2/app/setPreferences?json=%7B%22auto_tmm_enabled%22:true%7D  --cookie <span class="hljs-string">"<span class="hljs-subst">${qbtcookie}</span>"</span>
curl http:<span class="hljs-regexp">//</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>:<span class="hljs-number">8080</span>/api/v2/app/setPreferences?json=%7B%22save_path%22:%22%2fdata%2fmedia%2f%22%7D --cookie <span class="hljs-string">"<span class="hljs-subst">${qbtcookie}</span>"</span></pre></figure>

<p>新增分类及对应的下载位置</p>
<figure><pre class="hljs nginx"><span class="hljs-attribute">curl</span> -X POST -F <span class="hljs-string">'category=Series'</span> -F <span class="hljs-string">'savePath=/data/torrents/Series/'</span> http://127.0.0.1:8080/api/v2/torrents/createCategory --cookie <span class="hljs-string">"<span class="hljs-variable">${qbtcookie}</span>"</span>
curl -X POST -F <span class="hljs-string">'category=Movies'</span> -F <span class="hljs-string">'savePath=/data/torrents/Movies/'</span> http://127.0.0.1:8080/api/v2/torrents/createCategory --cookie <span class="hljs-string">"<span class="hljs-variable">${qbtcookie}</span>"</span>
curl -X POST -F <span class="hljs-string">'category=Music'</span> -F <span class="hljs-string">'savePath=/data/torrents/Music/'</span> http://127.0.0.1:8080/api/v2/torrents/createCategory --cookie <span class="hljs-string">"<span class="hljs-variable">${qbtcookie}</span>"</span>
curl -X POST -F <span class="hljs-string">'category=Bookes'</span> -F <span class="hljs-string">'savePath=/data/torrents/Books/'</span> http://127.0.0.1:8080/api/v2/torrents/createCategory --cookie <span class="hljs-string">"<span class="hljs-variable">${qbtcookie}</span>"</span>
curl -X POST -F <span class="hljs-string">'category=XXX'</span> -F <span class="hljs-string">'savePath=/data/torrents/XXX/'</span> http://127.0.0.1:8080/api/v2/torrents/createCategory --cookie <span class="hljs-string">"<span class="hljs-variable">${qbtcookie}</span>"</span>
curl -X POST -F <span class="hljs-string">'category=Others'</span> -F <span class="hljs-string">'savePath=/data/torrents/Others/'</span> http://127.0.0.1:8080/api/v2/torrents/createCategory --cookie <span class="hljs-string">"<span class="hljs-variable">${qbtcookie}</span>"</span></pre></figure>

<h2 id="sr-toc-16"><a href="#Docker-compose配置文件及命令行配置" title="Docker-compose配置文件及命令行配置" one-link-mark="yes"></a>Docker-compose 配置文件及命令行配置</h2><p>命令行配置是为了解决我作为用户每次都要去网页上手动配置的痛点而开发的。使用 Docker-compose 主要是为了方便部署，更新与维护。</p>
<sr-blockquote>
<p>Rsshub 为可选项，主要用于爬取不提供 RSS/API 的网站。</p>
</sr-blockquote>
<sr-blockquote>
<p>2022.3.22 更新：由于官方版本的 NZBGet 不支援 <code>TLS1.3</code>，所以我自己构建了一个 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://hub.docker.com/r/johnrosen/nzbget" one-link-mark="yes">Docker image</a> 以支援 <code>TLS1.3</code>。</p>
</sr-blockquote>
<sr-blockquote>
<p>2022.3.25 更新：新增 <code>Resilio Sync</code> 可选项。</p>
</sr-blockquote>
<sr-blockquote>
<p>2022.3.31 更新：新增 <code>Autoheal</code> 用于全自动重启掉线容器。</p>
</sr-blockquote>
<sr-blockquote>
<p>2022.4.6 更新： 新增 <code>ddclient</code> 内容。</p>
</sr-blockquote>
<p>写入 Docker-compose 配置文件</p>
<figure><pre class="hljs properties"><span class="hljs-attr">cd</span> <span class="hljs-string">/data/ </span>
    <span class="hljs-attr">cat</span> <span class="hljs-string">&gt; "docker-compose.yml" &lt;&lt; EOF</span>
<span class="hljs-attr">version</span>: <span class="hljs-string">"3.8"</span>
<span class="hljs-attr">services</span>:<span class="hljs-string"></span>
  <span class="hljs-attr">nzbget</span>:<span class="hljs-string"></span>
<span class="hljs-comment">    # 6789</span>
    <span class="hljs-attr">network_mode</span>: <span class="hljs-string">host</span>
    <span class="hljs-attr">image</span>: <span class="hljs-string">johnrosen/nzbget:latest</span>
    <span class="hljs-attr">container_name</span>: <span class="hljs-string">nzbget</span>
    <span class="hljs-attr">environment</span>:<span class="hljs-string"></span>
      <span class="hljs-meta">-</span> <span class="hljs-string">PUID=0</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">PGID=0</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">TZ=Asia/Shanghai</span>
    <span class="hljs-attr">volumes</span>:<span class="hljs-string"></span>
      <span class="hljs-meta">-</span> <span class="hljs-string">/usr/share/nginx/nzbget/config:/config</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">/data/usenet:/data/usenet:rw</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">/ssd:/ssd:rw</span>
    <span class="hljs-attr">restart</span>: <span class="hljs-string">always</span>
  <span class="hljs-attr">sonarr</span>:<span class="hljs-string"></span>
<span class="hljs-comment">    # 8989</span>
    <span class="hljs-attr">network_mode</span>: <span class="hljs-string">host</span>
    <span class="hljs-attr">image</span>: <span class="hljs-string">lscr.io/linuxserver/sonarr</span>
    <span class="hljs-attr">container_name</span>: <span class="hljs-string">sonarr</span>
    <span class="hljs-attr">environment</span>:<span class="hljs-string"></span>
      <span class="hljs-meta">-</span> <span class="hljs-string">PUID=0</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">PGID=0</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">TZ=Asia/Shanghai</span>
    <span class="hljs-attr">volumes</span>:<span class="hljs-string"></span>
      <span class="hljs-meta">-</span> <span class="hljs-string">/usr/share/nginx/sonarr/config:/config</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">/data:/data</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">/ssd:/ssd</span>
    <span class="hljs-attr">restart</span>: <span class="hljs-string">always</span>
  <span class="hljs-attr">radarr</span>:<span class="hljs-string"></span>
<span class="hljs-comment">    # 7878</span>
    <span class="hljs-attr">network_mode</span>: <span class="hljs-string">host</span>
    <span class="hljs-attr">image</span>: <span class="hljs-string">lscr.io/linuxserver/radarr</span>
    <span class="hljs-attr">container_name</span>: <span class="hljs-string">radarr</span>
    <span class="hljs-attr">environment</span>:<span class="hljs-string"></span>
      <span class="hljs-meta">-</span> <span class="hljs-string">PUID=0</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">PGID=0</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">TZ=Asia/Shanghai</span>
    <span class="hljs-attr">volumes</span>:<span class="hljs-string"></span>
      <span class="hljs-meta">-</span> <span class="hljs-string">/usr/share/nginx/radarr/config:/config</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">/data:/data</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">/ssd:/ssd</span>
    <span class="hljs-attr">restart</span>: <span class="hljs-string">always</span>
  <span class="hljs-attr">lidarr</span>:<span class="hljs-string"></span>
<span class="hljs-comment">    # 8686</span>
    <span class="hljs-attr">network_mode</span>: <span class="hljs-string">host</span>
    <span class="hljs-attr">image</span>: <span class="hljs-string">lscr.io/linuxserver/lidarr</span>
    <span class="hljs-attr">container_name</span>: <span class="hljs-string">lidarr</span>
    <span class="hljs-attr">environment</span>:<span class="hljs-string"></span>
      <span class="hljs-meta">-</span> <span class="hljs-string">PUID=0</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">PGID=0</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">TZ=Asia/Shanghai</span>
    <span class="hljs-attr">volumes</span>:<span class="hljs-string"></span>
      <span class="hljs-meta">-</span> <span class="hljs-string">/usr/share/nginx/lidarr/config:/config</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">/data:/data</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">/ssd:/ssd</span>
    <span class="hljs-attr">restart</span>: <span class="hljs-string">always</span>
  <span class="hljs-attr">readarr</span>:<span class="hljs-string"></span>
<span class="hljs-comment">    # 8787</span>
    <span class="hljs-attr">network_mode</span>: <span class="hljs-string">host</span>
    <span class="hljs-attr">image</span>: <span class="hljs-string">lscr.io/linuxserver/readarr:develop</span>
    <span class="hljs-attr">container_name</span>: <span class="hljs-string">readarr</span>
    <span class="hljs-attr">environment</span>:<span class="hljs-string"></span>
      <span class="hljs-meta">-</span> <span class="hljs-string">PUID=0</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">PGID=0</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">TZ=Asia/Shanghai</span>
    <span class="hljs-attr">volumes</span>:<span class="hljs-string"></span>
      <span class="hljs-meta">-</span> <span class="hljs-string">/usr/share/nginx/readarr/config:/config</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">/data:/data</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">/ssd:/ssd</span>
    <span class="hljs-attr">restart</span>: <span class="hljs-string">always</span>
  <span class="hljs-attr">prowlarr</span>:<span class="hljs-string"></span>
<span class="hljs-comment">    # 9696</span>
    <span class="hljs-attr">network_mode</span>: <span class="hljs-string">host</span>
    <span class="hljs-attr">image</span>: <span class="hljs-string">lscr.io/linuxserver/prowlarr:develop</span>
    <span class="hljs-attr">container_name</span>: <span class="hljs-string">prowlarr</span>
    <span class="hljs-attr">environment</span>:<span class="hljs-string"></span>
      <span class="hljs-meta">-</span> <span class="hljs-string">PUID=0</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">PGID=0</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">TZ=Asia/Shanghai</span>
    <span class="hljs-attr">volumes</span>:<span class="hljs-string"></span>
      <span class="hljs-meta">-</span> <span class="hljs-string">/usr/share/nginx/prowlarr/config:/config</span>
    <span class="hljs-attr">restart</span>: <span class="hljs-string">always</span>
<span class="hljs-comment">  # jackett:</span>
<span class="hljs-comment">  #   #9117</span>
<span class="hljs-comment">  #   network_mode: host</span>
<span class="hljs-comment">  #   image: lscr.io/linuxserver/jackett</span>
<span class="hljs-comment">  #   container_name: jackett</span>
<span class="hljs-comment">  #   environment:</span>
<span class="hljs-comment">  #     - PUID=0</span>
<span class="hljs-comment">  #     - PGID=0</span>
<span class="hljs-comment">  #     - TZ=Asia/Shanghai</span>
<span class="hljs-comment">  #   volumes:</span>
<span class="hljs-comment">  #     - /usr/share/nginx/jackett/config:/config</span>
<span class="hljs-comment">  #   restart: always</span>
  <span class="hljs-attr">flaresolverr</span>:<span class="hljs-string"></span>
<span class="hljs-comment">    # 8191</span>
    <span class="hljs-attr">network_mode</span>: <span class="hljs-string">host</span>
    <span class="hljs-attr">image</span>: <span class="hljs-string">flaresolverr/flaresolverr</span>
    <span class="hljs-attr">container_name</span>: <span class="hljs-string">flaresolverr</span>
    <span class="hljs-attr">environment</span>:<span class="hljs-string"></span>
      <span class="hljs-meta">-</span> <span class="hljs-string">LOG_LEVEL=${LOG_LEVEL:-info}</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">LOG_HTML=${LOG_HTML:-false}</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">CAPTCHA_SOLVER=${CAPTCHA_SOLVER:-none}</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">TZ=Asia/Shanghai</span>
    <span class="hljs-attr">restart</span>: <span class="hljs-string">always</span>
  <span class="hljs-attr">bazarr</span>:<span class="hljs-string"></span>
<span class="hljs-comment">    # 6767</span>
    <span class="hljs-attr">network_mode</span>: <span class="hljs-string">host</span>
    <span class="hljs-attr">image</span>: <span class="hljs-string">lscr.io/linuxserver/bazarr</span>
    <span class="hljs-attr">container_name</span>: <span class="hljs-string">bazarr</span>
    <span class="hljs-attr">environment</span>:<span class="hljs-string"></span>
      <span class="hljs-meta">-</span> <span class="hljs-string">PUID=0</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">PGID=0</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">TZ=Asia/Shanghai</span>
    <span class="hljs-attr">volumes</span>:<span class="hljs-string"></span>
      <span class="hljs-meta">-</span> <span class="hljs-string">/usr/share/nginx/bazarr/config:/config</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">/data/media/:/data/media</span>
    <span class="hljs-attr">restart</span>: <span class="hljs-string">always</span>
  <span class="hljs-attr">chinesesubfinder</span>:<span class="hljs-string"></span>
<span class="hljs-comment">    # 19035</span>
    <span class="hljs-attr">network_mode</span>: <span class="hljs-string">host</span>
    <span class="hljs-attr">image</span>: <span class="hljs-string">allanpk716/chinesesubfinder:latest</span>
    <span class="hljs-attr">container_name</span>: <span class="hljs-string">chinesesubfinder</span>
    <span class="hljs-attr">environment</span>:<span class="hljs-string"></span>
      <span class="hljs-meta">-</span> <span class="hljs-string">PUID=0</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">PGID=0</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">TZ=Asia/Shanghai</span>
    <span class="hljs-attr">volumes</span>:<span class="hljs-string"></span>
      <span class="hljs-meta">-</span> <span class="hljs-string">/usr/share/nginx/chinesesubfinder/app/cache:/app/cache</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">/usr/share/nginx/chinesesubfinder/config:/config</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">/data:/data</span>
    <span class="hljs-attr">restart</span>: <span class="hljs-string">always</span>
  <span class="hljs-attr">ombi</span>:<span class="hljs-string"></span>
<span class="hljs-comment">    # 3579</span>
    <span class="hljs-attr">network_mode</span>: <span class="hljs-string">host</span>
    <span class="hljs-attr">image</span>: <span class="hljs-string">lscr.io/linuxserver/ombi</span>
    <span class="hljs-attr">container_name</span>: <span class="hljs-string">ombi</span>
    <span class="hljs-attr">environment</span>:<span class="hljs-string"></span>
      <span class="hljs-meta">-</span> <span class="hljs-string">PUID=0</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">PGID=0</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">TZ=Asia/Shanghai</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">BASE_URL=/ombi</span>
    <span class="hljs-attr">volumes</span>:<span class="hljs-string"></span>
      <span class="hljs-meta">-</span> <span class="hljs-string">/usr/share/nginx/ombi/config:/config</span>
    <span class="hljs-attr">restart</span>: <span class="hljs-string">always</span>
<span class="hljs-comment">  # resilio-sync:</span>
<span class="hljs-comment">  #   # 8888</span>
<span class="hljs-comment">  #   network_mode: host</span>
<span class="hljs-comment">  #   image: lscr.io/linuxserver/resilio-sync</span>
<span class="hljs-comment">  #   container_name: resilio-sync</span>
<span class="hljs-comment">  #   environment:</span>
<span class="hljs-comment">  #     - PUID=0</span>
<span class="hljs-comment">  #     - PGID=0</span>
<span class="hljs-comment">  #     - TZ=Asia/Shanghai</span>
<span class="hljs-comment">  #   volumes:</span>
<span class="hljs-comment">  #     - /usr/share/nginx/resilio/config:/config</span>
<span class="hljs-comment">  #     - /data/resilio/downloads:/data/resilio/downloads</span>
<span class="hljs-comment">  #     - /data/resilio:/data/resilio</span>
<span class="hljs-comment">  #     - /ssd:/ssd</span>
<span class="hljs-comment">  #   restart: always</span>
<span class="hljs-comment">  # miniflux:</span>
<span class="hljs-comment">  #   # 8288</span>
<span class="hljs-comment">  #   image: miniflux/miniflux:latest</span>
<span class="hljs-comment">  #   container_name: miniflux</span>
<span class="hljs-comment">  #   restart: always</span>
<span class="hljs-comment">  #   ports:</span>
<span class="hljs-comment">  #     - "8288:8080"</span>
<span class="hljs-comment">  #   depends_on:</span>
<span class="hljs-comment">  #     - postgresql</span>
<span class="hljs-comment">  #   environment:</span>
<span class="hljs-comment">  #     - DATABASE_URL=postgres://miniflux:adminadmin@postgresql/miniflux?sslmode=disable</span>
<span class="hljs-comment">  #     - RUN_MIGRATIONS=1</span>
<span class="hljs-comment">  #     - CREATE_ADMIN=1</span>
<span class="hljs-comment">  #     - ADMIN_USERNAME=admin</span>
<span class="hljs-comment">  #     - ADMIN_PASSWORD=adminadmin</span>
<span class="hljs-comment">  # postgresql:</span>
<span class="hljs-comment">  #   image: postgres:latest</span>
<span class="hljs-comment">  #   container_name: postgresql</span>
<span class="hljs-comment">  #   restart: always</span>
<span class="hljs-comment">  #   environment:</span>
<span class="hljs-comment">  #     - POSTGRES_USER=miniflux</span>
<span class="hljs-comment">  #     - POSTGRES_PASSWORD=adminadmin</span>
<span class="hljs-comment">  #   volumes:</span>
<span class="hljs-comment">  #     - miniflux-db:/var/lib/postgresql/data</span>
<span class="hljs-comment">  #   healthcheck:</span>
<span class="hljs-comment">  #     test: [ "CMD", "pg_isready", "-U", "miniflux" ]</span>
<span class="hljs-comment">  #     interval: 10s</span>
<span class="hljs-comment">  #     start_period: 30s</span>
<span class="hljs-comment">  # rsshub:</span>
<span class="hljs-comment">  #   # 1200</span>
<span class="hljs-comment">  #   network_mode: host</span>
<span class="hljs-comment">  #   image: diygod/rsshub</span>
<span class="hljs-comment">  #   container_name: rsshub</span>
<span class="hljs-comment">  #   environment:</span>
<span class="hljs-comment">  #     # PROXY_URI: 'http://127.0.0.1:8080'</span>
<span class="hljs-comment">  #     NODE_ENV: production</span>
<span class="hljs-comment">  #     CACHE_TYPE: redis</span>
<span class="hljs-comment">  #     REDIS_URL: 'redis://127.0.0.1:6379/'</span>
<span class="hljs-comment">  #     PUPPETEER_WS_ENDPOINT: 'ws://browserless:3000'</span>
<span class="hljs-comment">  #   depends_on:</span>
<span class="hljs-comment">  #     - browserless</span>
<span class="hljs-comment">  #   restart: always</span>
<span class="hljs-comment">  # browserless:</span>
<span class="hljs-comment">  #   # 3000</span>
<span class="hljs-comment">  #   network_mode: host</span>
<span class="hljs-comment">  #   image: browserless/chrome</span>
<span class="hljs-comment">  #   container_name: browserless</span>
<span class="hljs-comment">  #   restart: always</span>
<span class="hljs-comment">  # ipfs:</span>
<span class="hljs-comment">  #   # 4001 5001 8788</span>
<span class="hljs-comment">  #   network_mode: host</span>
<span class="hljs-comment">  #   image: ipfs/go-ipfs</span>
<span class="hljs-comment">  #   container_name: ipfs</span>
<span class="hljs-comment">  #   restart: always</span>
<span class="hljs-comment">  #   volumes:</span>
<span class="hljs-comment">  #     - ipfs_path:/ssd/ipfs</span>
<span class="hljs-comment">  #     - ipfs_fuse:/ssd/ipfs</span>
<span class="hljs-comment">  #     - ipns_fuse:/ssd/ipfs/ipns</span>
<span class="hljs-comment">  #     - /ssd:/ssd</span>
<span class="hljs-comment">  #   environment:</span>
<span class="hljs-comment">  #     - IPFS_PATH=/ssd/ipfs</span>
<span class="hljs-comment">  # photoprism:</span>
<span class="hljs-comment">  #   # 2342</span>
<span class="hljs-comment">  #   ports:</span>
<span class="hljs-comment">  #     - "2342:2342"</span>
<span class="hljs-comment">  #   image: photoprism/photoprism:latest</span>
<span class="hljs-comment">  #   container_name: photoprism</span>
<span class="hljs-comment">  #   depends_on:</span>
<span class="hljs-comment">  #     - mariadb</span>
<span class="hljs-comment">  #   restart: always</span>
<span class="hljs-comment">  #   security_opt:</span>
<span class="hljs-comment">  #     - seccomp:unconfined</span>
<span class="hljs-comment">  #     - apparmor:unconfined</span>
<span class="hljs-comment">  #   environment:</span>
<span class="hljs-comment">  #     PHOTOPRISM_ADMIN_PASSWORD: "adminadmin" # !!! PLEASE CHANGE YOUR INITIAL "admin" PASSWORD !!!</span>
<span class="hljs-comment">  #     PHOTOPRISM_SITE_URL: "http://0.0.0.0:2342/" # public server URL incl http:// or https:// and /path, :port is optional</span>
<span class="hljs-comment">  #     PHOTOPRISM_ORIGINALS_LIMIT: 50 # file size limit for originals in MB (increase for high-res video)</span>
<span class="hljs-comment">  #     PHOTOPRISM_HTTP_COMPRESSION: "none" # improves transfer speed and bandwidth utilization (none or gzip)</span>
<span class="hljs-comment">  #     PHOTOPRISM_DE<span class="hljs-doctag">BUG:</span> "false" # run in debug mode (shows additional log messages)</span>
<span class="hljs-comment">  #     PHOTOPRISM_PUBLIC: "false" # no authentication required (disables password protection)</span>
<span class="hljs-comment">  #     PHOTOPRISM_READONLY: "false" # don't modify originals directory (reduced functionality)</span>
<span class="hljs-comment">  #     PHOTOPRISM_EXPERIMENTAL: "false" # enables experimental features</span>
<span class="hljs-comment">  #     PHOTOPRISM_DISABLE_CHOWN: "false" # disables storage permission updates on startup</span>
<span class="hljs-comment">  #     PHOTOPRISM_DISABLE_WEBDAV: "false" # disables built-in WebDAV server</span>
<span class="hljs-comment">  #     PHOTOPRISM_DISABLE_SETTINGS: "false" # disables Settings in Web UI</span>
<span class="hljs-comment">  #     PHOTOPRISM_DISABLE_TENSORFLOW: "false" # disables all features depending on TensorFlow</span>
<span class="hljs-comment">  #     PHOTOPRISM_DISABLE_FACES: "false" # disables facial recognition</span>
<span class="hljs-comment">  #     PHOTOPRISM_DISABLE_CLASSIFICATION: "false" # disables image classification</span>
<span class="hljs-comment">  #     PHOTOPRISM_DARKTABLE_PRESETS: "false" # enables Darktable presets and disables concurrent RAW conversion</span>
<span class="hljs-comment">  #     PHOTOPRISM_DETECT_NSFW: "false" # flag photos as private that MAY be offensive (requires TensorFlow)</span>
<span class="hljs-comment">  #     PHOTOPRISM_UPLOAD_NSFW: "true" # allows uploads that MAY be offensive</span>
<span class="hljs-comment">  #     PHOTOPRISM_DATABASE_DRIVER: "mysql" # use MariaDB 10.5+ or MySQL 8+ instead of SQLite for improved performance</span>
<span class="hljs-comment">  #     PHOTOPRISM_DATABASE_SERVER: "mariadb:3306" # MariaDB or MySQL database server (hostname:port)</span>
<span class="hljs-comment">  #     PHOTOPRISM_DATABASE_NAME: "photoprism" # MariaDB or MySQL database schema name</span>
<span class="hljs-comment">  #     PHOTOPRISM_DATABASE_USER: "photoprism" # MariaDB or MySQL database user name</span>
<span class="hljs-comment">  #     PHOTOPRISM_DATABASE_PASSWORD: "adminadmin" # MariaDB or MySQL database user password</span>
<span class="hljs-comment">  #     PHOTOPRISM_SITE_TITLE: "PhotoPrism"</span>
<span class="hljs-comment">  #     PHOTOPRISM_SITE_CAPTION: "AI-Powered Photos App"</span>
<span class="hljs-comment">  #     PHOTOPRISM_SITE_DESCRIPTION: ""</span>
<span class="hljs-comment">  #     PHOTOPRISM_SITE_AUTHOR: ""</span>
<span class="hljs-comment">  #     ## Run/install on first startup (options: update, gpu, tensorflow, davfs, nano, clean):</span>
<span class="hljs-comment">  #     PHOTOPRISM_INIT: "gpu tensorflow"</span>
<span class="hljs-comment">  #     ## Hardware video transcoding config (optional)</span>
<span class="hljs-comment">  #     PHOTOPRISM_FFMPEG_BUFFERS: "64" # FFmpeg capture buffers (default: 32)</span>
<span class="hljs-comment">  #     # PHOTOPRISM_FFMPEG_BITRATE: "32"              # FFmpeg encoding bitrate limit in Mbit/s (default: 50)</span>
<span class="hljs-comment">  #     # PHOTOPRISM_FFMPEG_ENCODER: "h264_v4l2m2m"    # use Video4Linux for AVC transcoding (default: libx264)</span>
<span class="hljs-comment">  #     PHOTOPRISM_FFMPEG_ENCODER: "h264_qsv" # use Intel Quick Sync Video for AVC transcoding (default: libx264)</span>
<span class="hljs-comment">  #     HOME: "/photoprism"</span>
<span class="hljs-comment">  #   devices:</span>
<span class="hljs-comment">  #     - "/dev/dri:/dev/dri"</span>
<span class="hljs-comment">  #   working_dir: "/photoprism"</span>
<span class="hljs-comment">  #   volumes:</span>
<span class="hljs-comment">  #     - "/data:/photoprism/originals"</span>
<span class="hljs-comment">  #     - "/ssd/photoprism:/photoprism/storage"</span>
<span class="hljs-comment">  # mariadb:</span>
<span class="hljs-comment">  #   restart: always</span>
<span class="hljs-comment">  #   image: mariadb:latest</span>
<span class="hljs-comment">  #   container_name: mariadb</span>
<span class="hljs-comment">  #   security_opt:</span>
<span class="hljs-comment">  #     - seccomp:unconfined</span>
<span class="hljs-comment">  #     - apparmor:unconfined</span>
<span class="hljs-comment">  #   command: mysqld --innodb-buffer-pool-size=1G --transaction-isolation=READ-COMMITTED --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci --max-connections=512 --innodb-rollback-on-timeout=OFF --innodb-lock-wait-timeout=120</span>
<span class="hljs-comment">  #   volumes:</span>
<span class="hljs-comment">  #     - "/ssd/mariadb:/var/lib/mysql"</span>
<span class="hljs-comment">  #   environment:</span>
<span class="hljs-comment">  #     MYSQL_ROOT_PASSWORD: adminadmin</span>
<span class="hljs-comment">  #     MYSQL_DATABASE: photoprism</span>
<span class="hljs-comment">  #     MYSQL_USER: photoprism</span>
<span class="hljs-comment">  #     MYSQL_PASSWORD: adminadmin</span>
  <span class="hljs-attr">alist</span>:<span class="hljs-string"></span>
<span class="hljs-comment">    # 5244</span>
    <span class="hljs-attr">network_mode</span>: <span class="hljs-string">host</span>
    <span class="hljs-attr">image</span>: <span class="hljs-string">xhofe/alist:latest</span>
    <span class="hljs-attr">container_name</span>: <span class="hljs-string">alist</span>
    <span class="hljs-attr">restart</span>: <span class="hljs-string">always</span>
    <span class="hljs-attr">devices</span>:<span class="hljs-string"></span>
      <span class="hljs-meta">-</span> <span class="hljs-string">"/dev/dri:/dev/dri"</span>
    <span class="hljs-attr">volumes</span>:<span class="hljs-string"></span>
      <span class="hljs-meta">-</span> <span class="hljs-string">/etc/alist:/opt/alist/data</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">/onedrive:/onedrive</span>
      <span class="hljs-meta">-</span> <span class="hljs-string">/ssd:/ssd</span>
<span class="hljs-comment">  # ddclient:</span>
<span class="hljs-comment">  #   image: lscr.io/linuxserver/ddclient</span>
<span class="hljs-comment">  #   container_name: ddclient</span>
<span class="hljs-comment">  #   environment:</span>
<span class="hljs-comment">  #     - PUID=0</span>
<span class="hljs-comment">  #     - PGID=0</span>
<span class="hljs-comment">  #     - TZ=Asia/Shanghai</span>
<span class="hljs-comment">  #   volumes:</span>
<span class="hljs-comment">  #     - /usr/share/nginx/ddclient:/config</span>
<span class="hljs-comment">  #   restart: always</span>
<span class="hljs-comment">  # dashy:</span>
<span class="hljs-comment">  #   image: lissy93/dashy</span>
<span class="hljs-comment">  #   container_name: Dashy</span>
<span class="hljs-comment">  #   volumes:</span>
<span class="hljs-comment">  #     - /root/.config/dashy/conf.yml:/app/public/conf.yml</span>
<span class="hljs-comment">  #   ports:</span>
<span class="hljs-comment">  #     - 4000:80</span>
<span class="hljs-comment">  #   environment:</span>
<span class="hljs-comment">  #     - NODE_ENV=production</span>
<span class="hljs-comment">  #     - UID=0</span>
<span class="hljs-comment">  #     - GID=0</span>
<span class="hljs-comment">  #   restart: always</span>
<span class="hljs-comment">  #   healthcheck:</span>
<span class="hljs-comment">  #     test: [ 'CMD', 'node', '/app/services/healthcheck' ]</span>
<span class="hljs-comment">  #     interval: 1m30s</span>
<span class="hljs-comment">  #     timeout: 10s</span>
<span class="hljs-comment">  #     retries: 3</span>
<span class="hljs-comment">  #     start_period: 40s</span>
<span class="hljs-comment">  # uptime-kuma:</span>
<span class="hljs-comment">    # image: louislam/uptime-kuma:latest</span>
<span class="hljs-comment">    # container_name: uptime-kuma</span>
<span class="hljs-comment">    # volumes:</span>
<span class="hljs-comment">    #   - /usr/share/nginx/uptime:/app/data</span>
<span class="hljs-comment">    # ports:</span>
<span class="hljs-comment">    #  - 3001:3001</span>
<span class="hljs-comment">    # environment:</span>
<span class="hljs-comment">    #   - UPTIME_KUMA_CLOUDFLARED_TOKEN=</span>
<span class="hljs-comment">    # restart: always</span>
  <span class="hljs-attr">autoheal</span>:<span class="hljs-string"></span>
    <span class="hljs-attr">image</span>: <span class="hljs-string">willfarrell/autoheal</span>
    <span class="hljs-attr">container_name</span>: <span class="hljs-string">autoheal</span>
    <span class="hljs-attr">restart</span>: <span class="hljs-string">always</span>
    <span class="hljs-attr">environment</span>:<span class="hljs-string"></span>
      <span class="hljs-meta">-</span> <span class="hljs-string">AUTOHEAL_CONTAINER_LABEL=all</span>
    <span class="hljs-attr">volumes</span>:<span class="hljs-string"></span>
      <span class="hljs-meta">-</span> <span class="hljs-string">/var/run/docker.sock:/var/run/docker.sock</span>
  <span class="hljs-attr">watchtower</span>:<span class="hljs-string"></span>
    <span class="hljs-attr">image</span>: <span class="hljs-string">containrrr/watchtower</span>
    <span class="hljs-attr">container_name</span>: <span class="hljs-string">watchtower</span>
    <span class="hljs-attr">environment</span>:<span class="hljs-string"></span>
      <span class="hljs-meta">-</span> <span class="hljs-string">TZ=Asia/Shanghai</span>
    <span class="hljs-attr">volumes</span>:<span class="hljs-string"></span>
      <span class="hljs-meta">-</span> <span class="hljs-string">/var/run/docker.sock:/var/run/docker.sock</span>
    <span class="hljs-attr">command</span>: <span class="hljs-string">--cleanup --schedule "0 0 3 * * *"</span>
    <span class="hljs-attr">restart</span>: <span class="hljs-string">always</span>
<span class="hljs-attr">volumes</span>:<span class="hljs-string"></span>
  <span class="hljs-meta">miniflux-db</span>:<span class="hljs-string"></span>
  <span class="hljs-attr">ipfs_path</span>:<span class="hljs-string"></span>
  <span class="hljs-attr">ipfs_fuse</span>:<span class="hljs-string"></span>
  <span class="hljs-attr">ipns_fuse</span>:<span class="hljs-string"></span>

<span class="hljs-attr">EOF</span></pre></figure>

<sr-blockquote>
<p>我不想管烦人的权限问题，所以全部用 root (PUID=0) 运行。</p>
</sr-blockquote>
<sr-blockquote>
<p>Docker watchtower 用于全自动化地更新所有 Docker image。</p>
</sr-blockquote>
<p>拉取 Docker images 并等待 60 秒让程序初始化。</p>
<figure><pre class="hljs perl">docker-compose up -d &amp;&amp; <span class="hljs-keyword">sleep</span> <span class="hljs-number">60</span><span class="hljs-keyword">s</span></pre></figure>

<p>关闭所有程序进行配置</p>
<figure><pre class="hljs">docker-compose down</pre></figure>

<h2 id="sr-toc-17"><a href="#配置-NZBGet" title="配置 NZBGet" one-link-mark="yes"></a>配置 NZBGet</h2><sr-blockquote>
<p>2022.3.20 更新：修改 NZBGet 可用下载队列为最大值；新增程序写入缓存配置。</p>
</sr-blockquote>
<sr-blockquote>
<p>2022.3.22 更新：修正 <code>Server1.Cpiher</code> , 更换 <code>SSLv3</code> 协议为 <code>TLS1.2</code>。</p>
</sr-blockquote>
<figure><pre class="hljs nginx"><span class="hljs-attribute">sed</span> -i <span class="hljs-string">"s/MainDir=\/downloads/MainDir=\/data\/usenet\//g"</span> /usr/share/nginx/nzbget/config/nzbget.conf
sed -i <span class="hljs-string">"s/DestDir=\${MainDir}\/completed/DestDir=\${MainDir}/g"</span> /usr/share/nginx/nzbget/config/nzbget.conf
sed -i <span class="hljs-string">"s/ControlIP=0.0.0.0/ControlIP=127.0.0.1/g"</span> /usr/share/nginx/nzbget/config/nzbget.conf
sed -i <span class="hljs-string">"s/ControlUsername=nzbget/ControlUsername=admin/g"</span> /usr/share/nginx/nzbget/config/nzbget.conf
sed -i <span class="hljs-string">"s/FormAuth=no/FormAuth=yes/g"</span> /usr/share/nginx/nzbget/config/nzbget.conf
sed -i <span class="hljs-string">"s/AuthorizedIP=127.0.0.1/AuthorizedIP=/g"</span> /usr/share/nginx/nzbget/config/nzbget.conf
sed -i <span class="hljs-string">"s/ControlPassword=tegbzn6789/ControlPassword=<span class="hljs-variable">${password1}</span>/g"</span> /usr/share/nginx/nzbget/config/nzbget.conf

sed -i <span class="hljs-string">"s/Server1.Port=119/Server1.Port=563/g"</span> /usr/share/nginx/nzbget/config/nzbget.conf

sed -i <span class="hljs-string">"s/Server1.Cipher=/Server1.Cipher=ECDHE-ECDSA-AES128-GCM-SHA256/g"</span> /usr/share/nginx/nzbget/config/nzbget.conf
sed -i <span class="hljs-string">"s/Server1.Encryption=no/Server1.Encryption=yes/g"</span> /usr/share/nginx/nzbget/config/nzbget.conf
sed -i <span class="hljs-string">"s/Server1.Connections=4/Server1.Connections=50/g"</span> /usr/share/nginx/nzbget/config/nzbget.conf

sed -i <span class="hljs-string">"s/UrlConnections=4/UrlConnections=1/g"</span> /usr/share/nginx/nzbget/config/nzbget.conf

sed -i <span class="hljs-string">"s/Category4.Name=Software/Category4.Name=Books/g"</span> /usr/share/nginx/nzbget/config/nzbget.conf 
sed -i <span class="hljs-string">'/^Category4.Name=Books/a Category5.Name=XXX'</span> /usr/share/nginx/nzbget/config/nzbget.conf
sed -i <span class="hljs-string">'/^Category5.Name=XXX/a Category6.Name=Others'</span> /usr/share/nginx/nzbget/config/nzbget.conf

sed -i <span class="hljs-string">"s/PostStrategy=sequential/PostStrategy=rocket/g"</span> /usr/share/nginx/nzbget/config/nzbget.conf
sed -i <span class="hljs-string">"s/PostStrategy=balanced/PostStrategy=rocket/g"</span> /usr/share/nginx/nzbget/config/nzbget.conf
sed -i <span class="hljs-string">"s/PostStrategy=aggressive/PostStrategy=rocket/g"</span> /usr/share/nginx/nzbget/config/nzbget.conf

sed -i <span class="hljs-string">"s/DirectUnpack=no/DirectUnpack=yes/g"</span> /usr/share/nginx/nzbget/config/nzbget.conf
sed -i <span class="hljs-string">"s/DirectRename=no/DirectRename=yes/g"</span> /usr/share/nginx/nzbget/config/nzbget.conf

sed -i <span class="hljs-string">"s/ArticleCache=0/ArticleCache=200/g"</span> /usr/share/nginx/nzbget/config/nzbget.conf
sed -i <span class="hljs-string">"s/WriteBuffer=0/WriteBuffer=1024/g"</span> /usr/share/nginx/nzbget/config/nzbget.conf

sed -i <span class="hljs-string">"s/ArticleRetries=3/ArticleRetries=99/g"</span> /usr/share/nginx/nzbget/config/nzbget.conf
sed -i <span class="hljs-string">"s/UrlRetries=3/UrlRetries=99/g"</span> /usr/share/nginx/nzbget/config/nzbget.conf</pre></figure>

<h2 id="sr-toc-18"><a href="#配置-Sonarr" title="配置 Sonarr" one-link-mark="yes"></a>配置 Sonarr</h2><sr-blockquote>
<p>配置项目及内容大同小异，因此雷同注释仅标注一次。</p>
</sr-blockquote>
<sr-blockquote>
<p>2022.6.25 更新： <a target="_blank" rel="noopener external nofollow noreferrer" href="https://trash-guides.info/Sonarr/" one-link-mark="yes">重命名规则请照抄这个教程</a></p>
</sr-blockquote>
<figure><pre class="hljs properties"><span class="hljs-attr">sed</span> <span class="hljs-string">-i "s/&lt;UrlBase&gt;&lt;\/UrlBase&gt;/&lt;UrlBase&gt;\/sonarr\/&lt;\/UrlBase&gt;/g" /usr/share/nginx/sonarr/config/config.xml </span>
<span class="hljs-attr">sed</span> <span class="hljs-string">-i '$d' /usr/share/nginx/sonarr/config/config.xml</span>

<span class="hljs-attr">echo</span> <span class="hljs-string">'  &lt;AnalyticsEnabled&gt;False&lt;/AnalyticsEnabled&gt;' &gt;&gt; /usr/share/nginx/sonarr/config/config.xml </span>
<span class="hljs-attr">echo</span> <span class="hljs-string">'&lt;/Config&gt;' &gt;&gt; /usr/share/nginx/sonarr/config/config.xml</span>

<span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/sonarr/config/sonarr.db  "insert into RootFolders values ('1','/data/media/Series/');"</span>


<span class="hljs-meta">&gt;</span> <span class="hljs-string">2022.6.25 更新：此处不建议开启，刮削结果为英文，建议将该工作交由 Emby 完成。</span>

<span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/sonarr/config/sonarr.db  "DELETE FROM Metadata WHERE Id = 1;"</span>
<span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/sonarr/config/sonarr.db  "insert into Metadata values ('1','1','Kodi (XBMC) / Emby','XbmcMetadata','{</span>
  <span class="hljs-attr">\"seriesMetadata\"</span>: <span class="hljs-string">true,</span>
  <span class="hljs-attr">\"seriesMetadataUrl\"</span>: <span class="hljs-string">false,</span>
  <span class="hljs-attr">\"episodeMetadata\"</span>: <span class="hljs-string">true,</span>
  <span class="hljs-attr">\"seriesImages\"</span>: <span class="hljs-string">true,</span>
  <span class="hljs-attr">\"seasonImages\"</span>: <span class="hljs-string">true,</span>
  <span class="hljs-attr">\"episodeImages\"</span>: <span class="hljs-string">true,</span>
  <span class="hljs-attr">\"isValid\"</span>: <span class="hljs-string">true</span>
<span class="hljs-attr">}','XbmcMetadataSettings');"</span>

<span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/sonarr/config/sonarr.db  "DELETE FROM LanguageProfiles WHERE Id = 1;"</span>
<span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/sonarr/config/sonarr.db  "insert into LanguageProfiles values ('1','Chinese','[</span>
  <span class="hljs-attr">{</span>
    <span class="hljs-attr">\"language\"</span>: <span class="hljs-string">0,</span>
    <span class="hljs-attr">\"allowed\"</span>: <span class="hljs-string">false</span>
  <span class="hljs-attr">},</span>
  <span class="hljs-attr">{</span>
    <span class="hljs-attr">\"language\"</span>: <span class="hljs-string">13,</span>
    <span class="hljs-attr">\"allowed\"</span>: <span class="hljs-string">false</span>
  <span class="hljs-attr">},</span>
  <span class="hljs-attr">{</span>
    <span class="hljs-attr">\"language\"</span>: <span class="hljs-string">17,</span>
    <span class="hljs-attr">\"allowed\"</span>: <span class="hljs-string">false</span>
  <span class="hljs-attr">},</span>
  <span class="hljs-attr">{</span>
    <span class="hljs-attr">\"language\"</span>: <span class="hljs-string">14,</span>
    <span class="hljs-attr">\"allowed\"</span>: <span class="hljs-string">false</span>
  <span class="hljs-attr">},</span>
  <span class="hljs-attr">{</span>
    <span class="hljs-attr">\"language\"</span>: <span class="hljs-string">3,</span>
    <span class="hljs-attr">\"allowed\"</span>: <span class="hljs-string">false</span>
  <span class="hljs-attr">},</span>
  <span class="hljs-attr">{</span>
    <span class="hljs-attr">\"language\"</span>: <span class="hljs-string">11,</span>
    <span class="hljs-attr">\"allowed\"</span>: <span class="hljs-string">false</span>
  <span class="hljs-attr">},</span>
  <span class="hljs-attr">{</span>
    <span class="hljs-attr">\"language\"</span>: <span class="hljs-string">18,</span>
    <span class="hljs-attr">\"allowed\"</span>: <span class="hljs-string">false</span>
  <span class="hljs-attr">},</span>
  <span class="hljs-attr">{</span>
    <span class="hljs-attr">\"language\"</span>: <span class="hljs-string">12,</span>
    <span class="hljs-attr">\"allowed\"</span>: <span class="hljs-string">false</span>
  <span class="hljs-attr">},</span>
  <span class="hljs-attr">{</span>
    <span class="hljs-attr">\"language\"</span>: <span class="hljs-string">15,</span>
    <span class="hljs-attr">\"allowed\"</span>: <span class="hljs-string">false</span>
  <span class="hljs-attr">},</span>
  <span class="hljs-attr">{</span>
    <span class="hljs-attr">\"language\"</span>: <span class="hljs-string">24,</span>
    <span class="hljs-attr">\"allowed\"</span>: <span class="hljs-string">false</span>
  <span class="hljs-attr">},</span>
  <span class="hljs-attr">{</span>
    <span class="hljs-attr">\"language\"</span>: <span class="hljs-string">21,</span>
    <span class="hljs-attr">\"allowed\"</span>: <span class="hljs-string">false</span>
  <span class="hljs-attr">},</span>
  <span class="hljs-attr">{</span>
    <span class="hljs-attr">\"language\"</span>: <span class="hljs-string">5,</span>
    <span class="hljs-attr">\"allowed\"</span>: <span class="hljs-string">false</span>
  <span class="hljs-attr">},</span>
  <span class="hljs-attr">{</span>
    <span class="hljs-attr">\"language\"</span>: <span class="hljs-string">9,</span>
    <span class="hljs-attr">\"allowed\"</span>: <span class="hljs-string">false</span>
  <span class="hljs-attr">},</span>
  <span class="hljs-attr">{</span>
    <span class="hljs-attr">\"language\"</span>: <span class="hljs-string">22,</span>
    <span class="hljs-attr">\"allowed\"</span>: <span class="hljs-string">false</span>
  <span class="hljs-attr">},</span>
  <span class="hljs-attr">{</span>
    <span class="hljs-attr">\"language\"</span>: <span class="hljs-string">27,</span>
    <span class="hljs-attr">\"allowed\"</span>: <span class="hljs-string">false</span>
  <span class="hljs-attr">},</span>
  <span class="hljs-attr">{</span>
    <span class="hljs-attr">\"language\"</span>: <span class="hljs-string">23,</span>
    <span class="hljs-attr">\"allowed\"</span>: <span class="hljs-string">false</span>
  <span class="hljs-attr">},</span>
  <span class="hljs-attr">{</span>
    <span class="hljs-attr">\"language\"</span>: <span class="hljs-string">20,</span>
    <span class="hljs-attr">\"allowed\"</span>: <span class="hljs-string">false</span>
  <span class="hljs-attr">},</span>
  <span class="hljs-attr">{</span>
    <span class="hljs-attr">\"language\"</span>: <span class="hljs-string">4,</span>
    <span class="hljs-attr">\"allowed\"</span>: <span class="hljs-string">false</span>
  <span class="hljs-attr">},</span>
  <span class="hljs-attr">{</span>
    <span class="hljs-attr">\"language\"</span>: <span class="hljs-string">2,</span>
    <span class="hljs-attr">\"allowed\"</span>: <span class="hljs-string">false</span>
  <span class="hljs-attr">},</span>
  <span class="hljs-attr">{</span>
    <span class="hljs-attr">\"language\"</span>: <span class="hljs-string">19,</span>
    <span class="hljs-attr">\"allowed\"</span>: <span class="hljs-string">false</span>
  <span class="hljs-attr">},</span>
  <span class="hljs-attr">{</span>
    <span class="hljs-attr">\"language\"</span>: <span class="hljs-string">16,</span>
    <span class="hljs-attr">\"allowed\"</span>: <span class="hljs-string">false</span>
  <span class="hljs-attr">},</span>
  <span class="hljs-attr">{</span>
    <span class="hljs-attr">\"language\"</span>: <span class="hljs-string">7,</span>
    <span class="hljs-attr">\"allowed\"</span>: <span class="hljs-string">false</span>
  <span class="hljs-attr">},</span>
  <span class="hljs-attr">{</span>
    <span class="hljs-attr">\"language\"</span>: <span class="hljs-string">6,</span>
    <span class="hljs-attr">\"allowed\"</span>: <span class="hljs-string">false</span>
  <span class="hljs-attr">},</span>
  <span class="hljs-attr">{</span>
    <span class="hljs-attr">\"language\"</span>: <span class="hljs-string">25,</span>
    <span class="hljs-attr">\"allowed\"</span>: <span class="hljs-string">false</span>
  <span class="hljs-attr">},</span>
  <span class="hljs-attr">{</span>
    <span class="hljs-attr">\"language\"</span>: <span class="hljs-string">28,</span>
    <span class="hljs-attr">\"allowed\"</span>: <span class="hljs-string">false</span>
  <span class="hljs-attr">},</span>
  <span class="hljs-attr">{</span>
    <span class="hljs-attr">\"language\"</span>: <span class="hljs-string">26,</span>
    <span class="hljs-attr">\"allowed\"</span>: <span class="hljs-string">false</span>
  <span class="hljs-attr">},</span>
  <span class="hljs-attr">{</span>
    <span class="hljs-attr">\"language\"</span>: <span class="hljs-string">8,</span>
    <span class="hljs-attr">\"allowed\"</span>: <span class="hljs-string">true</span>
  <span class="hljs-attr">},</span>
  <span class="hljs-attr">{</span>
    <span class="hljs-attr">\"language\"</span>: <span class="hljs-string">1,</span>
    <span class="hljs-attr">\"allowed\"</span>: <span class="hljs-string">true</span>
  <span class="hljs-attr">},</span>
  <span class="hljs-attr">{</span>
    <span class="hljs-attr">\"language\"</span>: <span class="hljs-string">10,</span>
    <span class="hljs-attr">\"allowed\"</span>: <span class="hljs-string">true</span>
  <span class="hljs-attr">}</span>
<span class="hljs-attr">]','10','0');"</span>


<span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/sonarr/config/sonarr.db  "DELETE FROM NamingConfig WHERE Id = 1;"</span>
<span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/sonarr/config/sonarr.db  "insert into NamingConfig values ('1','0','1','{Series Title} - S{season:00}E{episode:00} - {Episode Title} {Quality Full}','{Series Title} - {Air-Date} - {Episode Title} {Quality Full}','Season {season}','{Series Title}','{Series Title} - S{season:00}E{episode:00} - {Episode Title} {Quality Full}','1','Specials');"</span>

  <span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/sonarr/config/sonarr.db  "insert into DownloadClients values ('1','1','qBittorrent_Series','QBittorrent','{</span>
  <span class="hljs-attr">\"host\"</span>: <span class="hljs-string">\"127.0.0.1\",</span>
  <span class="hljs-attr">\"port\"</span>: <span class="hljs-string">8080,</span>
  <span class="hljs-attr">\"useSsl\"</span>: <span class="hljs-string">false,</span>
  <span class="hljs-attr">\"username\"</span>: <span class="hljs-string">\"admin\",</span>
  <span class="hljs-attr">\"password\"</span>: <span class="hljs-string">\"adminadmin\",</span>
  <span class="hljs-attr">\"tvCategory\"</span>: <span class="hljs-string">\"Series\",</span>
  <span class="hljs-attr">\"recentTvPriority\"</span>: <span class="hljs-string">0,</span>
  <span class="hljs-attr">\"olderTvPriority\"</span>: <span class="hljs-string">0,</span>
  <span class="hljs-attr">\"initialState\"</span>: <span class="hljs-string">0,</span>
  <span class="hljs-attr">\"sequentialOrder\"</span>: <span class="hljs-string">false,</span>
  <span class="hljs-attr">\"firstAndLast\"</span>: <span class="hljs-string">false</span>
<span class="hljs-meta">}','QBittorrentSettings','1','1','1');"</span> <span class="hljs-string"></span>

  <span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/sonarr/config/sonarr.db  "insert into DownloadClients values ('2','1','NZBGet_Series','Nzbget','{</span>
  <span class="hljs-attr">\"host\"</span>: <span class="hljs-string">\"127.0.0.1\",</span>
  <span class="hljs-attr">\"port\"</span>: <span class="hljs-string">6789,</span>
  <span class="hljs-attr">\"useSsl\"</span>: <span class="hljs-string">false,</span>
  <span class="hljs-attr">\"username\"</span>: <span class="hljs-string">\"admin\",</span>
  <span class="hljs-attr">\"password\"</span>: <span class="hljs-string">\"adminadmin\",</span>
  <span class="hljs-attr">\"tvCategory\"</span>: <span class="hljs-string">\"Series\",</span>
  <span class="hljs-attr">\"recentTvPriority\"</span>: <span class="hljs-string">0,</span>
  <span class="hljs-attr">\"olderTvPriority\"</span>: <span class="hljs-string">0,</span>
  <span class="hljs-attr">\"addPaused\"</span>: <span class="hljs-string">false</span>
<span class="hljs-meta">}','NzbgetSettings','1','1','1');"</span> <span class="hljs-string"></span>

<span class="hljs-attr">sonarr_api</span>=<span class="hljs-string">$(xml_grep 'ApiKey' /usr/share/nginx/sonarr/config/config.xml --text_only)</span></pre></figure>

<h2 id="sr-toc-19"><a href="#配置-Radarr" title="配置 Radarr" one-link-mark="yes"></a>配置 Radarr</h2><sr-blockquote>
<p>2022.6.25 更新： <a target="_blank" rel="noopener external nofollow noreferrer" href="https://trash-guides.info/Sonarr/" one-link-mark="yes">重命名规则请照抄这个教程</a></p>
</sr-blockquote>
<figure><pre class="hljs properties"><span class="hljs-attr">sed</span> <span class="hljs-string">-i "s/&lt;UrlBase&gt;&lt;\/UrlBase&gt;/&lt;UrlBase&gt;\/radarr\/&lt;\/UrlBase&gt;/g" /usr/share/nginx/radarr/config/config.xml</span>
<span class="hljs-attr">sed</span> <span class="hljs-string">-i '$d' /usr/share/nginx/radarr/config/config.xml</span>
<span class="hljs-attr">echo</span> <span class="hljs-string">'  &lt;AnalyticsEnabled&gt;False&lt;/AnalyticsEnabled&gt;' &gt;&gt; /usr/share/nginx/radarr/config/config.xml</span>
<span class="hljs-attr">echo</span> <span class="hljs-string">'&lt;/Config&gt;' &gt;&gt; /usr/share/nginx/radarr/config/config.xml</span>
<span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/radarr/config/radarr.db  "insert into RootFolders values ('1','/data/media/Movies/');"</span>
<span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/radarr/config/radarr.db  "insert into Config values ('6','movieinfolanguage','10');"</span>
<span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/radarr/config/radarr.db  "insert into Config values ('7','uilanguage','10');"</span>
<span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/radarr/config/radarr.db  "UPDATE Metadata SET Enable = 1 WHERE Id = 1;"</span>
<span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/radarr/config/radarr.db  "DELETE FROM Metadata WHERE Id = 1;"</span>
<span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/radarr/config/radarr.db  "insert into Metadata values ('1','1','Kodi (XBMC) / Emby','XbmcMetadata','{</span>
  <span class="hljs-attr">\"movieMetadata\"</span>: <span class="hljs-string">true,</span>
  <span class="hljs-attr">\"movieMetadataURL\"</span>: <span class="hljs-string">false,</span>
  <span class="hljs-attr">\"movieMetadataLanguage\"</span>: <span class="hljs-string">10,</span>
  <span class="hljs-attr">\"movieImages\"</span>: <span class="hljs-string">true,</span>
  <span class="hljs-attr">\"useMovieNfo\"</span>: <span class="hljs-string">false,</span>
  <span class="hljs-attr">\"isValid\"</span>: <span class="hljs-string">true</span>
<span class="hljs-attr">}','XbmcMetadataSettings');"</span>
<span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/radarr/config/radarr.db  "DELETE FROM NamingConfig WHERE Id = 1;"</span>
<span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/radarr/config/radarr.db  "insert into NamingConfig values ('1','0','1','{Movie Title} ({Release Year}) {Quality Full}','{Movie Title} ({Release Year})','0','1');"</span>
  <span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/radarr/config/radarr.db  "insert into DownloadClients values ('1','1','qBittorrent','QBittorrent','{</span>
  <span class="hljs-attr">\"host\"</span>: <span class="hljs-string">\"127.0.0.1\",</span>
  <span class="hljs-attr">\"port\"</span>: <span class="hljs-string">8080,</span>
  <span class="hljs-attr">\"useSsl\"</span>: <span class="hljs-string">false,</span>
  <span class="hljs-attr">\"username\"</span>: <span class="hljs-string">\"admin\",</span>
  <span class="hljs-attr">\"password\"</span>: <span class="hljs-string">\"adminadmin\",</span>
  <span class="hljs-attr">\"movieCategory\"</span>: <span class="hljs-string">\"Movies\",</span>
  <span class="hljs-attr">\"recentTvPriority\"</span>: <span class="hljs-string">0,</span>
  <span class="hljs-attr">\"olderTvPriority\"</span>: <span class="hljs-string">0,</span>
  <span class="hljs-attr">\"initialState\"</span>: <span class="hljs-string">0</span>
<span class="hljs-attr">}','QBittorrentSettings','1','1','1');"</span>

<span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/radarr/config/radarr.db  "insert into DownloadClients values ('2','1','NZBGet','Nzbget','{</span>
  <span class="hljs-attr">\"host\"</span>: <span class="hljs-string">\"127.0.0.1\",</span>
  <span class="hljs-attr">\"port\"</span>: <span class="hljs-string">6789,</span>
  <span class="hljs-attr">\"useSsl\"</span>: <span class="hljs-string">false,</span>
  <span class="hljs-attr">\"username\"</span>: <span class="hljs-string">\"admin\",</span>
  <span class="hljs-attr">\"password\"</span>: <span class="hljs-string">\"adminadmin\",</span>
  <span class="hljs-attr">\"movieCategory\"</span>: <span class="hljs-string">\"Movies\",</span>
  <span class="hljs-attr">\"recentMoviePriority\"</span>: <span class="hljs-string">0,</span>
  <span class="hljs-attr">\"olderMoviePriority\"</span>: <span class="hljs-string">0,</span>
  <span class="hljs-attr">\"addPaused\"</span>: <span class="hljs-string">false</span>
<span class="hljs-attr">}','NzbgetSettings','1','1','1');"</span>
<span class="hljs-attr">radarr_api</span>=<span class="hljs-string">$(xml_grep 'ApiKey' /usr/share/nginx/radarr/config/config.xml --text_only)</span></pre></figure>

<h2 id="sr-toc-20"><a href="#配置Lidarr" title="配置Lidarr" one-link-mark="yes"></a>配置 Lidarr</h2><figure><pre class="hljs properties"><span class="hljs-attr">sed</span> <span class="hljs-string">-i "s/&lt;UrlBase&gt;&lt;\/UrlBase&gt;/&lt;UrlBase&gt;\/lidarr\/&lt;\/UrlBase&gt;/g" /usr/share/nginx/lidarr/config/config.xml</span>
<span class="hljs-attr">sed</span> <span class="hljs-string">-i '$d' /usr/share/nginx/lidarr/config/config.xml</span>
<span class="hljs-attr">echo</span> <span class="hljs-string">'  &lt;AnalyticsEnabled&gt;False&lt;/AnalyticsEnabled&gt;' &gt;&gt; /usr/share/nginx/lidarr/config/config.xml</span>
<span class="hljs-attr">echo</span> <span class="hljs-string">'&lt;/Config&gt;' &gt;&gt; /usr/share/nginx/lidarr/config/config.xml</span>
<span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/lidarr/config/lidarr.db  "insert into RootFolders values ('1','/data/media/Music/','music','1','1','0','[]');"</span>
<span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/lidarr/config/lidarr.db  "DELETE FROM Metadata WHERE Id = 1;"</span>
<span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/lidarr/config/lidarr.db  "insert into Metadata values ('1','1','Kodi (XBMC) / Emby','XbmcMetadata','{</span>
  <span class="hljs-attr">\"artistMetadata\"</span>: <span class="hljs-string">true,</span>
  <span class="hljs-attr">\"albumMetadata\"</span>: <span class="hljs-string">true,</span>
  <span class="hljs-attr">\"artistImages\"</span>: <span class="hljs-string">true,</span>
  <span class="hljs-attr">\"albumImages\"</span>: <span class="hljs-string">true,</span>
  <span class="hljs-attr">\"isValid\"</span>: <span class="hljs-string">true</span>
<span class="hljs-attr">}','XbmcMetadataSettings');"</span>
<span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/lidarr/config/lidarr.db  "DELETE FROM NamingConfig WHERE Id = 1;"</span>
<span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/lidarr/config/lidarr.db  "insert into NamingConfig values ('1','1','{Artist Name}','1','{Album Title} ({Release Year})/{Artist Name} - {Album Title} - {track:00} - {Track Title}','{Album Title} ({Release Year})/{Medium Format} {medium:00}/{Artist Name} - {Album Title} - {track:00} - {Track Title}');"</span>
  <span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/lidarr/config/lidarr.db  "insert into DownloadClients values ('1','1','qBittorrent','QBittorrent','{</span>
  <span class="hljs-attr">\"host\"</span>: <span class="hljs-string">\"127.0.0.1\",</span>
  <span class="hljs-attr">\"port\"</span>: <span class="hljs-string">8080,</span>
  <span class="hljs-attr">\"username\"</span>: <span class="hljs-string">\"admin\",</span>
  <span class="hljs-attr">\"password\"</span>: <span class="hljs-string">\"adminadmin\",</span>
  <span class="hljs-attr">\"musicCategory\"</span>: <span class="hljs-string">\"Music\",</span>
  <span class="hljs-attr">\"recentTvPriority\"</span>: <span class="hljs-string">0,</span>
  <span class="hljs-attr">\"olderTvPriority\"</span>: <span class="hljs-string">0,</span>
  <span class="hljs-attr">\"initialState\"</span>: <span class="hljs-string">0,</span>
  <span class="hljs-attr">\"useSsl\"</span>: <span class="hljs-string">false</span>
<span class="hljs-attr">}','QBittorrentSettings','1');"</span>

<span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/lidarr/config/lidarr.db  "insert into DownloadClients values ('2','1','NZBGet','Nzbget','{</span>
  <span class="hljs-attr">\"host\"</span>: <span class="hljs-string">\"127.0.0.1\",</span>
  <span class="hljs-attr">\"port\"</span>: <span class="hljs-string">6789,</span>
  <span class="hljs-attr">\"username\"</span>: <span class="hljs-string">\"admin\",</span>
  <span class="hljs-attr">\"password\"</span>: <span class="hljs-string">\"adminadmin\",</span>
  <span class="hljs-attr">\"musicCategory\"</span>: <span class="hljs-string">\"Music\",</span>
  <span class="hljs-attr">\"recentTvPriority\"</span>: <span class="hljs-string">0,</span>
  <span class="hljs-attr">\"olderTvPriority\"</span>: <span class="hljs-string">0,</span>
  <span class="hljs-attr">\"addPaused\"</span>: <span class="hljs-string">false,</span>
  <span class="hljs-attr">\"useSsl\"</span>: <span class="hljs-string">false</span>
<span class="hljs-attr">}','NzbgetSettings','1');"</span>
<span class="hljs-attr">lidarr_api</span>=<span class="hljs-string">$(xml_grep 'ApiKey' /usr/share/nginx/lidarr/config/config.xml --text_only)</span></pre></figure>

<h2 id="sr-toc-21"><a href="#配置-Readarr" title="配置 Readarr" one-link-mark="yes"></a>配置 Readarr</h2><figure><pre class="hljs properties"><span class="hljs-attr">sed</span> <span class="hljs-string">-i "s/&lt;UrlBase&gt;&lt;\/UrlBase&gt;/&lt;UrlBase&gt;\/readarr\/&lt;\/UrlBase&gt;/g" /usr/share/nginx/readarr/config/config.xml</span>
<span class="hljs-attr">sed</span> <span class="hljs-string">-i '$d' /usr/share/nginx/readarr/config/config.xml</span>
<span class="hljs-attr">echo</span> <span class="hljs-string">'  &lt;AnalyticsEnabled&gt;False&lt;/AnalyticsEnabled&gt;' &gt;&gt; /usr/share/nginx/readarr/config/config.xml</span>
<span class="hljs-attr">echo</span> <span class="hljs-string">'&lt;/Config&gt;' &gt;&gt; /usr/share/nginx/readarr/config/config.xml</span>

<span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/readarr/config/readarr.db  "DELETE FROM NamingConfig WHERE Id = 1;"</span>
<span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/readarr/config/readarr.db  "insert into NamingConfig values ('1','1','{Author Name}','1','{Book Title}/{Author Name} - {Book Title}{ (PartNumber)}');"</span>
<span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/readarr/config/readarr.db  "insert into Config values ('6','uilanguage','10');"</span>
  <span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/readarr/config/readarr.db  "insert into DownloadClients values ('1','1','qBittorrent','QBittorrent','{</span>
  <span class="hljs-attr">\"host\"</span>: <span class="hljs-string">\"127.0.0.1\",</span>
  <span class="hljs-attr">\"port\"</span>: <span class="hljs-string">8080,</span>
  <span class="hljs-attr">\"useSsl\"</span>: <span class="hljs-string">false,</span>
  <span class="hljs-attr">\"username\"</span>: <span class="hljs-string">\"admin\",</span>
  <span class="hljs-attr">\"password\"</span>: <span class="hljs-string">\"adminadmin\",</span>
  <span class="hljs-attr">\"musicCategory\"</span>: <span class="hljs-string">\"Books\",</span>
  <span class="hljs-attr">\"recentTvPriority\"</span>: <span class="hljs-string">0,</span>
  <span class="hljs-attr">\"olderTvPriority\"</span>: <span class="hljs-string">0,</span>
  <span class="hljs-attr">\"initialState\"</span>: <span class="hljs-string">0</span>
<span class="hljs-attr">}','QBittorrentSettings','1');"</span>

<span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/readarr/config/readarr.db  "insert into DownloadClients values ('2','1','NZBGet','Nzbget','{</span>
  <span class="hljs-attr">\"host\"</span>: <span class="hljs-string">\"127.0.0.1\",</span>
  <span class="hljs-attr">\"port\"</span>: <span class="hljs-string">6789,</span>
  <span class="hljs-attr">\"useSsl\"</span>: <span class="hljs-string">false,</span>
  <span class="hljs-attr">\"username\"</span>: <span class="hljs-string">\"admin\",</span>
  <span class="hljs-attr">\"password\"</span>: <span class="hljs-string">\"adminadmin\",</span>
  <span class="hljs-attr">\"musicCategory\"</span>: <span class="hljs-string">\"Books\",</span>
  <span class="hljs-attr">\"recentTvPriority\"</span>: <span class="hljs-string">0,</span>
  <span class="hljs-attr">\"olderTvPriority\"</span>: <span class="hljs-string">0,</span>
  <span class="hljs-attr">\"addPaused\"</span>: <span class="hljs-string">false</span>
<span class="hljs-attr">}','NzbgetSettings','1');"</span>
<span class="hljs-attr">readarr_api</span>=<span class="hljs-string">$(xml_grep 'ApiKey' /usr/share/nginx/readarr/config/config.xml --text_only)</span></pre></figure>

<h2 id="sr-toc-22"><a href="#配置-prowlarr" title="配置 prowlarr" one-link-mark="yes"></a>配置 prowlarr</h2><figure><pre class="hljs properties"><span class="hljs-attr">sed</span> <span class="hljs-string">-i "s/&lt;UrlBase&gt;&lt;\/UrlBase&gt;/&lt;UrlBase&gt;\/prowlarr\/&lt;\/UrlBase&gt;/g" /usr/share/nginx/prowlarr/config/config.xml</span>
<span class="hljs-attr">sed</span> <span class="hljs-string">-i '$d' /usr/share/nginx/prowlarr/config/config.xml</span>
<span class="hljs-attr">echo</span> <span class="hljs-string">'  &lt;AnalyticsEnabled&gt;False&lt;/AnalyticsEnabled&gt;' &gt;&gt; /usr/share/nginx/prowlarr/config/config.xml</span>
<span class="hljs-attr">echo</span> <span class="hljs-string">'&lt;/Config&gt;' &gt;&gt; /usr/share/nginx/prowlarr/config/config.xml</span>

<span class="hljs-attr">add_prowlarr_sonarr_radarr_lidarr_readarr(){</span>
    <span class="hljs-attr">cat</span> <span class="hljs-string">&gt; "add1.sh" &lt;&lt; "EOF"</span>

  <span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/prowlarr/config/prowlarr.db  "insert into Applications values ('1','Sonarr','Sonarr','{</span>
  <span class="hljs-attr">\"prowlarrUrl\"</span>: <span class="hljs-string">\"http://127.0.0.1:9696\",</span>
  <span class="hljs-attr">\"baseUrl\"</span>: <span class="hljs-string">\"http://127.0.0.1:8989/sonarr\",</span>
  <span class="hljs-attr">\"apiKey\"</span>: <span class="hljs-string">\"adminadmin\",</span>
  <span class="hljs-attr">\"syncCategories\"</span>: <span class="hljs-string">[</span>
    <span class="hljs-attr">5000,</span>
    <span class="hljs-attr">5010,</span>
    <span class="hljs-attr">5020,</span>
    <span class="hljs-attr">5030,</span>
    <span class="hljs-attr">5040,</span>
    <span class="hljs-attr">5045,</span>
  <span class="hljs-attr">],</span>
  <span class="hljs-attr">\"animeSyncCategories\"</span>: <span class="hljs-string">[</span>
  <span class="hljs-attr">]</span>
<span class="hljs-attr">}','SonarrSettings','2','[]');"</span>
<span class="hljs-attr">EOF</span>
<span class="hljs-attr">sed</span> <span class="hljs-string">-i "s/adminadmin/${sonarr_api}/g" add1.sh</span>
<span class="hljs-attr">bash</span> <span class="hljs-string">add1.sh</span>
<span class="hljs-attr">rm</span> <span class="hljs-string">add1.sh</span>

    <span class="hljs-attr">cat</span> <span class="hljs-string">&gt; "add2.sh" &lt;&lt; "EOF"</span>

  <span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/prowlarr/config/prowlarr.db  "insert into Applications values ('2','Radarr','Radarr','{</span>
  <span class="hljs-attr">\"prowlarrUrl\"</span>: <span class="hljs-string">\"http://127.0.0.1:9696\",</span>
  <span class="hljs-attr">\"baseUrl\"</span>: <span class="hljs-string">\"http://127.0.0.1:7878/radarr\",</span>
  <span class="hljs-attr">\"apiKey\"</span>: <span class="hljs-string">\"adminadmin\",</span>
  <span class="hljs-attr">\"syncCategories\"</span>: <span class="hljs-string">[</span>
    <span class="hljs-attr">2000,</span>
    <span class="hljs-attr">2010,</span>
    <span class="hljs-attr">2020,</span>
    <span class="hljs-attr">2030,</span>
    <span class="hljs-attr">2040,</span>
    <span class="hljs-attr">2045,</span>
    <span class="hljs-attr">2050,</span>
    <span class="hljs-attr">2060,</span>
    <span class="hljs-attr">2070,</span>
  <span class="hljs-attr">]</span>
<span class="hljs-attr">}','RadarrSettings','2','[]');"</span>
<span class="hljs-attr">EOF</span>
<span class="hljs-attr">sed</span> <span class="hljs-string">-i "s/adminadmin/${radarr_api}/g" add2.sh</span>
<span class="hljs-attr">bash</span> <span class="hljs-string">add2.sh</span>
<span class="hljs-attr">rm</span> <span class="hljs-string">add2.sh</span>

    <span class="hljs-attr">cat</span> <span class="hljs-string">&gt; "add3.sh" &lt;&lt; "EOF"</span>

  <span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/prowlarr/config/prowlarr.db  "insert into Applications values ('3','Lidarr','Lidarr','{</span>
  <span class="hljs-attr">\"prowlarrUrl\"</span>: <span class="hljs-string">\"http://127.0.0.1:9696\",</span>
  <span class="hljs-attr">\"baseUrl\"</span>: <span class="hljs-string">\"http://127.0.0.1:8686/lidarr\",</span>
  <span class="hljs-attr">\"apiKey\"</span>: <span class="hljs-string">\"adminadmin\",</span>
  <span class="hljs-attr">\"syncCategories\"</span>: <span class="hljs-string">[</span>
    <span class="hljs-attr">3000,</span>
    <span class="hljs-attr">3010,</span>
    <span class="hljs-attr">3030,</span>
    <span class="hljs-attr">3040,</span>
    <span class="hljs-attr">3050,</span>
  <span class="hljs-attr">]</span>
<span class="hljs-attr">}','LidarrSettings','2','[]');"</span>
<span class="hljs-attr">EOF</span>
<span class="hljs-attr">sed</span> <span class="hljs-string">-i "s/adminadmin/${lidarr_api}/g" add3.sh</span>
<span class="hljs-attr">bash</span> <span class="hljs-string">add3.sh</span>
<span class="hljs-attr">rm</span> <span class="hljs-string">add3.sh</span>

    <span class="hljs-attr">cat</span> <span class="hljs-string">&gt; "add4.sh" &lt;&lt; "EOF"</span>

  <span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/prowlarr/config/prowlarr.db  "insert into Applications values ('4','Readarr','Readarr','{</span>
  <span class="hljs-attr">\"prowlarrUrl\"</span>: <span class="hljs-string">\"http://127.0.0.1:9696\",</span>
  <span class="hljs-attr">\"baseUrl\"</span>: <span class="hljs-string">\"http://127.0.0.1:8787/readarr\",</span>
  <span class="hljs-attr">\"apiKey\"</span>: <span class="hljs-string">\"adminadmin\",</span>
  <span class="hljs-attr">\"syncCategories\"</span>: <span class="hljs-string">[</span>
    <span class="hljs-attr">3030,</span>
    <span class="hljs-attr">7000,</span>
    <span class="hljs-attr">7010,</span>
    <span class="hljs-attr">7020,</span>
    <span class="hljs-attr">7030,</span>
    <span class="hljs-attr">7040,</span>
    <span class="hljs-attr">7050,</span>
  <span class="hljs-attr">]</span>
<span class="hljs-attr">}','ReadarrSettings','2','[]');"</span>
<span class="hljs-attr">EOF</span>
<span class="hljs-attr">sed</span> <span class="hljs-string">-i "s/adminadmin/${readarr_api}/g" add4.sh</span>
<span class="hljs-attr">bash</span> <span class="hljs-string">add4.sh</span>
<span class="hljs-attr">rm</span> <span class="hljs-string">add4.sh</span>
<span class="hljs-attr">}</span>
<span class="hljs-attr">add_prowlarr_sonarr_radarr_lidarr_readarr</span>
<span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/prowlarr/config/prowlarr.db  "insert into Tags values ('1','flaresolverr');"</span>
<span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/prowlarr/config/prowlarr.db  "insert into IndexerProxies values ('1','FlareSolverr','{</span>
  <span class="hljs-attr">\"host\"</span>: <span class="hljs-string">\"http://127.0.0.1:8191/\",</span>
  <span class="hljs-attr">\"requestTimeout\"</span>: <span class="hljs-string">60</span>
<span class="hljs-attr">}','FlareSolverr','FlareSolverrSettings','[</span>
<span class="hljs-attr">]');"</span>
<span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/prowlarr/config/prowlarr.db  "insert into Config values ('6','uilanguage','10');"</span>
  <span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/prowlarr/config/prowlarr.db  "insert into DownloadClients values ('1','1','qBittorrent','QBittorrent','{</span>
  <span class="hljs-attr">\"host\"</span>: <span class="hljs-string">\"127.0.0.1\",</span>
  <span class="hljs-attr">\"port\"</span>: <span class="hljs-string">8080,</span>
  <span class="hljs-attr">\"useSsl\"</span>: <span class="hljs-string">false,</span>
  <span class="hljs-attr">\"username\"</span>: <span class="hljs-string">\"admin\",</span>
  <span class="hljs-attr">\"password\"</span>: <span class="hljs-string">\"adminadmin\",</span>
  <span class="hljs-attr">\"category\"</span>: <span class="hljs-string">\"Others\",</span>
  <span class="hljs-attr">\"priority\"</span>: <span class="hljs-string">0,</span>
  <span class="hljs-attr">\"initialState\"</span>: <span class="hljs-string">0</span>
<span class="hljs-attr">}','QBittorrentSettings','1');"</span>

<span class="hljs-attr">sqlite3</span> <span class="hljs-string">/usr/share/nginx/prowlarr/config/prowlarr.db  "insert into DownloadClients values ('2','1','NZBGet','Nzbget','{</span>
  <span class="hljs-attr">\"host\"</span>: <span class="hljs-string">\"127.0.0.1\",</span>
  <span class="hljs-attr">\"port\"</span>: <span class="hljs-string">6789,</span>
  <span class="hljs-attr">\"useSsl\"</span>: <span class="hljs-string">false,</span>
  <span class="hljs-attr">\"username\"</span>: <span class="hljs-string">\"admin\",</span>
  <span class="hljs-attr">\"password\"</span>: <span class="hljs-string">\"adminadmin\",</span>
  <span class="hljs-attr">\"category\"</span>: <span class="hljs-string">\"Others\",</span>
  <span class="hljs-attr">\"priority\"</span>: <span class="hljs-string">0,</span>
  <span class="hljs-attr">\"addPaused\"</span>: <span class="hljs-string">false</span>
<span class="hljs-attr">}','NzbgetSettings','1');"</span></pre></figure>

<h2 id="sr-toc-23"><a href="#配置-Jackett" title="配置 Jackett" one-link-mark="yes"></a>配置 Jackett</h2><figure><pre class="hljs ruby">cat <span class="hljs-string">'/usr/share/nginx/jackett/config/Jackett/ServerConfig.json'</span> <span class="hljs-params">| jq '.BasePathOverride |</span>= <span class="hljs-string">"/jackett/"</span><span class="hljs-string">' &gt;&gt; /usr/share/nginx/jackett/config/Jackett/tmp.json
cp -f /usr/share/nginx/jackett/config/Jackett/tmp.json /usr/share/nginx/jackett/config/Jackett/ServerConfig.json
rm /usr/share/nginx/jackett/config/Jackett/tmp.json

cat '</span>/usr/share/nginx/jackett/config/Jackett/ServerConfig.json<span class="hljs-string">' | jq '</span>.AllowExternal <span class="hljs-params">|= <span class="hljs-literal">false</span>' &gt;&gt; /usr/share/nginx/jackett/config/Jackett/tmp.json
cp -f /usr/share/nginx/jackett/config/Jackett/tmp.json /usr/share/nginx/jackett/config/Jackett/ServerConfig.json
rm /usr/share/nginx/jackett/config/Jackett/tmp.json

cat '/usr/share/nginx/jackett/config/Jackett/ServerConfig.json' |</span> jq <span class="hljs-string">'.FlareSolverrUrl |= "http://127.0.0.1:8191"'</span> <span class="hljs-meta">&gt;&gt; </span>/usr/share/nginx/jackett/config/Jackett/tmp.json
cp -f /usr/share/nginx/jackett/config/Jackett/tmp.json /usr/share/nginx/jackett/config/Jackett/ServerConfig.json
rm /usr/share/nginx/jackett/config/Jackett/tmp.json</pre></figure>

<h2 id="sr-toc-24"><a href="#配置-Bazarr" title="配置 Bazarr" one-link-mark="yes"></a>配置 Bazarr</h2><figure><pre class="hljs nginx"><span class="hljs-attribute">sed</span> -i <span class="hljs-string">"0,/base_url \=/s//base_url \= \/bazarr/g"</span> /usr/share/nginx/bazarr/config/config/config.ini
sed -i <span class="hljs-string">'/^\[sonarr\]$/,/^\[/ s/^base_url = \//base_url = \/sonarr\//'</span> /usr/share/nginx/bazarr/config/config/config.ini

sed -i <span class="hljs-string">"/^\[sonarr\]$/,/^\[/ s/^apikey =/apikey = <span class="hljs-variable">${sonarr_api}</span>/"</span> /usr/share/nginx/bazarr/config/config/config.ini
sed -i <span class="hljs-string">'/^\[radarr\]$/,/^\[/ s/^base_url = \//base_url = \/radarr\//'</span> /usr/share/nginx/bazarr/config/config/config.ini
sed -i <span class="hljs-string">"/^\[radarr\]$/,/^\[/ s/^apikey =/apikey = <span class="hljs-variable">${radarr_api}</span>/"</span> /usr/share/nginx/bazarr/config/config/config.ini
sed -i <span class="hljs-string">'/^\[analytics\]$/,/^\[/ s/^enabled = True/enabled = False/'</span> /usr/share/nginx/bazarr/config/config/config.ini
sed -i <span class="hljs-string">"s/use_sonarr = False/use_sonarr = True/g"</span> /usr/share/nginx/bazarr/config/config/config.ini
sed -i <span class="hljs-string">"s/use_radarr = False/use_radarr = True/g"</span> /usr/share/nginx/bazarr/config/config/config.ini
sed -i <span class="hljs-string">"s/serie_default_enabled = False/serie_default_enabled = True/g"</span> /usr/share/nginx/bazarr/config/config/config.ini
sed -i <span class="hljs-string">"s/serie_default_profile =/serie_default_profile = 1/g"</span> /usr/share/nginx/bazarr/config/config/config.ini
sed -i <span class="hljs-string">"s/movie_default_enabled = False/movie_default_enabled = True/g"</span> /usr/share/nginx/bazarr/config/config/config.ini
sed -i <span class="hljs-string">"s/movie_default_profile =/movie_default_profile = 1/g"</span> /usr/share/nginx/bazarr/config/config/config.ini
sed -i <span class="hljs-string">'/^\[assrt\]$/,/^\[/ s/^token =/token = oHwtSNdY1aQe1qwRSZVo70SqNW0Pu1AM/'</span> /usr/share/nginx/bazarr/config/config/config.ini 
sed -i <span class="hljs-string">'/^\[betaseries\]$/,/^\[/ s/^token =/token = ecd1f45f3036/'</span> /usr/share/nginx/bazarr/config/config/config.ini 

sed -i <span class="hljs-string">"s/enabled_providers = \[\]/enabled_providers = \['zimuku', 'assrt', 'yifysubtitles', 'betaseries', 'opensubtitlescom', 'supersubtitles', 'tvsubtitles', 'subscenter'\]/g"</span> /usr/share/nginx/bazarr/config/config/config.ini

sqlite3 /usr/share/nginx/bazarr/config/db/bazarr.db  <span class="hljs-string">"insert into table_languages_profiles values ('1','','[{\"id\": 1, \"language\": \"zh\", \"audio_exclude\": \"False\", \"hi\": \"False\", \"forced\": \"False\"}, {\"id\": 2, \"language\": \"zt\", \"audio_exclude\": \"False\", \"hi\": \"False\", \"forced\": \"False\"}, {\"id\": 3, \"language\": \"en\", \"audio_exclude\": \"False\", \"hi\": \"False\", \"forced\": \"False\"}]','Chinese','[]','[]');"</span></pre></figure>

<h2 id="sr-toc-25"><a href="#配置-Ombi" title="配置 Ombi" one-link-mark="yes"></a>配置 Ombi</h2><figure><pre class="hljs cs">add_sonarr_ombi(){
    cat &gt; <span class="hljs-string">"add.sh"</span> &lt;&lt; <span class="hljs-string">"EOF"</span>

  sqlite3 /usr/share/nginx/ombi/config/OmbiSettings.db  <span class="hljs-string">"insert into GlobalSettings values ('2','{\"Enabled\":true,\"ApiKey\":\"adminadmin\",\"QualityProfile\":\"1\",\"SeasonFolders\":false,\"RootPath\":\"1\",\"QualityProfileAnime\":\"1\",\"RootPathAnime\":\"2\",\"AddOnly\":false,\"V3\":true,\"LanguageProfile\":2,\"LanguageProfileAnime\":2,\"ScanForAvailability\":false,\"Ssl\":false,\"SubDir\":\"/sonarr\",\"Ip\":\"127.0.0.1\",\"Port\":8989,\"Id\":0}','SonarrSettings');"</span>
EOF
sed -i <span class="hljs-string">"s/adminadmin/${sonarr_api}/g"</span> <span class="hljs-keyword">add</span>.sh
bash <span class="hljs-keyword">add</span>.sh
rm <span class="hljs-keyword">add</span>.sh
}

add_radarr_ombi(){
    cat &gt; <span class="hljs-string">"add.sh"</span> &lt;&lt; <span class="hljs-string">"EOF"</span>

  sqlite3 /usr/share/nginx/ombi/config/OmbiSettings.db  <span class="hljs-string">"insert into GlobalSettings values ('3','{\"Enabled\":true,\"ApiKey\":\"adminadmin\",\"DefaultQualityProfile\":\"1\",\"DefaultRootPath\":\"/data/media/movies\",\"AddOnly\":false,\"MinimumAvailability\":\"Announced\",\"ScanForAvailability\":false,\"Ssl\":false,\"SubDir\":\"/radarr\",\"Ip\":\"127.0.0.1\",\"Port\":7878,\"Id\":0}','RadarrSettings');"</span>
EOF
sed -i <span class="hljs-string">"s/adminadmin/${radarr_api}/g"</span> <span class="hljs-keyword">add</span>.sh
bash <span class="hljs-keyword">add</span>.sh
rm <span class="hljs-keyword">add</span>.sh
}

add_lidarr_ombi(){
    cat &gt; <span class="hljs-string">"add.sh"</span> &lt;&lt; <span class="hljs-string">"EOF"</span>

  sqlite3 /usr/share/nginx/ombi/config/OmbiSettings.db  <span class="hljs-string">"insert into GlobalSettings values ('4','{\"Enabled\":true,\"ApiKey\":\"adminadmin\",\"DefaultQualityProfile\":\"1\",\"DefaultRootPath\":\"/data/media/Music/\",\"AlbumFolder\":true,\"MetadataProfileId\":1,\"AddOnly\":false,\"Ssl\":false,\"SubDir\":\"/lidarr\",\"Ip\":\"127.0.0.1\",\"Port\":8686,\"Id\":0}','LidarrSettings');"</span>
EOF
sed -i <span class="hljs-string">"s/adminadmin/${lidarr_api}/g"</span> <span class="hljs-keyword">add</span>.sh
bash <span class="hljs-keyword">add</span>.sh
rm <span class="hljs-keyword">add</span>.sh
}

add_sonarr_ombi
add_radarr_ombi
add_lidarr_ombi

sqlite3 /usr/share/nginx/ombi/config/OmbiSettings.db  <span class="hljs-string">"DELETE FROM GlobalSettings WHERE Id = 1;"</span>
sqlite3 /usr/share/nginx/ombi/config/OmbiSettings.db  <span class="hljs-string">"insert into GlobalSettings values ('1','{\"BaseUrl\":\"/ombi\",\"CollectAnalyticData\":false,\"Wizard\":false,\"ApiKey\":\"dfbcab4789604b4289b3cdc71aa41bf6\",\"DoNotSendNotificationsForAutoApprove\":false,\"HideRequestsUsers\":false,\"DisableHealthChecks\":false,\"DefaultLanguageCode\":\"zh\",\"AutoDeleteAvailableRequests\":false,\"AutoDeleteAfterDays\":0,\"Branch\":0,\"HasMigratedOldTvDbData\":false,\"Set\":false,\"Id\":1}','OmbiSettings');"</span></pre></figure>

<h2 id="sr-toc-26"><a href="#启动系统" title="启动系统" one-link-mark="yes"></a>启动系统</h2><p>命令行配置已完成，是时候启动系统进行图形界面配置了。</p>
<figure><pre class="hljs bash"><span class="hljs-built_in">cd</span> /data
docker-compose up -d</pre></figure>

<p>等待几秒钟，然后使用浏览器，访问 VPS/NAS 的 IP / 域名，逐一访问页面中的链接，确定都能打开再继续。</p>
<p><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/nginx.png"></div></p>
<h2 id="sr-toc-27"><a href="#配置-Emby" title="配置 Emby" one-link-mark="yes"></a>配置 Emby</h2><p>打开链接，进行初始化，文件夹路径按照图中设置即可。</p>
<sr-blockquote>
<p>建议电视节目文件夹将 The Movie DB 设为首选。</p>
</sr-blockquote>
<p><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/emby_db.png"></div></p>
<p>启用 NFO<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/emby_nfo.png"></div></p>
<p>勾选这个选项<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/emby_check.png"></div></p>
<p>新建 电视节目 文件夹<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/emby_serise.png"></div></p>
<p>新建 电影 文件夹<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/emby_movies.png"></div></p>
<p>新建 音乐 文件夹<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/emby_music.png"></div></p>
<p>新建 书籍 文件夹<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/emby_books.png"></div></p>
<p>新建 Emby API<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/emby_api.png"></div></p>
<h2 id="sr-toc-28"><a href="#配置-Ombi-1" title="配置 Ombi" one-link-mark="yes"></a>配置 Ombi</h2><p>打开链接，进行初始化，Emby API 复制黏贴即可，其余设置如图所示。</p>
<p><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/ombi_emby.png"></div></p>
<h2 id="sr-toc-29"><a href="#检查-Sonarr-配置" title="检查 Sonarr 配置" one-link-mark="yes"></a>检查 Sonarr 配置</h2><p>逐一检查配置是否正确，以下图片为正确配置。</p>
<sr-blockquote>
<p>2022.3.21 更新：新增影片质量配置。</p>
</sr-blockquote>
<p>重命名配置<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/sonarr_naming.png"></div></p>
<p>根目录配置<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/sonarr_rootfolder.png"></div></p>
<p>下载客户端配置<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/sonarr_download_client.png"></div></p>
<p>刮削配置<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/sonarr_metadata.png"></div></p>
<p>影片质量配置<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/sonarr1.png"></div></p>
<sr-blockquote>
<p>我比较懒，所以只使用一个 <code>Any</code> 的配置。</p>
</sr-blockquote>
<h2 id="sr-toc-30"><a href="#检查-Radarr-配置" title="检查 Radarr 配置" one-link-mark="yes"></a>检查 Radarr 配置</h2><p>逐一检查配置是否正确，以下图片为正确配置。</p>
<sr-blockquote>
<p>2022.3.21 更新：新增影片质量配置。</p>
</sr-blockquote>
<p>重命名配置<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/radarr_naming.png"></div></p>
<p>根目录配置<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/radarr_rootfolder.png"></div></p>
<p>下载客户端配置<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/radarr_download_clients.png"></div></p>
<p>刮削配置<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/radarr_metadata.png"></div></p>
<p>影片质量配置<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/radarr1.png"></div></p>
<sr-blockquote>
<p>我比较懒，所以只使用一个 <code>Any</code> 的配置。</p>
</sr-blockquote>
<h2 id="sr-toc-31"><a href="#检查-Lidarr-配置" title="检查 Lidarr 配置" one-link-mark="yes"></a>检查 Lidarr 配置</h2><p>逐一检查配置是否正确，以下图片为正确配置。</p>
<p>重命名以及根目录配置<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/lidarr_naming.png"></div></p>
<p>下载客户端配置<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/lidarr_download_clients.png"></div></p>
<p>刮削配置<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/lidarr_metadata.png"></div></p>
<p>音乐质量配置<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/lidarr1.png"></div></p>
<sr-blockquote>
<p>我比较懒，所以只使用一个 <code>Any</code> 的配置。</p>
</sr-blockquote>
<h2 id="sr-toc-32"><a href="#检查-Readarr-配置" title="检查 Readarr 配置" one-link-mark="yes"></a>检查 Readarr 配置</h2><p>逐一检查配置是否正确，以下图片为正确配置。</p>
<sr-blockquote>
<p>Readarr 根目录有 Bug，无法命令行配置，请手动配置。</p>
</sr-blockquote>
<p>重命名以及根目录配置<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/readarr_naming.png"></div></p>
<p>仅需填入名称以及路径，其他不用改。<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/readarr_config.png"></div></p>
<p>下载客户端配置<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/readarr_download_clients.png"></div></p>
<p>书籍质量配置<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/readarr1.png"></div></p>
<h2 id="sr-toc-33"><a href="#检查-Bazarr-配置" title="检查 Bazarr 配置" one-link-mark="yes"></a>检查 Bazarr 配置</h2><p>逐一检查配置是否正确，以下图片为正确配置。</p>
<p>字幕语言配置<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/bazarr_chinese.png"></div></p>
<p>默认字幕语言配置<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/bazarr_default.png"></div></p>
<p>下载字幕源<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/bazarr_providers.png"></div></p>
<h2 id="sr-toc-34"><a href="#检查-Chinesesubfinder-配置" title="检查 Chinesesubfinder 配置" one-link-mark="yes"></a>检查 Chinesesubfinder 配置</h2><p>逐一检查配置是否正确，以下图片为正确配置。</p>
<sr-blockquote>
<p>2022.3.19 更新：测试证明 Chinesesubfinder 也需要在 Docker-compose 配置文件中将卷目录挂载为 /data 才能正常工作 (上文已修正)。</p>
</sr-blockquote>
<p>基础配置<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/chinesesubfinder_basic.png"></div></p>
<ol>
<li>电影目录 <code>/data/media/Movies</code></li>
<li>连续剧目录 <code>/data/media/Series</code></li>
</ol>
<p>Emby 以及目录映射配置<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/chinesesubfinder2.png"></div></p>
<h2 id="sr-toc-35"><a href="#Prowlarr-Jackett-配置-indexers" title="Prowlarr / Jackett 配置 indexers" one-link-mark="yes"></a>Prowlarr / Jackett 配置 indexers</h2><sr-blockquote>
<p>Jackett 同理，不再重复写。</p>
</sr-blockquote>
<p>点击 <code>Add indexer</code><br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/prowlarr_index.png"></div><br>选择 <code>Base Url</code> ，点击保存。<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/prowlarr2.png"></div><br>有 <code>Cloudflare DDOS</code> 的要加一个 <code>flaresolverr</code> Tag<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/prowlarr3.png"></div></p>
<h2 id="sr-toc-36"><a href="#检查-qBittorrent-配置" title="检查 qBittorrent 配置" one-link-mark="yes"></a>检查 qBittorrent 配置</h2><p>逐一检查配置是否正确，以下图片为正确配置。</p>
<p>检查分类是否正确显示<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/qbt1.png"></div></p>
<p>检查公开追踪器是否正常获取<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/qbt2.png"></div></p>
<p>检查默认下载位置以及下载模式<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/qbt3.png"></div></p>
<h2 id="sr-toc-37"><a href="#配置-NZBGet-服务器" title="配置 NZBGet 服务器" one-link-mark="yes"></a>配置 NZBGet 服务器</h2><sr-blockquote>
<p>2022.3.21 更新：新增程序缓存及下载队列相关内容。</p>
</sr-blockquote>
<p>输入 Usenet Provider 域名，端口号，用户名以及密码等信息。</p>
<sr-blockquote>
<p>请严格按照你的 Usenet Provider 的指示填写，图片仅供参考</p>
</sr-blockquote>
<sr-blockquote>
<p>如本地无 <code>IPv6</code> 连接，请将 <code>Server1.Ipversion</code> 手动设置为 <code>Ipv4</code> 以避免不必要的延迟。</p>
</sr-blockquote>
<sr-blockquote>
<p>2022.3.22 更新：经测试原版 NZBGet 不支援 <code>TLS1.3</code> 协议。因此我构建了一个支援 <code>TLS1.3</code> 的 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://hub.docker.com/r/johnrosen/nzbget" one-link-mark="yes">Docker image</a>。<code>Cipher</code> 建议设置为 <code>ECDHE-ECDSA-AES128-GCM-SHA256</code> | <code>TLS1.2</code>，<code>TLS_AES_128_GCM_SHA256</code> | <code>TLS1.3</code>。</p>
</sr-blockquote>
<p><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/nzb1.png"></div></p>
<p>检查分类是否正确<br><div class="sr-rd-content-center"><img class="sr-rd-content-img-load" src="https://johnrosen1.com/2022/03/18/media/nzb2.png"></div></p>
<sr-blockquote>
<p>2022.3.24 更新：此数值经测试为单个文件的下载连接数，建议设置为 <code>1</code>。</p>
</sr-blockquote>
<p><del>这里的 <code>UrlConnections</code> 请填写与第一张图中 <code>Connections</code> 一样的数值。</del><br><div class="sr-rd-content-center"><img class="sr-rd-content-img-load" src="https://johnrosen1.com/2022/03/18/media/nzb3.png"></div></p>
<p>检查下载位置是否正确<br><div class="sr-rd-content-center"><img class="sr-rd-content-img-load" src="https://johnrosen1.com/2022/03/18/media/nzb4.png"></div></p>
<p>检查程序缓存以及最大下载队列是否正确<br><div class="sr-rd-content-center"><img class="sr-rd-content-img" src="https://johnrosen1.com/2022/03/18/media/nzbget1.png"></div></p>
<p><code>TLS1.3</code> 测试结果<br><div class="sr-rd-content-center"><img class="sr-rd-content-img-load" src="https://johnrosen1.com/2022/03/18/media/nzbget2.png"></div></p>
<p>开启 <code>DirectUnpack</code> 提升下载效率<br><div class="sr-rd-content-center"><img class="sr-rd-content-img-load" src="https://johnrosen1.com/2022/03/18/media/nzb6.png"></div></p>
<p>检查重试次数<br><div class="sr-rd-content-center"><img class="sr-rd-content-img-load" src="https://johnrosen1.com/2022/03/18/media/nzb7.png"></div></p>
<p>如看见下图，则 Rsshub 已可用。<br><div class="sr-rd-content-center"><img class="sr-rd-content-img-load" src="https://johnrosen1.com/2022/03/18/media/rsshub.png"></div></p>
<h2 id="sr-toc-38"><a href="#配置-XRAY-透明代理加系统代理" title="配置 XRAY 透明代理加系统代理" one-link-mark="yes"></a>配置 XRAY 透明代理加系统代理</h2><p>一个个应用程序配置 http 代理设置太麻烦了（并且不可靠），所以我选择透明代理。</p>
<sr-blockquote>
<p>本文仅代理 22 80 443 563 端口。</p>
</sr-blockquote>
<p>总不能有人看到这里了还不会自己下载 github release 吧？</p>
<figure><pre class="hljs coffeescript">https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/XTLS/Xray-core/releases/</span></pre></figure>

<p>参考 systemd 配置</p>
<figure><pre class="hljs makefile">cat &gt; <span class="hljs-string">"/etc/systemd/system/xray.service"</span> &lt;&lt; <span class="hljs-string">"EOF"</span>
[Unit]
Description=Xray Service
Wants=network-online.target
After=network-online.target nss-lookup.target

[Service]
Type=simple
User=root
ExecStart=/etc/xray/xray -c /etc/xray/config.json
TimeoutStopSec=infinity
LimitNOFILE=65536
Restart=always
RestartSec=3s

[Install]
WantedBy=multi-user.target
EOF</pre></figure>

<p>iptables 配置</p>
<sr-blockquote>
<p>2022.3.22 更新：新增 <code>IPv6</code> 配置。</p>
</sr-blockquote>
<p>安装 ipset</p>
<figure><pre class="hljs nginx"><span class="hljs-attribute">apt</span> install -y ipset</pre></figure>

<p>新增内网 ip 段</p>
<figure><pre class="hljs sql">ipset <span class="hljs-keyword">create</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">hash</span>:net
ipset <span class="hljs-keyword">add</span> <span class="hljs-keyword">private</span> <span class="hljs-number">172.17</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>/<span class="hljs-number">16</span>
ipset <span class="hljs-keyword">add</span> <span class="hljs-keyword">private</span> <span class="hljs-number">172.18</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>/<span class="hljs-number">16</span>
ipset <span class="hljs-keyword">add</span> <span class="hljs-keyword">private</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>/<span class="hljs-number">8</span>
ipset <span class="hljs-keyword">add</span> <span class="hljs-keyword">private</span> <span class="hljs-number">10.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>/<span class="hljs-number">8</span>
ipset <span class="hljs-keyword">add</span> <span class="hljs-keyword">private</span> <span class="hljs-number">172.16</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>/<span class="hljs-number">12</span>
ipset <span class="hljs-keyword">add</span> <span class="hljs-keyword">private</span> <span class="hljs-number">192.168</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>/<span class="hljs-number">16</span>
ipset <span class="hljs-keyword">add</span> <span class="hljs-keyword">private</span> <span class="hljs-number">224.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>/<span class="hljs-number">4</span>
ipset <span class="hljs-keyword">add</span> <span class="hljs-keyword">private</span> <span class="hljs-number">240.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>/<span class="hljs-number">4</span>
ipset <span class="hljs-keyword">list</span></pre></figure>

<p>新增中国大陆 ip 段</p>
<figure><pre class="hljs bash">ipset -N china <span class="hljs-built_in">hash</span>:net
curl -LO https://raw.githubusercontent.com/17mon/china_ip_list/master/china_ip_list.txt
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> $(cat ./china_ip_list.txt ); <span class="hljs-keyword">do</span> ipset -A china <span class="hljs-variable">$i</span>; <span class="hljs-keyword">done</span>
ipset list china</pre></figure>

<p>IPv4 配置</p>
<figure><pre class="hljs sql">iptables -t nat -N XRAY

iptables -t nat -A XRAY -m <span class="hljs-keyword">set</span> –<span class="hljs-keyword">match</span>-<span class="hljs-keyword">set</span> <span class="hljs-keyword">private</span> dst -j <span class="hljs-keyword">RETURN</span>
iptables -t nat -A XRAY -m <span class="hljs-keyword">set</span> –<span class="hljs-keyword">match</span>-<span class="hljs-keyword">set</span> china dst -j <span class="hljs-keyword">RETURN</span>

iptables -t nat -A XRAY -d {vps ip} -j <span class="hljs-keyword">RETURN</span>
iptables -t nat -A XRAY -d <span class="hljs-number">223.5</span><span class="hljs-number">.5</span><span class="hljs-number">.5</span>/<span class="hljs-number">32</span> -j <span class="hljs-keyword">RETURN</span>
iptables -t nat -A XRAY -p tcp -j <span class="hljs-keyword">RETURN</span> -m mark <span class="hljs-comment">--mark 0x80</span>

iptables -t nat -A XRAY -p tcp <span class="hljs-comment">--dport 22 -j REDIRECT --to-ports 12345</span>
iptables -t nat -A XRAY -p tcp <span class="hljs-comment">--dport 80 -j REDIRECT --to-ports 12345</span>
iptables -t nat -A XRAY -p tcp <span class="hljs-comment">--dport 443 -j REDIRECT --to-ports 12345</span>
iptables -t nat -A XRAY -p tcp <span class="hljs-comment">--dport 563 -j REDIRECT --to-ports 12345</span>

iptables -t nat -A XRAY -p tcp -j <span class="hljs-keyword">RETURN</span> 

iptables -t nat -A PREROUTING -p tcp -j XRAY 

iptables -t nat -A <span class="hljs-keyword">OUTPUT</span> -p tcp -j XRAY 
iptables -t nat -N XRAY</pre></figure>

<p>IPv6 配置（可选项）</p>
<figure><pre class="hljs properties"><span class="hljs-attr">iptables</span> <span class="hljs-string">-t nat -I OUTPUT -p tcp --dport 123 -j RETURN</span>
<span class="hljs-attr">ip6tables</span> <span class="hljs-string">-t nat -N XRAY</span>
<span class="hljs-attr">ip6tables</span> <span class="hljs-string">-t nat -A XRAY -p tcp -j RETURN -m mark --mark 0xff</span>
<span class="hljs-attr">ip6tables</span> <span class="hljs-string">-t nat -A XRAY -p tcp --dport 80 -j REDIRECT --to-ports 12345</span>
<span class="hljs-attr">ip6tables</span> <span class="hljs-string">-t nat -A XRAY -p tcp --dport 443 -j REDIRECT --to-ports 12345</span>
<span class="hljs-attr">ip6tables</span> <span class="hljs-string">-t nat -A XRAY -p tcp --dport 563 -j REDIRECT --to-ports 12345</span>
<span class="hljs-attr">ip6tables</span> <span class="hljs-string">-t nat -A XRAY -p tcp -j RETURN </span>
<span class="hljs-attr">ip6tables</span> <span class="hljs-string">-t nat -A PREROUTING -p tcp -j XRAY </span>
<span class="hljs-attr">ip6tables</span> <span class="hljs-string">-t nat -A OUTPUT -p tcp -j XRAY</span></pre></figure>

<p>查看 iptables 情况</p>
<figure><pre class="hljs nginx"><span class="hljs-attribute">iptables</span> -t nat -L -v -n</pre></figure>

<p>持久化 ipset 以及 iptables</p>
<sr-blockquote>
<p>全选 yes</p>
</sr-blockquote>
<figure><pre class="hljs nginx"><span class="hljs-attribute">apt</span> install -y ipset iptables netfilter-persistent ipset-persistent iptables-persistent</pre></figure>

<sr-blockquote>
<p>2022.3.22 更新：新增手动保存 <code>iptables</code> 方法。</p>
</sr-blockquote>
<p>手动保存 <code>iptables</code></p>
<figure><pre class="hljs javascript">iptables-save &gt; <span class="hljs-regexp">/etc/i</span>ptables/rules.v4
ip6tables-save &gt; <span class="hljs-regexp">/etc/i</span>ptables/rules.v6
ipset save &gt; <span class="hljs-regexp">/etc/i</span>ptables/ipsets</pre></figure>

<p>Xray 配置</p>
<figure><pre class="hljs properties"><span class="hljs-attr">mkdir</span> <span class="hljs-string">/etc/xray</span>
<span class="hljs-attr">sudo</span> <span class="hljs-string">nano /etc/xray/config.json</span></pre></figure>

<figure><pre class="hljs json">{
    <span class="hljs-attr">"log"</span>: {
      <span class="hljs-attr">"loglevel"</span>: <span class="hljs-string">"info"</span>
    },
    <span class="hljs-attr">"dns"</span>: {
      <span class="hljs-attr">"servers"</span>: [
        <span class="hljs-string">"https://1.12.12.12/dns-query"</span>,
        <span class="hljs-string">"https://120.53.53.53/dns-query"</span>,
        {
          <span class="hljs-attr">"address"</span>: <span class="hljs-string">"https://1.1.1.1:443/dns-query"</span>,
          <span class="hljs-attr">"domains"</span>: [
            <span class="hljs-string">"geosite:geolocation-!cn"</span> 
          ]
        }
      ],
      <span class="hljs-attr">"tag"</span>: <span class="hljs-string">"dns"</span>
    },
    <span class="hljs-attr">"inbounds"</span>: [
      {
        <span class="hljs-attr">"listen"</span>: <span class="hljs-string">"127.0.0.1"</span>,
        <span class="hljs-attr">"port"</span>: <span class="hljs-number">6666</span>,
        <span class="hljs-attr">"protocol"</span>: <span class="hljs-string">"http"</span>, 
        <span class="hljs-attr">"sniffing"</span>: {
          <span class="hljs-attr">"enabled"</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">"destOverride"</span>: [
            <span class="hljs-string">"http"</span>,
            <span class="hljs-string">"tls"</span>
          ],
          <span class="hljs-attr">"metadataOnly"</span>: <span class="hljs-literal">false</span>
        },
        <span class="hljs-attr">"allocate"</span>: {
          <span class="hljs-attr">"strategy"</span>: <span class="hljs-string">"always"</span>,
          <span class="hljs-attr">"refresh"</span>: <span class="hljs-number">5</span>,
          <span class="hljs-attr">"concurrency"</span>: <span class="hljs-number">3</span>
        }
        },
      {
        <span class="hljs-attr">"listen"</span>: <span class="hljs-string">"127.0.0.1"</span>,
        <span class="hljs-attr">"port"</span>: <span class="hljs-number">1080</span>,
        <span class="hljs-attr">"protocol"</span>: <span class="hljs-string">"socks"</span>, 
        <span class="hljs-attr">"udp"</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">"sniffing"</span>: {
          <span class="hljs-attr">"enabled"</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">"destOverride"</span>: [
            <span class="hljs-string">"http"</span>,
            <span class="hljs-string">"tls"</span>
          ],
          <span class="hljs-attr">"metadataOnly"</span>: <span class="hljs-literal">false</span>
        },
        <span class="hljs-attr">"allocate"</span>: {
          <span class="hljs-attr">"strategy"</span>: <span class="hljs-string">"always"</span>,
          <span class="hljs-attr">"refresh"</span>: <span class="hljs-number">5</span>,
          <span class="hljs-attr">"concurrency"</span>: <span class="hljs-number">3</span>
        }
        },
        {
          <span class="hljs-attr">"port"</span>: <span class="hljs-number">12345</span>,
          <span class="hljs-attr">"protocol"</span>: <span class="hljs-string">"dokodemo-door"</span>, 
          <span class="hljs-attr">"settings"</span>: {
            <span class="hljs-attr">"network"</span>: <span class="hljs-string">"tcp,udp"</span>,
            <span class="hljs-attr">"followRedirect"</span>: <span class="hljs-literal">true</span>
          },
          <span class="hljs-attr">"sniffing"</span>: {
            <span class="hljs-attr">"enabled"</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">"destOverride"</span>: [<span class="hljs-string">"http"</span>, <span class="hljs-string">"tls"</span>]
          },
        <span class="hljs-attr">"allocate"</span>: {
          <span class="hljs-attr">"strategy"</span>: <span class="hljs-string">"always"</span>,
          <span class="hljs-attr">"refresh"</span>: <span class="hljs-number">5</span>,
          <span class="hljs-attr">"concurrency"</span>: <span class="hljs-number">3</span>
          }
        }
      ],
    <span class="hljs-attr">"outbounds"</span>: [
      {
        <span class="hljs-attr">"protocol"</span>: <span class="hljs-string">"vless"</span>, 
        <span class="hljs-attr">"settings"</span>: {
          <span class="hljs-attr">"vnext"</span>: [
            {
              <span class="hljs-attr">"address"</span>: <span class="hljs-string">"1.1.1.1"</span>, 
              <span class="hljs-attr">"port"</span>: <span class="hljs-number">443</span>, 
              <span class="hljs-attr">"users"</span>: [
                {
                  <span class="hljs-attr">"encryption"</span>: <span class="hljs-string">"none"</span>,
                  <span class="hljs-attr">"flow"</span>: <span class="hljs-string">""</span>,
                  <span class="hljs-attr">"id"</span>: <span class="hljs-string">"55547476-bb06-5f2b-bceb-fff49978fd99"</span>, 
                  <span class="hljs-attr">"level"</span>: <span class="hljs-number">0</span>
                }
              ]
            }
          ]
        },
        <span class="hljs-attr">"tag"</span>: <span class="hljs-string">"proxy"</span>, 
        <span class="hljs-attr">"streamSettings"</span>: {
          <span class="hljs-attr">"grpcSettings"</span>: {
            <span class="hljs-attr">"multiMode"</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">"serviceName"</span>: <span class="hljs-string">"grpc"</span> 
          },
          <span class="hljs-attr">"network"</span>: <span class="hljs-string">"grpc"</span>, 
          <span class="hljs-attr">"security"</span>: <span class="hljs-string">"tls"</span>, 
          <span class="hljs-attr">"tlsSettings"</span>: {
              <span class="hljs-attr">"serverName"</span>: <span class="hljs-string">"adminadmin.com"</span>, 
              <span class="hljs-attr">"rejectUnknownSni"</span>: <span class="hljs-literal">false</span>,
              <span class="hljs-attr">"allowInsecure"</span>: <span class="hljs-literal">false</span>,
              <span class="hljs-attr">"alpn"</span>: [<span class="hljs-string">"h2"</span>, <span class="hljs-string">"http/1.1"</span>],
              <span class="hljs-attr">"minVersion"</span>: <span class="hljs-string">"1.2"</span>,
              <span class="hljs-attr">"maxVersion"</span>: <span class="hljs-string">"1.3"</span>,
              <span class="hljs-attr">"cipherSuites"</span>: <span class="hljs-string">"TLS_AES_128_GCM_SHA256:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_256_GCM_SHA384:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES128-SHA:ECDHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA:AES256-SHA"</span>,
              <span class="hljs-attr">"disableSystemRoot"</span>: <span class="hljs-literal">false</span>,
              <span class="hljs-attr">"enableSessionResumption"</span>: <span class="hljs-literal">false</span>
            },
            <span class="hljs-attr">"sockopt"</span>: {
              <span class="hljs-attr">"mark"</span>: <span class="hljs-number">128</span>
            }
          }
        },
        {
          <span class="hljs-attr">"protocol"</span>: <span class="hljs-string">"freedom"</span>, 
          <span class="hljs-attr">"settings"</span>: {},
          <span class="hljs-attr">"tag"</span>: <span class="hljs-string">"direct"</span>,
          <span class="hljs-attr">"streamSettings"</span>: {
            <span class="hljs-attr">"sockopt"</span>: {
              <span class="hljs-attr">"mark"</span>: <span class="hljs-number">128</span>
            }
          }
        },
        {
          <span class="hljs-attr">"tag"</span>: <span class="hljs-string">"blocked"</span>, 
          <span class="hljs-attr">"protocol"</span>: <span class="hljs-string">"blackhole"</span>,
          <span class="hljs-attr">"settings"</span>: {},
          <span class="hljs-attr">"streamSettings"</span>: {
            <span class="hljs-attr">"sockopt"</span>: {
              <span class="hljs-attr">"mark"</span>: <span class="hljs-number">128</span>
            }
          }
        }],
        <span class="hljs-attr">"routing"</span>: {
            <span class="hljs-attr">"domainStrategy"</span>: <span class="hljs-string">"IPIfNonMatch"</span>,
            <span class="hljs-attr">"domainMatcher"</span>: <span class="hljs-string">"mph"</span>,
            <span class="hljs-attr">"rules"</span>: [
                {
                  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"field"</span>,
                  <span class="hljs-attr">"protocol"</span>: [<span class="hljs-string">"bittorrent"</span>], 
                  <span class="hljs-attr">"outboundTag"</span>: <span class="hljs-string">"direct"</span>
                },
                {
                  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"field"</span>,
                  <span class="hljs-attr">"outboundTag"</span>: <span class="hljs-string">"direct"</span>,
                  <span class="hljs-attr">"domain"</span>: [<span class="hljs-string">"regexp:tracker\\w*\\."</span>] 
                },
                {
                  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"field"</span>,
                  <span class="hljs-attr">"domain"</span>: [<span class="hljs-string">"geosite:category-ads"</span>], 
                  <span class="hljs-attr">"outboundTag"</span>: <span class="hljs-string">"blocked"</span>
                },
                {
                  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"field"</span>,
                  <span class="hljs-attr">"domain"</span>: [<span class="hljs-string">"geosite:cn"</span>], 
                  <span class="hljs-attr">"outboundTag"</span>: <span class="hljs-string">"direct"</span>
                },
                {
                  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"field"</span>,
                  <span class="hljs-attr">"ip"</span>: [<span class="hljs-string">"geoip:cn"</span>,<span class="hljs-string">"geoip:private"</span>], 
                  <span class="hljs-attr">"outboundTag"</span>: <span class="hljs-string">"direct"</span>
                }
        ]
    }
  }</pre></figure>

<p>启动 XRAY</p>
<figure><pre class="hljs bash">systemctl <span class="hljs-built_in">enable</span> xray --now</pre></figure>

<p>设置 DNS 域名为 1.1.1.1 以及 1.0.0.1</p>
<figure><pre class="hljs ruby">echo <span class="hljs-string">"nameserver 1.1.1.1"</span> &gt; <span class="hljs-regexp">/etc/resolv</span>.conf
echo <span class="hljs-string">"nameserver 1.0.0.1"</span> <span class="hljs-meta">&gt;&gt; </span>/etc/resolv.conf</pre></figure>

<p>设置系统代理</p>
<figure><pre class="hljs nginx"><span class="hljs-attribute">nano</span> /etc/profile.d/proxy.sh</pre></figure>

<p>写入以下内容</p>
<figure><pre class="hljs bash"><span class="hljs-built_in">export</span> http_proxy=<span class="hljs-string">"http://127.0.0.1:6666/"</span>
<span class="hljs-built_in">export</span> https_proxy=<span class="hljs-string">"http://127.0.0.1:6666/"</span>
<span class="hljs-built_in">export</span> ftp_proxy=<span class="hljs-string">"http://127.0.0.1:6666/"</span></pre></figure>

<figure><pre class="hljs nginx"><span class="hljs-attribute">chmod</span> +x /etc/profile.d/proxy.sh</pre></figure>

<p>测试透明代理是否成功</p>
<sr-blockquote>
<p>见到如下返回则已成功</p>
</sr-blockquote>
<figure><pre class="hljs xml">root@debian:~# curl google.com
<span class="hljs-tag">&lt;<span class="hljs-name">HTML</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">HEAD</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"content-type"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"text/html;charset=utf-8"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">TITLE</span>&gt;</span>301 Moved<span class="hljs-tag">&lt;/<span class="hljs-name">TITLE</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">HEAD</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">BODY</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">H1</span>&gt;</span>301 Moved<span class="hljs-tag">&lt;/<span class="hljs-name">H1</span>&gt;</span>
The document has moved
<span class="hljs-tag">&lt;<span class="hljs-name">A</span> <span class="hljs-attr">HREF</span>=<span class="hljs-string">"http://www.google.com/"</span>&gt;</span>here<span class="hljs-tag">&lt;/<span class="hljs-name">A</span>&gt;</span>.
<span class="hljs-tag">&lt;/<span class="hljs-name">BODY</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">HTML</span>&gt;</span>
root@debian:~#</pre></figure>


<h2 id="sr-toc-39"><a href="#配置-Overture-以实现-DNS-国内分流" title="配置 Overture 以实现 DNS 国内分流" one-link-mark="yes"></a>配置 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/shawn1m/overture" one-link-mark="yes">Overture</a> 以实现 DNS 国内分流</h2><sr-blockquote>
<p>2022.3.31 更新：新增 <code>Redis</code> 配置。</p>
</sr-blockquote>
<p><code>Redis</code> 用于持久化 DNS 缓存，避免重启服务后缓存丢失。</p>
<figure><pre class="hljs php">curl -fsSL https:<span class="hljs-comment">//packages.redis.io/gpg | sudo gpg --dearmor -o /usr/share/keyrings/redis-archive-keyring.gpg</span>
<span class="hljs-keyword">echo</span> <span class="hljs-string">"deb [signed-by=/usr/share/keyrings/redis-archive-keyring.gpg] https://packages.redis.io/deb $(lsb_release -cs) main"</span> | sudo tee /etc/apt/sources.<span class="hljs-keyword">list</span>.d/redis.<span class="hljs-keyword">list</span>
apt-get update
apt-get install redis -y
systemctl enable redis-server

sed -i <span class="hljs-string">"s/appendonly no/appendonly yes/g"</span> /etc/redis/redis.conf

<span class="hljs-keyword">echo</span> <span class="hljs-string">"unixsocket /var/run/redis/redis.sock"</span> &gt;&gt; /etc/redis/redis.conf
<span class="hljs-keyword">echo</span> <span class="hljs-string">"unixsocketperm 770"</span> &gt;&gt; /etc/redis/redis.conf
systemctl restart redis-server</pre></figure>

<p>因为 GFWlist 以及 cniplist 太长，写不下，直接放结果，想看的自己去看 src。</p>
<figure><pre class="hljs cpp">https:<span class="hljs-comment">//raw.githubusercontent.com/johnrosen1/vpstoolbox/master/install/overture.sh</span></pre></figure>

<p>安装 Overture</p>
<figure><pre class="hljs nginx"><span class="hljs-attribute">curl</span> -LO https://raw.githubusercontent.com/johnrosen1/vpstoolbox/master/install/overture.sh
source overture.sh
install_overture</pre></figure>

<p>主配置文件 <code>/etc/overture/config.yml</code></p>
<sr-blockquote>
<p>默认走 <code>Ali DOH</code> ，国外 IP 及域名走 <code>Cloudflare DOH</code>(通过代理) 。</p>
</sr-blockquote>
<figure><pre class="hljs yaml"><span class="hljs-attr">bindAddress:</span> <span class="hljs-string">:53</span>
<span class="hljs-attr">debugHTTPAddress:</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-string">:5555</span>
<span class="hljs-attr">dohEnabled:</span> <span class="hljs-literal">false</span>
<span class="hljs-attr">primaryDNS:</span>
<span class="hljs-attr">  - name:</span> <span class="hljs-string">Ali</span>
<span class="hljs-attr">    address:</span> <span class="hljs-attr">https://223.5.5.5/dns-query</span>
<span class="hljs-attr">    protocol:</span> <span class="hljs-string">https</span>
<span class="hljs-attr">    socks5Address:</span>
<span class="hljs-attr">    timeout:</span> <span class="hljs-number">6</span>
<span class="hljs-attr">    ednsClientSubnet:</span>
<span class="hljs-attr">      policy:</span> <span class="hljs-string">disabled</span>
<span class="hljs-attr">      externalIP:</span>
<span class="hljs-attr">      noCookie:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">alternativeDNS:</span>
<span class="hljs-attr">  - name:</span> <span class="hljs-string">Cloudflare</span>
<span class="hljs-attr">    address:</span> <span class="hljs-attr">https://1.1.1.1/dns-query</span>
<span class="hljs-attr">    protocol:</span> <span class="hljs-string">https</span>
<span class="hljs-attr">    socks5Address:</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-string">:1080</span>
<span class="hljs-attr">    timeout:</span> <span class="hljs-number">60</span>
<span class="hljs-attr">    ednsClientSubnet:</span>
<span class="hljs-attr">      policy:</span> <span class="hljs-string">disabled</span>
<span class="hljs-attr">      externalIP:</span>
<span class="hljs-attr">      noCookie:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">onlyPrimaryDNS:</span> <span class="hljs-literal">false</span>
<span class="hljs-attr">ipv6UseAlternativeDNS:</span> <span class="hljs-literal">false</span>
<span class="hljs-attr">alternativeDNSConcurrent:</span> <span class="hljs-literal">false</span>
<span class="hljs-attr">whenPrimaryDNSAnswerNoneUse:</span> <span class="hljs-string">alternativeDNS</span>
<span class="hljs-attr">ipNetworkFile:</span>
<span class="hljs-attr">  primary:</span> <span class="hljs-string">/etc/overture/china_ip_list.txt</span>
<span class="hljs-attr">  alternative:</span> <span class="hljs-string">/etc/overture/ip_network_alternative_sample</span>
<span class="hljs-attr">domainFile:</span>
<span class="hljs-attr">  primary:</span> <span class="hljs-string">/etc/overture/chnlist.txt</span>
<span class="hljs-attr">  alternative:</span> <span class="hljs-string">/etc/overture/gfw_all_domain.txt</span>
<span class="hljs-attr">  matcher:</span> <span class="hljs-string">/etc/overture/suffix-tree</span>
<span class="hljs-attr">hostsFile:</span>
<span class="hljs-attr">  hostsFile:</span> <span class="hljs-string">/etc/overture/hosts_sample</span>
<span class="hljs-attr">  finder:</span> <span class="hljs-string">/etc/overture/full-map</span>
<span class="hljs-attr">minimumTTL:</span> <span class="hljs-number">0</span>
<span class="hljs-attr">domainTTLFile:</span> <span class="hljs-string">/etc/overture/domain_ttl_sample</span>
<span class="hljs-attr">cacheSize:</span> <span class="hljs-number">10000</span>
<span class="hljs-attr">cacheRedisUrl:</span> <span class="hljs-attr">unix:///var/run/redis/redis.sock</span>
<span class="hljs-attr">cacheRedisConnectionPoolSize:</span> <span class="hljs-number">1000000</span>
<span class="hljs-attr">rejectQType:</span>
<span class="hljs-bullet">  -</span> <span class="hljs-number">255</span></pre></figure>

<p>启用分流</p>
<figure><pre class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">"nameserver 127.0.0.1"</span> &gt; /etc/resolv.conf</pre></figure>

<p>锁定配置，防止重启失效</p>
<figure><pre class="hljs nginx"><span class="hljs-attribute">chattr</span> +i /etc/resolv.conf</pre></figure>

<p>测试是否成功</p>
<sr-blockquote>
<p>出现以下显示则成功</p>
</sr-blockquote>
<figure><pre class="hljs yaml"><span class="hljs-string">root@debian:~#</span> <span class="hljs-string">nslookup</span> <span class="hljs-string">baidu.com</span>
<span class="hljs-attr">Server:</span>		<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>
<span class="hljs-attr">Address:</span>	<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-comment">#53</span>

<span class="hljs-string">Non-authoritative</span> <span class="hljs-attr">answer:</span>
<span class="hljs-attr">Name:</span>	<span class="hljs-string">baidu.com</span>
<span class="hljs-attr">Address:</span> <span class="hljs-number">220.181</span><span class="hljs-number">.38</span><span class="hljs-number">.148</span>
<span class="hljs-attr">Name:</span>	<span class="hljs-string">baidu.com</span>
<span class="hljs-attr">Address:</span> <span class="hljs-number">220.181</span><span class="hljs-number">.38</span><span class="hljs-number">.251</span>

<span class="hljs-string">root@debian:~#</span> <span class="hljs-string">nslookup</span> <span class="hljs-string">google.com</span>
<span class="hljs-attr">Server:</span>		<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>
<span class="hljs-attr">Address:</span>	<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-comment">#53</span>

<span class="hljs-string">Non-authoritative</span> <span class="hljs-attr">answer:</span>
<span class="hljs-attr">Name:</span>	<span class="hljs-string">google.com</span>
<span class="hljs-attr">Address:</span> <span class="hljs-number">172.217</span><span class="hljs-number">.31</span><span class="hljs-number">.174</span>
<span class="hljs-attr">Name:</span>	<span class="hljs-string">google.com</span>
<span class="hljs-attr">Address:</span> <span class="hljs-number">2404</span><span class="hljs-string">:6800:4004:824::200e</span>

<span class="hljs-string">root@debian:~#</span></pre></figure>

<h2 id="sr-toc-40"><a href="#设置-CPU-策略为最佳性能" title="设置 CPU 策略为最佳性能" one-link-mark="yes"></a>设置 CPU 策略为最佳性能</h2><sr-blockquote>
<p>2022.3.23 更新：新增开机全自动化设置内容。</p>
</sr-blockquote>
<figure><pre class="hljs sql">apt <span class="hljs-keyword">install</span> linux-cpupower -y
sudo cpupower frequency-<span class="hljs-keyword">set</span> -g <span class="hljs-keyword">performance</span></pre></figure>

<p>查看当前策略</p>
<figure><pre class="hljs javascript">cat /sys/devices/system/cpu/cpu*<span class="hljs-regexp">/cpufreq/</span>scaling_governor</pre></figure>

<p>设置开机启动</p>
<figure><pre class="hljs makefile">cat &gt; <span class="hljs-string">"/etc/systemd/system/cpupower.service"</span> &lt;&lt; <span class="hljs-string">"EOF"</span>
[Unit]
Description=CPU performance mode
[Service]
Type=oneshot
ExecStart=/usr/bin/cpupower frequency-set -g performance
[Install]
WantedBy=multi-user.target
EOF</pre></figure>

<p>使配置生效</p>
<figure><pre class="hljs bash">systemctl <span class="hljs-built_in">enable</span> cpupower</pre></figure>

<h2 id="sr-toc-41"><a href="#挂载-SSD-并设置写入缓存" title="挂载 SSD 并设置写入缓存" one-link-mark="yes"></a>挂载 SSD 并设置写入缓存</h2><sr-blockquote>
<p>建议使用大容量固态硬盘作为 qBittorrent 以及 NZBGet 的写入缓存。</p>
</sr-blockquote>
<p>新增挂载点</p>
<figure><pre class="hljs nginx"><span class="hljs-attribute">mkdir</span> /ssd</pre></figure>

<p>查看硬件信息，记下 <code>/dev/sda</code> </p>
<figure><pre class="hljs nginx"><span class="hljs-attribute">fdisk</span> -l</pre></figure>

<figure><pre class="hljs properties"><span class="hljs-attr">Disk</span> <span class="hljs-string">/dev/sda: 931.51 GiB, 1000204886016 bytes, 1953525168 sectors</span>
<span class="hljs-attr">Disk</span> <span class="hljs-string">model: ************</span>
<span class="hljs-attr">Units</span>: <span class="hljs-string">sectors of 1 * 512 = 512 bytes</span>
<span class="hljs-attr">Sector</span> <span class="hljs-string">size (logical/physical): 512 bytes / 512 bytes</span>
<span class="hljs-meta">I/O</span> <span class="hljs-string">size (minimum/optimal): 512 bytes / 512 bytes</span></pre></figure>

<p>新增分区</p>
<figure><pre class="hljs nginx"><span class="hljs-attribute">cfdisk</span> /dev/sda</pre></figure>

<p>选择 <code>gpt</code></p>
<figure><pre class="hljs markdown"><span class="hljs-quote">&gt; New -&gt; Primary -&gt; 回车</span>
<span class="hljs-quote">&gt; Write -&gt; yes</span>
<span class="hljs-quote">&gt; Quit</span></pre></figure>

<p>使用 <code>Ext4</code> 文件系统格式化</p>
<figure><pre class="hljs">mkfs.ext4 /dev/sda</pre></figure>

<p>获取硬件 <code>UUID</code></p>
<figure><pre class="hljs">blkid</pre></figure>

<figure><pre class="hljs bash">/dev/sda: UUID=<span class="hljs-string">"8168d321-c245-4846-82dd-a5d79a04550a"</span> BLOCK_SIZE=<span class="hljs-string">"4096"</span> TYPE=<span class="hljs-string">"ext4"</span></pre></figure>

<p>修改 <code>/etc/fstab</code>，新增以下内容</p>
<figure><pre class="hljs ini"><span class="hljs-attr">UUID</span>=<span class="hljs-number">359</span>d90df-f17a-<span class="hljs-number">42</span>f6-ab13-df13bf356de7 /ssd ext4 errors=remount-ro <span class="hljs-number">0</span> <span class="hljs-number">1</span></pre></figure>

<p>挂载 SSD 至挂载点</p>
<figure><pre class="hljs nginx"><span class="hljs-attribute">mount</span> /ssd</pre></figure>

<p>查看挂载是否成功</p>
<figure><pre class="hljs coffeescript">root@debian:~
...
/dev/sda        <span class="hljs-number">916</span>G   <span class="hljs-number">20</span>K  <span class="hljs-number">916</span>G    <span class="hljs-number">1</span>% /ssd 
...</pre></figure>

<p>qBittorrent 配置<br><div class="sr-rd-content-center"><img class="sr-rd-content-img-load" src="https://johnrosen1.com/2022/03/18/media/qbt4.png"></div></p>
<p>NZBGet 配置<br><div class="sr-rd-content-center"><img class="sr-rd-content-img-load" src="https://johnrosen1.com/2022/03/18/media/nzb5.png"></div></p>
<h2 id="sr-toc-42"><a href="#最大化可用空间" title="最大化可用空间" one-link-mark="yes"></a>最大化可用空间</h2><p><code>ext4</code> 默认有 <code>5%</code> 的预留空间，我们的数据盘和缓存盘不需要这种东西，只有系统盘会需要。</p>
<p>取消预留空间</p>
<figure><pre class="hljs nginx"><span class="hljs-attribute">tune2fs</span> -m <span class="hljs-number">0</span> /dev/sda</pre></figure>

<h2 id="sr-toc-43"><a href="#开启-BBR-提升网络质量" title="开启 BBR 提升网络质量" one-link-mark="yes"></a>开启 BBR 提升网络质量</h2><figure><pre class="hljs coffeescript">cat &gt; <span class="hljs-string">'/etc/sysctl.d/99-sysctl.conf'</span> &lt;&lt; EOF
net.ipv4.conf.all.route_localnet=<span class="hljs-number">1</span>
net.ipv4.ip_forward = <span class="hljs-number">1</span>
net.ipv4.conf.all.forwarding = <span class="hljs-number">1</span>
net.ipv4.conf.<span class="hljs-keyword">default</span>.forwarding = <span class="hljs-number">1</span>
net.ipv6.conf.all.forwarding = <span class="hljs-number">1</span>
net.ipv6.conf.<span class="hljs-keyword">default</span>.forwarding = <span class="hljs-number">1</span>
net.ipv6.conf.lo.forwarding = <span class="hljs-number">1</span>
net.ipv6.conf.all.disable_ipv6 = <span class="hljs-number">0</span>
net.ipv6.conf.<span class="hljs-keyword">default</span>.disable_ipv6 = <span class="hljs-number">0</span>
net.ipv6.conf.lo.disable_ipv6 = <span class="hljs-number">0</span>
net.ipv6.conf.all.accept_ra = <span class="hljs-number">2</span>
net.ipv6.conf.<span class="hljs-keyword">default</span>.accept_ra = <span class="hljs-number">2</span>
net.core.netdev_max_backlog = <span class="hljs-number">1000000</span>
net.core.netdev_budget = <span class="hljs-number">50000</span>
net.core.netdev_budget_usecs = <span class="hljs-number">5000</span>
<span class="hljs-comment">#fs.file-max = 51200</span>
net.core.rmem_max = <span class="hljs-number">67108864</span>
net.core.wmem_max = <span class="hljs-number">67108864</span>
net.core.rmem_default = <span class="hljs-number">67108864</span>
net.core.wmem_default = <span class="hljs-number">67108864</span>
net.core.optmem_max = <span class="hljs-number">65536</span>
net.core.somaxconn = <span class="hljs-number">1000000</span>
net.ipv4.icmp_echo_ignore_all = <span class="hljs-number">0</span>
net.ipv4.icmp_echo_ignore_broadcasts = <span class="hljs-number">1</span>
net.ipv4.icmp_ignore_bogus_error_responses = <span class="hljs-number">1</span>
net.ipv4.conf.all.accept_redirects = <span class="hljs-number">0</span>
net.ipv4.conf.<span class="hljs-keyword">default</span>.accept_redirects = <span class="hljs-number">0</span>
net.ipv4.conf.all.secure_redirects = <span class="hljs-number">0</span>
net.ipv4.conf.<span class="hljs-keyword">default</span>.secure_redirects = <span class="hljs-number">0</span>
net.ipv4.conf.all.send_redirects = <span class="hljs-number">0</span>
net.ipv4.conf.<span class="hljs-keyword">default</span>.send_redirects = <span class="hljs-number">0</span>
net.ipv4.conf.<span class="hljs-keyword">default</span>.rp_filter = <span class="hljs-number">1</span>
net.ipv4.conf.all.rp_filter = <span class="hljs-number">1</span>
net.ipv4.tcp_keepalive_time = <span class="hljs-number">600</span>
net.ipv4.tcp_keepalive_intvl = <span class="hljs-number">15</span>
net.ipv4.tcp_keepalive_probes = <span class="hljs-number">2</span>
net.ipv4.tcp_synack_retries = <span class="hljs-number">1</span>
net.ipv4.tcp_syncookies = <span class="hljs-number">1</span>
net.ipv4.tcp_rfc1337 = <span class="hljs-number">1</span>
net.ipv4.tcp_timestamps = <span class="hljs-number">1</span>
net.ipv4.tcp_tw_reuse = <span class="hljs-number">0</span>
net.ipv4.tcp_fin_timeout = <span class="hljs-number">15</span>
net.ipv4.ip_local_port_range = <span class="hljs-number">1024</span> <span class="hljs-number">65535</span>
net.ipv4.tcp_max_tw_buckets = <span class="hljs-number">5000</span>
net.ipv4.tcp_fastopen = <span class="hljs-number">3</span>
net.ipv4.tcp_rmem = <span class="hljs-number">4096</span> <span class="hljs-number">87380</span> <span class="hljs-number">67108864</span>
net.ipv4.tcp_wmem = <span class="hljs-number">4096</span> <span class="hljs-number">65536</span> <span class="hljs-number">67108864</span>
net.ipv4.udp_rmem_min = <span class="hljs-number">8192</span>
net.ipv4.udp_wmem_min = <span class="hljs-number">8192</span>
net.ipv4.tcp_mtu_probing = <span class="hljs-number">1</span>
net.ipv4.tcp_autocorking = <span class="hljs-number">0</span>
net.ipv4.tcp_slow_start_after_idle = <span class="hljs-number">0</span>
net.ipv4.tcp_max_syn_backlog = <span class="hljs-number">819200</span>
net.ipv4.tcp_notsent_lowat = <span class="hljs-number">16384</span>
net.ipv4.tcp_no_metrics_save = <span class="hljs-number">0</span>
net.ipv4.tcp_ecn = <span class="hljs-number">1</span>
net.ipv4.tcp_ecn_fallback = <span class="hljs-number">1</span>
net.ipv4.tcp_frto = <span class="hljs-number">0</span>
net.ipv6.conf.all.accept_redirects = <span class="hljs-number">0</span>
net.ipv6.conf.<span class="hljs-keyword">default</span>.accept_redirects = <span class="hljs-number">0</span>
net.ipv4.neigh.<span class="hljs-keyword">default</span>.gc_thresh3=<span class="hljs-number">8192</span>
net.ipv4.neigh.<span class="hljs-keyword">default</span>.gc_thresh2=<span class="hljs-number">4096</span>
net.ipv4.neigh.<span class="hljs-keyword">default</span>.gc_thresh1=<span class="hljs-number">2048</span>
net.ipv6.neigh.<span class="hljs-keyword">default</span>.gc_thresh3=<span class="hljs-number">8192</span>
net.ipv6.neigh.<span class="hljs-keyword">default</span>.gc_thresh2=<span class="hljs-number">4096</span>
net.ipv6.neigh.<span class="hljs-keyword">default</span>.gc_thresh1=<span class="hljs-number">2048</span>
net.ipv4.tcp_orphan_retries = <span class="hljs-number">1</span>
net.ipv4.tcp_retries2 = <span class="hljs-number">5</span>
vm.swappiness = <span class="hljs-number">0</span>
vm.overcommit_memory = <span class="hljs-number">1</span>
kernel.pid_max=<span class="hljs-number">64000</span>
net.netfilter.nf_conntrack_buckets = <span class="hljs-number">262144</span>
net.netfilter.nf_conntrack_max = <span class="hljs-number">1000000</span>
net.nf_conntrack_max = <span class="hljs-number">1000000</span>
net.netfilter.nf_conntrack_tcp_timeout_fin_wait = <span class="hljs-number">60</span>
net.netfilter.nf_conntrack_tcp_timeout_time_wait = <span class="hljs-number">60</span>
net.netfilter.nf_conntrack_tcp_timeout_close_wait = <span class="hljs-number">30</span>
net.netfilter.nf_conntrack_tcp_timeout_established = <span class="hljs-number">86400</span>
<span class="hljs-comment">## Enable bbr</span>
net.core.default_qdisc = cake
net.ipv4.tcp_congestion_control = bbr
net.ipv4.tcp_low_latency = <span class="hljs-number">1</span>
fs.inotify.max_user_instances=<span class="hljs-number">8192</span>
fs.inotify.max_user_watches=<span class="hljs-number">524288</span>
EOF
sysctl -p</pre></figure>

<h2 id="sr-toc-44"><a href="#修改最大开启文件数上限" title="修改最大开启文件数上限" one-link-mark="yes"></a>修改最大开启文件数上限</h2><sr-blockquote>
<p>主要是为了避免 <code>Too much open files</code> 的错误。</p>
</sr-blockquote>
<figure><pre class="hljs properties"><span class="hljs-attr">cat</span> <span class="hljs-string">&gt; '/etc/systemd/system.conf' &lt;&lt; EOF</span>
<span class="hljs-attr">[Manager]</span>
<span class="hljs-comment">#DefaultTimeoutStartSec=90s</span>
<span class="hljs-attr">DefaultTimeoutStopSec</span>=<span class="hljs-string">3s</span>
<span class="hljs-comment">#DefaultRestartSec=100ms</span>
<span class="hljs-attr">DefaultLimitCORE</span>=<span class="hljs-string">infinity</span>
<span class="hljs-attr">DefaultLimitNOFILE</span>=<span class="hljs-string">infinity</span>
<span class="hljs-attr">EOF</span>
    <span class="hljs-attr">cat</span> <span class="hljs-string">&gt; '/etc/security/limits.conf' &lt;&lt; EOF</span>
<span class="hljs-attr">root</span>     <span class="hljs-string">soft   nofile    1000000</span>
<span class="hljs-attr">root</span>     <span class="hljs-string">hard   nofile    1000000</span>
<span class="hljs-attr">root</span>     <span class="hljs-string">soft   nproc     unlimited</span>
<span class="hljs-attr">root</span>     <span class="hljs-string">hard   nproc     unlimited</span>
<span class="hljs-attr">root</span>     <span class="hljs-string">soft   core      unlimited</span>
<span class="hljs-attr">root</span>     <span class="hljs-string">hard   core      unlimited</span>
<span class="hljs-attr">root</span>     <span class="hljs-string">hard   memlock   unlimited</span>
<span class="hljs-attr">root</span>     <span class="hljs-string">soft   memlock   unlimited</span>

<span class="hljs-meta">*</span>     <span class="hljs-string">soft   nofile    1000000</span>
<span class="hljs-meta">*</span>     <span class="hljs-string">hard   nofile    1000000</span>
<span class="hljs-meta">*</span>     <span class="hljs-string">soft   nproc     unlimited</span>
<span class="hljs-meta">*</span>     <span class="hljs-string">hard   nproc     unlimited</span>
<span class="hljs-meta">*</span>     <span class="hljs-string">soft   core      unlimited</span>
<span class="hljs-meta">*</span>     <span class="hljs-string">hard   core      unlimited</span>
<span class="hljs-meta">*</span>     <span class="hljs-string">hard   memlock   unlimited</span>
<span class="hljs-meta">*</span>     <span class="hljs-string">soft   memlock   unlimited</span>
<span class="hljs-attr">EOF</span>
<span class="hljs-attr">sed</span> <span class="hljs-string">-i '/ulimit -SHn/d' /etc/profile</span>
<span class="hljs-attr">echo</span> <span class="hljs-string">"ulimit -SHn 1000000" &gt;&gt; /etc/profile</span>
<span class="hljs-attr">echo</span> <span class="hljs-string">"session required pam_limits.so" &gt;&gt; /etc/pam.d/common-session</span>
<span class="hljs-attr">systemctl</span> <span class="hljs-string">daemon-reload</span></pre></figure>

<sr-blockquote>
<p>如果不放心，可以重启一次 <code>reboot</code> 就生效了。</p>
</sr-blockquote>
<h2 id="sr-toc-45"><a href="#绑定-DHCP-内网地址" title="绑定 DHCP 内网地址" one-link-mark="yes"></a>绑定 DHCP 内网地址</h2><sr-blockquote>
<p>不想手动设置 <code>/etc/network/interfaces</code> ? TP-link IP 与 mac 绑定你值得拥有。</p>
</sr-blockquote>
<p><div class="sr-rd-content-center"><img class="sr-rd-content-img-load" src="https://johnrosen1.com/2022/03/18/media/mac.png"></div></p>
<h2 id="sr-toc-46"><a href="#开启-Upnp-DMZ" title="开启 Upnp/DMZ" one-link-mark="yes"></a>开启 Upnp/DMZ</h2><sr-blockquote>
<p>开启 Upnp/DMZ 可以极大地加速 BT/PT 下载上传 (前提是你有公网 IP)。</p>
</sr-blockquote>
<p><div class="sr-rd-content-center"><img class="sr-rd-content-img-load" src="https://johnrosen1.com/2022/03/18/media/dmz.png"></div></p>
<p>DMZ 主机 IP 地址请填你的 NAS 内网地址。</p>
<h2 id="sr-toc-47"><a href="#开启-Emby-硬解" title="开启 Emby 硬解" one-link-mark="yes"></a>开启 Emby 硬解</h2><sr-blockquote>
<p>Emby 硬解需要 Emby 会员订阅。</p>
</sr-blockquote>
<p><div class="sr-rd-content-center"><img class="sr-rd-content-img-load" src="https://johnrosen1.com/2022/03/18/media/emby_tran.png"></div></p>
<p>我的机器是 Intel 核显，所以把 <code>QuickSync Intel</code> 设为首选。</p>
<h2 id="sr-toc-48"><a href="#安装可能缺少的固件" title="安装可能缺少的固件" one-link-mark="yes"></a>安装可能缺少的固件</h2><sr-blockquote>
<p>此配置仅适用于本地 NAS。</p>
</sr-blockquote>
<figure><pre class="hljs cs">apt-<span class="hljs-keyword">get</span> install firmware-linux -y</pre></figure>

<h2 id="sr-toc-49"><a href="#最大化网卡RX-TX缓冲" title="最大化网卡RX/TX缓冲" one-link-mark="yes"></a>最大化网卡 RX/TX 缓冲</h2><sr-blockquote>
<p>此配置仅适用于本地 NAS，建议设置为网卡支持的最大值。</p>
</sr-blockquote>
<figure><pre class="hljs properties"><span class="hljs-attr">apt</span> <span class="hljs-string">install ethtool -y</span>
<span class="hljs-attr">ip</span> <span class="hljs-string">a</span>
<span class="hljs-attr">ethtool</span> <span class="hljs-string">-g ethX</span>
<span class="hljs-attr">ethtool</span> <span class="hljs-string">-G ethX rx 最大值 tx 最大值</span></pre></figure>

<p>这个设置重启后会失效，建议使用 rc.local 等解决方案实现开机自动设置。</p>
<h2 id="sr-toc-50"><a href="#推荐的安卓客户端" title="推荐的安卓客户端" one-link-mark="yes"></a>推荐的安卓客户端</h2><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://play.google.com/store/apps/details?id=com.kevinforeman.nzb360" one-link-mark="yes">Nzb360 Pro</a></p>
<p>没有中文但功能强大。</p>
<sr-blockquote>
<p>The best usenet / torrent manager on Android.</p>
</sr-blockquote>
<h2 id="sr-toc-51"><a href="#结语" title="结语" one-link-mark="yes"></a>结语</h2><p>这个项目花费了我一周的时间才搞定，但是最终的结果确实是值得的。我终于不再需要忍受 Netflix 有限的片源以及 IP 限制啦！</p>
<h2 id="sr-toc-52"><a href="#参考资料" title="参考资料" one-link-mark="yes"></a>参考资料</h2><ol>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://leishi.io/blog/posts/2021-12/home-nas-media-center/#4-overserrombi-radarrsonarr%E7%9A%84%E5%89%8D%E7%AB%AF" one-link-mark="yes">利用 NAS 实现全自动观影追剧</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://blog.17lai.site/posts/9912bd5d/" one-link-mark="yes">使用 jeckett,sonarr,iyuu,qt,emby 打造全自动追剧流程</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://sleele.com/2020/03/16/%e9%ab%98%e9%98%b6%e6%95%99%e7%a8%8b-%e8%bf%bd%e5%89%a7%e5%85%a8%e6%b5%81%e7%a8%8b%e8%87%aa%e5%8a%a8%e5%8c%96/" one-link-mark="yes">高阶教程 - 追剧全流程自动化</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://trash-guides.info/Hardlinks/How-to-setup-for/Docker/" one-link-mark="yes">硬链接教程</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.bilibili.com/read/cv10864347" one-link-mark="yes">使用 Sonarr+Jackett+qb/tr+emby 实现（基本）全自动追新番</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://assrt.net/" one-link-mark="yes">伪射手网</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://post.smzdm.com/p/a27dzeqp/" one-link-mark="yes">用豆瓣挑电影 - 你的最佳私人影音助理，订阅追剧满足你的所有幻想</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://zhongce.sina.com.cn/article/view/96391/" one-link-mark="yes">JELLYFIN EMBY PLEX 如何打造完美动漫番剧库！</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://xtls.github.io/document/level-2/transparent_proxy/transparent_proxy.html#%E4%BB%80%E4%B9%88%E6%98%AF%E9%80%8F%E6%98%8E%E4%BB%A3%E7%90%86" one-link-mark="yes">什么是透明代理</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.silencetime.com/archives/271/" one-link-mark="yes">Openwrt homelede 3865U 开启 emby 4K 硬解</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.newsgroup.ninja/en" one-link-mark="yes">NEWSGROUP NINJA</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://docs.rsshub.app/" one-link-mark="yes">RSSHUB 文档</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://controlnet.space/2021/07/31/%E7%AC%94%E8%AE%B0/install-video-player/" one-link-mark="yes">Windows 最佳动画观看环境配置指南 (MPC-HC, madvr, SVP, Anime4K)</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://feather-purple-bdd.notion.site/b6c925bf2a9e44548bd4bdeea7d06946" one-link-mark="yes">最佳私人影音实践教程</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://rxrw.me/tech/pt-4/" one-link-mark="yes">从 pt 到家庭媒体中心全攻略（补充）（用 Emby 看电视直播，居然比用电视看电视还爽）</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://moecm.com/something-about-v2ray-with-tproxy/" one-link-mark="yes">第一篇万字长文：围绕透明代理的又一次探究</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://nzbget.net/performance-tips" one-link-mark="yes">NZBGet 文档</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/Sonarr/Sonarr" one-link-mark="yes">Sonarr Github</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/Radarr/Radarr" one-link-mark="yes">Radarr Github</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/Lidarr/Lidarr" one-link-mark="yes">Lidarr Github</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/Readarr/Readarr" one-link-mark="yes">Readarr Github</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/Jackett/Jackett" one-link-mark="yes">Jackett Github</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/Prowlarr/Prowlarr" one-link-mark="yes">Prowlarr Github</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/qbittorrent/qBittorrent" one-link-mark="yes">qBittorrent Github</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/nzbget/nzbget" one-link-mark="yes">NZBGet Github</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/morpheus65535/bazarr" one-link-mark="yes">Bazarr Github</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/allanpk716/ChineseSubFinder" one-link-mark="yes">Chinesesubfiner Github</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/ronggang/PT-Plugin-Plus" one-link-mark="yes">PT 助手 Plus</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://blog.csdn.net/sunny_98_98/article/details/122632895" one-link-mark="yes">Linux 网络性能参数</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://pockies.github.io/2020/01/09/av-data-capture-jellyfin-kodi/" one-link-mark="yes">利用 AV Data Capture+Jellyfin+Kodi 打造更优雅的本地 AV（毛片）+ 普通影片媒体库</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/JavScraper/Emby.Plugins.JavScraper" one-link-mark="yes">Emby/Jellyfin 的一个日本电影刮削器插件</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.thegeekdiary.com/how-to-persistently-set-nr_requests-using-udev-rules/" one-link-mark="yes">How to persistently set nr_requests using UDEV rules</a></li>
</ol>

    </div>

    
    
    
        




      
    
  </article>
  
  
  



          </div>
          
    

<!--<script type="text/javascript">
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>-->

        </div>
          
  
  

  
  


      </div><p></p></sr-rd-content>
                            <toc-bg><toc style="width: initial;overflow: auto!important;"class="simpread-font simpread-theme-root" data-reactid=".1"><outline class="toc-level-h2" data-reactid=".1.0" style="width: 165px;"><active data-reactid=".1.0.0"></active><a class="toc-outline-theme-github" href="#sr-toc-0" data-reactid=".1.0.1"><span data-reactid=".1.0.1.0">TL;DR</span></a></outline><outline class="toc-level-h2" data-reactid=".1.1" style="width: 165px;"><active data-reactid=".1.1.0" ></active><pangu> </pangu><a class="toc-outline-theme-github" href="#sr-toc-1" data-reactid=".1.1.1"><span data-reactid=".1.1.1.0">硬件需求</span></a></outline><outline class="toc-level-h2" data-reactid=".1.2" style="width: 165px;"><active data-reactid=".1.2.0"></active><a class="toc-outline-theme-github" href="#sr-toc-2" data-reactid=".1.2.1"><span data-reactid=".1.2.1.0">巧妇难为无米之炊</span></a></outline><outline class="toc-level-h2" data-reactid=".1.3" style="width: 165px;"><active data-reactid=".1.3.0"></active><a class="toc-outline-theme-github" href="#sr-toc-3" data-reactid=".1.3.1"><span data-reactid=".1.3.1.0">化零为整</span></a></outline><outline class="toc-level-h2" data-reactid=".1.4" style="width: 165px;"><active data-reactid=".1.4.0"></active><a class="toc-outline-theme-github" href="#sr-toc-4" data-reactid=".1.4.1"><span data-reactid=".1.4.1.0">化整为零</span></a></outline><outline class="toc-level-h2" data-reactid=".1.5" style="width: 165px;"><active data-reactid=".1.5.0"></active><a class="toc-outline-theme-github" href="#sr-toc-5" data-reactid=".1.5.1"><span data-reactid=".1.5.1.0">化零为整</span></a></outline><outline class="toc-level-h2" data-reactid=".1.6" style="width: 165px;"><active data-reactid=".1.6.0"></active><a class="toc-outline-theme-github" href="#sr-toc-6" data-reactid=".1.6.1"><span data-reactid=".1.6.1.0">无中生有</span></a></outline><outline class="toc-level-h2" data-reactid=".1.7" style="width: 165px;"><active data-reactid=".1.7.0"></active><a class="toc-outline-theme-github" href="#sr-toc-7" data-reactid=".1.7.1"><span data-reactid=".1.7.1.0">锦上添花</span></a></outline><outline class="toc-level-h2" data-reactid=".1.8" style="width: 165px;"><active data-reactid=".1.8.0"></active><a class="toc-outline-theme-github" href="#sr-toc-8" data-reactid=".1.8.1"><span data-reactid=".1.8.1.0">放飞自我</span></a></outline><outline class="toc-level-h2" data-reactid=".1.9" style="width: 165px;"><active data-reactid=".1.9.0"></active><a class="toc-outline-theme-github" href="#sr-toc-9" data-reactid=".1.9.1"><span data-reactid=".1.9.1.0">流程总结</span></a></outline><outline class="toc-level-h2" data-reactid=".1.a" style="width: 165px;"><active data-reactid=".1.a.0"></active><a class="toc-outline-theme-github" href="#sr-toc-10" data-reactid=".1.a.1"><span data-reactid=".1.a.1.0">千里之行始于足下</span></a></outline><outline class="toc-level-h2" data-reactid=".1.b" style="width: 165px;"><active data-reactid=".1.b.0"></active><a class="toc-outline-theme-github" href="#sr-toc-11" data-reactid=".1.b.1"><span data-reactid=".1.b.1.0">文件架构</span></a></outline><outline class="toc-level-h2" data-reactid=".1.c" style="width: 165px;"><active data-reactid=".1.c.0"></active><pangu> </pangu><a class="toc-outline-theme-github" href="#sr-toc-12" data-reactid=".1.c.1"><span data-reactid=".1.c.1.0">Nginx</span></a></outline><outline class="toc-level-h2" data-reactid=".1.d" style="width: 165px;"><active data-reactid=".1.d.0"></active><a class="toc-outline-theme-github" href="#sr-toc-13" data-reactid=".1.d.1"><span data-reactid=".1.d.1.0">Docker</span></a></outline><outline class="toc-level-h2" data-reactid=".1.e" style="width: 165px;"><active data-reactid=".1.e.0"></active><a class="toc-outline-theme-github" href="#sr-toc-14" data-reactid=".1.e.1"><span data-reactid=".1.e.1.0">Emby</span></a></outline><outline class="toc-level-h2" data-reactid=".1.f" style="width: 165px;"><active data-reactid=".1.f.0"></active><a class="toc-outline-theme-github" href="#sr-toc-15" data-reactid=".1.f.1"><span data-reactid=".1.f.1.0">qBittorrent</span></a></outline><outline class="toc-level-h2" data-reactid=".1.g" style="width: 165px;"><active data-reactid=".1.g.0"></active><a class="toc-outline-theme-github" href="#sr-toc-16" data-reactid=".1.g.1"><span data-reactid=".1.g.1.0">Docker-compose 配置文件及命令行配置</span></a></outline><outline class="toc-level-h2" data-reactid=".1.h" style="width: 165px;"><active data-reactid=".1.h.0"></active><a class="toc-outline-theme-github" href="#sr-toc-17" data-reactid=".1.h.1"><span data-reactid=".1.h.1.0">配置 NZBGet</span></a></outline><outline class="toc-level-h2" data-reactid=".1.i" style="width: 165px;"><active data-reactid=".1.i.0"></active><pangu> </pangu><a class="toc-outline-theme-github" href="#sr-toc-18" data-reactid=".1.i.1"><span data-reactid=".1.i.1.0">配置 Sonarr</span></a></outline><outline class="toc-level-h2" data-reactid=".1.j" style="width: 165px;"><active data-reactid=".1.j.0"></active><pangu> </pangu><a class="toc-outline-theme-github" href="#sr-toc-19" data-reactid=".1.j.1"><span data-reactid=".1.j.1.0">配置 Radarr</span></a></outline><outline class="toc-level-h2" data-reactid=".1.k" style="width: 165px;"><active data-reactid=".1.k.0"></active><pangu> </pangu><a class="toc-outline-theme-github" href="#sr-toc-20" data-reactid=".1.k.1"><span data-reactid=".1.k.1.0">配置 Lidarr</span></a></outline><outline class="toc-level-h2" data-reactid=".1.l" style="width: 165px;"><active data-reactid=".1.l.0"></active><pangu> </pangu><a class="toc-outline-theme-github" href="#sr-toc-21" data-reactid=".1.l.1"><span data-reactid=".1.l.1.0">配置 Readarr</span></a></outline><outline class="toc-level-h2" data-reactid=".1.m" style="width: 165px;"><active data-reactid=".1.m.0"></active><pangu> </pangu><a class="toc-outline-theme-github" href="#sr-toc-22" data-reactid=".1.m.1"><span data-reactid=".1.m.1.0">配置 prowlarr</span></a></outline><outline class="toc-level-h2" data-reactid=".1.n" style="width: 165px;"><active data-reactid=".1.n.0"></active><pangu> </pangu><a class="toc-outline-theme-github" href="#sr-toc-23" data-reactid=".1.n.1"><span data-reactid=".1.n.1.0">配置 Jackett</span></a></outline><outline class="toc-level-h2" data-reactid=".1.o" style="width: 165px;"><active data-reactid=".1.o.0"></active><pangu> </pangu><a class="toc-outline-theme-github" href="#sr-toc-24" data-reactid=".1.o.1"><span data-reactid=".1.o.1.0">配置 Bazarr</span></a></outline><outline class="toc-level-h2" data-reactid=".1.p" style="width: 165px;"><active data-reactid=".1.p.0"></active><pangu> </pangu><a class="toc-outline-theme-github" href="#sr-toc-25" data-reactid=".1.p.1"><span data-reactid=".1.p.1.0">配置 Ombi</span></a></outline><outline class="toc-level-h2" data-reactid=".1.q" style="width: 165px;"><active data-reactid=".1.q.0"></active><pangu> </pangu><a class="toc-outline-theme-github" href="#sr-toc-26" data-reactid=".1.q.1"><span data-reactid=".1.q.1.0">启动系统</span></a></outline><outline class="toc-level-h2" data-reactid=".1.r" style="width: 165px;"><active data-reactid=".1.r.0"></active><a class="toc-outline-theme-github" href="#sr-toc-27" data-reactid=".1.r.1"><span data-reactid=".1.r.1.0">配置 Emby</span></a></outline><outline class="toc-level-h2" data-reactid=".1.s" style="width: 165px;"><active data-reactid=".1.s.0"></active><pangu> </pangu><a class="toc-outline-theme-github" href="#sr-toc-28" data-reactid=".1.s.1"><span data-reactid=".1.s.1.0">配置 Ombi</span></a></outline><outline class="toc-level-h2" data-reactid=".1.t" style="width: 165px;"><active data-reactid=".1.t.0"></active><pangu> </pangu><a class="toc-outline-theme-github" href="#sr-toc-29" data-reactid=".1.t.1"><span data-reactid=".1.t.1.0">检查 Sonarr 配置</span></a></outline><outline class="toc-level-h2" data-reactid=".1.u" style="width: 165px;"><active data-reactid=".1.u.0"></active><a class="toc-outline-theme-github" href="#sr-toc-30" data-reactid=".1.u.1"><span data-reactid=".1.u.1.0">检查 Radarr 配置</span></a></outline><outline class="toc-level-h2" data-reactid=".1.v" style="width: 165px;"><active data-reactid=".1.v.0"></active><a class="toc-outline-theme-github" href="#sr-toc-31" data-reactid=".1.v.1"><span data-reactid=".1.v.1.0">检查 Lidarr 配置</span></a></outline><outline class="toc-level-h2" data-reactid=".1.w" style="width: 165px;"><active data-reactid=".1.w.0"></active><a class="toc-outline-theme-github" href="#sr-toc-32" data-reactid=".1.w.1"><span data-reactid=".1.w.1.0">检查 Readarr 配置</span></a></outline><outline class="toc-level-h2" data-reactid=".1.x" style="width: 165px;"><active data-reactid=".1.x.0"></active><a class="toc-outline-theme-github" href="#sr-toc-33" data-reactid=".1.x.1"><span data-reactid=".1.x.1.0">检查 Bazarr 配置</span></a></outline><outline class="toc-level-h2" data-reactid=".1.y" style="width: 165px;"><active data-reactid=".1.y.0"></active><a class="toc-outline-theme-github" href="#sr-toc-34" data-reactid=".1.y.1"><span data-reactid=".1.y.1.0">检查 Chinesesubfinder 配置</span></a></outline><outline class="toc-level-h2" data-reactid=".1.z" style="width: 165px;"><active data-reactid=".1.z.0"></active><pangu> </pangu><a class="toc-outline-theme-github" href="#sr-toc-35" data-reactid=".1.z.1"><span data-reactid=".1.z.1.0">Prowlarr / Jackett 配置 indexers</span></a></outline><outline class="toc-level-h2" data-reactid=".1.10" style="width: 165px;"><active data-reactid=".1.10.0"></active><pangu> </pangu><a class="toc-outline-theme-github" href="#sr-toc-36" data-reactid=".1.10.1"><span data-reactid=".1.10.1.0">检查 qBittorrent 配置</span></a></outline><outline class="toc-level-h2" data-reactid=".1.11" style="width: 165px;"><active data-reactid=".1.11.0"></active><a class="toc-outline-theme-github" href="#sr-toc-37" data-reactid=".1.11.1"><span data-reactid=".1.11.1.0">配置 NZBGet 服务器</span></a></outline><outline class="toc-level-h2" data-reactid=".1.12" style="width: 165px;"><active data-reactid=".1.12.0"></active><a class="toc-outline-theme-github" href="#sr-toc-38" data-reactid=".1.12.1"><span data-reactid=".1.12.1.0">配置 XRAY 透明代理加系统代理</span></a></outline><outline class="toc-level-h2" data-reactid=".1.13" style="width: 165px;"><active data-reactid=".1.13.0"></active><a class="toc-outline-theme-github" href="#sr-toc-39" data-reactid=".1.13.1"><span data-reactid=".1.13.1.0">配置 Overture 以实现 DNS 国内分流</span></a></outline><outline class="toc-level-h2" data-reactid=".1.14" style="width: 165px;"><active data-reactid=".1.14.0"></active><a class="toc-outline-theme-github" href="#sr-toc-40" data-reactid=".1.14.1"><span data-reactid=".1.14.1.0">设置 CPU 策略为最佳性能</span></a></outline><outline class="toc-level-h2" data-reactid=".1.15" style="width: 165px;"><active data-reactid=".1.15.0"></active><a class="toc-outline-theme-github" href="#sr-toc-41" data-reactid=".1.15.1"><span data-reactid=".1.15.1.0">挂载 SSD 并设置写入缓存</span></a></outline><outline class="toc-level-h2" data-reactid=".1.16" style="width: 165px;"><active data-reactid=".1.16.0"></active><a class="toc-outline-theme-github" href="#sr-toc-42" data-reactid=".1.16.1"><span data-reactid=".1.16.1.0">最大化可用空间</span></a></outline><outline class="toc-level-h2" data-reactid=".1.17" style="width: 165px;"><active data-reactid=".1.17.0"></active><a class="toc-outline-theme-github" href="#sr-toc-43" data-reactid=".1.17.1"><span data-reactid=".1.17.1.0">开启 BBR 提升网络质量</span></a></outline><outline class="toc-level-h2" data-reactid=".1.18" style="width: 165px;"><active data-reactid=".1.18.0"></active><a class="toc-outline-theme-github" href="#sr-toc-44" data-reactid=".1.18.1"><span data-reactid=".1.18.1.0">修改最大开启文件数上限</span></a></outline><outline class="toc-level-h2" data-reactid=".1.19" style="width: 165px;"><active data-reactid=".1.19.0"></active><a class="toc-outline-theme-github" href="#sr-toc-45" data-reactid=".1.19.1"><span data-reactid=".1.19.1.0">绑定 DHCP 内网地址</span></a></outline><outline class="toc-level-h2" data-reactid=".1.1a" style="width: 165px;"><active data-reactid=".1.1a.0"></active><a class="toc-outline-theme-github" href="#sr-toc-46" data-reactid=".1.1a.1"><span data-reactid=".1.1a.1.0">开启 Upnp/DMZ</span></a></outline><outline class="toc-level-h2" data-reactid=".1.1b" style="width: 165px;"><active data-reactid=".1.1b.0"></active><pangu> </pangu><a class="toc-outline-theme-github" href="#sr-toc-47" data-reactid=".1.1b.1"><span data-reactid=".1.1b.1.0">开启 Emby 硬解</span></a></outline><outline class="toc-level-h2" data-reactid=".1.1c" style="width: 165px;"><active data-reactid=".1.1c.0"></active><a class="toc-outline-theme-github" href="#sr-toc-48" data-reactid=".1.1c.1"><span data-reactid=".1.1c.1.0">安装可能缺少的固件</span></a></outline><outline class="toc-level-h2" data-reactid=".1.1d" style="width: 165px;"><active data-reactid=".1.1d.0"></active><a class="toc-outline-theme-github" href="#sr-toc-49" data-reactid=".1.1d.1"><span data-reactid=".1.1d.1.0">最大化网卡 RX/TX 缓冲</span></a></outline><outline class="toc-level-h2" data-reactid=".1.1e" style="width: 165px;"><active data-reactid=".1.1e.0"></active><a class="toc-outline-theme-github" href="#sr-toc-50" data-reactid=".1.1e.1"><span data-reactid=".1.1e.1.0">推荐的安卓客户端</span></a></outline><outline class="toc-level-h2" data-reactid=".1.1f" style="width: 165px;"><active data-reactid=".1.1f.0"></active><a class="toc-outline-theme-github" href="#sr-toc-51" data-reactid=".1.1f.1"><span data-reactid=".1.1f.1.0">结语</span></a></outline><outline class="toc-level-h2" data-reactid=".1.1g" style="width: 165px;"><active data-reactid=".1.1g.0"></active><a class="toc-outline-theme-github" href="#sr-toc-52" data-reactid=".1.1g.1"><span data-reactid=".1.1g.1.0">参考资料</span></a></outline></toc></toc-bg>
                            <sr-rd-footer>
                                <sr-rd-footer-group>
                                    <sr-rd-footer-line></sr-rd-footer-line>
                                    <sr-rd-footer-text>全文完</sr-rd-footer-text>
                                    <sr-rd-footer-line></sr-rd-footer-line>
                                </sr-rd-footer-group>
                                <sr-rd-footer-copywrite>
                                    <div>本文由 <a href="http://ksria.com/simpread" target="_blank">简悦 SimpRead</a> 转码，用以提升阅读体验，<a href="https://johnrosen1.com/2022/03/18/media/" target="_blank">原文地址 </a></div>
                                </sr-rd-footer-copywrite>
                            </sr-rd-footer>
                        </sr-read>
                    </body>
                </html>